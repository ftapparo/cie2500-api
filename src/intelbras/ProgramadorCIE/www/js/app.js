var db = {}; var originalDb = {}; var projectDb = {}; var originalProjectDb = {}; var lastSentDb = {}; var dbTransitory = {}; var changeController = { originalConfig: undefined, editedConfig: undefined, saveFn: undefined, viewName: "" }; try { if (!localStorage.language) { var path = require("path"); var fs = require("fs"); localStorage.language = fs.readFileSync(path.join(path.dirname(process.execPath), "lang"), "utf-8") } } catch (e) {//console.log(e)}(function(){"use strict";angular.module("app",["ngMaterial","ngSanitize","ngMessages","ui.router","md.data.table","ngWebsocket","angular.filter","dndLists","darthwade.dwLoading","ngMask","ngVis","pascalprecht.translate"]).run(["$location","$fileService","$rootScope","$webSocket","$windowService",function($location,$fileService,$rootScope,$webSocket,$windowService){$location.path("/app/file");$webSocket.connect();$windowService.start()}]).config(["$urlRouterProvider","$mdThemingProvider","$compileProvider","$translateProvider","$i18n",function($urlRouterProvider,$mdThemingProvider,$compileProvider,$translateProvider,$i18n){$compileProvider.imgSrcSanitizationWhitelist(/^\s*((https?|ftp|file|blob|chrome-extension):|data:image\/)/);$compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|file:chrome-extension):/);$urlRouterProvider.otherwise("/app");$mdThemingProvider.definePalette("intelbrasPrimary",{50:"2c3d47",100:"2c3d47",200:"2c3d47",300:"2c3d47",400:"2c3d47",500:"2c3d47",600:"2c3d47",700:"2c3d47",800:"2c3d47",900:"2c3d47",A100:"2c3d47",A200:"2c3d47",A400:"2c3d47",A700:"2c3d47",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:undefined});$mdThemingProvider.definePalette("intelbrasAccent",{50:"e9e9e9",100:"e9e9e9",200:"e9e9e9",300:"e9e9e9",400:"e9e9e9",500:"37af2c",600:"37af2c",700:"37af2c",800:"37af2c",900:"37af2c",A100:"e9e9e9",A200:"37af2c",A400:"37af2c",A700:"37af2c",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:undefined});$mdThemingProvider.theme("default").primaryPalette("intelbrasPrimary").accentPalette("intelbrasAccent");$translateProvider.translations("es",$i18n["es"]);$translateProvider.translations("pt_br",$i18n["pt_br"]);$translateProvider.preferredLanguage(localStorage.language)}])})();(function(){"use strict";angular.module("app").config(["$stateProvider",function($stateProvider){$stateProvider.state("app",{url:"/app",abstract:true}).state("app.home",{url:"/home",cache:false,views:{rootContent:{templateUrl:"home/home.html",controller:"homeController"}}}).state("app.loop",{url:"/loop",cache:false,views:{rootContent:{templateUrl:"loop/loop.html",controller:"loopController"}}}).state("app.zone",{url:"/zone",cache:false,views:{rootContent:{templateUrl:"zone/zone.html",controller:"zoneController"}}}).state("app.rule",{url:"/rule",cache:false,views:{rootContent:{templateUrl:"rule/rule.html",controller:"ruleController"}}}).state("app.file",{url:"/file",cache:false,views:{rootContent:{templateUrl:"file/file.html",controller:"fileController"}}}).state("app.file.print",{url:"/print",cache:false,views:{printContent:{templateUrl:"print/print.html",controller:"printController"}}}).state("app.system",{url:"/system/:firmware",cache:false,views:{rootContent:{templateUrl:"system/system.html",controller:"systemController"}}}).state("app.interconnection",{url:"/project",cache:false,views:{rootContent:{templateUrl:"project/project.html",controller:"projectController"}}}).state("app.tools",{url:"/tools",cache:false,views:{rootContent:{templateUrl:"tools/tools.html",controller:"toolsController"}}})}])})();angular.module("app").run(["$templateCache",function($templateCache){$templateCache.put("file/file.html",'<md-toolbar class="toolbar md-accent">\r\n  <div flex layout-align="space-between center" class="md-toolbar-tools">\r\n    <div>\r\n      <div layout="row" layout-align="start center">\r\n        <md-icon\r\n          class="logo"\r\n          md-svg-src="img/toolbar.svg"\r\n          aria-label=""\r\n        ></md-icon>\r\n        <md-divider\r\n          style="width: 0.7px; height: 25px; border-color: white"\r\n        ></md-divider>\r\n        <div class="header-title">{{ \'global.header\' | translate }}</div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <md-button ng-click="help()" class="md-icon-button">\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'global.ajuda\' | translate }} (F1)</md-tooltip\r\n        >\r\n        <md-icon>help_outline</md-icon>\r\n      </md-button>\r\n      <locale-button></locale-button>\r\n    </div>\r\n  </div>\r\n</md-toolbar>\r\n<project-bar></project-bar>\r\n<div flex layout="row" layout-align="start stretch">\r\n  <div flex="25" class="sub-menu">\r\n    <md-content>\r\n      <md-list class="submenu-list">\r\n        <md-list-item\r\n          ng-click="selectedScreen = \'newFile\'"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'newFile\'}"\r\n        >\r\n          <p>{{\'file.novo\' | translate }}</p>\r\n          <md-icon>create_new_folder</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-disabled="btnOpenDisabled || centralModel.isRepeater"\r\n          ng-click="openFile()"\r\n        >\r\n          <p>{{\'file.abrir\' | translate }}</p>\r\n          <md-icon>folder</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-if="projectMode"\r\n          ng-disabled="((centralModel | isEmpty) && file == \'\') || centralModel.isRepeater"\r\n          ng-click="fileAction(\'save_project_file\')"\r\n        >\r\n          <p>{{\'file.salvar\' | translate }}</p>\r\n          <md-icon>save</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-if="!projectMode"\r\n          ng-disabled="((centralModel | isEmpty) && file == \'\') || centralModel.isRepeater"\r\n          ng-click="fileAction(\'save_file\')"\r\n        >\r\n          <p>{{\'file.salvar\' | translate }}</p>\r\n          <md-icon>save</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-if="!projectMode"\r\n          ng-disabled="((centralModel | isEmpty) && file == \'\') || centralModel.isRepeater"\r\n          ng-click="saveAs()"\r\n        >\r\n          <p>{{\'file.salvarComo\' | translate }}</p>\r\n          <md-icon>save</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-if="projectMode"\r\n          ng-disabled="((centralModel | isEmpty) && file == \'\') || centralModel.isRepeater"\r\n          ng-click="saveAsProject()"\r\n        >\r\n          <p>{{\'file.salvarComo\' | translate }}</p>\r\n          <md-icon>save</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-disabled="((centralModel | isEmpty) && file == \'\') || centralModel.isRepeater || centralModel.isGateway || (projectMode && !selectedCentralAddress)"\r\n          ng-click="go(\'app.file.print\'); selectedScreen = \'reports\'"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'reports\'}"\r\n        >\r\n          <p>{{\'file.relatorios\' | translate }}</p>\r\n          <md-icon>print</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-disabled="!isCIEConnected || (centralModel | isEmpty) || (projectMode && !selectedCentralAddress)"\r\n          ng-click="selectedScreen = \'transmission\';"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'transmission\'}"\r\n        >\r\n          <p>{{\'file.comunicar\' | translate }}</p>\r\n          <md-icon>usb</md-icon>\r\n        </md-list-item>\r\n      </md-list>\r\n    </md-content>\r\n    <input\r\n      style="display: none"\r\n      id="open_file"\r\n      type="file"\r\n      accept=".cie,.cieproj"\r\n      input-file="open_file"\r\n    />\r\n    <input\r\n      style="display: none"\r\n      id="save_file"\r\n      type="file"\r\n      accept=".cie"\r\n      nwsaveas\r\n      input-file="save_file"\r\n    />\r\n    <input\r\n      style="display: none"\r\n      id="save_project_file"\r\n      type="file"\r\n      accept=".cieproj"\r\n      nwsaveas\r\n      input-file="save_project_file"\r\n    />\r\n  </div>\r\n  <div flex layout="row" layout-align="space-between stretch">\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'newFile\'"\r\n      layout="row"\r\n      layout-padding\r\n      class="md-whiteframe-4dp file-content"\r\n    >\r\n      <div ng-if="startingProjectMode" class="new-content">\r\n        <h2>{{\'file.novoProjeto\' | translate }}</h2>\r\n        <div class="description">\r\n          {{\'file.interligacaoIntroA\' | translate }}\r\n          <br /><br />\r\n          {{\'file.interligacaoIntroB\' | translate }}\r\n        </div>\r\n        <div class="form-item" layout="row">\r\n          <div style="padding-top: 7px" class="form-label">\r\n            {{\'file.quantasCentrais\' | translate }}\r\n          </div>\r\n          <div class="form-value" style="margin-left: 15px">\r\n            <md-select\r\n              required\r\n              ng-model="project.quantidade"\r\n              aria-label=""\r\n              class="select-interconnection"\r\n            >\r\n              <md-option value="0">\r\n                {{\'file.selecione\' | translate }}\r\n              </md-option>\r\n              <md-option value="skip">\r\n                {{\'file.configurarPosteriormente\' | translate }}\r\n              </md-option>\r\n              <md-option\r\n                ng-repeat="i in [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16]"\r\n                value="{{i}}"\r\n              >\r\n                {{i}}\r\n              </md-option>\r\n            </md-select>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="form-item" layout="row">\r\n          <div style="padding-top: 7px" class="form-label">\r\n            {{\'file.modeloCentrais\' | translate }}\r\n          </div>\r\n          <div class="form-value" style="margin-left: 123px">\r\n            <md-select\r\n              required\r\n              ng-model="project.model"\r\n              aria-label=""\r\n              class="select-interconnection"\r\n            >\r\n              <md-option value="0">\r\n                {{\'file.selecione\' | translate }}\r\n              </md-option>\r\n              <md-option\r\n                ng-repeat="model in centralsModels"\r\n                value="{{model.id}}"\r\n              >\r\n                {{model.nome}}\r\n              </md-option>\r\n            </md-select>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="form-item" layout="row" style="margin-top: 50px">\r\n          <div class="form-label">{{\'file.todasMonitoram\' | translate }}</div>\r\n          <div class="form-value" style="margin-left: 40px">\r\n            <md-radio-group ng-model="project.todasInterligadas">\r\n              <md-radio-button value="true"\r\n                >{{\'file.sim\' | translate }}</md-radio-button\r\n              >\r\n              <md-radio-button value="false"\r\n                >{{\'file.nao\' | translate }}</md-radio-button\r\n              >\r\n            </md-radio-group>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="form-item" layout="row">\r\n          <div class="form-label">{{\'file.ativacaoComandos\' | translate }}</div>\r\n          <div class="form-value" style="margin-left: 44px">\r\n            <div>\r\n              <md-checkbox\r\n                class="repeater-check"\r\n                ng-model="project.comandos.alarme_geral"\r\n              >\r\n                {{\'file.alarmeGeral\' | translate }}\r\n              </md-checkbox>\r\n            </div>\r\n            <div>\r\n              <md-checkbox\r\n                class="repeater-check"\r\n                ng-model="project.comandos.reiniciar_central"\r\n              >\r\n                {{\'file.reiniciarCentral\' | translate }}\r\n              </md-checkbox>\r\n            </div>\r\n            <div>\r\n              <md-checkbox\r\n                class="repeater-check"\r\n                ng-model="project.comandos.silenciar_central"\r\n              >\r\n                {{\'file.silenciarCentral\' | translate }}\r\n              </md-checkbox>\r\n            </div>\r\n            <div>\r\n              <md-checkbox\r\n                class="repeater-check"\r\n                ng-model="project.comandos.silenciar_sirene"\r\n              >\r\n                {{\'file.silenciarSirene\' | translate }}\r\n              </md-checkbox>\r\n            </div>\r\n            <div>\r\n              <md-checkbox\r\n                class="repeater-check"\r\n                ng-model="project.comandos.sirene_brigada"\r\n              >\r\n                {{\'file.sireneBrigada\' | translate }}\r\n              </md-checkbox>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <section layout="row" layout-align="center center" layout-wrap>\r\n          <md-button ng-click="cancelProject()" class="md-raised"\r\n            >{{\'file.cancelar\' | translate }}</md-button\r\n          >\r\n          <md-button\r\n            ng-click="createProject()"\r\n            ng-disabled="project.quantidade === \'0\' || (project.quantidade !== \'skip\' && project.model === \'0\')"\r\n            class="md-raised md-accent"\r\n            >{{\'file.criarProjeto\' | translate }}</md-button\r\n          >\r\n        </section>\r\n      </div>\r\n\r\n      <div layout="row" ng-if="!startingProjectMode">\r\n        <div flex="50" class="new-content">\r\n          <h2>{{\'file.configuracoesPadrao\' | translate }}</h2>\r\n          <div class="description">{{\'file.crieNovoArquivo\' | translate }}</div>\r\n          <md-radio-group ng-model="newFileModel.option">\r\n            <md-radio-button\r\n              class="central-option"\r\n              ng-repeat="model in CONFIG.modelos_centrais"\r\n              value="{{model.id}}"\r\n            >\r\n              {{model.nome | translate }}<b\r\n                ng-if="(model.id == connectedCentralModel.id) && isCIEConnected"\r\n              >\r\n                - {{\'file.online\' | translate }}</b\r\n              >\r\n            </md-radio-button>\r\n          </md-radio-group>\r\n          <md-button ng-click="newFile()" class="md-raised md-accent"\r\n            >{{\'file.novoArquivo\' | translate }}</md-button\r\n          >\r\n        </div>\r\n        <md-divider></md-divider>\r\n        <div flex="50" class="new-content">\r\n          <h2>{{\'file.configuracoesCentral\' | translate }}</h2>\r\n          <div ng-if="isCIEBlocked" class="alert no-margin">\r\n            <b class="model"></b>{{\'file.ativeConexao\' | translate }}\r\n          </div>\r\n          <div ng-if="isCIEConnected" class="description">\r\n            {{\'file.crieUmNovo1\' | translate }}\r\n            <b>{{connectedCentralModel.nome | translate}}</b>,\r\n            {{\'file.crieUmNovo2\' | translate }}\r\n          </div>\r\n          <div ng-if="!isCIEConnected" class="description">\r\n            {{\'file.conecteCentral\' | translate }}\r\n          </div>\r\n          <md-button\r\n            ng-disabled="!isCIEConnected"\r\n            ng-click="newFileByCentral()"\r\n            class="md-raised md-accent"\r\n            >{{\'file.receberConfiguracao\' | translate }}</md-button\r\n          >\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'transmission\';"\r\n      layout="column"\r\n      layout-padding\r\n      layout-align="space-between stretch"\r\n      class="md-whiteframe-4dp file-content"\r\n    >\r\n      <div\r\n        ng-if="(isCIEConnected && centralModel.isGateway && !cannotSendGatewayConfig) || (isCIEConnected && !centralModel.isGateway)"\r\n        class="info-transmission"\r\n      >\r\n        <b class="model">{{connectedCentralModel.nome | translate}}</b>\r\n        {{\'file.estaPronta\' | translate }}\r\n      </div>\r\n      <div\r\n        ng-if="!isCIEBlocked && !isCIEConnected && centralModel.id !== \'PROJECT\' || (centralModel | isEmpty)"\r\n        class="alert"\r\n      >\r\n        {{\'file.conecteCentral1\' | translate }}\r\n        <b class="model">{{centralModel.nome | translate }}</b>\r\n        {{\'file.conecteCentral2\' | translate }}\r\n      </div>\r\n      <div ng-if="isCIEBlocked" class="alert">\r\n        <b class="model">{{\'file.centralBloqueada\' | translate }}</b>.\r\n        {{\'file.ativeConexao\' | translate }}\r\n      </div>\r\n      <div\r\n        ng-if="(centralModel.id != connectedCentralModel.id) && isCIEConnected && centralModel.id !== \'PROJECT\'"\r\n        class="alert"\r\n      >\r\n        {{\'file.naoPossivel\' | translate }}<br />\r\n        {{\'file.centralConectada\' | translate }}\r\n        <b class="model">{{connectedCentralModel.nome | translate}}</b><br />\r\n        {{\'file.centralConfigurada\' | translate }}\r\n        <b class="model">{{centralModel.nome | translate}}</b>\r\n      </div>\r\n      <div ng-if="projectMode && !selectedCentralAddress" class="alert">\r\n        {{\'file.selecioneUmaCentral\' | translate }}\r\n      </div>\r\n      <div\r\n        ng-if="isCIEConnected && centralModel.isGateway && cannotSendGatewayConfig"\r\n        ng-click="go(\'app.system\', {firmware: \'accessLevels\'}); selectedScreen = \'accessLevels\'"\r\n        ng-mouseenter="isHover = true;"\r\n        ng-mouseleave="isHover = false;"\r\n        ng-style="{ \'background\': (isHover ? \'#ccc\' : \'transparent\') }"\r\n        style="cursor: pointer"\r\n        class="alert"\r\n      >\r\n        {{\'system.gwSendEthernetAlert\' | translate }}\r\n      </div>\r\n      <div ng-if="!inconsistency" flex layout="row" layout-padding>\r\n        <div flex>\r\n          <h2>{{\'file.enviarProgramacaoCentral\' | translate }}</h2>\r\n          <md-button\r\n            ng-disabled="!isCIEConnected || (centralModel | isEmpty) || (projectMode && !selectedCentralAddress) || (centralModel.isGateway && cannotSendGatewayConfig)"\r\n            ng-click="fileAction(\'send_configuration\')"\r\n            class="md-raised md-accent"\r\n            >{{\'file.enviar\' | translate }}</md-button\r\n          >\r\n        </div>\r\n        <md-divider></md-divider>\r\n        <div flex>\r\n          <h2>{{\'file.receberProgramacao\' | translate }}</h2>\r\n          <md-button\r\n            ng-disabled="!isCIEConnected || (centralModel | isEmpty) || (projectMode && !selectedCentralAddress)"\r\n            ng-click="getConfiguration()"\r\n            class="md-raised md-accent"\r\n            >{{\'file.receber\' | translate }}</md-button\r\n          >\r\n        </div>\r\n      </div>\r\n\r\n      <div ng-if="inconsistency" flex layout="column" layout-padding>\r\n        <div class="inconsistency">\r\n          {{\'file.haInconsistencias\' | translate }}\r\n        </div>\r\n        <div class="inconsistency-description">\r\n          {{\'file.confiraALista\' | translate }}\r\n        </div>\r\n        <md-table-container class="inconsistency-table">\r\n          <table md-table md-row-select="false">\r\n            <thead md-head md-order="order">\r\n              <tr md-row>\r\n                <th ng-if="!centralModel.is1060" md-column md-order-by="laco">\r\n                  <span>{{\'file.laco\' | translate }}</span>\r\n                </th>\r\n                <th md-column md-order-by="endereco">\r\n                  <span>{{\'file.endereco\' | translate }}</span>\r\n                </th>\r\n                <th md-column md-order-by="nome">\r\n                  {{\'file.nome\' | translate }}\r\n                </th>\r\n                <th md-column md-order-by="tipo_arquivo">\r\n                  <span>{{\'file.tipo\' | translate }}</span>\r\n                </th>\r\n                <th md-column md-order-by="tipo">\r\n                  <span>{{\'file.novoTipo\' | translate }}</span>\r\n                </th>\r\n                <th md-column md-order-by="inconsistencia">\r\n                  <span>{{\'file.inconsistencia\' | translate }}</span>\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody md-body>\r\n              <tr\r\n                class="item-table"\r\n                ng-class="{\'table-item-selected\' : selectedDevices.indexOf(dispositivo.endereco) != -1}"\r\n                md-row\r\n                ng-repeat="dispositivo in diff | orderBy: loopOrder"\r\n              >\r\n                <td ng-if="!centralModel.is1060" md-cell>\r\n                  {{\'file.laco\' | translate }} {{dispositivo.laco}}\r\n                </td>\r\n                <td md-cell>{{dispositivo.endereco | numberFormat}}</td>\r\n                <td md-cell>{{dispositivo.nome || \'-\'}}</td>\r\n                <td md-cell class="type-file">\r\n                  {{tipos[dispositivo.tipo].nome ? ((\'config.\' +\r\n                  tipos[dispositivo.tipo].nome) | translate) : \'-\'}}\r\n                </td>\r\n                <td md-cell class="type-central">\r\n                  {{tipos[dispositivo.novoTipo].nome ? ((\'config.\' +\r\n                  tipos[dispositivo.novoTipo].nome) | translate) : \'-\'}}\r\n                </td>\r\n                <td md-cell class="new-device">\r\n                  {{dispositivo.inconsistency}}\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </md-table-container>\r\n        <div layout-align="center center" layout-padding>\r\n          <div layout="row" layout-align="center center">\r\n            <md-button ng-click="cancel()" class="md-raised"\r\n              >{{\'file.cancelar\' | translate }}</md-button\r\n            >\r\n            <md-button\r\n              ng-if="!centralModel.is1060"\r\n              ng-click="acceptChanges()"\r\n              class="md-raised md-accent"\r\n              >{{\'file.aceitarAlteracoes\' | translate }}</md-button\r\n            >\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'reports\'"\r\n      layout-padding\r\n      class="md-whiteframe-4dp file-content"\r\n    >\r\n      <div ui-view="printContent"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n');$templateCache.put("file/send-question-dialog.html",'<md-dialog\r\n  aria-label="List dialog"\r\n  style="padding: 20px 20px 0 20px; color: rgba(0, 0, 0, 0.87)"\r\n>\r\n  <md-dialog-content>\r\n    <md-title style="font-weight: bold"\r\n      >{{\'file.enviarProgramacao\' | translate}}</md-title\r\n    >\r\n    <div style="padding: 30px 0; font-size: 14px">\r\n      {{\'file.existemConfiguracoes\' | translate}}\r\n      <br /><br />\r\n      {{\'file.desejaContinuar\' | translate}}\r\n    </div>\r\n  </md-dialog-content>\r\n  <md-dialog-actions>\r\n    <md-button ng-click="closeDialog()" class="md-primary">\r\n      {{\'file.cancelar\' | translate}}\r\n    </md-button>\r\n    <md-button ng-click="saveAndSend()" class="md-primary">\r\n      {{\'file.salvarEnviar\' | translate}}\r\n    </md-button>\r\n    <md-button ng-click="send()" class="md-accent">\r\n      {{\'file.somenteEnviar\' | translate}}\r\n    </md-button>\r\n  </md-dialog-actions>\r\n</md-dialog>\r\n');$templateCache.put("logs/generatePdfDialog.html",'<md-dialog\r\n  aria-label="Generate PDF dialog"\r\n  style="padding: 20px 20px 0 20px; color: rgba(0, 0, 0, 0.87)"\r\n>\r\n  <md-dialog-content>\r\n    <md-title style="font-weight: bold"\r\n      >{{\'logs.generatePdfDialog\' | translate}}</md-title\r\n    >\r\n    <div style="margin-top: 1.5rem">\r\n      <div ng-repeat="(key, value) in logTypes">\r\n        <div class="form-value">\r\n          <div>\r\n            <md-checkbox\r\n              class="repeater-check"\r\n              ng-model="logTypes[key].selected"\r\n            >\r\n              {{\'logs.\' + key | translate}}\r\n            </md-checkbox>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </md-dialog-content>\r\n  <md-dialog-actions>\r\n    <md-button ng-click="close()" class="md-primary">\r\n      {{\'file.cancelar\' | translate}}\r\n    </md-button>\r\n    <md-button ng-click="save()" class="md-primary">\r\n      {{\'file.salvar\' | translate}}\r\n    </md-button>\r\n  </md-dialog-actions>\r\n</md-dialog>\r\n');$templateCache.put("loop/loop.html",'<md-toolbar class="toolbar md-accent">\r\n  <div flex layout-align="space-between center" class="md-toolbar-tools">\r\n    <div>\r\n      <div layout="row" layout-align="start center">\r\n        <md-icon\r\n          class="logo"\r\n          md-svg-src="img/toolbar.svg"\r\n          aria-label=""\r\n        ></md-icon>\r\n        <md-divider\r\n          style="width: 0.7px; height: 25px; border-color: white"\r\n        ></md-divider>\r\n        <div class="header-title">{{ \'global.header\' | translate }}</div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <md-button\r\n        ng-if="selectedDevices.length > 0 && selectedLoop != 0"\r\n        ng-click="removeDevice()"\r\n        class="md-icon-button"\r\n      >\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'loop.removerDispositivo\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon>delete</md-icon>\r\n      </md-button>\r\n      <md-button\r\n        ng-if="!newDevice && !(devices | isEmpty) && selectedLoop != 0"\r\n        ng-click="enableMultipleSelection()"\r\n        class="md-icon-button"\r\n      >\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'loop.selecionar\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon\r\n          >{{isEnabledMultipleSelection ? \'check_circle\' : \'check\'}}</md-icon\r\n        >\r\n      </md-button>\r\n      <md-button\r\n        ng-if="!newDevice && selectedLoop != 0"\r\n        ng-click="createDevice()"\r\n        class="md-icon-button"\r\n      >\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'loop.criarDispositivo\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon>add</md-icon>\r\n      </md-button>\r\n      <md-button ng-click="help()" class="md-icon-button">\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'global.ajuda\' | translate }} (F1)</md-tooltip\r\n        >\r\n        <md-icon>help_outline</md-icon>\r\n      </md-button>\r\n      <locale-button></locale-button>\r\n    </div>\r\n  </div>\r\n</md-toolbar>\r\n<project-bar></project-bar>\r\n<div\r\n  flex\r\n  layout="row"\r\n  layout-align="center stretch"\r\n  ng-init="init()"\r\n  dw-loading="list@app.loop"\r\n>\r\n  <div\r\n    ng-hide="newDevice"\r\n    layout-padding\r\n    flex\r\n    class="loop-table-content"\r\n    layout="column"\r\n    layout-align="space-between stretch"\r\n  >\r\n    <md-tabs\r\n      ng-if="!centralModel.is1060"\r\n      md-stretch-tabs="always"\r\n      class="tab-loop"\r\n    >\r\n      <md-tab\r\n        md-active="selectedLoop == idLaco"\r\n        ng-repeat="idLaco in [1,2,0]"\r\n        label="$index"\r\n        md-on-select="selectLoop(idLaco)"\r\n        ng-disabled="idLaco > centralModel.QTD_LACOS"\r\n      >\r\n        <md-tab-label>\r\n          {{idLaco == 0 ? (\'loop.saidasLocais\' | translate) : (\'loop.laco\' |\r\n          translate) + \' \' + idLaco}}\r\n          <a ng-if="lacos[idLaco].habilitado == false" class="loop-disabled"\r\n            ><md-icon>lock</md-icon></a\r\n          >\r\n        </md-tab-label>\r\n      </md-tab>\r\n    </md-tabs>\r\n    <md-content flex id="loop-table">\r\n      <md-switch\r\n        ng-if="selectedLoop != 0"\r\n        class="md-accent enable-loop switch-enable"\r\n        ng-model="lacos[selectedLoop].habilitado"\r\n        style="margin: 0 0 0 10px"\r\n      >\r\n        {{ \'loop.laco\' | translate }} {{lacos[selectedLoop].habilitado ?\r\n        (\'loop.ativadoUpper\' | translate) : (\'loop.bloqueadoUpper\' |\r\n        translate)}}\r\n        <a\r\n          ng-if="centralModel.is1060 && lacos[selectedLoop].habilitado == false"\r\n          class="loop-disabled"\r\n          ><md-icon>lock</md-icon></a\r\n        >\r\n      </md-switch>\r\n      <div ng-if="devices | isEmpty" class="loop-empty">\r\n        <div>{{ \'loop.nenhumDispositivo\' | translate }} {{selectedLoop}}</div>\r\n        <div>\r\n          {{ \'loop.selecioneBotao\' | translate }} <md-icon>add</md-icon> {{\r\n          \'loop.paraCriar\' | translate }}.\r\n        </div>\r\n      </div>\r\n      <md-table-container ng-if="!(devices | isEmpty)">\r\n        <table\r\n          md-table\r\n          md-row-select="isEnabledMultipleSelection"\r\n          ng-model="selectedDevices"\r\n        >\r\n          <thead md-head md-order="loopOrder">\r\n            <tr md-row>\r\n              <th ng-if="selectedLoop != 0" md-column md-order-by="endereco">\r\n                <span>{{ \'loop.endereco\' | translate }}</span>\r\n              </th>\r\n              <th md-column md-order-by="habilitado">\r\n                <span>{{ \'loop.ativo\' | translate }}</span>\r\n              </th>\r\n              <th ng-if="selectedLoop == 0" md-column md-order-by="saida_local">\r\n                <span>{{ \'loop.saidaLocal\' | translate }}</span>\r\n              </th>\r\n              <th md-column md-order-by="nome">\r\n                {{ \'loop.nome\' | translate }}\r\n              </th>\r\n              <th ng-if="!centralModel.is1060" md-column md-order-by="zona">\r\n                <span>{{ \'loop.zona\' | translate }}</span>\r\n              </th>\r\n              <th ng-if="selectedLoop != 0" md-column md-order-by="nomeTipo">\r\n                <span>{{ \'loop.tipo\' | translate }}</span>\r\n              </th>\r\n              <th\r\n                ng-if="!centralModel.is1060"\r\n                md-column\r\n                md-order-by="nomeSubtipo"\r\n              >\r\n                {{ \'loop.subtipo\' | translate }}\r\n              </th>\r\n              <th md-column md-order-by="modo">\r\n                {{ \'loop.modo\' | translate }}\r\n              </th>\r\n              <th\r\n                ng-if="!centralModel.is1060"\r\n                ng-if="selectedLoop != 0"\r\n                md-column\r\n                md-order-by="supervisao"\r\n              >\r\n                {{ \'loop.supervisao\' | translate }}\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody md-body>\r\n            <tr\r\n              class="item-table"\r\n              ng-class="{\'table-item-selected\' : selectedDevices.indexOf(dispositivo.endereco) != -1}"\r\n              ng-click="selectDevice(dispositivo.endereco)"\r\n              md-row\r\n              ng-if="!(dispositivo.saida_padrao && selectedLoop != 0)"\r\n              md-select-id="{{dispositivo.endereco}}"\r\n              md-select="dispositivo.endereco"\r\n              md-auto-select\r\n              ng-repeat="(id, dispositivo) in devices | map: addMode | toArray | orderBy: loopOrder | limitTo: pagination.limit: (pagination.page - 1) * pagination.limit"\r\n            >\r\n              <td ng-if="selectedLoop != 0" md-cell>\r\n                {{dispositivo.endereco | numberFormat}}\r\n              </td>\r\n              <td md-cell>\r\n                <md-icon\r\n                  ng-class="{\'device-disabled\': !dispositivo.habilitado, \'device-enabled\': dispositivo.habilitado}"\r\n                  >{{dispositivo.habilitado ? \'done\' : \'lock\'}}</md-icon\r\n                >\r\n              </td>\r\n              <td ng-if="selectedLoop == 0" md-cell>\r\n                {{CONFIG.dispositivos_locais[dispositivo.endereco].saida_local}}\r\n              </td>\r\n              <td md-cell>{{dispositivo.nome}}</td>\r\n              <td ng-if="!centralModel.is1060" md-cell>\r\n                {{zonas[dispositivo.zona].nome || (\'loop.nenhumaSaidaPadrao\' |\r\n                translate)}}\r\n              </td>\r\n              <td ng-if="selectedLoop != 0" md-cell>\r\n                {{(\'config.\' + CONFIG.tipos[dispositivo.tipo].nome | translate)\r\n                || dispositivo.tipo}}\r\n              </td>\r\n              <td ng-if="!centralModel.is1060" md-cell>\r\n                {{(\'config.\' + (CONFIG.subtipos[dispositivo.subtipo] ?\r\n                CONFIG.subtipos[dispositivo.subtipo].nome : \'invalido\') |\r\n                translate) || dispositivo.subtipo}}\r\n              </td>\r\n              <td md-cell>{{\'loop.\' + dispositivo.modo | translate}}</td>\r\n              <td\r\n                ng-if="!centralModel.is1060"\r\n                ng-if="selectedLoop != 0"\r\n                md-cell\r\n              >\r\n                {{dispositivo.supervisao ? (\'loop.sim\' | translate) :\r\n                (\'loop.nao\' | translate)}}\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </md-table-container>\r\n    </md-content>\r\n    <md-table-pagination\r\n      class="loop-pagination"\r\n      ng-if="!(devices | isEmpty)"\r\n      md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}"\r\n      md-page-select\r\n      md-limit="pagination.limit"\r\n      md-page="pagination.page"\r\n      md-total="{{(devices | toArray).length}}"\r\n    ></md-table-pagination>\r\n  </div>\r\n  <div\r\n    ng-if="!(selectedDevice | isEmpty)"\r\n    layout-padding\r\n    flex\r\n    flex-gt-sm="35"\r\n    class="md-whiteframe-4dp device-content"\r\n  >\r\n    <div layout="row" layout-align="space-between center">\r\n      <h3 class="md-flex device-name">\r\n        <span\r\n          >{{newDevice ? (\'loop.cadastrarNovo\' | translate) : (selectedLoop != 0\r\n          ? (selectedDevice.endereco | numberFormat) :\r\n          selectedDevice.saida_local) + \' - \' + selectedDevice.nome}}</span\r\n        >\r\n      </h3>\r\n      <md-button ng-click="cancel()" class="md-icon-button">\r\n        <md-icon>close</md-icon>\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'loop.fechar\' | translate }}</md-tooltip\r\n        >\r\n      </md-button>\r\n    </div>\r\n    <md-content>\r\n      <form\r\n        name="form.device"\r\n        ng-submit="saveDevice(form.device)"\r\n        novalidate\r\n        layout="column"\r\n        autocomplete="off"\r\n      >\r\n        <div layout="row">\r\n          <div layout="column" flex="55">\r\n            <div layout="row">\r\n              <md-switch\r\n                class="md-accent switch-enable"\r\n                ng-model="selectedDevice.habilitado"\r\n                style="width: 110px"\r\n              >\r\n                {{selectedDevice.habilitado ? (\'loop.ativadoUpper\' | translate)\r\n                : (\'loop.bloqueadoUpper\' | translate)}}\r\n              </md-switch>\r\n            </div>\r\n            <div layout="row" ng-if="selectedLoop != 0">\r\n              <md-input-container flex>\r\n                <label>{{ \'loop.tipo\' | translate }}</label>\r\n                <md-select required name="tipo" ng-model="selectedDevice.tipo">\r\n                  <md-option ng-repeat="(id, tipo) in tipos" value="{{id}}">\r\n                    {{\'config.\' + tipo.nome | translate}}\r\n                  </md-option>\r\n                </md-select>\r\n                <div ng-messages="form.device.tipo.$error">\r\n                  <div ng-message="required">\r\n                    {{ \'loop.campoObrigatorio\' | translate }}.\r\n                  </div>\r\n                </div>\r\n              </md-input-container>\r\n            </div>\r\n            <div\r\n              ng-if="!centralModel.is1060 && CONFIG.tipos[selectedDevice.tipo].subtipos.length > 1"\r\n              layout="row"\r\n            >\r\n              <md-input-container flex>\r\n                <label>{{ \'loop.subtipo\' | translate }}</label>\r\n                <md-select\r\n                  name="subtipo"\r\n                  ng-model="selectedDevice.subtipo"\r\n                  required\r\n                >\r\n                  <md-option\r\n                    ng-repeat="subtipo in CONFIG.tipos[selectedDevice.tipo].subtipos"\r\n                    value="{{subtipo}}"\r\n                  >\r\n                    {{\'config.\' + CONFIG.subtipos[subtipo].nome | translate}}\r\n                  </md-option>\r\n                </md-select>\r\n                <div ng-messages="form.device.subtipo.$error">\r\n                  <div ng-message="required">\r\n                    {{ \'loop.campoObrigatorio\' | translate }}.\r\n                  </div>\r\n                </div>\r\n              </md-input-container>\r\n            </div>\r\n            <md-input-container>\r\n              <label>{{ \'loop.nome\' | translate }}</label>\r\n              <input\r\n                ng-change="onChangeDeviceName()"\r\n                id="deviceNameInput"\r\n                focus="true"\r\n                required\r\n                name="nome"\r\n                ng-model="selectedDevice.nome"\r\n                maxlength="14"\r\n                md-maxlength="loopMaxLength"\r\n                class="md-accent"\r\n              />\r\n              <div ng-messages="form.device.nome.$error">\r\n                <div ng-message="required">\r\n                  {{ \'loop.campoObrigatorio\' | translate }}.\r\n                </div>\r\n              </div>\r\n            </md-input-container>\r\n          </div>\r\n          <div flex="45" layout="row" layout-align="center center">\r\n            <img\r\n              ng-if="selectedDevice.tipo"\r\n              ng-src="img/{{\'dispositivos/\' + (CONFIG.tipos[selectedDevice.tipo].icone)}}"\r\n              class="device-image"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div layout="column">\r\n          <div layout="row">\r\n            <md-input-container\r\n              ng-if="selectedLoop != 0"\r\n              flex="20"\r\n              style="margin-right: 10px"\r\n            >\r\n              <label>{{ \'loop.endereco\' | translate }}</label>\r\n              <input\r\n                required\r\n                address-validate\r\n                type="number"\r\n                name="endereco"\r\n                ng-model="selectedDevice.endereco"\r\n                min="1"\r\n                max="250"\r\n              />\r\n              <div ng-messages="form.device.endereco.$error">\r\n                <div ng-message="required">\r\n                  {{ \'loop.campoObrigatorio\' | translate }}.\r\n                </div>\r\n                <div ng-message="addressUsed">\r\n                  {{ \'loop.enderecoJaUtilizado\' | translate }}.\r\n                </div>\r\n                <div ng-message="min || max">\r\n                  {{ \'loop.enderecoDeveSer\' | translate }}.\r\n                </div>\r\n              </div>\r\n            </md-input-container>\r\n            <md-input-container\r\n              flex\r\n              ng-if="!centralModel.is1060 && selectedDevice.zona != 0"\r\n            >\r\n              <label>{{ \'loop.zona\' | translate }}</label>\r\n              <md-select required name="zona" ng-model="selectedDevice.zona">\r\n                <md-option ng-repeat="(id, tipo) in zonas" value="{{id}}">\r\n                  {{id | numberFormat}} - {{tipo.nome}}\r\n                </md-option>\r\n              </md-select>\r\n              <div ng-messages="form.device.zona.$error">\r\n                <div ng-message="required">\r\n                  {{ \'loop.campoObrigatorio\' | translate }}.\r\n                </div>\r\n              </div>\r\n            </md-input-container>\r\n          </div>\r\n          <md-switch\r\n            ng-if="!centralModel.is1060 && selectedDevice.modo == \'entrada\'"\r\n            class="md-accent switch-supervisao"\r\n            ng-model="selectedDevice.supervisao"\r\n          >\r\n            {{ \'loop.supervisao\' | translate }}\r\n          </md-switch>\r\n          <section\r\n            ng-if="!(selectedDevice | isEmpty)"\r\n            layout="row"\r\n            layout-align="center center"\r\n            layout-wrap\r\n          >\r\n            <md-button ng-click="cancel()" class="md-raised"\r\n              >{{ \'loop.cancelar\' | translate }}</md-button\r\n            >\r\n            <md-button\r\n              type="submit"\r\n              ng-disabled="form.device.$invalid"\r\n              class="md-raised md-accent"\r\n              >{{newDevice ? (\'loop.criar\' | translate) : (\'loop.aplicar\' |\r\n              translate)}}</md-button\r\n            >\r\n          </section>\r\n        </div>\r\n      </form>\r\n    </md-content>\r\n  </div>\r\n</div>\r\n');$templateCache.put("print/logsPrint.html","<div>\r\n  <div class=\"header\">\r\n    <div class=\"logo-print\" layout-align=\"none stretch\">\r\n      <md-icon\r\n        class=\"logo-print\"\r\n        md-svg-src=\"img/toolbar.svg\"\r\n        aria-label=\"\"\r\n      ></md-icon>\r\n    </div>\r\n    <div layout=\"column\">\r\n      <div ng-if=\"isProject\" class=\"project-title\">\r\n        <b>{{'report.projetoInterligacao' | translate}}</b>\r\n      </div>\r\n      <div class=\"form-item\">\r\n        <label class=\"form-label\">{{'report.relatorio' | translate}}:</label>\r\n        <label class=\"form-value\"\r\n          >{{'report.registroEventos' | translate}} -\r\n          {{getSelectedLogTypes()}}</label\r\n        >\r\n      </div>\r\n      <div ng-if=\"!isProject && !centralModel.is1060\" class=\"form-item\">\r\n        <label class=\"form-label\"\r\n          >{{'report.localInstalacao' | translate}}:</label\r\n        >\r\n        <label class=\"form-value\">{{sistema.local_instalacao}}</label>\r\n      </div>\r\n      <div ng-if=\"!isProject && centralModel.is1060\" class=\"form-item\">\r\n        <label class=\"form-label\"\r\n          >{{'report.localInstalacao' | translate}}:</label\r\n        >\r\n        <label class=\"form-value\"\r\n          >{{sistema.local_instalacao_linha1}}\r\n          {{sistema.local_instalacao_linha2}}</label\r\n        >\r\n      </div>\r\n      <div ng-if=\"!isProject\" class=\"form-item\">\r\n        <label class=\"form-label\"\r\n          >{{'report.modeloCentral' | translate}}:</label\r\n        >\r\n        <label class=\"form-value\"\r\n          >{{sistema.modelo_central || centralModel.nome }}</label\r\n        >\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <md-content ng-if=\"centralModel.is1060\" flex class=\"table-logs\">\r\n    <table md-table>\r\n      <thead md-head md-order=\"logTableOrder\">\r\n        <tr md-row>\r\n          <th md-column md-order-by=\"evento\">\r\n            <span>{{ 'logs.tipoEvento' | translate }}</span>\r\n          </th>\r\n          <th md-column md-order-by=\"-date\">\r\n            <span>{{ 'logs.data' | translate }}</span>\r\n          </th>\r\n          <th md-column md-order-by=\"-date\">\r\n            <span>{{ 'logs.hora' | translate }}</span>\r\n          </th>\r\n          <th md-column md-order-by=\"tipo\">{{ 'logs.evento' | translate }}</th>\r\n          <th md-column md-order-by=\"nomeDetalhe\"><span>Detalhe</span></th>\r\n          <th md-column md-order-by=\"endereco\"><span>End.</span></th>\r\n          <th md-column md-order-by=\"nome_dispositivo\">\r\n            <span>{{ 'logs.nome' | translate }}</span>\r\n          </th>\r\n          <th md-column md-order-by=\"siglaTipo\">\r\n            <span>{{ 'logs.tipo' | translate }}</span>\r\n          </th>\r\n        </tr>\r\n      </thead>\r\n      <tbody md-body>\r\n        <tr\r\n          class=\"item-log\"\r\n          ng-repeat=\"log in filteredLogs | orderBy: logTableOrder\"\r\n        >\r\n          <td md-cell>{{ logTypes[log.evento].label }}</td>\r\n          <td md-cell>{{log.date | date: 'dd/MM/yyyy'}}</td>\r\n          <td md-cell>{{log.date | date: 'HH:mm:ss'}}</td>\r\n          <td md-cell>\r\n            {{log.nomeEvento ? ('logs.' + log.nomeEvento | translate) : '-'}}\r\n          </td>\r\n          <td md-cell>\r\n            {{log.nomeDetalhe ? ('logs.' + log.nomeDetalhe | translate) : '-'}}\r\n          </td>\r\n          <td md-cell>{{log.nomeEvento ? '-' : log.endereco}}</td>\r\n          <td md-cell>\r\n            {{ log.endereco === 0 ? ('logs.NaoRegistrado' | translate) :\r\n            dispositivos[log.endereco] ? dispositivos[log.endereco].nome :\r\n            log.nome_dispositivo ? log.nome_dispositivo : '-' }}\r\n          </td>\r\n          <td md-cell>{{log.siglaTipo ? log.siglaTipo : '-'}}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </md-content>\r\n  <md-content ng-if=\"!centralModel.is1060\" flex class=\"table-logs\">\r\n    <table md-table>\r\n      <thead md-head md-order=\"logTableOrder\">\r\n        <tr md-row>\r\n          <th>{{'report.primeiroEvento' | translate}}</th>\r\n          <th md-column>\r\n            <span>{{'report.evento' | translate}}</span>\r\n          </th>\r\n          <th ng-if=\"isProject\" md-column>\r\n            <span\r\n              >{{'report.centralDe' | translate}}<br />{{'report.origem' |\r\n              translate}}</span\r\n            >\r\n          </th>\r\n          <th md-column md-order-by=\"-date\">\r\n            <span>{{'report.data' | translate}}</span>\r\n          </th>\r\n          <th md-column md-order-by=\"-date\">\r\n            <span>{{'report.data' | translate}}</span>\r\n          </th>\r\n          <th md-column>{{'report.tipo' | translate}}</th>\r\n          <th md-column><span>{{'report.laco' | translate}}</span></th>\r\n          <th md-column><span>{{'report.endAbreviado' | translate}}</span></th>\r\n          <th md-column><span>{{'report.nome' | translate}}</span></th>\r\n          <th md-column><span>{{'report.tipo' | translate}}</span></th>\r\n          <th md-column><span>{{'report.subtipo' | translate}}</span></th>\r\n          <th md-column><span>{{'report.idZona' | translate}}</span></th>\r\n          <th md-column>{{'report.nomeZona' | translate}}</th>\r\n          <th ng-if=\"logTypes[log.evento] === 'operacao'\" md-column>\r\n            {{'report.repetidora' | translate}}\r\n          </th>\r\n          <th ng-if=\"logTypes[log.evento] === 'operacao'\" md-column>\r\n            {{'report.regraAtivacao' | translate}}\r\n          </th>\r\n        </tr>\r\n      </thead>\r\n      <tbody md-body>\r\n        <tr\r\n          class=\"item-log\"\r\n          ng-repeat=\"log in filteredLogs | orderBy: logTableOrder\"\r\n        >\r\n          <td md-cell>{{log.primeiro_evento ? '*' : ''}}</td>\r\n          <td md-cell>{{ logTypes[log.evento].label }}</td>\r\n          <td ng-if=\"isProject\" md-cell>\r\n            {{log.origem ? (log.origem === 30 ? ('report.operacaoRemota' |\r\n            translate) : ('report.central' | translate) + (' ' + log.origem)) :\r\n            '-'}}\r\n          </td>\r\n          <td md-cell>{{log.date | date: 'dd/MM/yyyy'}}</td>\r\n          <td md-cell>{{log.date | date: 'HH:mm:ss'}}</td>\r\n          <td md-cell>\r\n            {{'config.' + tiposEvento[log.evento][log.tipo] | translate}}\r\n          </td>\r\n          <td md-cell>{{log.laco || '-'}}</td>\r\n          <td md-cell>{{(log.laco != 0 ? log.endereco : '-') || '-'}}</td>\r\n          <td md-cell>{{log.nome_dispositivo || '-'}}</td>\r\n          <td md-cell>\r\n            {{tipos[log.tipo_dispositivo].nome ? ('config.' +\r\n            tipos[log.tipo_dispositivo].nome | translate) : '-'}}\r\n          </td>\r\n          <td md-cell>\r\n            {{subTipos[log.subtipo_dispositivo].nome ? ('config.' +\r\n            subTipos[log.subtipo_dispositivo].nome | translate) : '-'}}\r\n          </td>\r\n          <td md-cell>{{log.zona || '-'}}</td>\r\n          <td md-cell>{{log.nome_zona || '-'}}</td>\r\n          <td md-cell ng-if=\"logTypes[log.evento] === 'operacao'\">\r\n            {{log.repetidora ? ('R' + log.repetidora) : '-'}}\r\n          </td>\r\n          <td md-cell ng-if=\"logTypes[log.evento] === 'operacao'\">\r\n            {{log.regra_ativacao || '-'}}\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </md-content>\r\n  <div class=\"footer-and-date\" layout=\"row\" flex layout-align=\"center center\">\r\n    <div class=\"date\" flex>\r\n      {{'report.relatorioGerado' | translate}} {{today | date:'dd/MM/yyyy'}}\r\n      {{today | date:'HH'}}h{{today | date:'mm'}}min.\r\n    </div>\r\n  </div>\r\n  <div layout=\"row\" flex layout-align=\"center center\">\r\n    <div class=\"name\">{{'report.nomeResponsavel' | translate}}</div>\r\n    <div class=\"assigner\">{{'report.assinatura' | translate}}</div>\r\n  </div>\r\n</div>\r\n");$templateCache.put("print/loopCalcPrintable.html",'<div>\r\n  <div layout="row" layout-align="space-between center" class="header">\r\n    <div class="logo-print" layout-align="none stretch">\r\n      <md-icon\r\n        class="logo-print"\r\n        md-svg-src="img/toolbar.svg"\r\n        aria-label=""\r\n      ></md-icon>\r\n    </div>\r\n    <div layout="column">\r\n      <b>{{ \'tools.relatorio\' | translate }}: </b>{{ \'tools.calculoAlimentacao\'\r\n      | translate }}\r\n    </div>\r\n  </div>\r\n  <div>\r\n    <div layout="row" layout-align="center center" class="title">\r\n      {{ \'tools.dispositivos\' | translate }}:\r\n    </div>\r\n\r\n    <div class="loop-content">\r\n      <md-table-container>\r\n        <table md-table>\r\n          <thead md-head>\r\n            <tr md-row>\r\n              <th md-column><span>#</span></th>\r\n              <th md-column><span>{{ \'tools.modelo\' | translate }}</span></th>\r\n              <th md-column>\r\n                <span>{{ \'tools.cabo\' | translate }} (mm)</span>\r\n              </th>\r\n              <th md-column>\r\n                <span>{{ \'tools.distancia\' | translate }} (m)</span>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody md-body>\r\n            <tr class="item-table" md-row ng-repeat="(id, item) in deviceTable">\r\n              <td md-cell>{{$index + 1}}</td>\r\n              <td md-cell>{{item.device}}</td>\r\n              <td md-cell>{{item.cable}}</td>\r\n              <td md-cell>{{item.distance}}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </md-table-container>\r\n    </div>\r\n\r\n    <div layout="row" layout-align="center center" class="title">\r\n      {{ \'tools.resultadoCalculo\' | translate }}:\r\n    </div>\r\n\r\n    <div class="result-draw">\r\n      <div layout="row" flex layout-align="center center">\r\n        <div class="info">\r\n          <b\r\n            >{{result.steps.length == 0 ? (\'tools.naoNecessario\' | translate) :\r\n            result.steps.length}}</b\r\n          >\r\n          {{ \'tools.fontes\' | translate }} FNA\r\n        </div>\r\n        <div class="info">\r\n          {{ \'tools.distanciaTotal\' | translate }}:\r\n          <b>{{result.metersTotal}} {{ \'tools.metros\' | translate }}</b>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="loop-content">\r\n      <md-table-container>\r\n        <table md-table>\r\n          <thead md-head>\r\n            <tr md-row>\r\n              <th md-column><span>{{ \'tools.secao\' | translate }}</span></th>\r\n              <th md-column>\r\n                <span>{{ \'tools.distancia\' | translate }} (m)</span>\r\n              </th>\r\n              <th md-column>\r\n                <span>{{ \'tools.quantidadeDispositivo\' | translate }}</span>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody md-body>\r\n            <tr\r\n              class="item-table"\r\n              md-row\r\n              ng-repeat="(id, item) in result.qtyDevices track by $index"\r\n            >\r\n              <td md-cell>{{ \'tools.secao\' | translate }} {{$index + 1}}</td>\r\n              <td md-cell>{{result.steps[$index] || result.over}}</td>\r\n              <td md-cell>{{item}}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </md-table-container>\r\n    </div>\r\n  </div>\r\n\r\n  <div layout="row" layout-align="center center">\r\n    <div class="result-draw" flex flex-md="100" flex-lg="100" flex-xl="80">\r\n      <div layout="row" layout-wrap layout-align="start center" id="with_draw">\r\n        <div ng-if="result.steps.length">\r\n          <img style="width: 80px" ng-src="img/cie.png" />\r\n        </div>\r\n        <div\r\n          style="min-width: 110px"\r\n          ng-style="{ width: (trunc((meters/result.metersTotal) * 100)-10) + \'%\' }"\r\n          layout="row"\r\n          layout-align="start center"\r\n          class="step"\r\n          ng-repeat="meters in result.steps track by $index"\r\n        >\r\n          <div flex layout="column" layout-align="start center">\r\n            <div class="name-session">\r\n              {{ \'tools.secao\' | translate }} {{$index + 1}}\r\n            </div>\r\n            <div class="distance"><b>{{meters}}</b> m</div>\r\n          </div>\r\n          <div><img ng-src="img/fonte.png" style="width: 50px" /></div>\r\n        </div>\r\n        <div\r\n          ng-if="result.steps.length"\r\n          ng-style="{ width: (trunc((result.over/result.metersTotal) * 100)-10) + \'%\' }"\r\n          layout-align="start center"\r\n          class="step"\r\n        >\r\n          <div flex layout="column" layout-align="start center">\r\n            <div class="distance"><b>{{result.over}}</b> m</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="footer-and-date" layout="row" flex layout-align="center center">\r\n    <div class="date" flex>\r\n      {{ \'tools.relatorioGerado\' | translate }} {{today | date:\'dd/MM/yyyy\'}}\r\n      {{today | date:\'HH\'}}h{{today | date:\'mm\'}}min.\r\n    </div>\r\n  </div>\r\n  <div layout="row" flex layout-align="center center">\r\n    <div class="name">{{ \'tools.nomeResponsavel\' | translate }}</div>\r\n    <div class="assigner">{{ \'tools.assinatura\' | translate }}</div>\r\n  </div>\r\n</div>\r\n');$templateCache.put("print/print.html",'<div class="print-content">\r\n  <div>\r\n    <h2>{{\'report.relatorios\' | translate}}</h2>\r\n    <div class="description">\r\n      {{\'report.selecioneConfiguracao\' | translate}}:\r\n    </div>\r\n    <md-radio-group ng-model="selectedType.name">\r\n      <md-radio-button ng-repeat="(typeId, type) in types" value="{{typeId}}">\r\n        {{type}}\r\n      </md-radio-button>\r\n    </md-radio-group>\r\n    <md-button\r\n      ng-disabled="!selectedType.name"\r\n      ng-click="print()"\r\n      class="md-raised md-accent"\r\n      >{{\'report.gerarRelatorio\' | translate}}</md-button\r\n    >\r\n  </div>\r\n</div>\r\n');$templateCache.put("print/printable.html",'<div>\r\n  <div class="header">\r\n    <div class="logo-print" layout-align="none stretch">\r\n      <md-icon\r\n        class="logo-print"\r\n        md-svg-src="img/toolbar.svg"\r\n        aria-label=""\r\n      ></md-icon>\r\n    </div>\r\n    <div layout="column">\r\n      <div class="form-item">\r\n        <label class="form-label">{{\'report.relatorio\' | translate}}:</label>\r\n        <label class="form-value">{{types[selectedType.name]}}</label>\r\n      </div>\r\n      <div class="form-item">\r\n        <label class="form-label"\r\n          >{{\'report.localInstalacao\' | translate}}:</label\r\n        >\r\n        <label class="form-value">{{sistema.local_instalacao}}</label>\r\n      </div>\r\n      <div class="form-item">\r\n        <label class="form-label"\r\n          >{{\'report.modeloCentral\' | translate}}:</label\r\n        >\r\n        <label class="form-value">{{sistema.modelo_central}}</label>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div>\r\n    <div flex ng-if="selectedType.name == \'loop\'" class="loop-content">\r\n      <div ng-repeat="(i, loop) in loops" ng-if="i > 0">\r\n        <div class="loop-name">{{\'report.laco\' | translate}} {{i}}</div>\r\n        <div layout-padding layout="column">\r\n          <div class="form-item">\r\n            <label class="form-label">{{\'report.ativado\' | translate}}</label>\r\n            <label class="form-value"\r\n              >{{loop.habilitado ? (\'report.sim\' | translate) : (\'report.nao\' |\r\n              translate)}}</label\r\n            >\r\n          </div>\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{\'report.dispositivos\' | translate}}:</label\r\n            >\r\n            <label class="form-value"\r\n              >{{(loop.dispositivos | toArray).length}} {{\'report.dispositivos\'\r\n              | translate}}(s)</label\r\n            >\r\n          </div>\r\n        </div>\r\n        <md-table-container>\r\n          <table md-table>\r\n            <thead md-head>\r\n              <tr md-row>\r\n                <th md-column><span>ID</span></th>\r\n                <th md-column><span>{{\'report.ativo\' | translate}}</span></th>\r\n                <th md-column><span>{{\'report.nome\' | translate}}</span></th>\r\n                <th md-column><span>{{\'report.zona\' | translate}}</span></th>\r\n                <th md-column><span>{{\'report.tipo\' | translate}}</span></th>\r\n                <th md-column ng-if="!centralModel.is1060">\r\n                  <span>{{\'report.subtipo\' | translate}}</span>\r\n                </th>\r\n                <th md-column ng-if="!centralModel.is1060">\r\n                  <span>{{\'report.modo\' | translate}}</span>\r\n                </th>\r\n                <th md-column ng-if="!centralModel.is1060">\r\n                  <span>{{\'report.supervisao\' | translate}}</span>\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody md-body>\r\n              <tr\r\n                class="item-table"\r\n                md-row\r\n                ng-repeat="(id, dispositivo) in loop.dispositivos | map: addMode | toArray | orderBy: \'endereco\'"\r\n              >\r\n                <td md-cell>{{dispositivo.endereco | numberFormat}}</td>\r\n                <td md-cell>{{!dispositivo.habilitado ? \'🚫\' : \'✔\'}}</td>\r\n                <td md-cell>{{dispositivo.nome}}</td>\r\n                <td md-cell>{{zones[dispositivo.zona].nome}}</td>\r\n                <td md-cell>\r\n                  {{(\'config.\' + CONFIG.tipos[dispositivo.tipo].nome| translate)\r\n                  || \'-\'}}\r\n                </td>\r\n                <td md-cell ng-if="!centralModel.is1060">\r\n                  {{dispositivo.subtipo}} - {{subTipos[dispositivo.subtipo].nome\r\n                  ? (\'config.\' + subTipos[dispositivo.subtipo].nome | translate)\r\n                  : \'-\'}}\r\n                </td>\r\n                <td md-cell ng-if="!centralModel.is1060">\r\n                  {{dispositivo.modo}}\r\n                </td>\r\n                <td md-cell ng-if="!centralModel.is1060">\r\n                  {{dispositivo.supervisao ? (\'report.sim\' | translate) :\r\n                  (\'report.nao\' | translate)}}\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </md-table-container>\r\n      </div>\r\n    </div>\r\n\r\n    <div ng-if="selectedType.name == \'zone\'" class="loop-content">\r\n      <div ng-repeat="(id, zone) in zones">\r\n        <div class="loop-name">\r\n          {{\'report.zona\' | translate}} {{id | numberFormat}} - {{zone.nome}}\r\n        </div>\r\n        <div layout-padding layout="column">\r\n          <div class="form-item">\r\n            <label class="form-label">{{\'report.ativada\' | translate}}:</label>\r\n            <label class="form-value"\r\n              >{{zone.habilitado ? (\'report.sim\' | translate) : (\'report.nao\' |\r\n              translate)}}</label\r\n            >\r\n          </div>\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{\'report.dispositivos\' | translate}}:</label\r\n            >\r\n            <label class="form-value"\r\n              >{{zone.devices.length}} dispositivo(s)</label\r\n            >\r\n          </div>\r\n        </div>\r\n        <md-table-container>\r\n          <table md-table>\r\n            <thead md-head>\r\n              <tr md-row>\r\n                <th md-column><span>{{\'report.laco\' | translate}}</span></th>\r\n                <th md-column>\r\n                  <span>{{\'report.endereco\' | translate}}</span>\r\n                </th>\r\n                <th md-column><span>{{\'report.nome\' | translate}}</span></th>\r\n                <th md-column><span>{{\'report.ativo\' | translate}}</span></th>\r\n                <th md-column><span>{{\'report.tipo\' | translate}}</span></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody md-body>\r\n              <tr\r\n                class="item-table"\r\n                md-row\r\n                ng-repeat="dispositivo in zone.devices"\r\n              >\r\n                <td md-cell>\r\n                  {{dispositivo.laco == 0 ? \'-\' : dispositivo.laco}}\r\n                </td>\r\n                <td md-cell>\r\n                  {{dispositivo.laco == 0 ?\r\n                  CONFIG.dispositivos_locais[dispositivo.endereco].saida_local :\r\n                  (dispositivo.endereco | numberFormat)}}\r\n                </td>\r\n                <td md-cell>{{dispositivo.nome}}</td>\r\n                <td md-cell>\r\n                  <md-icon>{{!dispositivo.habilitado ? \'🚫\' : \'✔\'}}</md-icon>\r\n                </td>\r\n                <td md-cell>\r\n                  {{(\'config.\' + CONFIG.tipos[dispositivo.tipo].nome |\r\n                  translate) || \'-\'}}\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </md-table-container>\r\n      </div>\r\n    </div>\r\n\r\n    <div ng-if="selectedType.name == \'rule\'" class="loop-content">\r\n      <div ng-repeat="(id, rule) in rules | toArray | orderBy: \'modo\'">\r\n        <div class="loop-name">\r\n          {{\'report.regra\' | translate}} {{rule.id | numberFormat}} -\r\n          {{rule.nome}}\r\n        </div>\r\n        <div layout-padding layout="column">\r\n          <div class="form-item">\r\n            <label class="form-label">{{\'report.ativada\' | translate}}:</label>\r\n            <label class="form-value"\r\n              >{{rule.habilitado ? (\'report.sim\' | translate) : (\'report.nao\' |\r\n              translate)}}</label\r\n            >\r\n          </div>\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{\'report.itensEntradaSaida\' | translate}}:</label\r\n            >\r\n            <label class="form-value">{{rule.itens.length}} itens</label>\r\n          </div>\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{\'report.respondeBotaoBrigada\' | translate}}:</label\r\n            >\r\n            <label class="form-value"\r\n              >{{rule.brigada ? (\'report.sim\' | translate) : (\'report.nao\' |\r\n              translate)}}</label\r\n            >\r\n          </div>\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{\'report.respondeBotaoAlarme\' | translate}}:</label\r\n            >\r\n            <label class="form-value"\r\n              >{{rule.alarme ? (\'report.sim\' | translate) : (\'report.nao\' |\r\n              translate)}}</label\r\n            >\r\n          </div>\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{\'report.condicaoEntrada\' | translate}}:</label\r\n            >\r\n            <label class="form-value"\r\n              >{{rule.condicao_entrada == \'unica\' ? (\'report.unica\' | translate)\r\n              : (\'report.dupla\' | translate)}}</label\r\n            >\r\n          </div>\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{\'report.ativacaoSaida\' | translate}}:</label\r\n            >\r\n            <label class="form-value"\r\n              >{{rule.ativacao_saida == \'temporizada\' ? (\'report.temporizada\' |\r\n              translate) : (\'report.imediata\' |\r\n              translate)}}{{rule.ativacao_saida == \'temporizada\' ? \' - \' +\r\n              rule.temporizacao : \'\'}}</label\r\n            >\r\n          </div>\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{\'report.novaEntrada\' | translate}}:</label\r\n            >\r\n            <label class="form-value"\r\n              >{{rule.cancelavel ? (\'report.sim\' | translate) : (\'report.nao\' |\r\n              translate)}}</label\r\n            >\r\n          </div>\r\n        </div>\r\n\r\n        <md-table-container>\r\n          <table md-table>\r\n            <thead md-head>\r\n              <tr md-row>\r\n                <th md-column><span>{{\'report.modo\' | translate}}</span></th>\r\n                <th md-column><span>{{\'report.tipo\' | translate}}</span></th>\r\n                <th md-column><span>{{\'report.nome\' | translate}}</span></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody md-body>\r\n              <tr\r\n                class="item-table rule-itens"\r\n                md-row\r\n                ng-repeat="item in rule.itens"\r\n              >\r\n                <td md-cell>\r\n                  {{item.modo == \'saida\' ? (\'report.saida\' | translate) :\r\n                  (\'report.entrada\' | translate) }}\r\n                </td>\r\n                <td md-cell>{{item.tipo}}</td>\r\n                <td md-cell>\r\n                  {{(item.endereco || item.id) | numberFormat}} - {{item.nome}}\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </md-table-container>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="footer-and-date" layout="row" flex layout-align="center center">\r\n    <div class="date" flex>\r\n      {{\'report.relatorioGerado\' | translate}} {{today | date:\'dd/MM/yyyy\'}}\r\n      {{today | date:\'HH\'}}h{{today | date:\'mm\'}}min.\r\n    </div>\r\n  </div>\r\n  <div layout="row" flex layout-align="center center">\r\n    <div class="name">{{\'report.nomeResponsavel\' | translate}}</div>\r\n    <div class="assigner">{{\'report.assinatura\' | translate}}</div>\r\n  </div>\r\n</div>\r\n');$templateCache.put("remote/getPassword.html",'<md-dialog\r\n  aria-label="Mango (Fruit)"\r\n  class="remote-password-content"\r\n  dw-loading="getPassword"\r\n>\r\n  <md-dialog-content>\r\n    <div>\r\n      {{ \'remote.insiraSenha\' | translate }}\r\n      <b\r\n        >{{ searchType === \'gw521\' ? \'GW521\' : \'remote.nivel\' | translate }} {{\r\n        searchType !== \'gw521\' ? 4 : null }}</b\r\n      >\r\n      {{ \'remote.paraIniciar\' | translate }}:\r\n    </div>\r\n    <md-input-container>\r\n      <input\r\n        type="{{ !sistema.showPassword ? \'password\' : \'text\' }}"\r\n        focus="true"\r\n        name="password"\r\n        ng-model="password"\r\n        maxlength="checkPasswordLength()"\r\n        ng-trim="false"\r\n        class="md-accent"\r\n        ng-enter="tryConnection()"\r\n        style="font-size: 12px; width: calc(100% - 12px)"\r\n      />\r\n      <div class="messages">\r\n        <span class="password-length"\r\n          >{{password.length}} / {{checkPasswordLength()}}</span\r\n        >\r\n      </div>\r\n      <md-icon\r\n        ng-click="sistema.showPassword = !sistema.showPassword"\r\n        style="cursor: pointer"\r\n        >{{ sistema.showPassword ? \'visibility\' : \'visibility_off\' }}\r\n      </md-icon>\r\n    </md-input-container>\r\n    <div class="messages">\r\n      <div ng-show="remainingAttemptsExceeded" class="errors">\r\n        <span>Tentativas excedidas</span>\r\n        <span class="remainingAttemptsExceededTime"></span>\r\n      </div>\r\n      <div ng-if="passwordError && !remainingAttemptsExceeded" class="errors">\r\n        <span>{{ \'remote.senhaInvalida\' | translate }}</span>\r\n        <span>Tentativas restantes: {{ remainingAttempts }}</span>\r\n      </div>\r\n      <div ng-if="!passwordError && communicationError" class="errors">\r\n        {{ \'remote.falhaComunicacao\' | translate }}\r\n      </div>\r\n    </div>\r\n  </md-dialog-content>\r\n  <md-dialog-actions layout="row">\r\n    <md-button ng-click="close()">\r\n      {{ \'remote.cancelar\' | translate }}\r\n    </md-button>\r\n    <span flex></span>\r\n    <md-button\r\n      ng-click="!blockBtn && tryConnection()"\r\n      ng-disabled="blockBtn"\r\n      class="md-raised md-accent"\r\n      md-autofocus\r\n    >\r\n      {{ \'remote.conectar\' | translate }}\r\n    </md-button>\r\n  </md-dialog-actions>\r\n</md-dialog>\r\n');$templateCache.put("remote/remoteControl.html",'<md-dialog\r\n  aria-label="{{ \'remote.operacaoRemota\' | translate }}"\r\n  class="remote-content"\r\n  dw-loading="remote"\r\n  flex-md="100"\r\n>\r\n  <md-toolbar class="toolbar toolbar-remote">\r\n    <div class="md-toolbar-tools">\r\n      <div class="toolbar-title" layout="row" layout-align="center center">\r\n        <h2>{{ \'remote.operacaoRemota\' | translate }}</h2>\r\n      </div>\r\n      <div\r\n        class="toolbar-info-remote"\r\n        layout="row"\r\n        layout-align="space-around center"\r\n        flex\r\n      >\r\n        <div\r\n          ng-if="central.endereco"\r\n          class="central-info"\r\n          layout="row"\r\n          layout-align="center center"\r\n        >\r\n          <div class="name">{{ \'remote.central\' | translate }}</div>\r\n          <div class="number">{{central.endereco}}</div>\r\n        </div>\r\n        <div class="central-name" layout="row" layout-align="center center">\r\n          {{central.nome}}\r\n        </div>\r\n        <div class="info-icons" layout="row" layout-align="center center">\r\n          <md-icon\r\n            class="red"\r\n            ng-if="leds.fonteFalha === false"\r\n            md-svg-src="img/remote/bateria.svg"\r\n            aria-label="{{ \'remote.fonte\' | translate }}"\r\n          ></md-icon>\r\n          <md-icon\r\n            class="green"\r\n            ng-if="leds.fonteFalha === true"\r\n            md-svg-src="img/remote/tomada.svg"\r\n            aria-label="{{ \'remote.bateria\' | translate }}"\r\n          ></md-icon>\r\n        </div>\r\n        <div class="central-status" layout="row" layout-align="center center">\r\n          <div class="status-indicator {{central.online}}"></div>\r\n          <div class="status-name">\r\n            {{central.online ? (\'remote.online\' | translate) : (\'remote.offline\'\r\n            | translate)}}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <md-button class="md-icon-button" ng-click="close()">\r\n        <md-icon aria-label="Close dialog">close</md-icon>\r\n      </md-button>\r\n    </div>\r\n  </md-toolbar>\r\n\r\n  <md-dialog-content>\r\n    <div class="md-dialog-content" layout="row" layout-align="center start">\r\n      <div class="margin-column">\r\n        <div\r\n          layout="column"\r\n          layout-align="start center"\r\n          class="display {{centralMode}}"\r\n        >\r\n          <div\r\n            style="height: 100%"\r\n            ng-if="centralMode === \'normal\'"\r\n            layout="row"\r\n            layout-align="center center"\r\n          >\r\n            <div class="icon-mode {{centralMode}}" layout="column">\r\n              <md-icon md-svg-src="img/remote/{{centralMode}}.svg"></md-icon>\r\n            </div>\r\n            <div layout="column">\r\n              <div layout="row" class="central-mode {{centralMode}}">\r\n                {{ \'remote.operacaoNormal\' | translate }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div\r\n            style="height: 100%"\r\n            ng-if="centralMode !== \'normal\'"\r\n            layout="row"\r\n            layout-align="start center"\r\n          >\r\n            <div class="icon-mode {{centralMode}}" layout="column">\r\n              <md-icon md-svg-src="img/remote/{{centralMode}}.svg"></md-icon>\r\n            </div>\r\n            <div layout="column">\r\n              <div layout="row" class="central-mode {{centralMode}}">\r\n                {{ \'remote.sistemaEm\' | translate }}\r\n                {{logType[centralMode].toUpperCase()}}\r\n              </div>\r\n              <div ng-if="!regrasTemporizando.length">\r\n                <div ng-if="eventos[centralMode][0].origem" class="device-zone">\r\n                  {{ \'remote.central\' | translate }}\r\n                  {{eventos[centralMode][0].origem}}\r\n                </div>\r\n                <div ng-if="eventos[centralMode][0].zona" class="device-zone">\r\n                  Z{{eventos[centralMode][0].zona | numberFormat}} -\r\n                  {{eventos[centralMode][0].nome_zona}}\r\n                </div>\r\n                <div class="device-type">\r\n                  <span ng-if="eventos[centralMode][0].laco"\r\n                    >L{{eventos[centralMode][0].laco}}D{{eventos[centralMode][0].endereco\r\n                    | numberFormat}} - </span\r\n                  >{{eventos[centralMode][0].nome_dispositivo}}\r\n                </div>\r\n                <div\r\n                  ng-if="tiposEvento[centralMode][eventos[centralMode][0].tipo] !== undefined"\r\n                  class="device-name"\r\n                >\r\n                  {{\'config.\'+\r\n                  tiposEvento[centralMode][eventos[centralMode][0].tipo] |\r\n                  translate}}\r\n                </div>\r\n              </div>\r\n              <div ng-if="regrasTemporizando.length">\r\n                <div>{{eventos[centralMode][0].nome_dispositivo}}</div>\r\n                <div class="rule-timing">\r\n                  {{regrasTemporizando[0].nome}} -\r\n                  {{regrasTemporizando[0].dateToFire | date: \'mm:ss\'}}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="status-box" layout="row" layout-align="start center">\r\n          <div class="info-label" layout="row" layout-align="center center">\r\n            {{ \'remote.estadoAtual\' | translate }}\r\n          </div>\r\n          <div\r\n            ng-click="changeEventsVisualization(\'events\', \'alarme\')"\r\n            class="status-div"\r\n            layout="column"\r\n            layout-align="center center"\r\n          >\r\n            <div class="counter">{{contadoresEventos.alarme || 0}}</div>\r\n            <div class="label">{{ \'remote.alarme\' | translate }}</div>\r\n          </div>\r\n          <div\r\n            ng-click="changeEventsVisualization(\'events\', \'falha\')"\r\n            class="status-div"\r\n            layout="column"\r\n            layout-align="center center"\r\n          >\r\n            <div class="counter">{{contadoresEventos.falha || 0}}</div>\r\n            <div class="label">{{ \'remote.falha\' | translate }}</div>\r\n          </div>\r\n          <div\r\n            ng-click="getBlocksCounters()"\r\n            class="status-div"\r\n            layout="column"\r\n            layout-align="center center"\r\n          >\r\n            <div class="counter">{{contadoresEventos.bloqueio || 0}}</div>\r\n            <div class="label">{{ \'remote.bloqueio\' | translate }}</div>\r\n          </div>\r\n          <div\r\n            ng-click="changeEventsVisualization(\'events\', \'supervisao\')"\r\n            class="status-div"\r\n            layout="column"\r\n            layout-align="center center"\r\n          >\r\n            <div class="counter">{{contadoresEventos.supervisao || 0}}</div>\r\n            <div class="label">{{ \'remote.supervisao\' | translate }}</div>\r\n          </div>\r\n        </div>\r\n        <div class="status-box" layout="row" layout-align="start center">\r\n          <div class="info-label" layout="row" layout-align="center center">\r\n            {{ \'remote.acoesGerais\' | translate }}\r\n          </div>\r\n          <div class="buttons-box" layout="row" layout-align="start center">\r\n            <md-button\r\n              ng-click="getOutputCounters()"\r\n              class="md-raised button-action"\r\n              >{{ \'remote.ativarSaida\' | translate }}</md-button\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class="status-box" layout="row" layout-align="start center">\r\n          <div class="info-label" layout="row" layout-align="center center">\r\n            {{ \'remote.registroEventos\' | translate }}\r\n          </div>\r\n          <div class="buttons-box" layout="row" layout-align="start center">\r\n            <md-button\r\n              ng-click="getLogs(\'operacao\')"\r\n              class="md-raised button-action"\r\n              >{{ \'remote.operacao\' | translate }}</md-button\r\n            >\r\n            <md-button\r\n              ng-click="getLogs(\'alarme\')"\r\n              class="md-raised button-action"\r\n              >{{ \'remote.alarme\' | translate }}</md-button\r\n            >\r\n            <md-button\r\n              ng-click="getLogs(\'falha\')"\r\n              class="md-raised button-action"\r\n              >{{ \'remote.falha\' | translate }}</md-button\r\n            >\r\n            <md-button\r\n              ng-click="getLogs(\'supervisao\')"\r\n              class="md-raised button-action"\r\n              >{{ \'remote.supervisao\' | translate }}</md-button\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class="status-box" layout="row" layout-align="space-around center">\r\n          <div layout="row" layout-align="center center">\r\n            <md-button\r\n              class="big-button md-raised"\r\n              ng-class="{ \'led-yelow\': leds.centralSilenciada }"\r\n              ng-click="buttonCommand(buttons.TipoBotaoSilenciarCentral)"\r\n            >\r\n              <md-icon\r\n                ng-if="!leds.sireneContinua && !leds.sirenePulsada && !leds.centralSilenciada"\r\n                md-svg-src="img/remote/btn-silenciar.svg"\r\n                aria-label="SILENCIAR BIP INTERNO"\r\n              ></md-icon>\r\n              <md-icon\r\n                ng-if="leds.sireneContinua || leds.sirenePulsada"\r\n                ng-class="{ \'red\': leds.sireneContinua, \'blink-red\': leds.sirenePulsada }"\r\n                md-svg-src="img/remote/bip.svg"\r\n                aria-label="SOM"\r\n              ></md-icon>\r\n              <md-icon\r\n                ng-if="!leds.sireneContinua && !leds.sirenePulsada && leds.centralSilenciada"\r\n                md-svg-src="img/remote/bip-silenciado.svg"\r\n                aria-label="SOM"\r\n              ></md-icon>\r\n              <div class="label">{{ \'remote.silenciarBip\' | translate }}</div>\r\n            </md-button>\r\n\r\n            <md-button\r\n              ng-click="actionOnRule(buttons.TipoBotaoAdiarTemporizacaoRegra, 250)"\r\n              class="big-button md-raised"\r\n              ng-class="{ \'led-yelow\': leds.regrasTemporizando }"\r\n            >\r\n              <md-icon\r\n                md-svg-src="img/remote/btn-adiar.svg"\r\n                aria-label="ADIAR SIRENE"\r\n              ></md-icon>\r\n              <div class="label">{{ \'remote.adiarSirene\' | translate }}</div>\r\n            </md-button>\r\n\r\n            <md-button\r\n              class="big-button md-raised"\r\n              ng-class="{ \'led-red\': leds.alarmeGeral }"\r\n              ng-click="buttonCommand(buttons.TipoBotaoAlarmeGeral)"\r\n            >\r\n              <md-icon\r\n                md-svg-src="img/remote/btn-alarme.svg"\r\n                aria-label="ALARME GERAL"\r\n              ></md-icon>\r\n              <div class="label">{{ \'remote.alarmeGeral\' | translate }}</div>\r\n            </md-button>\r\n          </div>\r\n\r\n          <div class="info-box" layout="column" layout-align="center start">\r\n            <div class="line" layout="row" layout-align="start center">\r\n              <div class="label">{{ \'remote.modelo\' | translate }}:</div>\r\n              <div class="value">{{central.modelo}}</div>\r\n            </div>\r\n            <div class="line" layout="row" layout-align="start center">\r\n              <div class="label">IP:</div>\r\n              <div class="value">{{central.ip}}</div>\r\n            </div>\r\n            <div class="line" layout="row" layout-align="start center">\r\n              <div class="label">MAC:</div>\r\n              <div class="value">{{central.mac}}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div layout="column" layout-align="start start" class="margin-column">\r\n        <div class="date-box" layout="column" layout-align="center start">\r\n          <div class="hour" layout="row" layout-align="center center">\r\n            <div>\r\n              <md-icon>date_range</md-icon>\r\n            </div>\r\n            <div>{{central.utc | date: \'dd/MM/yy\'}}</div>\r\n          </div>\r\n          <div class="time" layout="row" layout-align="center center">\r\n            <div>\r\n              <md-icon>alarm</md-icon>\r\n            </div>\r\n            <div>{{central.utc | date: \'HH:mm:ss\'}}</div>\r\n          </div>\r\n        </div>\r\n        <div class="buttons-right" layout="column" layout-align="center center">\r\n          <md-button\r\n            class="right-button md-raised"\r\n            ng-class="{ \'led-yelow-blink\': leds.lacoOperando }"\r\n            ng-click="centralRestart()"\r\n          >\r\n            {{ \'remote.reiniciarCentral\' | translate }}\r\n          </md-button>\r\n          <md-button\r\n            class="right-button md-raised"\r\n            ng-class="{ \'led-yelow\': contadoresEventos.bloqueio > 0 }"\r\n            ng-click="getBlocksCounters()"\r\n          >\r\n            {{ \'remote.bloqueios\' | translate }}\r\n          </md-button>\r\n          <md-button\r\n            class="right-button md-raised"\r\n            ng-class="{ \'led-yelow\': leds.sireneSilenciada }"\r\n            ng-click="buttonCommand(buttons.TipoBotaoSilenciarSirene)"\r\n          >\r\n            {{ \'remote.silenciarSirene\' | translate }}\r\n          </md-button>\r\n          <md-button\r\n            class="right-button md-raised"\r\n            ng-class="{ \'led-red\': leds.sireneBrigada }"\r\n            ng-click="buttonCommand(buttons.TipoBotaoReunirBrigada)"\r\n          >\r\n            {{ \'remote.sireneDeBrigada\' | translate }}\r\n          </md-button>\r\n        </div>\r\n      </div>\r\n      <div layout="column" layout-align="center start" class="margin-column">\r\n        <div layout="row" class="box-visualization">\r\n          <div\r\n            flex\r\n            ng-if="activeVisualization === \'none\'"\r\n            layout="column"\r\n            layout-align="center center"\r\n            class="visualization-info"\r\n          >\r\n            <div>\r\n              <md-icon aria-label="Close dialog">list</md-icon>\r\n            </div>\r\n            <div class="info-title">\r\n              {{ \'remote.areaVisualizacao\' | translate }}\r\n            </div>\r\n            <div class="info-description">\r\n              {{ \'remote.selecioneAcao\' | translate }}\r\n            </div>\r\n          </div>\r\n\r\n          <div flex ng-if="activeVisualization === \'events\'">\r\n            <div\r\n              layout="row"\r\n              layout-align="space-around none"\r\n              class="title-section"\r\n            >\r\n              <div flex layout="row" class="title">\r\n                {{ \'remote.eventosDe\' | translate }}\r\n                <b style="margin-left: 6px"\r\n                  >{{logType[selectedTypeEventVisualization].toUpperCase()}}</b\r\n                >\r\n                <md-progress-circular\r\n                  ng-if="waitingEvents"\r\n                  class="md-accent"\r\n                  style="margin-left: 10px"\r\n                  md-diameter="20px"\r\n                  md-mode="indeterminate"\r\n                ></md-progress-circular>\r\n              </div>\r\n              <md-button class="md-icon-button" ng-click="clearVisualization()">\r\n                <md-icon aria-label="Close dialog">close</md-icon>\r\n              </md-button>\r\n            </div>\r\n            <div class="scroll-items">\r\n              <div\r\n                ng-if="eventos[selectedTypeEventVisualization].length === 0 && !loadingEvents"\r\n                class="empty-events"\r\n              >\r\n                {{ \'remote.nenhumEvento\' | translate }}.\r\n              </div>\r\n              <div\r\n                ng-repeat="evento in eventos[selectedTypeEventVisualization]"\r\n                class="event-item"\r\n                layout="row"\r\n                layout-align="space-between none"\r\n              >\r\n                <div layout="column" layout-align="center center" class="index">\r\n                  {{$index + 1}}\r\n                </div>\r\n                <div\r\n                  flex\r\n                  layout="column"\r\n                  layout-align="center start"\r\n                  class="device-name"\r\n                >\r\n                  <div>\r\n                    <span ng-if="evento.laco"\r\n                      >L{{evento.laco}}D{{evento.endereco | numberFormat}} - </span\r\n                    ><b>{{evento.nome_dispositivo}}</b>\r\n                  </div>\r\n                  <div ng-if="evento.zona">\r\n                    Z{{evento.zona | numberFormat}} - {{evento.nome_zona}}\r\n                  </div>\r\n                  <div ng-if="evento.origem">\r\n                    {{ \'remote.central\' | translate }} {{evento.origem}}\r\n                  </div>\r\n                  <div\r\n                    ng-if="tiposEvento[selectedTypeEventVisualization][evento.tipo] !== undefined"\r\n                  >\r\n                    {{\'config.\'+\r\n                    tiposEvento[selectedTypeEventVisualization][evento.tipo] |\r\n                    translate}}\r\n                  </div>\r\n                </div>\r\n                <div layout="column" layout-align="center center" class="date">\r\n                  <div>{{evento.data}}</div>\r\n                  <div>{{evento.hora}}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div flex ng-if="activeVisualization === \'logs\'">\r\n            <div\r\n              layout="row"\r\n              layout-align="space-around none"\r\n              class="title-section"\r\n            >\r\n              <div flex layout="row" class="title">\r\n                {{ \'remote.regEventos\' | translate }}\r\n                <b style="margin: 0 5px"\r\n                  >{{logType[selectedTypeEventVisualization].toUpperCase()}}</b\r\n                >\r\n                <span ng-if="contadoresLogs[selectedTypeEventVisualization]"\r\n                  >({{logs[selectedTypeEventVisualization].length}}/<b>{{contadoresLogs[selectedTypeEventVisualization]}}</b>)</span\r\n                >\r\n                <md-progress-circular\r\n                  ng-if="waitingEvents"\r\n                  class="md-accent"\r\n                  style="margin-left: 10px"\r\n                  md-diameter="20px"\r\n                  md-mode="indeterminate"\r\n                ></md-progress-circular>\r\n              </div>\r\n              <md-button class="md-icon-button" ng-click="clearVisualization()">\r\n                <md-icon aria-label="Close dialog">close</md-icon>\r\n              </md-button>\r\n            </div>\r\n            <div class="scroll-items">\r\n              <div\r\n                ng-if="logs[selectedTypeEventVisualization].length === 0 && !loadingEvents"\r\n                class="empty-events"\r\n              >\r\n                {{ \'remote.nenhumregistro\' | translate }}.\r\n              </div>\r\n              <div\r\n                ng-repeat="log in logs[selectedTypeEventVisualization]"\r\n                class="event-item"\r\n                layout="row"\r\n                layout-align="space-between none"\r\n              >\r\n                <div layout="column" layout-align="center center" class="index">\r\n                  {{$index + 1}}\r\n                </div>\r\n                <div\r\n                  flex\r\n                  layout="column"\r\n                  layout-align="center start"\r\n                  class="device-name"\r\n                >\r\n                  <div>\r\n                    <b\r\n                      >{{log.primeiro_evento ? \'*\' : \'\'}}<span ng-if="log.laco"\r\n                        >L{{log.laco}}D{{log.endereco | numberFormat}} - </span\r\n                      >{{log.nome_dispositivo}}</b\r\n                    >\r\n                  </div>\r\n                  <div\r\n                    ng-if="tiposEvento[selectedTypeEventVisualization][log.tipo] !== undefined"\r\n                  >\r\n                    {{\'config.\'+\r\n                    tiposEvento[selectedTypeEventVisualization][log.tipo] |\r\n                    translate}}\r\n                  </div>\r\n                  <div ng-if="log.zona">\r\n                    Z{{log.zona | numberFormat}} - {{log.nome_zona}}\r\n                  </div>\r\n                  <div\r\n                    ng-if="log.origem && log.origem !== 0 && log.origem !== 30"\r\n                  >\r\n                    {{ \'remote.central\' | translate }} {{log.origem}}\r\n                  </div>\r\n                  <div ng-if="log.origem && log.origem === 30">\r\n                    {{ \'remote.opRemotaProgramador\' | translate }}\r\n                  </div>\r\n                </div>\r\n                <div layout="column" layout-align="center center" class="date">\r\n                  <div>{{log.data}}</div>\r\n                  <div>{{log.hora}}</div>\r\n                </div>\r\n              </div>\r\n              <div\r\n                ng-if="logs[selectedTypeEventVisualization].length > 9 && logs[selectedTypeEventVisualization].length < contadoresLogs[selectedTypeEventVisualization]"\r\n                layout="row"\r\n                layout-align="center center"\r\n                class="get-more-btn"\r\n              >\r\n                <md-button\r\n                  ng-click="getLogs(selectedTypeEventVisualization, true)"\r\n                  class="md-raised button-action md-icon-button"\r\n                >\r\n                  <md-icon aria-label="Close dialog">add</md-icon>\r\n                </md-button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div flex ng-if="activeVisualization === \'rules\'">\r\n            <div\r\n              layout="row"\r\n              layout-align="space-around none"\r\n              class="title-section"\r\n            >\r\n              <div flex class="title">\r\n                {{ \'remote.regrasTemporizando\' | translate }}\r\n                <b>({{regrasTemporizando.length}})</b>\r\n              </div>\r\n              <md-button class="md-icon-button" ng-click="clearVisualization()">\r\n                <md-icon aria-label="Close dialog">close</md-icon>\r\n              </md-button>\r\n            </div>\r\n            <div class="scroll-items">\r\n              <div layout="row" layout-align="center center">\r\n                <md-button\r\n                  ng-click="actionOnRule(buttons.TipoBotaoAdiarTemporizacaoRegra, 250)"\r\n                  class="md-raised button-action"\r\n                >\r\n                  {{ \'remote.adiarTodas\' | translate }}\r\n                </md-button>\r\n                <md-button\r\n                  ng-click="actionOnRule(buttons.TipoBotaoDispararRegraTemporizando, 250)"\r\n                  class="md-raised button-action"\r\n                >\r\n                  {{ \'remote.dispararTodas\' | translate }}\r\n                </md-button>\r\n              </div>\r\n              <div\r\n                ng-repeat="rule in regrasTemporizando"\r\n                class="event-item"\r\n                layout="row"\r\n                layout-align="space-between none"\r\n              >\r\n                <div layout="column" layout-align="center center" class="index">\r\n                  {{$index + 1}}\r\n                </div>\r\n                <div\r\n                  flex\r\n                  layout="column"\r\n                  layout-align="center start"\r\n                  class="device-name"\r\n                >\r\n                  <div><b>{{rule.nome}}</b></div>\r\n                </div>\r\n                <div\r\n                  layout="column"\r\n                  layout-align="center center"\r\n                  class="date-rule-timing"\r\n                  ng-class="{ red: rule.finishing }"\r\n                >\r\n                  <div>{{rule.dateToFire | date: \'mm:ss\'}}</div>\r\n                </div>\r\n                <div\r\n                  layout="row"\r\n                  layout-align="center center"\r\n                  class="rule-actions"\r\n                >\r\n                  <md-button\r\n                    ng-click="actionOnRule(buttons.TipoBotaoAdiarTemporizacaoRegra, rule.endereco)"\r\n                    class="md-raised button-action md-icon-button"\r\n                  >\r\n                    <md-icon aria-label="Close dialog">replay_10</md-icon>\r\n                  </md-button>\r\n                  <md-button\r\n                    ng-click="actionOnRule(buttons.TipoBotaoDispararRegraTemporizando, rule.endereco)"\r\n                    class="md-raised button-action md-icon-button"\r\n                  >\r\n                    <md-icon aria-label="Close dialog">directions_run</md-icon>\r\n                  </md-button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            flex\r\n            ng-if="activeVisualization === \'blocks\' || activeVisualization === \'outputs\'"\r\n          >\r\n            <div\r\n              layout="row"\r\n              layout-align="space-around none"\r\n              class="title-section"\r\n            >\r\n              <md-button\r\n                ng-if="selectedSubMenu.visualization"\r\n                class="md-icon-button"\r\n                ng-click="goBackVisualization()"\r\n              >\r\n                <md-icon aria-label="Close dialog">arrow_back</md-icon>\r\n              </md-button>\r\n              <div flex class="title">\r\n                {{activeVisualization === \'outputs\' ? (\'remote.ativarSaidas\' |\r\n                translate) : (\'remote.bloqueios\' | translate)}}<b\r\n                  ng-if="selectedSubMenu.visualization"\r\n                >\r\n                  -\r\n                  {{list[activeVisualization][selectedSubMenu.visualization].name}}</b\r\n                >\r\n              </div>\r\n              <md-progress-circular\r\n                ng-if="waitingType"\r\n                class="md-accent"\r\n                style="margin-left: 10px"\r\n                md-diameter="20px"\r\n                md-mode="indeterminate"\r\n              ></md-progress-circular>\r\n              <md-button class="md-icon-button" ng-click="clearVisualization()">\r\n                <md-icon aria-label="Close dialog">close</md-icon>\r\n              </md-button>\r\n            </div>\r\n            <div\r\n              ng-if="selectedSubMenu.visualization"\r\n              layout="row"\r\n              layout-align="space-between center"\r\n            >\r\n              <md-input-container\r\n                class="loop-select"\r\n                ng-if="selectedSubMenu.visualization === \'dispositivo\' || selectedSubMenu.visualization === \'saida\' || selectedSubMenu.visualization === \'sirene\' ||  selectedSubMenu.visualization === \'atuador\'"\r\n              >\r\n                <md-select\r\n                  ng-disabled="waitingType !== undefined"\r\n                  name="tipo"\r\n                  ng-model="selectedSubMenu.loop"\r\n                  aria-label="Laço"\r\n                >\r\n                  <md-option\r\n                    ng-repeat="loop in loops[selectedSubMenu.visualization]"\r\n                    ng-value="loop"\r\n                  >\r\n                    {{ \'remote.lacoUpper\' | translate }} {{loop === 0 ?\r\n                    (\'remote.local\' | translate) : loop}}\r\n                  </md-option>\r\n                </md-select>\r\n              </md-input-container>\r\n              <md-tabs\r\n                ng-if="selectedSubMenu.visualization !== \'laco\'"\r\n                md-center-tabs\r\n                md-autoselect="false"\r\n              >\r\n                <md-tab\r\n                  ng-disabled="waitingType !== undefined"\r\n                  label="{{activeVisualization === \'outputs\' ? (\'remote.ativos\' | translate) : (\'remote.bloqueados\' | translate)}}"\r\n                  md-on-select="getBlocks(\'lock\')"\r\n                >\r\n                </md-tab>\r\n                <md-tab\r\n                  ng-disabled="waitingType !== undefined"\r\n                  label="{{ \'remote.todosUpper\' | translate }}"\r\n                  md-on-select="getBlocks(\'all\')"\r\n                >\r\n                </md-tab>\r\n              </md-tabs>\r\n            </div>\r\n            <div\r\n              class="scroll-items"\r\n              ng-class="{\'rules-view\': selectedSubMenu.visualization !== undefined }"\r\n            >\r\n              <div\r\n                ng-if="!selectedSubMenu.visualization"\r\n                ng-repeat="(key, type) in list[activeVisualization]"\r\n                class="selectable-item"\r\n                layout="row"\r\n                layout-align="space-between none"\r\n                ng-click="changeBlocksVisualization(key)"\r\n              >\r\n                <div\r\n                  flex\r\n                  layout="column"\r\n                  layout-align="center start"\r\n                  class="device-name"\r\n                >\r\n                  <div><b>{{type.name}}</b></div>\r\n                </div>\r\n                <div layout="column" layout-align="center center" class="index">\r\n                  {{contadores[activeVisualization][key] || 0}}\r\n                </div>\r\n              </div>\r\n              <div\r\n                ng-if="selectedSubMenu.visualization && selectedBlocksTabVisualization === \'all\' && selectedSubMenu.visualization !== \'laco\' && !isListEmpty()"\r\n                class="checkbox-item"\r\n                layout="row"\r\n                layout-align="space-between none"\r\n              >\r\n                <div\r\n                  layout="column"\r\n                  layout-align="center center"\r\n                  class="index"\r\n                ></div>\r\n                <div\r\n                  flex\r\n                  layout="column"\r\n                  layout-align="center start"\r\n                  class="device-name"\r\n                >\r\n                  <div><b>{{ \'remote.todosUpper\' | translate }}</b></div>\r\n                </div>\r\n                <div layout="column" layout-align="center center" class="index">\r\n                  <md-checkbox\r\n                    ng-model="list[activeVisualization][selectedSubMenu.visualization].todos"\r\n                    ng-change="changeCheckBox(\'all\')"\r\n                    aria-label="Bloquear"\r\n                  ></md-checkbox>\r\n                </div>\r\n              </div>\r\n              <div\r\n                ng-if="selectedSubMenu.visualization"\r\n                ng-repeat="(key, type) in list[activeVisualization][selectedSubMenu.visualization].items"\r\n                class="checkbox-item"\r\n                layout="row"\r\n                layout-align="space-between none"\r\n              >\r\n                <div layout="column" layout-align="center center" class="index">\r\n                  {{$index + 1}}\r\n                </div>\r\n                <div\r\n                  flex\r\n                  layout="column"\r\n                  layout-align="center start"\r\n                  class="device-name"\r\n                >\r\n                  <div>\r\n                    <b ng-if="selectedSubMenu.loop !== 0"\r\n                      >D{{type.endereco | numberFormat}} - </b\r\n                    ><b>{{type.nome}}</b>\r\n                  </div>\r\n                </div>\r\n                <div layout="row" layout-align="center center" class="index">\r\n                  <md-icon\r\n                    ng-if="activeVisualization === \'outputs\' && type.bloqueado"\r\n                    >lock</md-icon\r\n                  >\r\n                  <md-checkbox\r\n                    ng-if="activeVisualization === \'outputs\' && !type.bloqueado"\r\n                    ng-disabled="type.disabled"\r\n                    ng-model="type.ativo"\r\n                    ng-change="changeCheckBox(type)"\r\n                    aria-label="Bloquear"\r\n                  ></md-checkbox>\r\n                  <md-checkbox\r\n                    ng-if="activeVisualization === \'blocks\'"\r\n                    ng-disabled="type.disabled"\r\n                    ng-model="type.bloqueado"\r\n                    ng-change="changeCheckBox(type)"\r\n                    aria-label="Ativar"\r\n                  ></md-checkbox>\r\n                </div>\r\n              </div>\r\n              <div ng-if="isListEmpty()" class="empty-events">\r\n                {{ \'remote.nenhum\' | translate }}.\r\n              </div>\r\n              <div\r\n                ng-if="changedItems.length"\r\n                layout="row"\r\n                layout-align="center center"\r\n                class="buttons-save"\r\n              >\r\n                <md-button\r\n                  ng-if="selectedSubMenu.visualization"\r\n                  class="md-raised md-light"\r\n                  ng-click="goBackVisualization()"\r\n                >\r\n                  <md-icon aria-label="Close dialog">arrow_back</md-icon>\r\n                  {{ \'remote.cancelar\' | translate }}\r\n                </md-button>\r\n                <md-button\r\n                  ng-disabled="waitingType !== undefined"\r\n                  ng-if="selectedSubMenu.visualization && activeVisualization === \'outputs\'"\r\n                  class="md-raised md-primary"\r\n                  ng-click="saveChangedOutputs()"\r\n                >\r\n                  {{ \'remote.salvar\' | translate }}\r\n                </md-button>\r\n                <md-button\r\n                  ng-disabled="waitingType !== undefined"\r\n                  ng-if="selectedSubMenu.visualization && activeVisualization === \'blocks\'"\r\n                  class="md-raised md-primary"\r\n                  ng-click="saveChangedBlocks()"\r\n                >\r\n                  {{ \'remote.salvar\' | translate }}\r\n                </md-button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </md-dialog-content>\r\n</md-dialog>\r\n');$templateCache.put("remote/remoteDiscovery.html",'<div class="remote-discovery">\r\n  <form name="form.remote" layout="column" autocomplete="off" novalidate>\r\n    <md-radio-group\r\n      style="padding: 1rem 0"\r\n      layout="row"\r\n      ng-model="form.searchType"\r\n      ng-change="form.searchType === \'cies\' ? form.type = \'discovery\' : form.type = \'ip\'"\r\n    >\r\n      <md-radio-button value="cies"\r\n        >{{ \'remote.buscarCIEs\' | translate }}</md-radio-button\r\n      >\r\n      <md-radio-button value="gw521">Buscar GW521</md-radio-button>\r\n    </md-radio-group>\r\n    <md-divider></md-divider>\r\n    <div\r\n      class="form-item"\r\n      layout="row"\r\n      layout-align="start center"\r\n      style="min-height: 100px"\r\n    >\r\n      <md-radio-group ng-model="form.type" ng-change="changeType()">\r\n        <md-radio-button ng-if="form.searchType === \'cies\'" value="discovery"\r\n          >{{ \'remote.buscarNaRede\' | translate }}</md-radio-button\r\n        >\r\n        <md-radio-button value="ip"\r\n          >{{ \'remote.conectarIp\' | translate }}</md-radio-button\r\n        >\r\n      </md-radio-group>\r\n      <div\r\n        ng-if="form.type === \'discovery\' && form.searchType === \'cies\'"\r\n        class="form-item"\r\n        layout="row"\r\n        layout-align="start center"\r\n      >\r\n        <md-button\r\n          ng-click="discovery()"\r\n          ng-disabled="searching || connectionMode() === \'usb\'"\r\n          class="md-raised md-accent"\r\n        >\r\n          {{ \'remote.buscar\' | translate }}\r\n        </md-button>\r\n      </div>\r\n    </div>\r\n\r\n    <div\r\n      layout="row"\r\n      layout-align="start start"\r\n      class="remote-discovery-content"\r\n    >\r\n      <div class="info" ng-if="noCentral && form.type === \'discovery\'">\r\n        {{ \'remote.nenhumaCentral\' | translate }}\r\n      </div>\r\n\r\n      <div class="info" ng-if="searching" layout="row">\r\n        <div class="msg">{{ \'remote.buscando\' | translate }}</div>\r\n        <md-progress-circular\r\n          class="md-accent"\r\n          md-diameter="20px"\r\n          md-mode="indeterminate"\r\n        ></md-progress-circular>\r\n      </div>\r\n\r\n      <div class="new-centrals-content">\r\n        <div\r\n          ng-if="form.type === \'ip\'"\r\n          class="form-item"\r\n          layout="row"\r\n          layout-align="start center"\r\n        >\r\n          <label class="form-label"\r\n            >{{ \'remote.enderecoIp\' | translate }}:</label\r\n          >\r\n          <div class="form-value-container">\r\n            <md-input-container>\r\n              <input\r\n                name="ip"\r\n                required\r\n                ng-model="form.ip"\r\n                type="text"\r\n                ng-pattern="/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/"\r\n                aria-label="Endereço IP"\r\n                ng-keypress="$event.keyCode === 13 && openRemoteByIp(\'connection\')"\r\n              />\r\n              <div ng-messages="form.remote.ip.$error" role="alert">\r\n                <div ng-message="pattern">\r\n                  {{ \'remote.enderecoIpInvalido\' | translate }}\r\n                </div>\r\n                <div ng-message="required">\r\n                  {{ \'remote.campoObrigatorio\' | translate }}\r\n                </div>\r\n              </div>\r\n            </md-input-container>\r\n          </div>\r\n          <md-button\r\n            ng-if="form.searchType === \'cies\'"\r\n            ng-disabled="connectionMode() === \'usb\' || form.remote.ip.$invalid"\r\n            ng-click="openRemoteByIp(\'remote\')"\r\n            class="md-accent remote-button"\r\n            aria-label="{{ \'remote.operar\' | translate }}"\r\n          >\r\n            <md-icon>exit_to_app</md-icon>\r\n            {{ \'remote.operar\' | translate }}\r\n          </md-button>\r\n          <md-button\r\n            ng-disabled="connectionMode() === \'usb\'|| form.remote.ip.$invalid"\r\n            ng-click="openRemoteByIp(\'connection\')"\r\n            class="remote-button"\r\n            aria-label="Operar remotamente"\r\n          >\r\n            <md-icon aria-label="{{ \'remote.configurar\' | translate }}"\r\n              >settings</md-icon\r\n            >\r\n            {{ \'remote.configurar\' | translate }}\r\n          </md-button>\r\n        </div>\r\n\r\n        <div\r\n          ng-if="form.type === \'discovery\'"\r\n          layout="column"\r\n          layout-align="start start"\r\n        >\r\n          <div ng-if="!(centrais | isEmpty)" class="label">\r\n            {{ \'remote.centraisEncontradas\' | translate }}:\r\n          </div>\r\n          <div class="row">\r\n            <md-card ng-repeat="central in centrais">\r\n              <md-card-content class="card">\r\n                <div layout="row">\r\n                  <div class="name">{{ \'remote.central\' | translate }}</div>\r\n                  <div class="number">{{central.endereco}}</div>\r\n                  <div class="ip">{{central.ip}}</div>\r\n                  <md-button\r\n                    ng-disabled="connectionMode() === \'usb\'"\r\n                    ng-click="openRemote(central, \'remote\')"\r\n                    class="md-accent remote-button"\r\n                    aria-label="{{ \'remote.operar\' | translate }}"\r\n                  >\r\n                    <md-icon>exit_to_app</md-icon>\r\n                    {{ \'remote.operar\' | translate }}\r\n                  </md-button>\r\n                  <md-button\r\n                    ng-disabled="connectionMode() === \'usb\'"\r\n                    ng-click="openRemote(central, \'connection\')"\r\n                    class="remote-button"\r\n                    aria-label="Operar remotamente"\r\n                  >\r\n                    <md-icon\r\n                      md-svg-src="img/remote_connection.svg"\r\n                      aria-label="{{ \'remote.configurar\' | translate }}"\r\n                    ></md-icon>\r\n                    {{ \'remote.configurar\' | translate }}\r\n                  </md-button>\r\n                </div>\r\n              </md-card-content>\r\n            </md-card>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n');$templateCache.put("project/changeModel-dialog.html",'<md-dialog class="dialog-change-model-content">\r\n  <md-dialog-content>\r\n    <div class="md-dialog-content">\r\n      <h2>{{\'project.selecioneNovo\' | translate}}</h2>\r\n      <div class="form-value" layout="row" layout-align="center center">\r\n        <div class="label">{{\'project.modelo\' | translate}}:</div>\r\n        <div>\r\n          <md-select required ng-model="formModel.modelo">\r\n            <md-option value="null">\r\n              {{\'project.selecione\' | translate}}\r\n            </md-option>\r\n            <md-option ng-repeat="model in modelos" value="{{model.id}}">\r\n              {{model.nome}}\r\n            </md-option>\r\n          </md-select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </md-dialog-content>\r\n  <md-dialog-actions layout="row" layout-align="center center">\r\n    <md-button\r\n      ng-click="cancel()"\r\n      class="md-raised"\r\n      aria-label="{{\'project.cancelar\' | translate}}"\r\n    >\r\n      {{\'project.cancelar\' | translate}}\r\n    </md-button>\r\n    <md-button\r\n      ng-disabled="formModel.modelo === \'null\'"\r\n      ng-click="save()"\r\n      class="md-raised md-accent"\r\n      >{{\'project.alterar\' | translate}}\r\n    </md-button>\r\n  </md-dialog-actions>\r\n</md-dialog>\r\n');$templateCache.put("project/newcentral-dialog.html",'<md-dialog flex="40">\r\n  <md-toolbar class="md-accent">\r\n    <div class="md-toolbar-tools">\r\n      <h2>{{\'project.novaCentral\' | translate}}</h2>\r\n      <span flex></span>\r\n    </div>\r\n  </md-toolbar>\r\n  <md-dialog-content class="developer-content">\r\n    <input\r\n      style="display: none"\r\n      id="file_import"\r\n      type="file"\r\n      input-file="file_import"\r\n      accept=".cie"\r\n    />\r\n    <md-card md-theme="default" class="card-newCentral">\r\n      <md-card-content layout="column" layout-align="center center">\r\n        <div>\r\n          <md-radio-group ng-model="formNew.option" layout="column">\r\n            <md-radio-button class="central-option" value="new">\r\n              {{\'project.novaCentralPadrao\' | translate}}\r\n            </md-radio-button>\r\n            <md-radio-button class="central-option" value="import">\r\n              {{\'project.importarArquivo\' | translate}}\r\n            </md-radio-button>\r\n            <md-radio-button\r\n              class="central-option"\r\n              value="network"\r\n              ng-disabled="connectionMode !== \'network\'"\r\n            >\r\n              {{\'project.buscarRede\' | translate}}\r\n            </md-radio-button>\r\n          </md-radio-group>\r\n        </div>\r\n\r\n        <div\r\n          ng-if="formNew.option === \'network\'"\r\n          layout="row"\r\n          layout-align="start center"\r\n          class="remote-discovery-content"\r\n        >\r\n          <div class="info" ng-if="networkNewCentrals | isEmpty">\r\n            {{\'project.nenhumaEncontrada\' | translate}}.\r\n          </div>\r\n          <div layout="column" layout-align="start start">\r\n            <div ng-if="!(networkNewCentrals | isEmpty)" class="label">\r\n              {{\'project.novasCentrais\' | translate}}:\r\n            </div>\r\n            <md-radio-group\r\n              ng-model="formNew.selectedCentralFromNetwork"\r\n              layout="column"\r\n            >\r\n              <md-radio-button\r\n                class="central-option"\r\n                value="{{central.endereco}}"\r\n                ng-repeat="central in networkNewCentrals"\r\n              >\r\n                <md-card>\r\n                  <md-card-content class="card">\r\n                    <div layout="row">\r\n                      <div class="name">{{\'project.central\' | translate}}</div>\r\n                      <div class="number">{{central.endereco}}</div>\r\n                    </div>\r\n                  </md-card-content>\r\n                </md-card>\r\n              </md-radio-button>\r\n            </md-radio-group>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          ng-if="formNew.option === \'import\'"\r\n          class="dump-file"\r\n          layout="column"\r\n          layout-padding\r\n        >\r\n          <md-button ng-click="openFileDialog()" class="md-accent"\r\n            >{{\'project.selecionarArquivo\' | translate}}</md-button\r\n          >\r\n          <div class="path">{{formNew.path}}</div>\r\n        </div>\r\n\r\n        <div\r\n          ng-if="formNew.option !== \'network\'"\r\n          class="form-value"\r\n          layout="row"\r\n          layout-align="center center"\r\n        >\r\n          <div class="label">{{\'project.endereco\' | translate}}:</div>\r\n          <div>\r\n            <md-select\r\n              required\r\n              ng-model="formNew.endereco"\r\n              aria-label=""\r\n              class="select-interconnection"\r\n            >\r\n              <md-option value="null">\r\n                {{\'project.selecione\' | translate}}\r\n              </md-option>\r\n              <md-option\r\n                ng-repeat="i in enderecosCentraisInterligacao"\r\n                value="{{i}}"\r\n              >\r\n                {{i}}\r\n              </md-option>\r\n            </md-select>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          ng-if="formNew.option === \'new\'"\r\n          class="form-value"\r\n          layout="row"\r\n          layout-align="center center"\r\n        >\r\n          <div class="label">{{\'project.modelo\' | translate}}:</div>\r\n          <div>\r\n            <md-select\r\n              required\r\n              ng-model="formNew.modelo"\r\n              aria-label=""\r\n              class="select-interconnection"\r\n            >\r\n              <md-option value="null">\r\n                {{\'project.selecione\' | translate}}\r\n              </md-option>\r\n              <md-option ng-repeat="model in modelos" value="{{model.id}}">\r\n                {{model.nome}}\r\n              </md-option>\r\n            </md-select>\r\n          </div>\r\n        </div>\r\n      </md-card-content>\r\n      <md-card-actions layout="row" layout-align="center center">\r\n        <md-button\r\n          ng-click="cancel()"\r\n          class="md-raised"\r\n          aria-label="Configurar"\r\n        >\r\n          {{\'project.cancelar\' | translate}}\r\n        </md-button>\r\n        <md-button\r\n          ng-disabled="(formNew.option === \'new\' && (formNew.endereco === \'null\' || formNew.modelo === \'null\')) || (formNew.option === \'import\' && (formNew.endereco === \'null\' || !formNew.path)) || (formNew.option === \'network\' && formNew.selectedCentralFromNetwork === \'null\')"\r\n          ng-click="save()"\r\n          class="md-raised md-accent"\r\n          >{{\'project.novaCentral\' | translate}}\r\n        </md-button>\r\n      </md-card-actions>\r\n    </md-card>\r\n  </md-dialog-content>\r\n</md-dialog>\r\n');$templateCache.put("project/project.html",'<md-toolbar class="toolbar md-accent">\r\n  <div flex layout-align="space-between center" class="md-toolbar-tools">\r\n    <div>\r\n      <div layout="row" layout-align="start center">\r\n        <md-icon\r\n          class="logo"\r\n          md-svg-src="img/toolbar.svg"\r\n          aria-label=""\r\n        ></md-icon>\r\n        <md-divider\r\n          style="width: 0.7px; height: 25px; border-color: white"\r\n        ></md-divider>\r\n        <div class="header-title">{{ \'global.header\' | translate }}</div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <md-button ng-click="help()" class="md-icon-button">\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'global.ajuda\' | translate }} (F1)</md-tooltip\r\n        >\r\n        <md-icon>help_outline</md-icon>\r\n      </md-button>\r\n      <locale-button></locale-button>\r\n    </div>\r\n  </div>\r\n</md-toolbar>\r\n\r\n<div\r\n  flex\r\n  layout="row"\r\n  layout-align="center stretch"\r\n  ng-init="init()"\r\n  dw-loading="list@app.loop"\r\n>\r\n  <div layout-padding flex layout="column" layout-align="space-between stretch">\r\n    <md-tabs>\r\n      <md-tab\r\n        md-on-select="selectTab(\'centrals\')"\r\n        label="{{ \'project.centrais\' | translate }}"\r\n      ></md-tab>\r\n      <md-tab\r\n        md-on-select="selectTab(\'interconnections\')"\r\n        label="{{ \'project.interligacoes\' | translate }}"\r\n      ></md-tab>\r\n      <md-tab\r\n        md-on-select="selectTab(\'globals\')"\r\n        label="{{ \'project.comandosGlobais\' | translate }}"\r\n      ></md-tab>\r\n      <md-tab\r\n        md-on-select="selectTab(\'logs\')"\r\n        label="{{ \'project.registroEventos\' | translate }}"\r\n      ></md-tab>\r\n    </md-tabs>\r\n\r\n    <md-content\r\n      ng-if="selectedTab === \'logs\'"\r\n      layout="column"\r\n      flex\r\n      class="project-logs-content"\r\n      layout-align="start center"\r\n      dw-loading="logs@app.project"\r\n    >\r\n      <registro-eventos\r\n        style="width: 100%; background-color: transparent"\r\n        is-project="true"\r\n        show-buttons="false"\r\n        flex\r\n        layout="row"\r\n        class="system-content logs-content"\r\n        layout-align="center stretch"\r\n      >\r\n      </registro-eventos>\r\n    </md-content>\r\n\r\n    <md-content\r\n      ng-if="selectedTab === \'globals\'"\r\n      layout="column"\r\n      flex\r\n      class="interconnection-content"\r\n      layout-wrap\r\n      dw-loading="globals@app.project"\r\n    >\r\n      <div flex layout="row" layout-align="start start">\r\n        <div md-whiteframe="2" class="interconnection-table">\r\n          <div layout="row" class="header-top" layout-align="center center">\r\n            <div\r\n              class="item-header top global-name"\r\n              ng-repeat="(indexRow, comando) in tiposComandosGlobais"\r\n              ng-class="{ hovered: hover.col === $index }"\r\n              layout="column"\r\n              layout-align="center center"\r\n            >\r\n              {{comando}}\r\n            </div>\r\n          </div>\r\n\r\n          <div layout="row" ng-repeat="(indexRow, row) in globals">\r\n            <div\r\n              class="item-header right header-left"\r\n              layout="column"\r\n              layout-align="center center"\r\n              ng-class="{ hovered: hover.row === indexRow }"\r\n            >\r\n              {{row[0].endereco}}\r\n            </div>\r\n\r\n            <div\r\n              class="item"\r\n              layout="column"\r\n              layout-align="space-around center"\r\n              ng-repeat="(indexCol, column) in row"\r\n              ng-mouseover="hoverIndexGlobals(indexRow, indexCol, column)"\r\n              ng-mouseleave="leaveIndex()"\r\n            >\r\n              <div class="monitora" ng-class="{ disabled: !column.enabled }">\r\n                <md-icon>check_box</md-icon>\r\n              </div>\r\n              <div\r\n                class="monitora"\r\n                ng-class="{ disabled: column.rules.length === 0, warning: column.rules.length > 0 }"\r\n              >\r\n                <md-tooltip\r\n                  md-delay="1000"\r\n                  class="tooltip-table globals"\r\n                  md-direction="botton"\r\n                >\r\n                  {{ \'project.esseComando\' | translate }}\r\n                  <br />{{ \'project.centrais\' | translate }}\r\n                  <b>{{column.rules.join(\', \')}}</b>\r\n                </md-tooltip>\r\n                <md-icon>warning</md-icon>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div layout="column" layout-align="start start" class="indicators">\r\n        <span class="title"><b>{{ \'project.legenda\' | translate }}:</b></span>\r\n        <div class="monitora">\r\n          <md-icon>check_box</md-icon>\r\n          <span>{{ \'project.enviaComando\' | translate }}</span>\r\n        </div>\r\n        <div class="monitora warning">\r\n          <md-icon>warning</md-icon>\r\n          <span>{{ \'project.naoTrata\' | translate }}</span>\r\n        </div>\r\n      </div>\r\n    </md-content>\r\n\r\n    <md-content\r\n      ng-if="selectedTab === \'interconnections\'"\r\n      layout="column"\r\n      flex\r\n      class="interconnection-content"\r\n      layout-wrap\r\n      dw-loading="interconnections@app.project"\r\n    >\r\n      <div layout="row" layout-align="center center" class="vizualization">\r\n        {{ \'project.modoVisualizacao\' | translate }}:\r\n        <md-radio-group ng-model="visualization.option" layout="row">\r\n          <md-radio-button class="central-option" value="table">\r\n            {{ \'project.modoVisualizacao\' | translate }}\r\n          </md-radio-button>\r\n          <md-radio-button class="central-option" value="graph">\r\n            {{ \'project.grafo\' | translate }}\r\n          </md-radio-button>\r\n        </md-radio-group>\r\n      </div>\r\n\r\n      <div flex layout-wrap class="content-scroll">\r\n        <div ng-if="visualization.option === \'graph\'" flex>\r\n          <vis-network data="graphData" options="graphOptions"></vis-network>\r\n        </div>\r\n\r\n        <div\r\n          flex\r\n          ng-if="visualization.option === \'table\'"\r\n          layout="row"\r\n          layout-align="start start"\r\n        >\r\n          <div md-whiteframe="2" class="interconnection-table">\r\n            <div\r\n              layout="row"\r\n              ng-repeat="(indexRow, row) in interconnections"\r\n              class="header-top"\r\n            >\r\n              <div\r\n                ng-if="indexRow === 0"\r\n                class="item-header top"\r\n                ng-class="{ hovered: hover.col === indexCol }"\r\n                layout="column"\r\n                layout-align="center center"\r\n                ng-repeat="(indexCol, column) in row"\r\n              >\r\n                {{column.to}}\r\n              </div>\r\n            </div>\r\n\r\n            <div layout="row" ng-repeat="(indexRow, row) in interconnections">\r\n              <div\r\n                class="item-header right header-left"\r\n                layout="column"\r\n                layout-align="center center"\r\n                ng-class="{ hovered: hover.row === indexRow }"\r\n              >\r\n                {{row[0].from}}\r\n              </div>\r\n\r\n              <div\r\n                class="item"\r\n                layout="column"\r\n                layout-align="space-around center"\r\n                ng-repeat="(indexCol, column) in row"\r\n                ng-mouseover="hoverIndex(indexRow, indexCol)"\r\n                ng-mouseleave="leaveIndex()"\r\n                ng-class="{ middle: indexCol === indexRow }"\r\n              >\r\n                <div\r\n                  ng-if="indexCol !== indexRow"\r\n                  class="monitora"\r\n                  ng-class="{ disabled: !column.monitora }"\r\n                >\r\n                  <md-tooltip\r\n                    class="tooltip-table"\r\n                    ng-if="column.monitora"\r\n                    md-delay="1000"\r\n                    md-direction="botton"\r\n                    >{{ \'project.aCentral\' | translate }}\r\n                    <b>{{column.from}}</b> {{ \'project.monitoraACentral\' |\r\n                    translate }} <b>{{column.to}}</b></md-tooltip\r\n                  >\r\n                  <md-icon>check_box</md-icon>\r\n                </div>\r\n                <div\r\n                  ng-if="indexCol !== indexRow"\r\n                  layout="row"\r\n                  layout-align="center center"\r\n                >\r\n                  <div\r\n                    class="ball alarme"\r\n                    ng-class="{ disabled: !column.alarme }"\r\n                  >\r\n                    A\r\n                    <md-tooltip\r\n                      class="tooltip-table"\r\n                      ng-if="column.alarme"\r\n                      md-delay="1000"\r\n                      md-direction="botton"\r\n                      >{{ \'project.aCentral\' | translate }}\r\n                      <b>{{column.from}}</b> {{ \'project.trataEventosAlarme\' |\r\n                      translate }} <b>{{column.to}}</b></md-tooltip\r\n                    >\r\n                  </div>\r\n                  <div\r\n                    class="ball falha"\r\n                    ng-class="{ disabled: !column.falha }"\r\n                  >\r\n                    F\r\n                    <md-tooltip\r\n                      class="tooltip-table"\r\n                      ng-if="column.falha"\r\n                      md-delay="1000"\r\n                      md-direction="botton"\r\n                      >{{ \'project.aCentral\' | translate }}\r\n                      <b>{{column.from}}</b> {{ \'project.trataEventosFalha\' |\r\n                      translate }} <b>{{column.to}}</b></md-tooltip\r\n                    >\r\n                  </div>\r\n                  <div\r\n                    class="ball supervisao"\r\n                    ng-class="{ disabled: !column.supervisao }"\r\n                  >\r\n                    S\r\n                    <md-tooltip\r\n                      class="tooltip-table"\r\n                      ng-if="column.supervisao"\r\n                      md-delay="1000"\r\n                      md-direction="botton"\r\n                      >{{ \'project.aCentral\' | translate }}\r\n                      <b>{{column.from}}</b> {{ \'project.trataEventosSupervisao\'\r\n                      | translate }} <b>{{column.to}}</b></md-tooltip\r\n                    >\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <br />\r\n        </div>\r\n\r\n        <div\r\n          ng-if="visualization.option === \'table\'"\r\n          layout="column"\r\n          layout-align="start start"\r\n          class="indicators"\r\n        >\r\n          <span class="title"><b>{{ \'project.legenda\' | translate }}:</b></span>\r\n          <div class="monitora">\r\n            <md-icon>check_box</md-icon>\r\n            <span>{{ \'project.monitora\' | translate }}</span>\r\n          </div>\r\n          <div layout="column" layout-align="start start">\r\n            <div layout="row" layout-align="start center">\r\n              <div class="ball alarme">A</div>\r\n              <span>{{ \'project.trataAlarme\' | translate }}</span>\r\n            </div>\r\n            <div layout="row" layout-align="start center">\r\n              <div class="ball falha">F</div>\r\n              <span>{{ \'project.trataFalha\' | translate }}</span>\r\n            </div>\r\n            <div layout="row" layout-align="start center">\r\n              <div class="ball supervisao">S</div>\r\n              <span>{{ \'project.trataSupervisao\' | translate }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </md-content>\r\n\r\n    <md-content\r\n      ng-if="selectedTab === \'centrals\'"\r\n      layout="row"\r\n      flex\r\n      class="project-content"\r\n      layout-align="start start"\r\n      layout-wrap\r\n    >\r\n      <div\r\n        ng-if="copyMode"\r\n        flex="100"\r\n        layout="row"\r\n        class="copy-content"\r\n        layout-align="start center"\r\n      >\r\n        <div>\r\n          <md-radio-group ng-model="form.copyOption" layout="column">\r\n            <md-radio-button class="central-option" value="all">\r\n              {{ \'project.monitora\' | translate }}\r\n            </md-radio-button>\r\n            <md-radio-button class="central-option" value="interconnection">\r\n              {{ \'project.colarApenas\' | translate }}\r\n            </md-radio-button>\r\n          </md-radio-group>\r\n        </div>\r\n        <div>\r\n          <md-button\r\n            aria-label="Open phone interactions menu"\r\n            class="md-raised"\r\n            ng-click="cancelCopy()"\r\n          >\r\n            {{ \'project.cancelar\' | translate }}\r\n          </md-button>\r\n        </div>\r\n      </div>\r\n\r\n      <md-card\r\n        class="card"\r\n        ng-class="{ \'copy\': centralOrigin === central.sistema.endereco, \'blink\': centralBlink === central.sistema.endereco }"\r\n        ng-repeat="central in centrais"\r\n      >\r\n        <md-card-content>\r\n          <div layout="row" class="header">\r\n            <div class="name">{{ \'project.central\' | translate }}</div>\r\n            <div class="number">{{central.sistema.endereco}}</div>\r\n\r\n            <div\r\n              ng-if="!stoppedDiscovery"\r\n              class="central-status"\r\n              layout="row"\r\n              layout-align="center center"\r\n            >\r\n              <div\r\n                ng-if="firstDiscoveryReceived && connectionMode === \'network\'"\r\n                class="status-indicator {{networkCentrals[central.sistema.endereco] ? \'online\' : \'offline\'}}"\r\n              ></div>\r\n              <div\r\n                ng-if="firstDiscoveryReceived && connectionMode === \'network\'"\r\n                class="status-name"\r\n              >\r\n                {{networkCentrals[central.sistema.endereco] ? (\'project.online\'\r\n                | translate) : (\'project.offline\' | translate)}}\r\n              </div>\r\n            </div>\r\n\r\n            <div class="options">\r\n              <md-menu ng-if="!copyMode">\r\n                <md-button\r\n                  aria-label="Open phone interactions menu"\r\n                  class="md-icon-button"\r\n                  ng-click="$mdMenu.open()"\r\n                >\r\n                  <md-icon md-menu-origin>more_vert</md-icon>\r\n                </md-button>\r\n                <md-menu-content>\r\n                  <md-menu-item>\r\n                    <md-button ng-click="changeModel(central)">\r\n                      <md-icon>swap_horiz</md-icon>\r\n                      {{ \'project.alterarModelo\' | translate }}\r\n                    </md-button>\r\n                  </md-menu-item>\r\n                  <md-menu-item>\r\n                    <md-button ng-click="removeCentral(central)">\r\n                      <md-icon>delete</md-icon>\r\n                      {{ \'project.excluirProjeto\' | translate }}\r\n                    </md-button>\r\n                  </md-menu-item>\r\n                </md-menu-content>\r\n              </md-menu>\r\n            </div>\r\n          </div>\r\n          <div class="localInstalacao">\r\n            {{central.sistema.local_instalacao}}\r\n          </div>\r\n          <div class="info-box" layout="column" layout-align="center start">\r\n            <div class="line" layout="row" layout-align="start center">\r\n              <div class="label">{{ \'project.modeloUpper\' | translate }}:</div>\r\n              <div class="value">\r\n                {{networkCentrals[central.sistema.endereco].modelo ||\r\n                central.sistema.modelo_central }}\r\n              </div>\r\n            </div>\r\n            <div class="line" layout="row" layout-align="start center">\r\n              <div class="label">IP:</div>\r\n              <div class="value">\r\n                {{networkCentrals[central.sistema.endereco].ip ||\r\n                (\'project.descohecido\' | translate) }}\r\n              </div>\r\n            </div>\r\n            <div class="line" layout="row" layout-align="start center">\r\n              <div class="label">MAC:</div>\r\n              <div class="value">\r\n                {{networkCentrals[central.sistema.endereco].mac ||\r\n                central.sistema.endereco_mac || (\'project.descohecido\' |\r\n                translate) }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </md-card-content>\r\n        <md-card-actions\r\n          ng-if="!copyMode"\r\n          layout="row"\r\n          layout-align="space-around center"\r\n        >\r\n          <md-button\r\n            ng-click="openCentralConfig(central)"\r\n            class="md-icon-button md-accent"\r\n            aria-label="{{ \'project.configurar\' | translate }}"\r\n          >\r\n            <md-tooltip md-direction="top"\r\n              >{{ \'project.configurar\' | translate }}</md-tooltip\r\n            >\r\n            <md-icon>settings</md-icon>\r\n          </md-button>\r\n          <md-button\r\n            ng-click="copy(central)"\r\n            class="md-icon-button md-accent"\r\n            aria-label="{{ \'project.copiar\' | translate }}"\r\n          >\r\n            <md-tooltip md-direction="top"\r\n              >{{ \'project.copiar\' | translate }}</md-tooltip\r\n            >\r\n            <md-icon>filter_none</md-icon>\r\n          </md-button>\r\n          <md-button\r\n            ng-disabled="!networkCentrals[central.sistema.endereco]"\r\n            ng-click="openConnection(networkCentrals[central.sistema.endereco])"\r\n            class="md-icon-button md-accent remote-button"\r\n            aria-label="{{ \'project.ativarConexao\' | translate }}"\r\n          >\r\n            <md-tooltip md-direction="top"\r\n              >{{ \'project.ativarConexao\' | translate }}</md-tooltip\r\n            >\r\n            <md-icon\r\n              md-svg-src="img/remote_connection.svg"\r\n              aria-label="{{ \'project.ativarConexao\' | translate }}"\r\n            ></md-icon>\r\n          </md-button>\r\n          <md-button\r\n            ng-disabled="!networkCentrals[central.sistema.endereco]"\r\n            ng-click="openRemote(networkCentrals[central.sistema.endereco])"\r\n            class="md-icon-button md-accent remote-button"\r\n            aria-label="{{ \'project.operarRemotamente\' | translate }}"\r\n          >\r\n            <md-tooltip md-direction="top"\r\n              >{{ \'project.operarRemotamente\' | translate }}</md-tooltip\r\n            >\r\n            <md-icon>exit_to_app</md-icon>\r\n          </md-button>\r\n        </md-card-actions>\r\n        <md-card-actions\r\n          ng-if="copyMode"\r\n          layout="row"\r\n          layout-align="space-around center"\r\n        >\r\n          <md-button\r\n            ng-click="paste(central.sistema.endereco)"\r\n            class="md-raised md-accent"\r\n            ng-disabled="{{centralOrigin === central.sistema.endereco}}"\r\n            aria-label="Configurar"\r\n          >\r\n            {{ centralOrigin === central.sistema.endereco ? (\'project.copiado\' |\r\n            translate) : (\'project.colar\' | translate) }}\r\n          </md-button>\r\n        </md-card-actions>\r\n      </md-card>\r\n\r\n      <md-card class="card-new" ng-class="{\'new\': newCentralByCopy}">\r\n        <md-card-content\r\n          ng-if="newCentralByCopy"\r\n          layout="row"\r\n          layout-align="space-around center"\r\n        >\r\n          <div class="newCentralByCopy">\r\n            <div class="name">{{ \'project.novaCentral\' | translate }}</div>\r\n            <div class="form-value" layout="row" layout-align="center center">\r\n              <div class="label">{{ \'project.endereco\' | translate }}:</div>\r\n              <div>\r\n                <md-select\r\n                  required\r\n                  ng-model="form.endereco"\r\n                  aria-label=""\r\n                  class="select-interconnection"\r\n                >\r\n                  <md-option\r\n                    ng-repeat="i in enderecosCentraisInterligacao"\r\n                    value="{{i}}"\r\n                  >\r\n                    {{i}}\r\n                  </md-option>\r\n                </md-select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </md-card-content>\r\n        <md-card-actions\r\n          ng-if="newCentralByCopy"\r\n          layout="row"\r\n          layout-align="space-around center"\r\n        >\r\n          <md-button\r\n            ng-click="cancelNewCentral()"\r\n            class="md-raised"\r\n            aria-label="{{ \'project.cancelar\' | translate }}"\r\n          >\r\n            {{ \'project.cancelar\' | translate }}\r\n          </md-button>\r\n          <md-button\r\n            ng-disabled="!form.endereco"\r\n            ng-click="new()"\r\n            class="md-raised md-accent"\r\n            aria-label="{{ \'project.salvar\' | translate }}"\r\n          >\r\n            {{ \'project.salvar\' | translate }}\r\n          </md-button>\r\n        </md-card-actions>\r\n        <md-button\r\n          ng-if="copyMode && !newCentralByCopy"\r\n          ng-click="startNewCentralByCopy()"\r\n          aria-label="{{ \'project.colarNovaCentral\' | translate }}"\r\n          class="md-accent button-new"\r\n        >\r\n          <md-icon>add</md-icon>\r\n          {{ \'project.colarNovaCentral\' | translate }}\r\n        </md-button>\r\n        <md-button\r\n          ng-if="!newCentralByCopy && !copyMode"\r\n          ng-click="startNewCentral()"\r\n          aria-label="{{ \'project.novaCentral\' | translate }}"\r\n          class="md-accent button-new"\r\n        >\r\n          <md-icon>add</md-icon>\r\n          {{ \'project.novaCentral\' | translate }}\r\n        </md-button>\r\n      </md-card>\r\n    </md-content>\r\n  </div>\r\n</div>\r\n');$templateCache.put("root/bar-progress-dialog.html",'<md-dialog>\r\n  <md-dialog-content class="loading-content">\r\n    <md-progress-linear\r\n      class="md-accent"\r\n      md-mode="determinate"\r\n      value="{{progress}}"\r\n    ></md-progress-linear>\r\n    <div\r\n      layout="column"\r\n      layout-align="center center"\r\n      class="content-wrapper-bar"\r\n    >\r\n      <p class="text">{{steps}}</p>\r\n      <p class="text">\r\n        {{message}} <span class="percentage">{{progressText}}</span>\r\n      </p>\r\n    </div>\r\n  </md-dialog-content>\r\n</md-dialog>\r\n');$templateCache.put("root/developer-mode-dialog.html",'<md-dialog flex="40">\r\n  <md-toolbar class="md-warn">\r\n    <div class="md-toolbar-tools">\r\n      <h2>Modo Desenvolvedor</h2>\r\n      <span flex></span>\r\n    </div>\r\n  </md-toolbar>\r\n  <md-dialog-content class="developer-content">\r\n    <md-progress-linear\r\n      ng-if="dump.loading"\r\n      class="md-accent"\r\n      md-mode="indeterminate"\r\n    ></md-progress-linear>\r\n    <input\r\n      style="display: none"\r\n      id="dump_file"\r\n      type="file"\r\n      input-file="dump_file"\r\n      accept=".hex"\r\n      nwsaveas\r\n    />\r\n    <md-card md-theme="default">\r\n      <md-card-title>\r\n        <md-card-title-text>\r\n          <span class="md-headline">Dump da Memória Flash</span>\r\n        </md-card-title-text>\r\n      </md-card-title>\r\n      <md-card-content layout="column" layout-align="center center">\r\n        <div class="separator-big"></div>\r\n        <div class="dump-file" layout-padding>\r\n          <div class="path">{{dump.path}}</div>\r\n          <md-button\r\n            ng-if="!dump.loading && !dump.finished"\r\n            ng-click="openFileDialog(\'firmware_file\')"\r\n            class="md-accent"\r\n            >escolher local do arquivo</md-button\r\n          >\r\n        </div>\r\n        <div class="text">{{dump.msg}}</div>\r\n      </md-card-content>\r\n      <md-card-actions layout="row" layout-align="center center">\r\n        <md-button\r\n          ng-if="!dump.loading"\r\n          ng-disabled="!dump.path"\r\n          ng-click="getDump()"\r\n          class="md-raised md-accent"\r\n          >Salvar</md-button\r\n        >\r\n        <md-button\r\n          ng-if="dump.finished"\r\n          ng-click="newSent()"\r\n          class="md-raised md-accent"\r\n          >refazer</md-button\r\n        >\r\n      </md-card-actions>\r\n    </md-card>\r\n  </md-dialog-content>\r\n</md-dialog>\r\n');$templateCache.put("root/loading-dialog.html",'<md-dialog>\r\n  <md-dialog-content class="loading-content">\r\n    <md-progress-linear class="md-accent" md-mode="query"></md-progress-linear>\r\n    <div layout="column" layout-align="center center">\r\n      <div class="text">{{text || loading.text}}</div>\r\n    </div>\r\n  </md-dialog-content>\r\n</md-dialog>\r\n');$templateCache.put("root/loading-progress-dialog.html",'<md-dialog>\r\n  <md-dialog-content class="loading-content">\r\n    <md-progress-linear\r\n      class="md-accent"\r\n      md-mode="determinate"\r\n      value="{{percentSendFirmware}}"\r\n    ></md-progress-linear>\r\n    <div layout="column" layout-align="center center">\r\n      <div class="text">\r\n        {{ \'global.atualizandoCentral\' | translate }} {{percentSendFirmware}}%\r\n      </div>\r\n    </div>\r\n  </md-dialog-content>\r\n</md-dialog>\r\n');$templateCache.put("rule/rule.html",'<md-toolbar class="toolbar md-accent">\r\n  <div flex layout-align="space-between center" class="md-toolbar-tools">\r\n    <div>\r\n      <div layout="row" layout-align="start center">\r\n        <md-icon\r\n          class="logo"\r\n          md-svg-src="img/toolbar.svg"\r\n          aria-label=""\r\n        ></md-icon>\r\n        <md-divider\r\n          style="width: 0.7px; height: 25px; border-color: white"\r\n        ></md-divider>\r\n        <div class="header-title">{{ \'global.header\' | translate }}</div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <md-button\r\n        ng-disabled="selectedRules.length == 0 || newRule || originalSelectedRule.id == 1"\r\n        ng-click="removeRule()"\r\n        class="md-icon-button"\r\n      >\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'rule.removerRegra\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon>delete</md-icon>\r\n      </md-button>\r\n      <md-button\r\n        ng-if="!centralModel.is1060"\r\n        ng-click="enableMultipleSelection()"\r\n        class="md-icon-button"\r\n      >\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'rule.selecionar\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon\r\n          >{{isEnabledMultipleSelection ? \'check_circle\' : \'check\'}}</md-icon\r\n        >\r\n      </md-button>\r\n      <md-button ng-click="createRule()" class="md-icon-button">\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'rule.criarRegra\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon>add</md-icon>\r\n      </md-button>\r\n      <md-button ng-click="help()" class="md-icon-button">\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'global.ajuda\' | translate }} (F1)</md-tooltip\r\n        >\r\n        <md-icon>help_outline</md-icon>\r\n      </md-button>\r\n      <locale-button></locale-button>\r\n    </div>\r\n  </div>\r\n</md-toolbar>\r\n\r\n<project-bar></project-bar>\r\n<div\r\n  flex\r\n  layout="row"\r\n  layout-align="center none"\r\n  ng-init="init()"\r\n  dw-loading="list@app.rule"\r\n>\r\n  <div ng-if="!newRule" flex="25" class="sub-menu" id="ruleList">\r\n    <md-content>\r\n      <md-list class="submenu-list">\r\n        <md-list-item\r\n          ng-repeat="regra in regras | toArray | orderBy: regra.id"\r\n          ng-click="selectRule(regra.id)"\r\n          ng-class="{\'table-item-selected\': selectedRules.indexOf(regra.id) != -1}"\r\n        >\r\n          <md-checkbox\r\n            ng-checked="selectedRules.indexOf(regra.id) != -1"\r\n            ng-if="isEnabledMultipleSelection"\r\n          ></md-checkbox>\r\n          <p>{{regra.id | numberFormat}} - {{regra.nome}}</p>\r\n          <md-icon class="item-disabled" ng-if="!regra.habilitado"\r\n            >lock</md-icon\r\n          >\r\n        </md-list-item>\r\n      </md-list>\r\n    </md-content>\r\n  </div>\r\n  <div flex="75">\r\n    <div\r\n      layout-padding\r\n      ng-if="!(selectedRule | isEmpty)"\r\n      class="md-whiteframe-4dp rule-content"\r\n    >\r\n      <md-content>\r\n        <form\r\n          name="form.rule"\r\n          ng-submit="saveRule(form.rule)"\r\n          novalidate\r\n          layout="column"\r\n          layout-align="start stretch"\r\n          autocomplete="off"\r\n        >\r\n          <div layout="row" layout-sm="column">\r\n            <div flex="25" flex-sm="10">\r\n              <md-switch\r\n                class="switch-enable"\r\n                ng-model="selectedRule.habilitado"\r\n                style="min-width: 140px; max-width: 160px"\r\n              >\r\n                {{selectedRule.habilitado ? (\'rule.ativada\' | translate ) :\r\n                (\'rule.bloqueada\' | translate )}}\r\n              </md-switch>\r\n            </div>\r\n            <div flex="50" flex-sm="10">\r\n              <md-input-container>\r\n                <label>ID</label>\r\n                <input\r\n                  ng-disabled="originalSelectedRule.id == 1"\r\n                  rule-address-validate\r\n                  required\r\n                  type="number"\r\n                  name="id"\r\n                  ng-model="selectedRule.id"\r\n                  min="1"\r\n                  max="100"\r\n                />\r\n                <div ng-messages="form.rule.id.$error">\r\n                  <div ng-message="required">\r\n                    {{ \'rule.campoObrigatorio\' | translate }}.\r\n                  </div>\r\n                  <div ng-message="idUsed">\r\n                    {{ \'rule.idJaUtilizado\' | translate }}.\r\n                  </div>\r\n                  <div ng-message="min || max">\r\n                    {{ \'rule.idFaixa\' | translate }}.\r\n                  </div>\r\n                </div>\r\n              </md-input-container>\r\n              <md-input-container flex="70">\r\n                <label>{{ \'rule.nome\' | translate }}</label>\r\n                <input\r\n                  focus="true"\r\n                  required\r\n                  name="nome"\r\n                  ng-disabled="originalSelectedRule.id == 1"\r\n                  ng-model="selectedRule.nome"\r\n                  id="ruleNameInput"\r\n                  md-maxlength="ruleMaxLength"\r\n                  maxlength="14"\r\n                />\r\n                <div ng-messages="form.rule.nome.$error">\r\n                  <div ng-message="required">\r\n                    {{ \'rule.campoObrigatorio\' | translate }}.\r\n                  </div>\r\n                </div>\r\n              </md-input-container>\r\n            </div>\r\n          </div>\r\n          <div layout="row" layout-sm="column">\r\n            <div flex flex-sm="none" layout="column">\r\n              <div class="radio-group-title">\r\n                {{ \'rule.responderBotaoDe\' | translate }}:\r\n              </div>\r\n              <md-checkbox\r\n                ng-if="!centralModel.is1060"\r\n                ng-change="changeBrigadaButton()"\r\n                ng-model="selectedRule.brigada"\r\n              >\r\n                {{ \'rule.brigada\' | translate }}\r\n              </md-checkbox>\r\n              <md-checkbox\r\n                ng-change="changeAlarmeButton()"\r\n                ng-model="selectedRule.alarme"\r\n              >\r\n                {{ \'rule.alarmeGeral\' | translate }}\r\n              </md-checkbox>\r\n            </div>\r\n            <div flex flex-sm="none" layout="column">\r\n              <div class="radio-group-title">\r\n                {{ \'rule.condicaoEntrada\' | translate }}\r\n              </div>\r\n              <md-radio-group ng-model="selectedRule.condicao_entrada">\r\n                <md-radio-button value="unica"\r\n                  >{{ \'rule.unico\' | translate }}</md-radio-button\r\n                >\r\n                <md-radio-button value="dupla"\r\n                  >{{ \'rule.dupla\' | translate }}</md-radio-button\r\n                >\r\n              </md-radio-group>\r\n            </div>\r\n            <div flex flex-sm="none">\r\n              <div class="radio-group-title">\r\n                {{ \'rule.ativacaoSaida\' | translate }}\r\n              </div>\r\n              <md-radio-group\r\n                ng-change="changeAtivacaoSaida()"\r\n                ng-model="selectedRule.ativacao_saida"\r\n              >\r\n                <md-radio-button value="imediata"\r\n                  >{{ \'rule.imediata\' | translate }}</md-radio-button\r\n                >\r\n                <md-radio-button value="temporizada"\r\n                  >{{ \'rule.temporizada\' | translate }}</md-radio-button\r\n                >\r\n              </md-radio-group>\r\n            </div>\r\n            <div flex flex-sm="none" layout="row">\r\n              <div flex ng-if="selectedRule.ativacao_saida == \'temporizada\'">\r\n                <div class="radio-group-title">\r\n                  {{ \'rule.temporizacao\' | translate }}\r\n                </div>\r\n                <div layout="column">\r\n                  <md-input-container\r\n                    style="\r\n                      max-width: 200px;\r\n                      margin-right: 20px;\r\n                      margin-bottom: -4px;\r\n                      margin: -15px 0;\r\n                    "\r\n                  >\r\n                    <input\r\n                      id="inputTemporizacao"\r\n                      minsec-validate\r\n                      limit-retardo-maximo="true"\r\n                      required\r\n                      ng-model="selectedRule.temporizacao"\r\n                      type="text"\r\n                      name="tempo"\r\n                    />\r\n                    <div ng-messages="form.rule.tempo.$error">\r\n                      <div ng-message="required">\r\n                        {{ \'rule.campoObrigatorio\' | translate }}.\r\n                      </div>\r\n                      <div ng-message="retardo-maximo">\r\n                        {{ \'rule.tempoDeveSer\' | translate }}\r\n                        {{tempoMaximoRetardo}} ({{ \'rule.tempoMaximoRetardo\' |\r\n                        translate }}).\r\n                      </div>\r\n                    </div>\r\n                    <md-checkbox\r\n                      ng-model="selectedRule.cancelavel"\r\n                      style="margin-bottom: 25px"\r\n                    >\r\n                      {{ \'rule.novaEntradaCancela\' | translate }}\r\n                    </md-checkbox>\r\n                  </md-input-container>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div\r\n            ng-if="!centralModel.is1060"\r\n            layout="row"\r\n            layout-align="space-between stretch"\r\n          >\r\n            <div\r\n              flex\r\n              class="device-list"\r\n              dnd-list\r\n              dnd-drop="addItem()"\r\n              dnd-disable-if="dragging.rule"\r\n            >\r\n              <div class="itensbox-title">\r\n                {{ \'rule.pertencemARegra\' | translate }}\r\n              </div>\r\n              <md-tabs md-dynamic-height md-border-bottom>\r\n                <md-tab\r\n                  label="{{ \'rule.entrada\' | translate }}"\r\n                  md-active="selectedMode == \'entrada\'"\r\n                  md-on-select="selectMode(\'entrada\')"\r\n                ></md-tab>\r\n                <md-tab\r\n                  label="{{ \'rule.saida\' | translate }}"\r\n                  md-active="selectedMode == \'saida\'"\r\n                  md-on-select="selectMode(\'saida\')"\r\n                ></md-tab>\r\n              </md-tabs>\r\n              <md-content flex class="list-drop" id="list{{selectedMode}}">\r\n                <div\r\n                  flex\r\n                  class="loop-empty"\r\n                  ng-if="loopEmpty(\'list\' + selectedMode)"\r\n                >\r\n                  {{ \'rule.nennhumItem\' | translate }}\r\n                </div>\r\n                <section\r\n                  ng-repeat="(tipo, itens) in selectedRule.itens |  where: {modo: selectedMode} | groupBy: \'tipo\'"\r\n                  ng-if="!(selectedRule.itens | where: {modo: selectedMode} | groupBy: \'tipo\' | isEmpty)"\r\n                >\r\n                  <md-subheader class="loop-subheader loop"\r\n                    >{{types[tipo]}}</md-subheader\r\n                  >\r\n                  <md-list ui-view="list">\r\n                    <md-list-item\r\n                      ng-repeat="item in itens | where: {modo: selectedMode}"\r\n                      dnd-disable-if="item.id == 1"\r\n                      dnd-draggable="item"\r\n                      dnd-dragend="dragging.rule = false"\r\n                      dnd-dragstart="onDragstart(event, \'rule\', \'remove\')"\r\n                      ng-class="{\'device-item-selected\' : item.selected, \'device-dragging\': dragging.rule && item.selected }"\r\n                      class="device-item"\r\n                    >\r\n                      <md-checkbox\r\n                        ng-if="!(originalSelectedRule.id == 1 && item.id == 1 && tipo == \'zona\')"\r\n                        ng-model="item.selected"\r\n                      ></md-checkbox>\r\n                      <p ng-if="tipo == \'dispositivo\'">\r\n                        {{item.laco == 0 ?\r\n                        CONFIG.dispositivos_locais[item.endereco].saida_local :\r\n                        (item.endereco | numberFormat)}} -\r\n                        {{lacos[item.laco].dispositivos[item.endereco].nome}}\r\n                      </p>\r\n                      <p ng-if="tipo == \'evento\'">\r\n                        {{eventNames[item.endereco]}}\r\n                      </p>\r\n                      <p ng-if="tipo == \'interligacao\'">\r\n                        {{eventNames[item.endereco]}}\r\n                      </p>\r\n                      <p ng-if="tipo == \'zona\'">\r\n                        {{item.id | numberFormat}} - {{zonas[item.id].nome}}\r\n                      </p>\r\n                      <md-icon\r\n                        ng-if="isDisabled(tipo, item)"\r\n                        class="device-disabled"\r\n                        >lock</md-icon\r\n                      >\r\n                      <a\r\n                        ng-if="tipo == \'dispositivo\'"\r\n                        class="item-badge zone-badge"\r\n                        >{{zonas[lacos[item.laco].dispositivos[item.endereco].zona].nome}}</a\r\n                      >\r\n                      <a ng-if="tipo == \'dispositivo\'" class="item-badge">\r\n                        - {{item.laco == 0 ? (\'rule.local\' | translate) :\r\n                        (\'rule.laco\' | translate) + \' \' + item.laco}}</a\r\n                      >\r\n                    </md-list-item>\r\n                  </md-list>\r\n                </section>\r\n              </md-content>\r\n            </div>\r\n            <div flex="15" layout="column" layout-align="none center">\r\n              <div ng-click="addItem()" class="button-change-rule">\r\n                <md-icon>keyboard_arrow_left</md-icon>\r\n                <div>{{ \'rule.adicionar\' | translate }}</div>\r\n              </div>\r\n              <div\r\n                ng-click="removeItem()"\r\n                class="button-change-rule"\r\n                dnd-disable-if="dragging.all"\r\n                dnd-list\r\n                dnd-drop="removeItem()"\r\n              >\r\n                <md-icon class="icon-remove-item">delete</md-icon>\r\n                <div>{{ \'rule.remover\' | translate }}</div>\r\n              </div>\r\n            </div>\r\n            <div\r\n              flex\r\n              class="device-list"\r\n              dnd-list\r\n              dnd-drop="removeItem()"\r\n              dnd-disable-if="dragging.all"\r\n            >\r\n              <div class="itensbox-title">\r\n                {{ \'rule.disponiveis\' | translate }}\r\n              </div>\r\n              <md-tabs md-border-bottom>\r\n                <md-tab\r\n                  label="{{ \'rule.dispositivos\' | translate }}"\r\n                  md-on-select="selectType(\'dispositivo\');"\r\n                  md-active="selectedType == \'dispositivo\'"\r\n                ></md-tab>\r\n                <md-tab\r\n                  label="{{ \'rule.zonas\' | translate }}"\r\n                  md-on-select="selectType(\'zona\')"\r\n                  md-active="selectedType == \'zona\'"\r\n                ></md-tab>\r\n                <md-tab\r\n                  label="{{ \'rule.eventos\' | translate }}"\r\n                  md-on-select="selectType(\'evento\')"\r\n                  ng-disabled="selectedMode == \'saida\'"\r\n                  md-active="selectedType == \'evento\'"\r\n                ></md-tab>\r\n                <md-tab\r\n                  label="{{ \'rule.interligacao\' | translate }}"\r\n                  md-on-select="selectType(\'interligacao\')"\r\n                  ng-disabled="selectedMode == \'saida\' || (interligacao | isEmpty)"\r\n                  md-active="selectedType == \'interligacao\'"\r\n                ></md-tab>\r\n              </md-tabs>\r\n\r\n              <md-content\r\n                flex\r\n                class="list-drop"\r\n                id="listDevices"\r\n                ng-if="selectedType == \'dispositivo\'"\r\n              >\r\n                <div\r\n                  flex\r\n                  class="loop-empty"\r\n                  ng-if="!hasClass(\'device-available\')"\r\n                >\r\n                  {{ \'rule.nenhumDispositivo\' | translate }} {{selectedMode ==\r\n                  \'entrada\' ? (\'rule.entrada\' | translate) : (\'rule.saida\' |\r\n                  translate)}}\r\n                </div>\r\n                <section ng-repeat="(indexLaco, laco) in lacos">\r\n                  <md-subheader\r\n                    ng-if="hasClass(\'device-item-loop-\' + indexLaco)"\r\n                    class="loop-subheader loop"\r\n                    >{{indexLaco == 0 ? (\'rule.dispositivosLocais\' | translate)\r\n                    : (\'rule.laco\' | translate) + \' \' +\r\n                    indexLaco}}</md-subheader\r\n                  >\r\n                  <md-list class="md-dense" ui-view="list">\r\n                    <md-list-item\r\n                      ng-repeat="dispositivo in laco.dispositivos | toArray | map: addMode | where: {modo: selectedMode}"\r\n                      ng-if="!dispositivo.saida_padrao && !ruleControl[selectedMode][newRule ? \'new\' : originalSelectedRule.id].dispositivo[dispositivo.laco][dispositivo.endereco]"\r\n                      ng-init="dispositivo.laco = indexLaco;"\r\n                      dnd-disable-if="!dispositivo.selected"\r\n                      dnd-draggable="dispositivo"\r\n                      dnd-dragend="dragging.all = false"\r\n                      dnd-dragstart="onDragstart(event, \'all\', \'copy\')"\r\n                      ng-class="{\'device-item-selected\' : dispositivo.selected, \'device-dragging\': dragging.all && dispositivo.selected}"\r\n                      class="device-item device-available device-item-loop-{{indexLaco}}"\r\n                    >\r\n                      <md-checkbox ng-model="dispositivo.selected">\r\n                      </md-checkbox>\r\n                      <p>\r\n                        {{indexLaco == 0 ?\r\n                        CONFIG.dispositivos_locais[dispositivo.endereco].saida_local\r\n                        : (dispositivo.endereco | numberFormat)}} -\r\n                        {{dispositivo.nome}}\r\n                      </p>\r\n                      <md-icon\r\n                        ng-if="!dispositivo.habilitado"\r\n                        class="device-disabled"\r\n                        >lock</md-icon\r\n                      >\r\n                      <a class="item-badge zone-badge"\r\n                        >{{zonas[dispositivo.zona].nome}}</a\r\n                      >\r\n                    </md-list-item>\r\n                  </md-list>\r\n                </section>\r\n              </md-content>\r\n\r\n              <md-content\r\n                flex\r\n                class="list-drop"\r\n                id="selectedRuleInList"\r\n                ng-if="selectedType == \'evento\'"\r\n              >\r\n                <div\r\n                  flex\r\n                  class="loop-empty"\r\n                  ng-if="!hasClass(\'event-available\')"\r\n                >\r\n                  {{ \'rule.nenhumEvento\' | translate }}\r\n                </div>\r\n                <md-list class="md-dense" ui-view="list">\r\n                  <md-list-item\r\n                    ng-repeat="evento in eventos | toArray | orderBy: \'nome\'"\r\n                    ng-if="!ruleControl[selectedMode][newRule ? \'new\' : originalSelectedRule.id].evento[0][evento.endereco]"\r\n                    dnd-disable-if="!evento.selected"\r\n                    dnd-draggable="evento"\r\n                    dnd-dragend="dragging.all = false"\r\n                    dnd-dragstart="onDragstart(event, \'all\', \'copy\')"\r\n                    ng-class="{\'device-item-selected\' : evento.selected, \'device-dragging\': dragging.all && evento.selected}"\r\n                    class="device-item event-available"\r\n                  >\r\n                    <md-checkbox ng-model="evento.selected"></md-checkbox>\r\n                    <p>{{eventNames[evento.endereco]}}</p>\r\n                  </md-list-item>\r\n                </md-list>\r\n              </md-content>\r\n\r\n              <md-content\r\n                flex\r\n                class="list-drop"\r\n                ng-if="selectedType == \'interligacao\'"\r\n              >\r\n                <div\r\n                  flex\r\n                  class="loop-empty"\r\n                  ng-if="!hasClass(\'event-available\')"\r\n                >\r\n                  {{ \'rule.nenhumEvento\' | translate }}\r\n                </div>\r\n                <md-list class="md-dense" ui-view="list">\r\n                  <md-list-item\r\n                    ng-repeat="evento in interligacao | toArray | orderBy: \'endereco\'"\r\n                    ng-if="!ruleControl[selectedMode][newRule ? \'new\' : originalSelectedRule.id].interligacao[0][evento.endereco]"\r\n                    dnd-disable-if="!evento.selected"\r\n                    dnd-draggable="evento"\r\n                    dnd-dragend="dragging.all = false"\r\n                    dnd-dragstart="onDragstart(event, \'all\', \'copy\')"\r\n                    ng-class="{\'device-item-selected\' : evento.selected, \'device-dragging\': dragging.all && evento.selected}"\r\n                    class="device-item event-available"\r\n                  >\r\n                    <md-checkbox ng-model="evento.selected"></md-checkbox>\r\n                    <p>{{eventNames[evento.endereco]}}</p>\r\n                  </md-list-item>\r\n                </md-list>\r\n              </md-content>\r\n\r\n              <md-content\r\n                flex\r\n                class="list-drop"\r\n                id="listZone"\r\n                ng-if="selectedType == \'zona\'"\r\n              >\r\n                <div\r\n                  flex\r\n                  class="loop-empty"\r\n                  ng-if="!hasClass(\'zone-available\')"\r\n                >\r\n                  {{ \'rule.nenhumaZona\' | translate }}\r\n                </div>\r\n                <md-list class="md-dense" ui-view="list">\r\n                  <md-list-item\r\n                    ng-repeat="zona in zonas"\r\n                    ng-if="!ruleControl[selectedMode][newRule ? \'new\' : originalSelectedRule.id].zona[zona.id]"\r\n                    dnd-disable-if="!zona.selected"\r\n                    dnd-draggable="zona"\r\n                    dnd-dragend="dragging.all = false"\r\n                    dnd-dragstart="onDragstart(event, \'all\', \'copy\')"\r\n                    ng-class="{\'device-item-selected\' : zona.selected,\r\n                                                          \'device-dragging\': dragging.all && zona.selected}"\r\n                    class="device-item zone-available"\r\n                  >\r\n                    <md-checkbox ng-model="zona.selected"></md-checkbox>\r\n                    <p>{{zona.id | numberFormat}} - {{zona.nome}}</p>\r\n                    <md-icon ng-if="!zona.habilitado" class="device-disabled"\r\n                      >lock</md-icon\r\n                    >\r\n                  </md-list-item>\r\n                </md-list>\r\n              </md-content>\r\n            </div>\r\n          </div>\r\n          <section\r\n            ng-if="!(selectedRule | isEmpty)"\r\n            layout="row"\r\n            layout-align="center center"\r\n            class="group-button"\r\n          >\r\n            <md-button ng-click="cancel()" class="md-raised"\r\n              >{{ \'rule.cancelar\' | translate }}</md-button\r\n            >\r\n            <md-button\r\n              type="submit"\r\n              ng-disabled="form.rule.$invalid"\r\n              class="md-raised md-accent"\r\n              >{{newRule ? (\'rule.criar\' | translate) : (\'rule.aplicar\' |\r\n              translate) }}</md-button\r\n            >\r\n          </section>\r\n        </form>\r\n      </md-content>\r\n    </div>\r\n  </div>\r\n</div>\r\n');$templateCache.put("system/system.html",'<md-toolbar class="toolbar md-accent">\r\n  <div flex layout-align="space-between center" class="md-toolbar-tools">\r\n    <div>\r\n      <div layout="row" layout-align="space-between center">\r\n        <md-icon\r\n          class="logo"\r\n          md-svg-src="img/toolbar.svg"\r\n          aria-label=""\r\n        ></md-icon>\r\n        <md-divider\r\n          style="width: 0.7px; height: 25px; border-color: white"\r\n        ></md-divider>\r\n        <div class="header-title">{{ \'global.header\' | translate }}</div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <md-button ng-click="help()" class="md-icon-button">\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'global.ajuda\' | translate }} (F1)</md-tooltip\r\n        >\r\n        <md-icon>help_outline</md-icon>\r\n      </md-button>\r\n      <locale-button></locale-button>\r\n    </div>\r\n  </div>\r\n</md-toolbar>\r\n<project-bar></project-bar>\r\n<div flex layout="row" layout-align="start stretch">\r\n  <div flex="25" class="sub-menu">\r\n    <md-content>\r\n      <md-list class="submenu-list">\r\n        <md-list-item\r\n          ng-disabled="!sistema"\r\n          ng-click="changeSelectedScreen(\'generalConfig\', saveGeneralConfig)"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'generalConfig\'}"\r\n        >\r\n          <p>{{ \'system.configuracoes\' | translate }}</p>\r\n          <md-icon>settings</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-if="!centralModel.is1060"\r\n          ng-disabled="!sistema || sistema.without_ethernet"\r\n          ng-click="changeSelectedScreen(\'network\', saveNetwork); getNetworkInfo();"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'network\'}"\r\n        >\r\n          <p>{{ \'system.configuracoesRede\' | translate }}</p>\r\n          <md-icon>filter_frames</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-if="centralModel.isGateway"\r\n          ng-disabled="!sistema"\r\n          ng-click="changeSelectedScreen(\'tlsAndSsl\', saveTlsSsl);"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'tlsAndSsl\'}"\r\n        >\r\n          <p>{{ \'system.configuracoesTls\' | translate }}</p>\r\n          <md-icon>vpn_key</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-if="centralModel.is1060"\r\n          ng-click="changeSelectedScreen(\'defaultLocks\', saveDefaultLocks)"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'defaultLocks\'}"\r\n        >\r\n          <p>{{ \'system.bloqueiosLocais\' | translate }}</p>\r\n          <md-icon>lock</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-disabled="centralModel.isGateway || centralModel.isRepeater || !isCIEConnected || !sistema"\r\n          ng-click="changeSelectedScreen(\'date\')"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'date\'}"\r\n        >\r\n          <p>{{ \'system.dataHora\' | translate }}</p>\r\n          <md-icon>access_time</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-disabled="(!centralModel.is1060 && !isCIEConnected) || (centralModel.is1060 && isWin7()) || !sistema"\r\n          ng-click="changeSelectedScreen(\'firmware\')"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'firmware\'}"\r\n        >\r\n          <p>{{ \'system.firmware\' | translate }}</p>\r\n          <md-icon>file_upload</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-disabled="!sistema"\r\n          ng-click="changeSelectedScreen(\'info\'); getInfoFromCentral();"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'info\'}"\r\n        >\r\n          <p>\r\n            {{ \'system.informacoesCentral\' | translate\r\n            }}{{centralModel.isRepeater ? \' \' + (\'system.eRepetidoras\' |\r\n            translate) : \'\'}}\r\n          </p>\r\n          <md-icon>info</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-if="!centralModel.is1060"\r\n          ng-disabled="centralModel.isGateway || centralModel.isRepeater || !sistema || sistema.without_ethernet"\r\n          ng-click="changeSelectedScreen(\'interconnection\', saveInterconnection)"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'interconnection\'}"\r\n        >\r\n          <p>{{ \'system.interligacaoCentrais\' | translate }}</p>\r\n          <md-icon>settings_input_component</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-disabled="sistema.without_ethernet|| centralModel.isRepeater || !sistema"\r\n          ng-click="changeSelectedScreen(\'accessLevels\', saveAccessLevels)"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'accessLevels\'}"\r\n        >\r\n          <p>\r\n            {{ centralModel.isGateway ? \'system.gwAuthPasswordTitle\' :\r\n            \'system.niveisAcesso\' | translate }}\r\n          </p>\r\n          <md-icon>lock</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-disabled="centralModel.isGateway || centralModel.isRepeater"\r\n          ng-click="changeSelectedScreen(\'logs\')"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'logs\'}"\r\n        >\r\n          <p>{{ \'system.registroEventos\' | translate }}</p>\r\n          <md-icon>format_list_bulleted</md-icon>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-if="!centralModel.is1060"\r\n          ng-disabled="centralModel.isGateway || centralModel.isRepeater || !sistema"\r\n          ng-click="changeSelectedScreen(\'standardOutputs\', saveStandardOutputs)"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'standardOutputs\'}"\r\n        >\r\n          <p>{{ \'system.saidasPadrao\' | translate }}</p>\r\n          <md-icon>compare_arrows</md-icon>\r\n        </md-list-item>\r\n      </md-list>\r\n    </md-content>\r\n  </div>\r\n  <div flex layout="row" layout-align="space-between stretch">\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'interconnection\'"\r\n      layout-padding\r\n      class="md-whiteframe-4dp system-content"\r\n    >\r\n      <div class="section-title">\r\n        {{ \'system.interligacaoCentrais\' | translate }}\r\n      </div>\r\n      <div ng-if="sistema.rede.p2p === true" class="info">\r\n        {{ \'system.aConfiguracaoPontoAPonto\' | translate }}\r\n        <a\r\n          ng-click="changeSelectedScreen(\'network\', saveNetwork); getInfoFromCentral();"\r\n          ><b class="model">{{ \'system.configuracaoRede\' | translate }}</b>.</a\r\n        >\r\n      </div>\r\n      <form name="form.generalConfig" layout="column" autocomplete="off">\r\n        <div class="form-item">\r\n          <label class="form-label" style="padding-top: 17px"\r\n            >{{ \'system.enderecoCentral\' | translate }}:</label\r\n          >\r\n          <div class="form-value">\r\n            <md-select\r\n              ng-model="sistema.endereco"\r\n              aria-label=""\r\n              class="select-interconnection"\r\n            >\r\n              <md-option value="0">\r\n                {{ \'system.interligacaoDesabilitada\' | translate }}\r\n              </md-option>\r\n              <md-option\r\n                ng-repeat="i in enderecosCentraisInterligacao"\r\n                value="{{i}}"\r\n                ng-if="sistema.rede.p2p === false"\r\n              >\r\n                {{i}}\r\n              </md-option>\r\n              <md-option\r\n                ng-repeat="i in [1, 2]"\r\n                value="{{i}}"\r\n                ng-if="sistema.rede.p2p === true"\r\n              >\r\n                {{i}}\r\n              </md-option>\r\n            </md-select>\r\n          </div>\r\n        </div>\r\n        <div class="form-item">\r\n          <div class="form-label">\r\n            {{ \'system.centraisMonitoradas\' | translate }}:\r\n          </div>\r\n          <div ng-if="sistema.rede.p2p === true" class="form-value">\r\n            <div>\r\n              <md-checkbox\r\n                ng-disabled="sistema.endereco == 0 || sistema.endereco - 1 === id"\r\n                class="repeater-check"\r\n                ng-repeat="id in [0,1]"\r\n                ng-model="sistema.interligacao.centrais[id]"\r\n              >\r\n                {{id + 1}}\r\n              </md-checkbox>\r\n            </div>\r\n          </div>\r\n          <div ng-if="sistema.rede.p2p === false" class="form-value">\r\n            <div>\r\n              <md-checkbox\r\n                ng-disabled="sistema.endereco == 0 || sistema.endereco - 1 === id"\r\n                class="repeater-check"\r\n                ng-repeat="id in [0,1,2,3]"\r\n                ng-model="sistema.interligacao.centrais[id]"\r\n              >\r\n                {{id + 1}}\r\n              </md-checkbox>\r\n            </div>\r\n            <div>\r\n              <md-checkbox\r\n                ng-disabled="sistema.endereco == 0 || sistema.endereco - 1 === id"\r\n                class="repeater-check"\r\n                ng-repeat="id in [4,5,6,7]"\r\n                ng-model="sistema.interligacao.centrais[id]"\r\n              >\r\n                {{id + 1}}\r\n              </md-checkbox>\r\n            </div>\r\n            <div>\r\n              <md-checkbox\r\n                ng-disabled="sistema.endereco == 0 || sistema.endereco - 1 === id"\r\n                class="repeater-check"\r\n                ng-repeat="id in [8,9,10,11]"\r\n                ng-model="sistema.interligacao.centrais[id]"\r\n              >\r\n                {{id + 1}}\r\n              </md-checkbox>\r\n            </div>\r\n            <div>\r\n              <md-checkbox\r\n                ng-disabled="sistema.endereco == 0 || sistema.endereco - 1 === id"\r\n                class="repeater-check"\r\n                ng-repeat="id in [12,13,14,15]"\r\n                ng-model="sistema.interligacao.centrais[id]"\r\n              >\r\n                {{id + 1}}\r\n              </md-checkbox>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="form-item">\r\n          <div class="form-label">\r\n            {{ \'system.comandosGlobais\' | translate }}:\r\n          </div>\r\n          <div class="form-value">\r\n            <div>\r\n              <md-checkbox\r\n                ng-disabled="sistema.endereco == 0"\r\n                class="repeater-check"\r\n                ng-model="sistema.interligacao.alarme_geral"\r\n              >\r\n                {{ \'system.alarmeGeral\' | translate }}\r\n              </md-checkbox>\r\n            </div>\r\n            <div>\r\n              <md-checkbox\r\n                ng-disabled="sistema.endereco == 0"\r\n                class="repeater-check"\r\n                ng-model="sistema.interligacao.reiniciar_central"\r\n              >\r\n                {{ \'system.reiniciarCentral\' | translate }}\r\n              </md-checkbox>\r\n            </div>\r\n            <div>\r\n              <md-checkbox\r\n                ng-disabled="sistema.endereco == 0"\r\n                class="repeater-check"\r\n                ng-model="sistema.interligacao.silenciar_central"\r\n              >\r\n                {{ \'system.silenciarCentral\' | translate }}\r\n              </md-checkbox>\r\n            </div>\r\n            <div>\r\n              <md-checkbox\r\n                ng-disabled="sistema.endereco == 0"\r\n                class="repeater-check"\r\n                ng-model="sistema.interligacao.silenciar_sirene"\r\n              >\r\n                {{ \'system.silenciarSirene\' | translate }}\r\n              </md-checkbox>\r\n            </div>\r\n            <div>\r\n              <md-checkbox\r\n                ng-disabled="sistema.endereco == 0"\r\n                class="repeater-check"\r\n                ng-model="sistema.interligacao.sirene_brigada"\r\n              >\r\n                {{ \'system.sireneBrigada\' | translate }}\r\n              </md-checkbox>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <section layout="row" layout-align="center center" layout-wrap>\r\n        <md-button ng-click="cancel()" class="md-raised"\r\n          >{{ \'system.cancelar\' | translate }}</md-button\r\n        >\r\n        <md-button ng-click="saveInterconnection()" class="md-raised md-accent"\r\n          >{{ \'system.aplicar\' | translate }}</md-button\r\n        >\r\n      </section>\r\n    </div>\r\n\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'network\'"\r\n      layout-padding\r\n      class="md-whiteframe-4dp system-content"\r\n    >\r\n      <div class="section-title">\r\n        {{ \'system.configuracoesRede\' | translate }}\r\n      </div>\r\n\r\n      <form\r\n        ng-if="!centralModel.isRepeater"\r\n        name="form.network"\r\n        layout="column"\r\n        autocomplete="off"\r\n      >\r\n        <div\r\n          class="form-item"\r\n          style="padding-bottom: 20px; border-bottom: none"\r\n        >\r\n          <label class="form-label">{{ \'system.modo\' | translate }}:</label>\r\n          <div class="form-value">\r\n            <md-radio-group ng-model="rede.modo">\r\n              <md-radio-button value="dhcp">DHCP</md-radio-button>\r\n              <md-radio-button value="fixo">\r\n                {{ \'system.ipFixo\' | translate }}</md-radio-button\r\n              >\r\n              <div\r\n                layout="row"\r\n                layout-align="center center"\r\n                ng-if="!centralModel.isGateway"\r\n              >\r\n                <md-radio-button\r\n                  ng-disabled="isCIEConnected && !hasFeatureInVersion(\'ponto-a-ponto\')"\r\n                  value="p2p"\r\n                  style="margin-bottom: 0px"\r\n                >\r\n                  {{ \'system.pontoAPonto\' | translate }}\r\n                </md-radio-button>\r\n                <version-alert\r\n                  ng-if="!isCIEConnected || !hasFeatureInVersion(\'ponto-a-ponto\')"\r\n                  cie-connected="isCIEConnected"\r\n                  version="CONFIG.controle_versao[\'ponto-a-ponto\']"\r\n                ></version-alert>\r\n              </div>\r\n            </md-radio-group>\r\n          </div>\r\n        </div>\r\n        <div ng-if="sistema.rede.dhcp == 0" class="section-title">\r\n          {{ \'system.configuracoesIpFixo\' | translate }}\r\n        </div>\r\n        <div ng-if="rede.modo != \'p2p\' && sistema.rede.dhcp == 0">\r\n          <div class="form-item" style="padding-top: 30px">\r\n            <label class="form-label"\r\n              >{{ \'system.enderecoIp\' | translate }}:</label\r\n            >\r\n            <div class="form-value-container">\r\n              <md-input-container\r\n                ng-if="sistema.rede.dhcp == 0"\r\n                style="width: 180px"\r\n              >\r\n                <input\r\n                  name="ip"\r\n                  required\r\n                  ng-model="sistema.rede.ip"\r\n                  ng-pattern="REGEX.IP"\r\n                  aria-label="{{ \'system.enderecoIp\' | translate }}"\r\n                />\r\n                <div ng-messages="form.network.ip.$error">\r\n                  <div ng-message="pattern">\r\n                    {{ \'system.enderecoIpInvalido\' | translate }}\r\n                  </div>\r\n                  <div ng-message="required">\r\n                    {{ \'system.campoObrigatorio\' | translate }}\r\n                  </div>\r\n                </div>\r\n              </md-input-container>\r\n              <label ng-if="sistema.rede.dhcp == 1" class="form-value"\r\n                >{{centralInfo.ip || (\'system.centralOffline\' |\r\n                translate)}}</label\r\n              >\r\n            </div>\r\n          </div>\r\n          <div class="form-item" style="padding-top: 30px">\r\n            <label class="form-label"\r\n              >{{ \'system.mascara\' | translate }}:</label\r\n            >\r\n            <div class="form-value-container">\r\n              <md-input-container\r\n                ng-if="sistema.rede.dhcp == 0"\r\n                style="width: 180px"\r\n              >\r\n                <input\r\n                  name="mascara"\r\n                  required\r\n                  ng-model="sistema.rede.mascara"\r\n                  ng-pattern="REGEX.IP"\r\n                  aria-label="Máscara"\r\n                />\r\n                <div ng-messages="form.network.mascara.$error">\r\n                  <div ng-message="pattern">\r\n                    {{ \'system.mascaraInvalida\' | translate }}\r\n                  </div>\r\n                  <div ng-message="required">\r\n                    {{ \'system.campoObrigatorio\' | translate }}\r\n                  </div>\r\n                </div>\r\n              </md-input-container>\r\n              <label ng-if="sistema.rede.dhcp == 1" class="form-value"\r\n                >{{centralInfo.mascara || (\'system.centralOffline\' |\r\n                translate)}}</label\r\n              >\r\n            </div>\r\n          </div>\r\n          <div class="form-item" style="padding-top: 30px">\r\n            <label class="form-label"\r\n              >{{ \'system.gatewayPadrao\' | translate }}:</label\r\n            >\r\n            <div class="form-value-container">\r\n              <md-input-container\r\n                ng-if="sistema.rede.dhcp == 0"\r\n                style="width: 180px"\r\n              >\r\n                <input\r\n                  name="gateway"\r\n                  required\r\n                  ng-model="sistema.rede.gateway"\r\n                  aria-label="Gateway padrão"\r\n                  ng-pattern="REGEX.IP"\r\n                />\r\n                <div ng-messages="form.network.gateway.$error">\r\n                  <div ng-message="pattern">\r\n                    {{ \'system.gatewayInvalido\' | translate }}\r\n                  </div>\r\n                  <div ng-message="required">\r\n                    {{ \'system.campoObrigatorio\' | translate }}\r\n                  </div>\r\n                </div>\r\n              </md-input-container>\r\n              <label ng-if="sistema.rede.dhcp == 1" class="form-value"\r\n                >{{centralInfo.gateway || (\'system.centralOffline\' |\r\n                translate)}}</label\r\n              >\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n\r\n      <form\r\n        ng-if="centralModel.isRepeater"\r\n        name="form.generalConfig"\r\n        layout="column"\r\n        autocomplete="off"\r\n      >\r\n        <div class="form-item">\r\n          <label class="form-label"\r\n            >{{ \'system.enderecoIp\' | translate }}:</label\r\n          >\r\n          <div class="form-value-container">\r\n            <label ng-if="sistema.rede.dhcp == 0" class="form-value"\r\n              >{{sistema.rede.ip}}</label\r\n            >\r\n            <label ng-if="sistema.rede.dhcp == 1" class="form-value"\r\n              >{{centralInfo.ip || (\'system.centralOffline\' |\r\n              translate)}}</label\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class="form-item">\r\n          <label class="form-label">{{ \'system.mascara\' | translate }}:</label>\r\n          <div class="form-value-container">\r\n            <label ng-if="sistema.rede.dhcp == 0" class="form-value"\r\n              >{{sistema.rede.mascara}}</label\r\n            >\r\n            <label ng-if="sistema.rede.dhcp == 1" class="form-value"\r\n              >{{centralInfo.mascara || (\'system.centralOffline\' |\r\n              translate)}}</label\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class="form-item">\r\n          <label class="form-label"\r\n            >{{ \'system.gatewayPadrao\' | translate }}:</label\r\n          >\r\n          <div class="form-value-container">\r\n            <label ng-if="sistema.rede.dhcp == 0" class="form-value"\r\n              >{{sistema.rede.gateway}}</label\r\n            >\r\n            <label ng-if="sistema.rede.dhcp == 1" class="form-value"\r\n              >{{centralInfo.gateway || (\'system.centralOffline\' |\r\n              translate)}}</label\r\n            >\r\n          </div>\r\n        </div>\r\n      </form>\r\n\r\n      <section\r\n        ng-if="!centralModel.isRepeater"\r\n        layout="row"\r\n        layout-align="center center"\r\n        layout-wrap\r\n      >\r\n        <md-button ng-click="cancel()" class="md-raised"\r\n          >{{ \'system.cancelar\' | translate }}</md-button\r\n        >\r\n        <md-button\r\n          ng-click="saveNetwork()"\r\n          ng-disabled="form.network.$invalid"\r\n          class="md-raised md-accent"\r\n          >{{ \'system.aplicar\' | translate }}</md-button\r\n        >\r\n      </section>\r\n    </div>\r\n\r\n    <registro-eventos\r\n      showButtons="true"\r\n      flex\r\n      ng-if="selectedScreen == \'logs\'"\r\n      layout-padding\r\n      layout="row"\r\n      class="md-whiteframe-4dp system-content logs-content"\r\n      layout-align="center stretch"\r\n    >\r\n    </registro-eventos>\r\n\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'info\'"\r\n      layout-padding\r\n      class="md-whiteframe-4dp system-content"\r\n      dw-loading="info@app.system"\r\n    >\r\n      <div class="section-title">\r\n        {{ \'system.informacoesCentral\' | translate }}\r\n      </div>\r\n      <form layout="column">\r\n        <div class="form-item">\r\n          <label class="form-label"\r\n            >{{ \'system.modeloCentral\' | translate }}:</label\r\n          >\r\n          <label class="form-value"\r\n            >{{ centralInfo.centralModel ? (centralInfo.centralModel |\r\n            translate) : (\'system.centralOffline\' |\r\n            translate)}}{{centralModel.isRepeater ? \' - \' +\r\n            centralInfo.centralConectadaRepetidora : \'\'}}</label\r\n          >\r\n        </div>\r\n        <div class="form-item">\r\n          <label class="form-label"\r\n            >{{ \'system.versaoFirmware\' | translate }}:</label\r\n          >\r\n          <label class="form-value"\r\n            >{{centralInfo.firmware || (\'system.centralOffline\' |\r\n            translate)}}</label\r\n          >\r\n        </div>\r\n        <div ng-if="centralModel.is1060" class="form-item">\r\n          <label class="form-label"\r\n            >{{ \'system.quantidadeDispositivos\' | translate }}:</label\r\n          >\r\n          <label class="form-value">{{cie1060CentralInfo.qtdDevices}}</label>\r\n        </div>\r\n        <div ng-if="centralModel.is1060" class="form-item">\r\n          <label class="form-label">{{ \'system.classe\' | translate }}:</label>\r\n          <label class="form-value">{{cie1060CentralInfo.classe}}</label>\r\n        </div>\r\n        <div ng-if="centralModel.is1060" class="form-item">\r\n          <label class="form-label"\r\n            >{{ \'system.regraPadrao\' | translate }}:</label\r\n          >\r\n          <label class="form-value"\r\n            >{{cie1060CentralInfo.ativacao_saida === \'temporizada\' ?\r\n            ((\'system.temporizada\' | translate) + \' (\' +\r\n            cie1060CentralInfo.temporizacao + \')\' ) : (\'system.imediata\' |\r\n            translate) }}</label\r\n          >\r\n        </div>\r\n        <div ng-if="!centralModel.is1060" class="form-item">\r\n          <label class="form-label">MAC Address:</label>\r\n          <label class="form-value"\r\n            >{{centralInfo.enderecoMac || (\'system.centralOffline\' |\r\n            translate)}}</label\r\n          >\r\n        </div>\r\n        <div ng-if="!centralModel.isGateway && !centralModel.is1060">\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{ \'system.versaoFonte\' | translate }}:</label\r\n            >\r\n            <label class="form-value"\r\n              >{{centralInfo.versaoFonte || (\'system.centralOffline\' |\r\n              translate)}}</label\r\n            >\r\n          </div>\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{ \'system.versaoLaco\' | translate }}:</label\r\n            >\r\n            <label class="form-value"\r\n              >{{centralInfo.versaoLaco || (\'system.centralOffline\' |\r\n              translate)}}</label\r\n            >\r\n          </div>\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{ \'system.versaoProtocolo\' | translate }}:</label\r\n            >\r\n            <label class="form-value"\r\n              >{{centralInfo.versaoProtocolo || (\'system.centralOffline\' |\r\n              translate)}}</label\r\n            >\r\n          </div>\r\n        </div>\r\n        <div ng-if="centralModel.isGateway">\r\n          <div class="form-item" style="margin-top: 40px">\r\n            <label class="form-label"\r\n              >{{ \'system.modoDaRede\' | translate }}:</label\r\n            >\r\n            <div\r\n              ng-if="centralInfo.networkMode !== undefined"\r\n              class="form-value-container"\r\n            >\r\n              <label ng-if="centralInfo.networkMode == 0" class="form-value"\r\n                >{{ \'system.ipFixo\' | translate }}</label\r\n              >\r\n              <label ng-if="centralInfo.networkMode == 1" class="form-value"\r\n                >DHCP</label\r\n              >\r\n              <label ng-if="!centralInfo == undefined" class="form-value"\r\n                >{{\'system.centralOffline\' | translate}}</label\r\n              >\r\n            </div>\r\n            <div\r\n              ng-if="centralInfo.networkMode === undefined"\r\n              class="form-value-container"\r\n            >\r\n              <label class="form-value"\r\n                >{{\'system.centralOffline\' | translate}}</label\r\n              >\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            ng-if="centralInfo.ip !== \'0.0.0.0\' && centralInfo.gateway !== \'0.0.0.0\' && centralInfo.mascara !== \'0.0.0.0\'"\r\n          >\r\n            <div class="form-item">\r\n              <label class="form-label"\r\n                >{{ \'system.enderecoIp\' | translate }}:</label\r\n              >\r\n              <label class="form-value"\r\n                >{{centralInfo.ip || (\'system.centralOffline\' |\r\n                translate)}}</label\r\n              >\r\n            </div>\r\n            <div class="form-item">\r\n              <label class="form-label"\r\n                >{{ \'system.gatewayPadrao\' | translate }}:</label\r\n              >\r\n              <label class="form-value"\r\n                >{{centralInfo.gateway || (\'system.centralOffline\' |\r\n                translate)}}</label\r\n              >\r\n            </div>\r\n            <div class="form-item">\r\n              <label class="form-label"\r\n                >{{ \'system.mascara\' | translate }}:</label\r\n              >\r\n              <label class="form-value"\r\n                >{{centralInfo.mascara || (\'system.centralOffline\' |\r\n                translate)}}</label\r\n              >\r\n            </div>\r\n          </div>\r\n          <div\r\n            ng-if="centralInfo.ip === \'0.0.0.0\' && centralInfo.gateway === \'0.0.0.0\' && centralInfo.mascara === \'0.0.0.0\'"\r\n          >\r\n            <div class="form-item">\r\n              <label class="form-label"\r\n                >{{ \'system.enderecoIp\' | translate }}:</label\r\n              >\r\n              <label class="form-value"\r\n                >{{\'system.interfaceDesconectada\' | translate}}</label\r\n              >\r\n            </div>\r\n          </div>\r\n\r\n          <div ng-if="!(gatewayErrors | isEmpty)" style="margin-top: 50px">\r\n            <div class="section-title">\r\n              {{ \'system.detalhamentoDeErros\' | translate }}\r\n            </div>\r\n            <div\r\n              class="form-item"\r\n              ng-repeat="errorType in [\'sistema\', \'flashExterna\', \'ethernet\', \'comunicacao\', \'modbus\', \'situador\', \'webhook\', \'rcptip\']"\r\n            >\r\n              <label class="form-label"\r\n                >{{ \'system.\' + errorType | translate }}:</label\r\n              >\r\n              <div layout="column">\r\n                <label\r\n                  ng-if="!gatewayErrors[errorType].length"\r\n                  class="form-value"\r\n                  >{{(\'system.semErros\' | translate)}}</label\r\n                >\r\n                <label\r\n                  ng-if="gatewayErrors[errorType].length"\r\n                  class="form-value"\r\n                  ng-repeat="error in gatewayErrors[errorType]"\r\n                  >{{(\'system.\' + error | translate)}}</label\r\n                >\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'generalConfig\' && centralModel.isGateway"\r\n      layout-padding\r\n      class="md-whiteframe-4dp system-content gateway-content"\r\n    >\r\n      <div class="section-title">{{ \'system.configuracoes\' | translate }}</div>\r\n      <form\r\n        name="form.gateway"\r\n        layout="column"\r\n        autocomplete="off"\r\n        style="margin-block-end: 0"\r\n      >\r\n        <div class="form-item">\r\n          <label class="form-label" style="margin-right: 1rem"\r\n            >{{ \'system.modo\' | translate }}:</label\r\n          >\r\n          <div layout="row" layout-align="space-evenly">\r\n            <div>\r\n              <md-switch\r\n                class="md-accent switch-config"\r\n                ng-model="gateway.integracao"\r\n                ng-true-value="\'desabilitada\'"\r\n                >{{ \'system.integracaoDesabilitada\' | translate }}</md-switch\r\n              >\r\n              <md-switch\r\n                class="md-accent switch-config"\r\n                ng-model="gateway.integracao"\r\n                ng-true-value="\'modbusTCP\'"\r\n                >{{ \'system.modbusTCP\' | translate }}</md-switch\r\n              >\r\n              <md-switch\r\n                class="md-accent switch-config"\r\n                ng-model="gateway.integracao"\r\n                ng-true-value="\'situador\'"\r\n                >{{ \'system.situador\' | translate }}</md-switch\r\n              >\r\n              <md-switch\r\n                class="md-accent switch-config"\r\n                ng-model="gateway.integracao"\r\n                ng-true-value="\'webhook\'"\r\n                >{{ \'system.Webhook\' | translate }}</md-switch\r\n              >\r\n            </div>\r\n            <md-divider style="margin: 0 2rem"></md-divider>\r\n            <div>\r\n              <md-switch\r\n                class="md-accent switch-config"\r\n                ng-model="gateway.integracao"\r\n                ng-true-value="\'rcptip\'"\r\n                >{{ \'system.rcptip\' | translate }}</md-switch\r\n              >\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n\r\n      <div ng-if="gateway.integracao === \'modbusTCP\'">\r\n        <form name="form.modbusTCP" layout="column" autocomplete="off">\r\n          <div class="form-item" layout="row" layout-align="start start">\r\n            <label class="form-label">{{ \'system.porta\' | translate }}:</label>\r\n            <div class="form-value-container">\r\n              <md-input-container style="width: 70px">\r\n                <input\r\n                  type="number"\r\n                  name="porta"\r\n                  ng-model="gateway.modbusTCP.porta"\r\n                  max="65535"\r\n                  min="0"\r\n                />\r\n                <div ng-messages="form.modbusTCP.porta.$error">\r\n                  <div ng-message="min">\r\n                    {{ \'system.oValorMinimo\' | translate }} 0\r\n                  </div>\r\n                  <div ng-message="max">\r\n                    {{ \'system.oValorMaximo\' | translate }} 65535\r\n                  </div>\r\n                </div>\r\n              </md-input-container>\r\n            </div>\r\n            <div class="input-info">{{ \'system.padrao\' | translate }}: 502</div>\r\n          </div>\r\n          <div\r\n            class="form-item form-item-padding"\r\n            layout="row"\r\n            layout-align="start start"\r\n          >\r\n            <label class="form-label">{{ \'system.unitID\' | translate }}:</label>\r\n            <div class="form-value-container">\r\n              <md-input-container style="width: 70px">\r\n                <input\r\n                  type="number"\r\n                  name="unitID"\r\n                  ng-model="gateway.modbusTCP.unitID"\r\n                  max="255"\r\n                  min="0"\r\n                />\r\n                <div ng-messages="form.modbusTCP.unitID.$error">\r\n                  <div ng-message="min">\r\n                    {{ \'system.oValorMinimo\' | translate }} 0\r\n                  </div>\r\n                  <div ng-message="max">\r\n                    {{ \'system.oValorMaximo\' | translate }} 255\r\n                  </div>\r\n                </div>\r\n              </md-input-container>\r\n            </div>\r\n            <div class="input-info">{{ \'system.padrao\' | translate }}: 1</div>\r\n          </div>\r\n          <div\r\n            class="form-item form-item-padding"\r\n            layout="row"\r\n            layout-align="start start"\r\n          >\r\n            <label class="form-label"\r\n              >{{ \'system.timeout\' | translate }}:</label\r\n            >\r\n            <div class="form-value-container">\r\n              <md-input-container style="width: 70px">\r\n                <input\r\n                  minsec-validate\r\n                  required\r\n                  ng-model="gateway.modbusTCP.timeout"\r\n                  type="text"\r\n                  name="timeout"\r\n                  maxValueAttr="3599"\r\n                  minValueAttr="10"\r\n                />\r\n                <div ng-messages="form.modbusTCP.timeout.$error">\r\n                  <div ng-message="min">\r\n                    {{ \'system.oValorMinimo\' | translate }} 00:10\r\n                  </div>\r\n                  <div ng-message="max">\r\n                    {{ \'system.oValorMaximo\' | translate }} 59:59\r\n                  </div>\r\n                </div>\r\n              </md-input-container>\r\n            </div>\r\n            <div class="input-info">(min:seg)</div>\r\n          </div>\r\n          <div\r\n            ng-if="form.modbusTCP.response"\r\n            class="test-response"\r\n            layout="column"\r\n            layout-align="start center"\r\n          >\r\n            <div class="test-response-title">Resposta:</div>\r\n            <div>{{gatewayForm.response}}</div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <div ng-if="gateway.integracao === \'situador\'">\r\n        <form name="form.situador" layout="column" autocomplete="off">\r\n          <div class="form-item" layout="column" layout-align="start start">\r\n            <div\r\n              layout="row"\r\n              layout-align="start start"\r\n              style="margin-bottom: 20px"\r\n            >\r\n              <label class="form-label">Idioma:</label>\r\n              <div class="form-value">\r\n                <md-radio-group\r\n                  ng-model="gateway.situador.idioma"\r\n                  layout="row"\r\n                  layout-align="start center"\r\n                >\r\n                  <md-radio-button value="pt"\r\n                    >{{ \'system.pt\' | translate }}</md-radio-button\r\n                  >\r\n                  <md-radio-button value="es"\r\n                    >{{ \'system.es\' | translate }}</md-radio-button\r\n                  >\r\n                </md-radio-group>\r\n              </div>\r\n            </div>\r\n            <div\r\n              layout="row"\r\n              layout-align="start start"\r\n              style="margin-bottom: 20px"\r\n            >\r\n              <label class="form-label"\r\n                >{{ \'system.modoAutenticacao\' | translate }}:</label\r\n              >\r\n              <div class="form-value">\r\n                <md-radio-group\r\n                  ng-model="gateway.situador.autenticacao"\r\n                  layout="row"\r\n                  layout-align="start center"\r\n                >\r\n                  <md-radio-button value="login"\r\n                    >{{ \'system.usuarioESenha\' | translate }}</md-radio-button\r\n                  >\r\n                  <md-radio-button value="token">Token</md-radio-button>\r\n                </md-radio-group>\r\n              </div>\r\n            </div>\r\n            <div\r\n              ng-if="gateway.situador.autenticacao === \'token\'"\r\n              layout="row"\r\n              layout-align="start start"\r\n            >\r\n              <label class="form-label">Token:</label>\r\n              <div class="form-value-container">\r\n                <md-input-container style="width: 400px">\r\n                  <input\r\n                    type="text"\r\n                    name="token"\r\n                    ng-model="gateway.situador.token"\r\n                    maxlength="96"\r\n                    md-maxlength="96"\r\n                    required\r\n                  />\r\n                </md-input-container>\r\n              </div>\r\n            </div>\r\n            <div\r\n              ng-if="gateway.situador.autenticacao === \'login\'"\r\n              layout="column"\r\n              layout-align="start start"\r\n            >\r\n              <div layout="row" layout-align="start start">\r\n                <label class="form-label"\r\n                  >{{ \'system.usuario\' | translate }}:</label\r\n                >\r\n                <div class="form-value-container">\r\n                  <md-input-container style="width: 200px">\r\n                    <input\r\n                      type="text"\r\n                      required\r\n                      name="usuario"\r\n                      ng-model="gateway.situador.usuario"\r\n                      maxlength="48"\r\n                      md-maxlength="48"\r\n                    />\r\n                  </md-input-container>\r\n                </div>\r\n              </div>\r\n              <div layout="row" layout-align="start start">\r\n                <label class="form-label"\r\n                  >{{ \'system.senha\' | translate }}:</label\r\n                >\r\n                <div class="form-value-container">\r\n                  <md-input-container\r\n                    ng-if="!formSituador.showPassword"\r\n                    style="width: 200px"\r\n                  >\r\n                    <input\r\n                      type="password"\r\n                      required\r\n                      name="senha"\r\n                      ng-model="gateway.situador.senha"\r\n                      maxlength="48"\r\n                      md-maxlength="48"\r\n                    />\r\n                    <md-icon\r\n                      ng-click="formSituador.showPassword = true"\r\n                      style="cursor: pointer"\r\n                      >visibility_off</md-icon\r\n                    >\r\n                  </md-input-container>\r\n                  <md-input-container\r\n                    ng-if="formSituador.showPassword"\r\n                    style="width: 200px"\r\n                  >\r\n                    <input\r\n                      type="text"\r\n                      required\r\n                      name="senha"\r\n                      ng-model="gateway.situador.senha"\r\n                      maxlength="48"\r\n                      md-maxlength="48"\r\n                    />\r\n                    <md-icon\r\n                      ng-click="formSituador.showPassword = false"\r\n                      style="cursor: pointer"\r\n                      >visibility</md-icon\r\n                    >\r\n                  </md-input-container>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div\r\n            class="form-item form-item-padding"\r\n            layout="column"\r\n            layout-align="start start"\r\n          >\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label">{{ \'system.host\' | translate }}:</label>\r\n              <div class="form-value-container">\r\n                <md-input-container style="width: 400px">\r\n                  <input\r\n                    type="text"\r\n                    required\r\n                    name="ip"\r\n                    ng-model="gateway.situador.host"\r\n                    maxlength="100"\r\n                    md-maxlength="100"\r\n                  />\r\n                </md-input-container>\r\n              </div>\r\n            </div>\r\n            \x3c!--<div layout="row" layout-align="start start">\r\n<label class="form-label">HTTPS:</label>\r\n<div class="form-value-container" style="margin-left: 10px">\r\n<md-switch class="md-accent switch-config" ng-model="gateway.situador.https"></md-switch>\r\n</div>\r\n</div>--\x3e\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.porta\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <md-input-container style="width: 70px">\r\n                  <input\r\n                    type="number"\r\n                    name="porta"\r\n                    ng-model="gateway.situador.porta"\r\n                    max="65535"\r\n                    min="0"\r\n                  />\r\n                  <div ng-messages="form.situador.porta.$error">\r\n                    <div ng-message="min">\r\n                      {{ \'system.oValorMinimo\' | translate }} 0\r\n                    </div>\r\n                    <div ng-message="max">\r\n                      {{ \'system.oValorMaximo\' | translate }} 65535\r\n                    </div>\r\n                  </div>\r\n                </md-input-container>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="form-item form-item-padding">\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.codigoConta\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <md-input-container style="width: 70px">\r\n                  <input\r\n                    required\r\n                    ng-model="gateway.situador.codigoConta"\r\n                    type="number"\r\n                    name="codigoConta"\r\n                    max="4294967296"\r\n                    min="0"\r\n                  />\r\n                  <div ng-messages="form.situador.codigoConta.$error">\r\n                    <div ng-message="min">\r\n                      {{ \'system.oValorMinimo\' | translate }} 0\r\n                    </div>\r\n                    <div ng-message="max">\r\n                      {{ \'system.oValorMaximo\' | translate }} 4294967296\r\n                    </div>\r\n                  </div>\r\n                </md-input-container>\r\n              </div>\r\n            </div>\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.codigoZona\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <md-input-container style="width: 230px">\r\n                  <input\r\n                    type="text"\r\n                    name="codigoZona"\r\n                    ng-model="gateway.situador.codigoZona"\r\n                    maxlength="30"\r\n                    md-maxlength="30"\r\n                  />\r\n                </md-input-container>\r\n              </div>\r\n              <div class="input-info">\r\n                ({{ \'system.opcional\' | translate }})\r\n              </div>\r\n              <icon-tooltip-warning\r\n                ng-if="gateway.situador.codigoZona"\r\n                label="\'system.infoCodigoZona\'"\r\n              />\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <div ng-if="gateway.integracao === \'webhook\'">\r\n        <form name="form.webhook" layout="column" autocomplete="off">\r\n          <div class="form-item" layout="column" layout-align="start start">\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.enderecoWebhook\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <md-input-container style="width: 400px">\r\n                  <input\r\n                    type="text"\r\n                    required\r\n                    name="host"\r\n                    ng-model="gateway.webhook.host"\r\n                    maxlength="100"\r\n                    md-maxlength="100"\r\n                  />\r\n                  <div ng-messages="form.webhook.host.$error">\r\n                    <div ng-message="pattern">\r\n                      {{ \'system.enderecoIpInvalido\' | translate }}\r\n                    </div>\r\n                    <div ng-message="required">\r\n                      {{ \'system.campoObrigatorio\' | translate }}\r\n                    </div>\r\n                  </div>\r\n                </md-input-container>\r\n              </div>\r\n            </div>\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.porta\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <md-input-container style="width: 70px">\r\n                  <input\r\n                    required\r\n                    type="number"\r\n                    name="porta"\r\n                    ng-model="gateway.webhook.porta"\r\n                    max="65535"\r\n                    min="0"\r\n                  />\r\n                  <div ng-messages="form.webhook.porta.$error">\r\n                    <div ng-message="min">\r\n                      {{ \'system.oValorMinimo\' | translate }} 0\r\n                    </div>\r\n                    <div ng-message="max">\r\n                      {{ \'system.oValorMaximo\' | translate }} 65535\r\n                    </div>\r\n                  </div>\r\n                </md-input-container>\r\n              </div>\r\n              <icon-tooltip-warning\r\n                ng-if="gateway.webhook.autenticacao === \'https\' && gateway.webhook.porta !== 443 && gateway.webhook.porta !== 8443"\r\n                label="\'system.infoHttps\'"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class="form-item form-item-padding">\r\n            <div\r\n              layout="row"\r\n              layout-align="start start"\r\n              style="padding-bottom: 30px"\r\n            >\r\n              <label class="form-label"\r\n                >{{ \'system.autenticacao\' | translate }}:</label\r\n              >\r\n              <div class="form-value">\r\n                <md-radio-group\r\n                  ng-model="gateway.webhook.autenticacao"\r\n                  layout="row"\r\n                  layout-align="start center"\r\n                >\r\n                  <md-radio-button value="hmac">HMAC</md-radio-button>\r\n                  <md-radio-button value="https">HTTPS</md-radio-button>\r\n                </md-radio-group>\r\n              </div>\r\n            </div>\r\n            <div\r\n              layout="row"\r\n              layout-align="start center"\r\n              ng-if="gateway.webhook.autenticacao === \'hmac\'"\r\n            >\r\n              <label class="form-label"\r\n                >{{ \'system.chavePrivada\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <md-input-container style="width: 350px">\r\n                  <textarea\r\n                    type="text"\r\n                    required\r\n                    name="host"\r\n                    ng-model="gateway.webhook.chavePrivada"\r\n                    maxlength="88"\r\n                    md-maxlength="88"\r\n                    rows="2"\r\n                  ></textarea>\r\n                  <div ng-messages="form.webhook.host.$error">\r\n                    <div ng-message="pattern">\r\n                      {{ \'system.enderecoIpInvalido\' | translate }}\r\n                    </div>\r\n                    <div ng-message="required">\r\n                      {{ \'system.campoObrigatorio\' | translate }}\r\n                    </div>\r\n                  </div>\r\n                </md-input-container>\r\n              </div>\r\n              <md-button\r\n                style="margin-top: -5px; margin-left: 13px"\r\n                ng-click="generatePrivateKey()"\r\n                class="md-raised"\r\n                >{{ \'system.gerar\' | translate }}</md-button\r\n              >\r\n              <icon-tooltip-help label="\'system.infoChavePrivada\'" />\r\n            </div>\r\n            <div\r\n              layout="row"\r\n              layout-align="start start"\r\n              ng-if="gateway.webhook.autenticacao === \'https\'"\r\n            >\r\n              <label class="form-label"\r\n                >{{ \'system.nivelAutenticacao\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <md-select\r\n                  required\r\n                  ng-model="gateway.webhook.nivelAutenticacao"\r\n                  style="width: 200px; margin: 0 10px 25px 5px"\r\n                >\r\n                  <md-option value="criptografia">\r\n                    {{\'system.criptografia\' | translate}}\r\n                  </md-option>\r\n                  <md-option value="opcional">\r\n                    {{\'system.autenticacaoOpcional\' | translate}}\r\n                  </md-option>\r\n                  <md-option value="obrigatoria">\r\n                    {{\'system.autenticacaoObrigatoria\' | translate}}\r\n                  </md-option>\r\n                </md-select>\r\n              </div>\r\n              <icon-tooltip-help label="\'system.infoNivelAutenticacao\'" />\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            class="form-item form-item-padding"\r\n            layout="column"\r\n            layout-align="start start"\r\n          >\r\n            <div\r\n              layout="row"\r\n              layout-align="start start"\r\n              style="margin-bottom: 20px"\r\n            >\r\n              <label class="form-label">Idioma:</label>\r\n              <div class="form-value">\r\n                <md-radio-group\r\n                  ng-model="gateway.webhook.idioma"\r\n                  layout="row"\r\n                  layout-align="start center"\r\n                >\r\n                  <md-radio-button value="pt"\r\n                    >{{ \'system.pt\' | translate }}</md-radio-button\r\n                  >\r\n                  <md-radio-button value="es"\r\n                    >{{ \'system.es\' | translate }}</md-radio-button\r\n                  >\r\n                </md-radio-group>\r\n              </div>\r\n            </div>\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.intervaloHeartbeat\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <md-input-container style="width: 70px">\r\n                  <input\r\n                    minsec-validate\r\n                    ng-model="gateway.webhook.heartbeat"\r\n                    zero-allowed="true"\r\n                    type="text"\r\n                    name="heartbeat"\r\n                    maxValueAttr="3599"\r\n                    minValueAttr="0"\r\n                  />\r\n                  <div ng-messages="form.webhook.heartbeat.$error">\r\n                    <div ng-message="min">\r\n                      {{ \'system.oValorMinimo\' | translate }} 00:00\r\n                    </div>\r\n                    <div ng-message="max">\r\n                      {{ \'system.oValorMaximo\' | translate }} 59:59\r\n                    </div>\r\n                  </div>\r\n                </md-input-container>\r\n              </div>\r\n              <div class="input-info">(min:seg)</div>\r\n              <icon-tooltip-help label="\'system.infoHeartbeat\'" />\r\n            </div>\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.intervaloEntreEventos\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <md-input-container style="width: 70px">\r\n                  <input\r\n                    required\r\n                    type="number"\r\n                    name="intervaloEventos"\r\n                    ng-model="gateway.webhook.intervaloEventos"\r\n                    max="30000"\r\n                    min="250"\r\n                  />\r\n                  <div ng-messages="form.webhook.intervaloEventos.$error">\r\n                    <div ng-message="min">\r\n                      {{ \'system.oValorMinimo\' | translate }} 250\r\n                    </div>\r\n                    <div ng-message="max">\r\n                      {{ \'system.oValorMaximo\' | translate }} 30000\r\n                    </div>\r\n                  </div>\r\n                </md-input-container>\r\n              </div>\r\n              <div class="input-info">(ms)</div>\r\n            </div>\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.codigoDoEquipamento\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <md-input-container style="width: 70px">\r\n                  <input\r\n                    type="number"\r\n                    name="codigoEquipamento"\r\n                    ng-model="gateway.webhook.codigoEquipamento"\r\n                    max="4294967296"\r\n                    min="0"\r\n                  />\r\n                  <div ng-messages="form.webhook.codigoEquipamento.$error">\r\n                    <div ng-message="min">\r\n                      {{ \'system.oValorMinimo\' | translate }} 0\r\n                    </div>\r\n                    <div ng-message="max">\r\n                      {{ \'system.oValorMaximo\' | translate }} 4294967296\r\n                    </div>\r\n                  </div>\r\n                </md-input-container>\r\n              </div>\r\n              <div class="input-info">\r\n                ({{ \'system.opcional\' | translate }})\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <div ng-if="gateway.integracao === \'rcptip\'">\r\n        <form name="form.rcptip" layout="column" autocomplete="off">\r\n          <div class="form-item" layout="column" layout-align="start start">\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label">{{ \'system.host\' | translate }}:</label>\r\n              <div class="form-value-container">\r\n                <md-input-container style="width: 400px">\r\n                  <input\r\n                    type="text"\r\n                    required\r\n                    name="host"\r\n                    ng-model="gateway.rcptip.host"\r\n                    maxlength="100"\r\n                    md-maxlength="100"\r\n                  />\r\n                  <div ng-messages="form.rcptip.host.$error">\r\n                    <div ng-message="pattern">\r\n                      {{ \'system.enderecoIpInvalido\' | translate }}\r\n                    </div>\r\n                    <div ng-message="required">\r\n                      {{ \'system.campoObrigatorio\' | translate }}\r\n                    </div>\r\n                  </div>\r\n                </md-input-container>\r\n              </div>\r\n            </div>\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.porta\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <md-input-container style="width: 70px">\r\n                  <input\r\n                    required\r\n                    type="number"\r\n                    name="porta"\r\n                    ng-model="gateway.rcptip.porta"\r\n                    max="65535"\r\n                    min="0"\r\n                  />\r\n                  <div ng-messages="form.rcptip.porta.$error">\r\n                    <div ng-message="min">\r\n                      {{ \'system.oValorMinimo\' | translate }} 0\r\n                    </div>\r\n                    <div ng-message="max">\r\n                      {{ \'system.oValorMaximo\' | translate }} 65535\r\n                    </div>\r\n                  </div>\r\n                </md-input-container>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class="form-item form-item-padding">\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.codigoConta\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <md-input-container style="width: 70px">\r\n                  <input\r\n                    required\r\n                    ng-model="gateway.rcptip.codigoConta"\r\n                    type="number"\r\n                    name="codigoConta"\r\n                    max="4294967296"\r\n                    min="0"\r\n                  />\r\n                  <div ng-messages="form.rcptip.codigoConta.$error">\r\n                    <div ng-message="min">\r\n                      {{ \'system.oValorMinimo\' | translate }} 0\r\n                    </div>\r\n                    <div ng-message="max">\r\n                      {{ \'system.oValorMaximo\' | translate }} 4294967296\r\n                    </div>\r\n                  </div>\r\n                </md-input-container>\r\n              </div>\r\n              <icon-tooltip-help label="\'system.infoCodigoConta\'" />\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            class="form-item form-item-padding"\r\n            layout="column"\r\n            layout-align="start start"\r\n          >\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.intervaloHeartbeat\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <md-input-container style="width: 70px">\r\n                  <input\r\n                    minsec-validate\r\n                    ng-model="gateway.rcptip.heartbeat"\r\n                    zero-allowed="true"\r\n                    type="text"\r\n                    name="heartbeat"\r\n                    maxValueAttr="3599"\r\n                    minValueAttr="60"\r\n                  />\r\n                  <div ng-messages="form.rcptip.heartbeat.$error">\r\n                    <div ng-message="min">\r\n                      {{ \'system.oValorMinimo\' | translate }} 01:00\r\n                    </div>\r\n                    <div ng-message="max">\r\n                      {{ \'system.oValorMaximo\' | translate }} 59:59\r\n                    </div>\r\n                  </div>\r\n                </md-input-container>\r\n              </div>\r\n              <div class="input-info">(min:seg)</div>\r\n              <icon-tooltip-help label="\'system.infoHeartbeat\'" />\r\n            </div>\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.intervaloEntreEventos\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <md-input-container style="width: 70px">\r\n                  <input\r\n                    required\r\n                    type="number"\r\n                    name="intervaloEventos"\r\n                    ng-model="gateway.rcptip.intervaloEventos"\r\n                    max="30000"\r\n                    min="250"\r\n                  />\r\n                  <div ng-messages="form.rcptip.intervaloEventos.$error">\r\n                    <div ng-message="min">\r\n                      {{ \'system.oValorMinimo\' | translate }} 250\r\n                    </div>\r\n                    <div ng-message="max">\r\n                      {{ \'system.oValorMaximo\' | translate }} 30000\r\n                    </div>\r\n                  </div>\r\n                </md-input-container>\r\n              </div>\r\n              <div class="input-info">(ms)</div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <section layout="row" layout-align="center center" layout-wrap>\r\n        <md-button ng-click="cancel()" class="md-raised"\r\n          >{{ \'system.cancelar\' | translate }}</md-button\r\n        >\r\n        <md-button\r\n          ng-click="saveGatewayConfig()"\r\n          ng-disabled="form.generalConfig.$invalid"\r\n          class="md-raised md-accent"\r\n          >{{ \'system.aplicar\' | translate }}</md-button\r\n        >\r\n      </section>\r\n    </div>\r\n\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'generalConfig\' && !centralModel.isGateway"\r\n      layout-padding\r\n      class="md-whiteframe-4dp system-content"\r\n    >\r\n      <div class="section-title">{{ \'system.configuracoes\' | translate }}</div>\r\n      <form name="form.generalConfig" layout="column" autocomplete="off">\r\n        <div class="form-item" ng-if="centralModel.isRepeater">\r\n          <label class="form-label"\r\n            >{{ \'system.enderecoRepetidora\' | translate }}:</label\r\n          >\r\n          <div class="form-value">\r\n            <md-radio-group required ng-model="sistema.repetidora.endereco">\r\n              <md-radio-button value="1">R1</md-radio-button>\r\n              <md-radio-button value="2">R2</md-radio-button>\r\n              <md-radio-button value="3">R3</md-radio-button>\r\n              <md-radio-button value="4">R4</md-radio-button>\r\n            </md-radio-group>\r\n          </div>\r\n        </div>\r\n        <div ng-if="!centralModel.is1060" class="form-item">\r\n          <label class="form-label"\r\n            >{{ \'system.localInstalacao\' | translate }}:</label\r\n          >\r\n          <div class="form-value-container">\r\n            <md-input-container style="width: 180px">\r\n              <input\r\n                name="local_instalacao"\r\n                ng-change="onChangeLocalInstalation(\'local_instalacao\')"\r\n                ng-model="sistema.local_instalacao"\r\n                md-maxlength="localInstalacaoMaxLength"\r\n                maxlength="21"\r\n              />\r\n            </md-input-container>\r\n          </div>\r\n        </div>\r\n        <div ng-if="centralModel.is1060" class="form-item">\r\n          <label class="form-label"\r\n            >{{ \'system.localDeInstalacaoLinha1\' | translate }}:</label\r\n          >\r\n          <div class="form-value-container">\r\n            <md-input-container style="width: 180px">\r\n              <input\r\n                ng-change="onChangeLocalInstalation(\'local_instalacao_linha1\')"\r\n                name="local_instalacao_linha1"\r\n                ng-model="sistema.local_instalacao_linha1"\r\n                ng-trim="false"\r\n                md-maxlength="localInstalacaoMaxLength"\r\n                maxlength="14"\r\n              />\r\n            </md-input-container>\r\n          </div>\r\n        </div>\r\n        <div ng-if="centralModel.is1060" class="form-item">\r\n          <label class="form-label"\r\n            >{{ \'system.localDeInstalacaoLinha2\' | translate }}:</label\r\n          >\r\n          <div class="form-value-container">\r\n            <md-input-container style="width: 180px">\r\n              <input\r\n                ng-change="onChangeLocalInstalation(\'local_instalacao_linha2\')"\r\n                name="local_instalacao_linha2"\r\n                ng-model="sistema.local_instalacao_linha2"\r\n                ng-trim="false"\r\n                md-maxlength="localInstalacaoMaxLength"\r\n                maxlength="14"\r\n              />\r\n            </md-input-container>\r\n          </div>\r\n        </div>\r\n        <div class="form-item">\r\n          <label class="form-label"\r\n            >{{ \'system.tempoMaximo\' | translate }} (min:seg):</label\r\n          >\r\n          <div class="form-value-container">\r\n            <md-input-container style="width: 100px">\r\n              <input\r\n                minsec-validate\r\n                required\r\n                ng-model="sistema.retardo"\r\n                type="text"\r\n                name="retardo"\r\n                defaultRuleRespect="{{centralModel.is1060}}"\r\n              />\r\n              <div ng-messages="form.generalConfig.retardo.$error">\r\n                <div ng-message="required">\r\n                  {{ \'system.campoObrigatorio\' | translate }}.\r\n                </div>\r\n                <div ng-message="minsec">\r\n                  {{ \'system.faixaTempo\' | translate }}.\r\n                </div>\r\n                <div ng-message="retardo-minimo">\r\n                  {{ \'system.tempoDeveSerMenorRegraPadrao\' | translate }}\r\n                  ({{temporizacaoRegra}}).\r\n                </div>\r\n              </div>\r\n            </md-input-container>\r\n          </div>\r\n        </div>\r\n        <div class="form-item" ng-if="!centralModel.isRepeater">\r\n          <label class="form-label"\r\n            >{{ \'system.modoOperacao\' | translate }}:</label\r\n          >\r\n          <div class="form-value">\r\n            <md-radio-group ng-model="sistema.operacao">\r\n              <md-radio-button value="A"\r\n                >{{ \'system.classeA\' | translate }}</md-radio-button\r\n              >\r\n              <md-radio-button value="B"\r\n                >{{ \'system.classeB\' | translate }}</md-radio-button\r\n              >\r\n            </md-radio-group>\r\n          </div>\r\n        </div>\r\n        <div ng-if="!centralModel.is1060">\r\n          <div class="form-item" ng-if="!centralModel.isRepeater">\r\n            <label class="form-label" style="margin-top: 6px"\r\n              >{{ \'system.bateriaExterna\' | translate }}:</label\r\n            >\r\n            <div class="form-value">\r\n              <md-switch\r\n                class="md-accent switch-config"\r\n                ng-model="sistema.bateria_externa"\r\n              >\r\n                {{!sistema.bateria_externa ? (\'system.desabilitada\' | translate)\r\n                : (\'system.habilitada\' | translate)}}\r\n              </md-switch>\r\n            </div>\r\n          </div>\r\n          <div class="form-item" ng-if="!centralModel.isRepeater">\r\n            <label class="form-label"\r\n              >{{ \'system.habilitarRepetidoras\' | translate }}:</label\r\n            >\r\n            <div class="form-value">\r\n              <md-checkbox\r\n                class="repeater-check"\r\n                ng-repeat="id in [0,1,2,3]"\r\n                ng-model="sistema.repetidoras[id]"\r\n              >\r\n                R{{id + 1}}\r\n              </md-checkbox>\r\n            </div>\r\n          </div>\r\n          <div class="form-item" ng-if="!centralModel.isRepeater" layout="row">\r\n            <label class="form-label" style="margin-top: 6px"\r\n              >{{ \'system.preAlarme\' | translate }}:</label\r\n            >\r\n            <div class="form-value">\r\n              <md-switch\r\n                class="md-accent switch-config"\r\n                ng-model="sistema.pre_alarme"\r\n              >\r\n                {{!sistema.pre_alarme ? (\'system.desabilitada\' | translate) :\r\n                (\'system.habilitada\' | translate)}}\r\n              </md-switch>\r\n            </div>\r\n            <icon-tooltip-help\r\n              label="\'system.infoPreAlarme\'"\r\n              style="margin-top: 10px"\r\n            />\r\n          </div>\r\n          <div class="form-item" ng-if="!centralModel.isRepeater" layout="row">\r\n            <label class="form-label" style="margin-top: 6px"\r\n              >{{ \'system.habilitarGwt\' | translate }}:</label\r\n            >\r\n            <div class="form-value">\r\n              <md-switch\r\n                class="md-accent switch-config"\r\n                ng-model="sistema.gw521"\r\n              >\r\n                {{!sistema.gw521 ? (\'system.desabilitada\' | translate) :\r\n                (\'system.habilitada\' | translate)}}\r\n              </md-switch>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <section layout="row" layout-align="center center" layout-wrap>\r\n        <md-button ng-click="cancel()" class="md-raised"\r\n          >{{ \'system.cancelar\' | translate }}</md-button\r\n        >\r\n        <md-button\r\n          ng-click="saveGeneralConfig()"\r\n          ng-disabled="form.generalConfig.$invalid"\r\n          class="md-raised md-accent"\r\n          >{{ \'system.aplicar\' | translate }}</md-button\r\n        >\r\n      </section>\r\n    </div>\r\n\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'accessLevels\'"\r\n      layout-padding\r\n      class="md-whiteframe-4dp system-content"\r\n    >\r\n      <div class="section-title">\r\n        {{ centralModel.isGateway ? \'system.gwAuthPassword\' :\r\n        \'system.niveisAcesso\' | translate }}\r\n      </div>\r\n      <div ng-if="verifyShowAlertDefaultPassword()" class="alert">\r\n        {{\'system.alertaSenhaPadrao\' | translate }}\r\n      </div>\r\n      <div\r\n        class="alert"\r\n        ng-if="centralModel.isGateway && connectionMode === \'network\' && cannotSendGatewayConfig"\r\n      >\r\n        {{\'system.gwPasswordAlert\' | translate }}\r\n      </div>\r\n      <form name="form.accessLevels" layout="column" autocomplete="off">\r\n        <div ng-if="!centralModel.is1060 && !centralModel.isGateway">\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{ \'system.senhaNivel\' | translate }} 2:</label\r\n            >\r\n            <div class="form-value-container">\r\n              <md-input-container style="width: 100px">\r\n                <input\r\n                  md-maxlength="6"\r\n                  maxlength="6"\r\n                  ng-model="sistema.senha_2"\r\n                  type="text"\r\n                  name="senha_2"\r\n                />\r\n              </md-input-container>\r\n            </div>\r\n          </div>\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{ \'system.senhaNivel\' | translate }} 3:</label\r\n            >\r\n            <div class="form-value-container">\r\n              <md-input-container style="width: 100px">\r\n                <input\r\n                  md-maxlength="6"\r\n                  maxlength="6"\r\n                  ng-model="sistema.senha_3"\r\n                  type="text"\r\n                  name="senha_3"\r\n                />\r\n              </md-input-container>\r\n            </div>\r\n          </div>\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{ \'system.senhaNivel\' | translate }} 4:</label\r\n            >\r\n            <div class="form-value-container">\r\n              <md-input-container style="width: 100px">\r\n                <input\r\n                  md-maxlength="6"\r\n                  maxlength="6"\r\n                  ng-model="sistema.senha_4"\r\n                  type="text"\r\n                  name="senha_4"\r\n                />\r\n              </md-input-container>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div\r\n          layout="row"\r\n          layout-align="start start"\r\n          ng-if="centralModel.isGateway"\r\n        >\r\n          <label class="form-label">{{ \'system.senha\' | translate }}:</label>\r\n          <div class="form-value-container">\r\n            <md-input-container style="width: 200px">\r\n              <input\r\n                type="{{ !sistema.showPassword ? \'password\' : \'text\' }}"\r\n                required\r\n                name="senha"\r\n                ng-keyup="onChangeLocalInstalation(\'pwd_prog_cie\', $event)"\r\n                ng-model="sistema.pwd_prog_cie"\r\n                maxlength="20"\r\n                ng-trim="false"\r\n                md-maxlength="20"\r\n                minlength="6"\r\n              />\r\n              <md-icon\r\n                ng-click="sistema.showPassword = !sistema.showPassword"\r\n                style="cursor: pointer"\r\n                >{{ sistema.showPassword ? \'visibility_off\' :\r\n                \'visibility\'}}</md-icon\r\n              >\r\n              <div ng-messages="form.accessLevels.senha.$error">\r\n                <div ng-message="minlength">\r\n                  {{ \'system.pwdProgCieMinLength\' | translate }}.\r\n                </div>\r\n                <div ng-message="maxlength">\r\n                  {{ \'system.pwdProgCieMaxLength\' | translate }}.\r\n                </div>\r\n              </div>\r\n            </md-input-container>\r\n          </div>\r\n        </div>\r\n        <div ng-if="centralModel.is1060">\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{ \'system.senhaNivel\' | translate }} 2:</label\r\n            >\r\n            <div class="form-value-container">\r\n              <md-input-container style="width: 100px">\r\n                <input\r\n                  password-only-four-digits-validate\r\n                  md-maxlength="4"\r\n                  maxlength="4"\r\n                  ng-model="sistema.senha_2"\r\n                  type="text"\r\n                  name="senha_2"\r\n                />\r\n                <div ng-messages="form.accessLevels.senha_2.$error">\r\n                  <div ng-message="password">\r\n                    {{ \'system.aSenhaDeveTer4Digitos\' | translate }}.\r\n                  </div>\r\n                </div>\r\n              </md-input-container>\r\n            </div>\r\n          </div>\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{ \'system.senhaNivel\' | translate }} 3:</label\r\n            >\r\n            <div class="form-value-container">\r\n              <md-input-container style="width: 100px">\r\n                <input\r\n                  password-only-four-digits-validate\r\n                  md-maxlength="4"\r\n                  maxlength="4"\r\n                  ng-model="sistema.senha_3"\r\n                  type="text"\r\n                  name="senha_3"\r\n                />\r\n                <div ng-messages="form.accessLevels.senha_3.$error">\r\n                  <div ng-message="password">\r\n                    {{ \'system.aSenhaDeveTer4Digitos\' | translate }}.\r\n                  </div>\r\n                </div>\r\n              </md-input-container>\r\n            </div>\r\n          </div>\r\n          <div class="form-item">\r\n            <label class="form-label"\r\n              >{{ \'system.senhaNivel\' | translate }} 4:</label\r\n            >\r\n            <div class="form-value-container">\r\n              <md-input-container style="width: 100px">\r\n                <input\r\n                  password-only-four-digits-validate\r\n                  md-maxlength="4"\r\n                  maxlength="4"\r\n                  ng-model="sistema.senha_4"\r\n                  type="text"\r\n                  name="senha_4"\r\n                />\r\n                <div ng-messages="form.accessLevels.senha_4.$error">\r\n                  <div ng-message="password">\r\n                    {{ \'system.aSenhaDeveTer4Digitos\' | translate }}.\r\n                  </div>\r\n                </div>\r\n              </md-input-container>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <section layout="row" layout-align="center center" layout-wrap>\r\n        <md-button ng-click="cancel()" class="md-raised"\r\n          >{{ \'system.cancelar\' | translate }}</md-button\r\n        >\r\n        <md-button\r\n          ng-click="saveAccessLevels(sistema.pwd_prog_cie)"\r\n          ng-disabled="form.accessLevels.$invalid"\r\n          class="md-raised md-accent"\r\n          >{{ \'system.aplicar\' | translate }}</md-button\r\n        >\r\n      </section>\r\n    </div>\r\n\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'defaultLocks\'"\r\n      layout-padding\r\n      class="md-whiteframe-4dp system-content"\r\n    >\r\n      <div class="section-title">\r\n        {{ \'system.bloqueiosLocais\' | translate }}\r\n      </div>\r\n      <form name="form.defaultLocks" layout="column" autocomplete="off">\r\n        <div class="form-item">\r\n          <label style="padding-right: 20px" class="form-label"\r\n            >{{\'system.sireneConvencional\' | translate}}:</label\r\n          >\r\n          <div\r\n            class="form-value-container"\r\n            layout="row"\r\n            layout-align="start center"\r\n          >\r\n            <md-switch\r\n              class="md-accent"\r\n              ng-model="bloqueios_locais.sireneConvencional"\r\n              style="margin: 0"\r\n            >\r\n              {{!bloqueios_locais.sireneConvencional ? (\'system.habilitado\' |\r\n              translate) : (\'system.bloqueado\' | translate)}}\r\n            </md-switch>\r\n            <md-icon\r\n              ng-if="bloqueios_locais.sireneConvencional"\r\n              style="margin: 0; margin-left: 20px; color: #cd0000"\r\n              >lock</md-icon\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class="form-item">\r\n          <label style="padding-right: 20px" class="form-label"\r\n            >{{\'system.releDeAlarme\' | translate}}:</label\r\n          >\r\n          <div\r\n            class="form-value-container"\r\n            layout="row"\r\n            layout-align="start center"\r\n          >\r\n            <md-switch\r\n              class="md-accent"\r\n              ng-model="bloqueios_locais.releDeAlarme"\r\n              style="margin: 0"\r\n            >\r\n              {{!bloqueios_locais.releDeAlarme ? (\'system.habilitado\' |\r\n              translate) : (\'system.bloqueado\' | translate)}}\r\n            </md-switch>\r\n            <md-icon\r\n              ng-if="bloqueios_locais.releDeAlarme"\r\n              style="margin: 0; margin-left: 20px; color: #cd0000"\r\n              >lock</md-icon\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class="form-item">\r\n          <label style="padding-right: 20px" class="form-label"\r\n            >{{\'system.releDeFalha\' | translate}}:</label\r\n          >\r\n          <div\r\n            class="form-value-container"\r\n            layout="row"\r\n            layout-align="start center"\r\n          >\r\n            <md-switch\r\n              class="md-accent"\r\n              ng-model="bloqueios_locais.releDeFalha"\r\n              style="margin: 0"\r\n            >\r\n              {{!bloqueios_locais.releDeFalha ? (\'system.habilitado\' |\r\n              translate) : (\'system.bloqueado\' | translate)}}\r\n            </md-switch>\r\n            <md-icon\r\n              ng-if="bloqueios_locais.releDeFalha"\r\n              style="margin: 0; margin-left: 20px; color: #cd0000"\r\n              >lock</md-icon\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class="form-item">\r\n          <label style="padding-right: 20px" class="form-label"\r\n            >{{\'system.regraPadrao\' | translate}}:</label\r\n          >\r\n          <div\r\n            class="form-value-container"\r\n            layout="row"\r\n            layout-align="start center"\r\n          >\r\n            <md-switch\r\n              class="md-accent"\r\n              ng-model="bloqueios_locais.regraPadrao"\r\n              style="margin: 0"\r\n            >\r\n              {{!bloqueios_locais.regraPadrao ? (\'system.habilitado\' |\r\n              translate) : (\'system.bloqueado\' | translate)}}\r\n            </md-switch>\r\n            <md-icon\r\n              ng-if="bloqueios_locais.regraPadrao"\r\n              style="margin: 0; margin-left: 20px; color: #cd0000"\r\n              >lock</md-icon\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class="form-item">\r\n          <label style="padding-right: 20px" class="form-label"\r\n            >{{\'system.laco\' | translate}}:</label\r\n          >\r\n          <div\r\n            class="form-value-container"\r\n            layout="row"\r\n            layout-align="start center"\r\n          >\r\n            <md-switch\r\n              class="md-accent"\r\n              ng-model="bloqueios_locais.laco"\r\n              style="margin: 0"\r\n            >\r\n              {{!bloqueios_locais.laco ? (\'system.habilitado\' | translate) :\r\n              (\'system.bloqueado\' | translate)}}\r\n            </md-switch>\r\n            <md-icon\r\n              style="margin: 0; margin-left: 20px; color: #cd0000"\r\n              ng-if="bloqueios_locais.laco"\r\n              >lock</md-icon\r\n            >\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <section layout="row" layout-align="center center" layout-wrap>\r\n        <md-button ng-click="cancel()" class="md-raised"\r\n          >{{ \'system.cancelar\' | translate }}</md-button\r\n        >\r\n        <md-button\r\n          ng-click="saveDefaultLocks()"\r\n          ng-disabled="form.accessLevels.$invalid"\r\n          class="md-raised md-accent"\r\n          >{{ \'system.aplicar\' | translate }}\r\n        </md-button>\r\n      </section>\r\n    </div>\r\n\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'date\'"\r\n      layout-padding\r\n      class="md-whiteframe-4dp system-content date-content"\r\n    >\r\n      <div class="section-title">{{ \'system.dataHora\' | translate }}</div>\r\n      <form name="form.date" layout="column" autocomplete="off">\r\n        <div>\r\n          <label class="form-label"\r\n            >{{ \'system.dataHoraCentral\' | translate }}:</label\r\n          >\r\n          <div class="datetime" layout="row" layout-align="none start">\r\n            <md-input-container>\r\n              <input\r\n                type="datetime-local"\r\n                ng-model="date.central"\r\n                name="date"\r\n                step="1"\r\n                ng-readonly="true"\r\n              />\r\n            </md-input-container>\r\n            <md-button\r\n              style="width: 150px"\r\n              ng-click="getDateFromCentral()"\r\n              ng-disabled="!isCIEConnected"\r\n              class="md-raised"\r\n              >{{ \'system.atualizar\' | translate }}</md-button\r\n            >\r\n          </div>\r\n        </div>\r\n        <br /><br />\r\n        <div layout="row" layout-align="none center">\r\n          <label style="padding-top: 24px !important" class="form-label"\r\n            >{{ \'system.dataHoraComputador\' | translate }}:</label\r\n          >\r\n          <div class="desktop-date">\r\n            {{date.pc | date:\'dd/MM/yyyy HH:mm:ss\'}}\r\n          </div>\r\n          <md-button\r\n            style="width: 150px"\r\n            ng-click="syncDateTime()"\r\n            ng-disabled="!isCIEConnected"\r\n            class="md-raised md-accent"\r\n            >{{ \'system.sincronizar\' | translate }}</md-button\r\n          >\r\n        </div>\r\n        <div>\r\n          <label class="form-label"\r\n            >{{ \'system.alterarData\' | translate }}:</label\r\n          >\r\n          <div class="datetime-edit" layout="row" layout-align="none start">\r\n            <md-input-container>\r\n              <input\r\n                type="date"\r\n                required\r\n                ng-model="date.newDate"\r\n                name="newDate"\r\n                ng-max="dateMax.date"\r\n                class="input-date"\r\n                max="2099-12-31"\r\n              />\r\n              <div ng-messages="form.date.newDate.$error">\r\n                <div ng-message="required">\r\n                  {{ \'system.campoObrigatorio\' | translate }}.\r\n                </div>\r\n                <div ng-message="max">{{ \'system.faixaAno\' | translate }}.</div>\r\n              </div>\r\n            </md-input-container>\r\n            <label class="form-label">{{ \'system.hora\' | translate }}:</label>\r\n            <md-input-container>\r\n              <input\r\n                type="time"\r\n                required\r\n                ng-model="date.newTime"\r\n                step="1"\r\n                name="newTime"\r\n                class="input-time"\r\n              />\r\n              <div ng-messages="form.date.newTime.$error">\r\n                <div ng-message="required">\r\n                  {{ \'system.campoObrigatorio\' | translate }}.\r\n                </div>\r\n              </div>\r\n            </md-input-container>\r\n            <md-button\r\n              style="width: 150px"\r\n              ng-click="sendDateTime()"\r\n              ng-disabled="!isCIEConnected || form.date.$invalid"\r\n              class="md-raised md-accent"\r\n              >{{ \'system.enviar\' | translate }}</md-button\r\n            >\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'standardOutputs\'"\r\n      layout-padding\r\n      class="md-whiteframe-4dp system-content standardOutputs-content"\r\n      ng-init="initStandardOutputs()"\r\n    >\r\n      <div class="section-title">{{ \'system.saidasPadrao\' | translate }}</div>\r\n      <div layout="row" layout-align="start stretch">\r\n        <div flex>\r\n          <form\r\n            name="formStandardOutputs"\r\n            style="margin-bottom: 0"\r\n            autocomplete="off"\r\n          >\r\n            <div\r\n              class="form-item"\r\n              layout="row"\r\n              ng-class="{\'config-selected\': tag == typeChange }"\r\n              ng-repeat="(tag, title) in outputNames"\r\n            >\r\n              <div class="output-type">{{title}}:</div>\r\n              <div>\r\n                <div ng-if="tag != typeChange">\r\n                  <md-switch\r\n                    class="md-accent enable-loop switch-enable"\r\n                    ng-change="enableOutput(tag)"\r\n                    ng-model="sistema[tag].habilitada"\r\n                    style="margin: 0 0 0 40px"\r\n                  >\r\n                    {{!sistema[tag].habilitada ? (\'system.inativa\' | translate)\r\n                    : (\'system.ativa\' | translate)}}\r\n                  </md-switch>\r\n                  <div ng-if="sistema[tag].habilitada">\r\n                    <label class="form-label"\r\n                      >{{ \'system.dispositivo\' | translate }}:</label\r\n                    >\r\n                    <label ng-if="sistema[tag].laco == 0" class="form-value"\r\n                      >{{lacos[sistema[tag].laco].dispositivos[sistema[tag].endereco].nome}}</label\r\n                    >\r\n                    <label\r\n                      ng-if="sistema[tag].laco && sistema[tag].laco != 0"\r\n                      class="form-value"\r\n                      >{{ \'system.laco\' | translate }} {{sistema[tag].laco}}: {{\r\n                      \'system.dispositivo\' | translate }}\r\n                      {{sistema[tag].endereco | numberFormat}} -\r\n                      {{lacos[sistema[tag].laco].dispositivos[sistema[tag].endereco].nome}}</label\r\n                    >\r\n                    <md-button\r\n                      ng-disabled="!(selectedDevice | isEmpty)"\r\n                      ng-click="changeDevice(tag)"\r\n                      class="md-primary md-accent"\r\n                      >{{ \'system.alterar\' | translate }}</md-button\r\n                    >\r\n                  </div>\r\n                </div>\r\n                <div\r\n                  ng-if="!(selectedDevice | isEmpty) && tag == typeChange"\r\n                  class="options-selected-device"\r\n                >\r\n                  <md-select\r\n                    required\r\n                    ng-model="selectedDevice.laco"\r\n                    aria-label=""\r\n                  >\r\n                    <md-option ng-repeat="laco in lacos" value="{{$index}}">\r\n                      {{$index == 0 ? (\'system.dispostivosLocais\' | translate) :\r\n                      (\'system.laco\' | translate) + \' \' + $index}}\r\n                    </md-option>\r\n                  </md-select>\r\n                  <div class="device-list">\r\n                    <md-radio-group ng-model="selectedDevice.endereco">\r\n                      <span\r\n                        class="loop-empty"\r\n                        ng-if="dispositivos_saida[selectedDevice.laco] | isEmpty"\r\n                        >{{ \'system.nenhumDispositivoSaida\' | translate }}</span\r\n                      >\r\n                      <md-radio-button\r\n                        ng-if="selectedDevice.laco != 0"\r\n                        ng-repeat="dispositivo in dispositivos_saida[selectedDevice.laco]"\r\n                        value="{{dispositivo.endereco}}"\r\n                      >\r\n                        {{dispositivo.endereco | numberFormat}} -\r\n                        {{dispositivo.nome}}\r\n                        <md-icon\r\n                          class="device-disabled"\r\n                          ng-if="!dispositivo.habilitado"\r\n                          >lock</md-icon\r\n                        >\r\n                      </md-radio-button>\r\n                      <md-radio-button\r\n                        ng-if="selectedDevice.laco == 0"\r\n                        ng-repeat="dispositivo in dispositivos_saida[selectedDevice.laco]"\r\n                        value="{{dispositivo.endereco}}"\r\n                      >\r\n                        {{dispositivo.nome}}\r\n                        <md-icon\r\n                          class="device-disabled"\r\n                          ng-if="!dispositivo.habilitado"\r\n                          >lock</md-icon\r\n                        >\r\n                      </md-radio-button>\r\n                    </md-radio-group>\r\n                  </div>\r\n                  <section\r\n                    ng-if="!(selectedDevice | isEmpty)"\r\n                    layout="row"\r\n                    layout-align="center center"\r\n                    layout-wrap\r\n                  >\r\n                    <md-button ng-click="cancelSelectDevice()" class="md-raised"\r\n                      >{{ \'system.cancelar\' | translate }}</md-button\r\n                    >\r\n                    <md-button\r\n                      ng-click="selectDevice()"\r\n                      class="md-raised md-accent"\r\n                      >OK</md-button\r\n                    >\r\n                  </section>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      <section\r\n        ng-if="selectedDevice | isEmpty"\r\n        layout="row"\r\n        layout-align="center center"\r\n        layout-wrap\r\n      >\r\n        <md-button ng-click="cancel()" class="md-raised"\r\n          >{{ \'system.cancelar\' | translate }}</md-button\r\n        >\r\n        <md-button\r\n          ng-disabled="formStandardOutputs.$invalid"\r\n          ng-click="saveStandardOutputs()"\r\n          class="md-raised md-accent"\r\n          >{{ \'system.aplicar\' | translate }}</md-button\r\n        >\r\n      </section>\r\n    </div>\r\n\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'firmware\'"\r\n      layout-padding\r\n      class="md-whiteframe-4dp system-content"\r\n    >\r\n      <input\r\n        style="display: none"\r\n        id="firmware_file"\r\n        type="file"\r\n        accept="{{acceptedExtentionFirmware}}"\r\n        input-file="firmware_file"\r\n        nwworkingdir="{{nwworkingdir}}"\r\n      />\r\n      <div class="section-title">\r\n        {{ \'system.atualizacaoFirmware\' | translate }}\r\n      </div>\r\n      <div ng-if="centralModel.is1060 && !is1060USBConnected" class="alert">\r\n        {{\'system.alertaUSB1060\' | translate }}\r\n      </div>\r\n      <div\r\n        ng-if="centralModel.is1060 && !is1060USBBootModeEnabled && is1060USBConnectedBootMode"\r\n        class="alert"\r\n      >\r\n        {{\'system.centralEmBoot\' | translate }}\r\n      </div>\r\n      <div\r\n        ng-if="!centralModel.is1060 && (!isCIEConnected || connectionMode === \'wifi\')"\r\n        class="alert"\r\n      >\r\n        {{\'system.alertaConexaoCieIni\'| translate }}\r\n        <a href="#" ng-click="centralBlock()" class="link-disconnect-cie">\r\n          {{\'system.alertaConexaoCieMei\' | translate }}\r\n        </a>\r\n        {{ \'system.alertaConexaoCieFi\' | translate }}\r\n      </div>\r\n      <form name="form.firmware" layout="column" autocomplete="off">\r\n        <div class="form-item">\r\n          <label class="form-label">{{ \'system.arquivo\' | translate }}:</label>\r\n          <div class="form-value-container">\r\n            <md-input-container style="width: 300px">\r\n              <input type="text" name="endereco" ng-model="firmware.file" />\r\n            </md-input-container>\r\n            <md-button\r\n              ng-disabled="!canEnableSendFirmwareButton()"\r\n              ng-click="openFileDialog(\'firmware_file\')"\r\n              class="md-accent"\r\n              >{{ \'system.carregarArquivo\' | translate }}</md-button\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class="form-item" ng-if="firmware.fileVersion">\r\n          <label class="form-label"\r\n            >{{ \'system.versaoArquivo\' | translate }}:</label\r\n          >\r\n          <div class="form-value-container">\r\n            <div class="form-value">{{firmware.fileVersion}}</div>\r\n          </div>\r\n        </div>\r\n        <div\r\n          class="form-item"\r\n          ng-if="firmware.centralVersion && firmware.centralVersion !== \'0\'"\r\n        >\r\n          <label class="form-label"\r\n            >{{ \'system.versaoCentral\' | translate }}:</label\r\n          >\r\n          <div class="form-value-container">\r\n            <div class="form-value">{{firmware.centralVersion}}</div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <section layout="row" layout-align="center center" layout-wrap>\r\n        <md-button\r\n          ng-disabled="!canSendFirmware()"\r\n          ng-click="sendFirmware()"\r\n          class="md-raised md-accent"\r\n          >{{ (centralModel.is1060 && is1060USBBootModeEnabled &&\r\n          is1060USBConnectedBootMode) ? (\'system.recuperarCentral\' | translate)\r\n          : (\'system.atualizarCentral\' | translate) }}</md-button\r\n        >\r\n      </section>\r\n      <section\r\n        ng-if="centralModel.is1060"\r\n        style="position: fixed; bottom: 20px"\r\n        layout="column"\r\n        layout-align="space-around center"\r\n        layout-wrap\r\n      >\r\n        <md-button ng-click="goTo1060Recover($event)"\r\n          >{{ \'system.1060Recover\' | translate }}</md-button\r\n        >\r\n      </section>\r\n    </div>\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'tlsAndSsl\'"\r\n      layout-padding\r\n      class="md-whiteframe-4dp system-content"\r\n    >\r\n      <div\r\n        flex\r\n        ng-if="selectedScreen == \'tlsAndSsl\'"\r\n        layout-padding\r\n        class="md-whiteframe-4dp system-content"\r\n      >\r\n        <input\r\n          style="display: none"\r\n          id="root_ca_file"\r\n          type="file"\r\n          accept=".pem,.key,.cert,.crt"\r\n          input-file="root_ca_file"\r\n        />\r\n        <input\r\n          style="display: none"\r\n          id="self_ca_file"\r\n          type="file"\r\n          accept=".pem,.key,.cert,.crt"\r\n          input-file="self_ca_file"\r\n        />\r\n        <input\r\n          style="display: none"\r\n          id="self_ca_pk_file"\r\n          type="file"\r\n          accept=".pem,.key,.cert,.crt"\r\n          input-file="self_ca_pk_file"\r\n        />\r\n        <input\r\n          style="display: none"\r\n          id="select_path"\r\n          type="file"\r\n          nwdirectory\r\n          input-file="select_path"\r\n        />\r\n        <input\r\n          style="display: none"\r\n          id="path_save_programador"\r\n          type="file"\r\n          nwdirectory\r\n          input-file="path_save_programador"\r\n        />\r\n\r\n        <div class="section-title">\r\n          {{ \'system.configuracoesTls\' | translate }}\r\n        </div>\r\n\r\n        <div class="form-item form-item-padding">\r\n          <div layout="row" layout-align="start start">\r\n            <label class="form-label subtitle"\r\n              >{{ \'system.certificadoRaizServidorIntegracao\' | translate\r\n              }}:</label\r\n            >\r\n            <icon-tooltip-help label="\'system.infoCertificadoRaiz\'" />\r\n          </div>\r\n          <div ng-if="certificates_info.root_ca.numeroSerie">\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.validoAPartir\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <label class="form-value"\r\n                  >{{certificates_info.root_ca.validFrom}}</label\r\n                >\r\n              </div>\r\n            </div>\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.validoAte\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <label class="form-value"\r\n                  >{{certificates_info.root_ca.validTo}}</label\r\n                >\r\n              </div>\r\n            </div>\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.requerente\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <label class="form-value"\r\n                  >{{certificates_info.root_ca.subject}}</label\r\n                >\r\n              </div>\r\n            </div>\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.emitidoPor\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <label class="form-value"\r\n                  >{{certificates_info.root_ca.issuer}}</label\r\n                >\r\n              </div>\r\n            </div>\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.numeroSerie\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <label class="form-value"\r\n                  >{{certificates_info.root_ca.numeroSerie}}</label\r\n                >\r\n              </div>\r\n            </div>\r\n            <md-button\r\n              ng-click="addNewCertificate(\'root_ca\')"\r\n              class="md-raised md-accent"\r\n              style="margin-left: 260px; margin-top: 30px"\r\n              >{{ \'system.substituirCertificado\' | translate }}</md-button\r\n            >\r\n          </div>\r\n          <div ng-if="!certificates_info.root_ca.numeroSerie">\r\n            <div>\r\n              <div class="files-info">\r\n                {{\'system.infoCertificadosVazio\' | translate }}\r\n              </div>\r\n            </div>\r\n            <div\r\n              ng-if="cryptoFiles.root_ca_file"\r\n              layout="row"\r\n              layout-align="start center"\r\n              style="padding-bottom: 30px"\r\n            >\r\n              <label class="form-label"\r\n                >{{ \'system.arquivoImportado\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <label class="form-value">{{cryptoFiles.root_ca_file}}</label>\r\n              </div>\r\n              <md-button\r\n                ng-click="removeCertificateFile(\'root_ca_file\')"\r\n                class="md-accent md-hue"\r\n                style="margin-top: 12px; color: red"\r\n                >{{ \'system.cancelar\' | translate }}</md-button\r\n              >\r\n            </div>\r\n            <div\r\n              ng-if="!cryptoFiles.root_ca_file"\r\n              layout="row"\r\n              layout-align="start start"\r\n              style="margin-left: 260px; margin-top: 20px; margin-bottom: 20px"\r\n            >\r\n              <md-button\r\n                ng-click="openFileDialog(\'root_ca_file\')"\r\n                ng-disabled="form.network.$invalid"\r\n                class="md-raised md-accent"\r\n                >{{ \'system.importar\' | translate }}\r\n              </md-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="form-item form-item-padding">\r\n          <div layout="row" layout-align="start start">\r\n            <label class="form-label subtitle"\r\n              >{{ \'system.certificadoDoGateway\' | translate }}:</label\r\n            >\r\n            <icon-tooltip-help label="\'system.infoCertificadoCliente\'" />\r\n          </div>\r\n\r\n          <div\r\n            ng-if="!certificates_info.self_ca.numeroSerie"\r\n            layout="row"\r\n            layout-align="start start"\r\n            style="margin-bottom: 20px"\r\n          >\r\n            <label class="form-label"></label>\r\n            <div class="form-value">\r\n              <md-radio-group\r\n                ng-model="certificateImport.mode"\r\n                layout="row"\r\n                layout-align="start center"\r\n                ng-disabled="certificateImport.generated || cryptoFiles.self_ca_file"\r\n              >\r\n                <md-radio-button value="import"\r\n                  >{{ \'system.importar\' | translate }}</md-radio-button\r\n                >\r\n                <md-radio-button value="generate"\r\n                  >{{ \'system.gerar\' | translate }}</md-radio-button\r\n                >\r\n              </md-radio-group>\r\n            </div>\r\n          </div>\r\n          <div\r\n            ng-if="certificates_info.self_ca.numeroSerie && !cryptoFiles.self_ca_file"\r\n          >\r\n            \x3c!-- <div layout="row" layout-align="start start">\r\n<label class="form-label">{{ \'system.certificadoCarregado\' | translate }}:</label>\r\n<div class="form-value-container">\r\n<label class="form-value">valor</label>\r\n</div>\r\n</div>--\x3e\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.validoAPartir\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <label class="form-value"\r\n                  >{{certificates_info.self_ca.validFrom}}</label\r\n                >\r\n              </div>\r\n            </div>\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.validoAte\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <label class="form-value"\r\n                  >{{certificates_info.self_ca.validTo}}</label\r\n                >\r\n              </div>\r\n            </div>\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.requerente\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <label class="form-value"\r\n                  >{{certificates_info.self_ca.subject}}</label\r\n                >\r\n              </div>\r\n            </div>\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.emitidoPor\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <label class="form-value"\r\n                  >{{certificates_info.self_ca.issuer}}</label\r\n                >\r\n              </div>\r\n            </div>\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.numeroSerie\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <label class="form-value"\r\n                  >{{certificates_info.self_ca.numeroSerie}}</label\r\n                >\r\n              </div>\r\n            </div>\r\n            <md-button\r\n              ng-click="addNewCertificate(\'self_ca\')"\r\n              class="md-raised md-accent"\r\n              style="margin-left: 260px; margin-top: 30px"\r\n              >{{ \'system.substituirCertificado\' | translate }}</md-button\r\n            >\r\n          </div>\r\n          <div\r\n            ng-if="!certificates_info.self_ca.numeroSerie && certificateImport.mode === \'import\'"\r\n          >\r\n            <div class="files-info">\r\n              {{\'system.infoCertificadosReceba\' | translate }}\r\n            </div>\r\n            <div class="files-info">\r\n              {{\'system.infoCertificadoImportacaoNecessariaServidor\' | translate\r\n              }}\r\n            </div>\r\n          </div>\r\n          <div\r\n            ng-if="cryptoFiles.self_ca_file"\r\n            layout="row"\r\n            layout-align="start center"\r\n          >\r\n            <label class="form-label"\r\n              >{{ \'system.arquivoImportado\' | translate }}:</label\r\n            >\r\n            <div class="form-value-container">\r\n              <label class="form-value">{{cryptoFiles.self_ca_file}}</label>\r\n            </div>\r\n            <md-button\r\n              ng-click="removeCertificateFile(\'self_ca_file\')"\r\n              class="md-accent md-hue"\r\n              style="margin-top: 12px; color: red"\r\n              >{{ \'system.cancelar\' | translate }}</md-button\r\n            >\r\n          </div>\r\n          <div\r\n            ng-if="certificateImport.mode === \'generate\'"\r\n            layout="row"\r\n            layout-align="start center"\r\n          >\r\n            <form\r\n              name="form.certificate"\r\n              layout="column"\r\n              autocomplete="off"\r\n              style="margin-top: 20px"\r\n            >\r\n              <div layout="row" layout-align="start start">\r\n                <label class="form-label"\r\n                  >{{ \'system.certificadoPais\' | translate }}:</label\r\n                >\r\n                <div class="form-value-container">\r\n                  <md-input-container style="width: 70px">\r\n                    <input\r\n                      required\r\n                      ng-model="certificateImport.pais"\r\n                      type="text"\r\n                      name="pais"\r\n                      ng-disabled="certificateImport.generated"\r\n                      md-maxlength="2"\r\n                      md-minlength="2"\r\n                      minlength="2"\r\n                      maxlength="2"\r\n                    />\r\n                    <div ng-messages="form.certificate.pais.$error">\r\n                      <div ng-message="required">\r\n                        {{ \'system.campoObrigatorio\' | translate }}.\r\n                      </div>\r\n                    </div>\r\n                  </md-input-container>\r\n                </div>\r\n              </div>\r\n              <div layout="row" layout-align="start start">\r\n                <label class="form-label"\r\n                  >{{ \'system.certificadoEstado\' | translate }}:</label\r\n                >\r\n                <div class="form-value-container">\r\n                  <md-input-container style="width: 250px">\r\n                    <input\r\n                      required\r\n                      ng-model="certificateImport.estado"\r\n                      type="text"\r\n                      name="estado"\r\n                      ng-disabled="certificateImport.generated"\r\n                    />\r\n                    <div ng-messages="form.certificate.cidade.$error">\r\n                      <div ng-message="required">\r\n                        {{ \'system.campoObrigatorio\' | translate }}.\r\n                      </div>\r\n                    </div>\r\n                  </md-input-container>\r\n                </div>\r\n              </div>\r\n              <div layout="row" layout-align="start start">\r\n                <label class="form-label"\r\n                  >{{ \'system.certificadoCidade\' | translate }}:</label\r\n                >\r\n                <div class="form-value-container">\r\n                  <md-input-container style="width: 250px">\r\n                    <input\r\n                      required\r\n                      ng-model="certificateImport.cidade"\r\n                      type="text"\r\n                      name="cidade"\r\n                      ng-disabled="certificateImport.generated"\r\n                    />\r\n                    <div ng-messages="form.certificate.cidade.$error">\r\n                      <div ng-message="required">\r\n                        {{ \'system.campoObrigatorio\' | translate }}.\r\n                      </div>\r\n                    </div>\r\n                  </md-input-container>\r\n                </div>\r\n              </div>\r\n              <div layout="row" layout-align="start start">\r\n                <label class="form-label"\r\n                  >{{ \'system.certificadoNomeOrganizacao\' | translate }}:</label\r\n                >\r\n                <div class="form-value-container">\r\n                  <md-input-container style="width: 250px">\r\n                    <input\r\n                      required\r\n                      ng-model="certificateImport.organizacao"\r\n                      type="text"\r\n                      name="organizacao"\r\n                      ng-disabled="certificateImport.generated"\r\n                    />\r\n                    <div ng-messages="form.certificate.responsavel.$error">\r\n                      <div ng-message="required">\r\n                        {{ \'system.campoObrigatorio\' | translate }}.\r\n                      </div>\r\n                    </div>\r\n                  </md-input-container>\r\n                </div>\r\n              </div>\r\n              <div layout="row" layout-align="start start">\r\n                <label class="form-label"\r\n                  >{{ \'system.certificadoUnidadeOrganizacao\' | translate\r\n                  }}:</label\r\n                >\r\n                <div class="form-value-container">\r\n                  <md-input-container style="width: 250px">\r\n                    <input\r\n                      required\r\n                      ng-model="certificateImport.unidade"\r\n                      type="text"\r\n                      name="unidade"\r\n                      ng-disabled="certificateImport.generated"\r\n                    />\r\n                    <div ng-messages="form.certificate.organizacao.$error">\r\n                      <div ng-message="required">\r\n                        {{ \'system.campoObrigatorio\' | translate }}.\r\n                      </div>\r\n                    </div>\r\n                  </md-input-container>\r\n                </div>\r\n              </div>\r\n            </form>\r\n            <div\r\n              ng-if="certificateImport.mode === \'generate\' && !certificateImport.generated"\r\n            >\r\n              <div class="generate-certificate-info">\r\n                {{\'system.infoGeracaoCertificadoGateway1\' | translate }}\r\n              </div>\r\n              <div class="generate-certificate-info">\r\n                {{\'system.infoGeracaoCertificadoGateway2\' | translate }}\r\n              </div>\r\n              <div class="generate-certificate-info">\r\n                {{\'system.infoGeracaoCertificadoGateway3\' | translate }}\r\n              </div>\r\n              <div class="generate-certificate-info">\r\n                {{\'system.infoGeracaoCertificadoGateway4\' | translate }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div\r\n            ng-if="!certificateImport.generated"\r\n            layout="row"\r\n            layout-align="start center"\r\n            style="margin-left: 260px; margin-top: 20px; margin-bottom: 20px"\r\n          >\r\n            <md-button\r\n              ng-if="certificateImport.mode === \'import\' && !cryptoFiles.self_ca_file && !certificates_info.self_ca.numeroSerie"\r\n              ng-click="openFileDialog(\'self_ca_file\')"\r\n              class="md-raised md-accent"\r\n              >{{ \'system.importar\' | translate }}</md-button\r\n            >\r\n            <md-button\r\n              ng-if="certificateImport.mode === \'generate\' && !certificateImport.generated"\r\n              ng-click="generateGatewayCert()"\r\n              class="md-raised md-accent"\r\n              >{{ \'system.gerar\' | translate }}</md-button\r\n            >\r\n          </div>\r\n          <div\r\n            ng-if="certificateImport.mode === \'generate\' && certificateImport.generated"\r\n            layout="column"\r\n            layout-align="start start"\r\n            style="margin-left: 260px; margin-bottom: 20px"\r\n          >\r\n            <div class="generate-certificate-info alert">\r\n              {{\'system.infoCertificageGenerated\' | translate }}\r\n              <br />\r\n              {{\'system.localizacaoDiretorio\' | translate }}:\r\n              <b>{{certificateImport.pathGateway}}\\gw521.crt</b>\r\n            </div>\r\n            <md-button\r\n              ng-click="clearGenerateGatewayCert()"\r\n              class="md-accent"\r\n              style="margin-top: 12px; color: red"\r\n              >{{ \'system.cancelarEGerarNovo\' | translate }}</md-button\r\n            >\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          ng-if="certificateImport.generated || certificates_info.self_ca_pk.algoritmo || cryptoFiles.self_ca_file"\r\n          class="form-item form-item-padding"\r\n        >\r\n          <div layout="row" layout-align="start start">\r\n            <label class="form-label subtitle"\r\n              >{{ \'system.chavePrivadaDoGateway\' | translate }}:</label\r\n            >\r\n          </div>\r\n          <div\r\n            ng-if="certificates_info.self_ca_pk.algoritmo && !cryptoFiles.self_ca_pk_file"\r\n          >\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label"\r\n                >{{ \'system.algoritmo\' | translate }}:</label\r\n              >\r\n              <div class="form-value-container">\r\n                <label class="form-value"\r\n                  >{{certificates_info.self_ca_pk.algoritmo}}</label\r\n                >\r\n              </div>\r\n            </div>\r\n            <div layout="row" layout-align="start start">\r\n              <label class="form-label">CRC:</label>\r\n              <div class="form-value-container">\r\n                <label class="form-value"\r\n                  >{{certificates_info.self_ca_pk.numeroSerie}}</label\r\n                >\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div\r\n            ng-if="!certificates_info.self_ca_pk.algoritmo && !certificateImport.generated"\r\n          >\r\n            <div class="files-info">\r\n              {{\'system.infoCertificadosReceba\' | translate }}\r\n            </div>\r\n            <div class="files-info">\r\n              {{\'system.infoCertificadoImportacaoNecessariaGateway\' | translate\r\n              }}\r\n            </div>\r\n          </div>\r\n          <div\r\n            ng-if="certificateImport.generated"\r\n            class="generate-certificate-info alert"\r\n            style="margin-left: 265px !important; margin-bottom: 20px"\r\n          >\r\n            {{\'system.infoCertificageGenerated\' | translate }}\r\n            <br />\r\n            {{\'system.localizacaoDiretorio\' | translate }}:\r\n            <b>{{certificateImport.pathGateway}}\\gw521.key</b>\r\n          </div>\r\n          <div\r\n            ng-if="cryptoFiles.self_ca_pk_file"\r\n            layout="row"\r\n            layout-align="start center"\r\n            style="padding-bottom: 30px"\r\n          >\r\n            <label class="form-label"\r\n              >{{ \'system.arquivoImportado\' | translate }}:</label\r\n            >\r\n            <div class="form-value-container">\r\n              <label class="form-value">{{cryptoFiles.self_ca_pk_file}}</label>\r\n            </div>\r\n            <md-button\r\n              ng-click="removeCertificateFile(\'self_ca_pk_file\')"\r\n              class="md-accent md-hue"\r\n              style="margin-top: 12px; color: red"\r\n              >{{ \'system.cancelar\' | translate }}</md-button\r\n            >\r\n          </div>\r\n          <div\r\n            ng-if="!certificateImport.generated && !cryptoFiles.self_ca_pk_file"\r\n            layout="row"\r\n            layout-align="start start"\r\n            style="margin-left: 260px; margin-top: 20px; margin-bottom: 20px"\r\n          >\r\n            <md-button\r\n              ng-click="openFileDialog(\'self_ca_pk_file\')"\r\n              ng-if="!cryptoFiles.self_ca_pk_file && !certificates_info.self_ca_pk.algoritmo"\r\n              class="md-raised md-accent"\r\n              >{{ \'system.importar\' | translate }}</md-button\r\n            >\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          ng-if="certificateImport.generated || certificates_info.self_ca.numeroSerie"\r\n          class="form-item form-item-padding"\r\n        >\r\n          <div layout="row" layout-align="start start">\r\n            <label class="form-label subtitle"\r\n              >{{ \'system.certificadoRaizProgramador\' | translate }}:</label\r\n            >\r\n          </div>\r\n          <div>\r\n            <div class="files-info">\r\n              {{\'system.infoCertificadoRaizProgramador\' | translate }}\r\n            </div>\r\n          </div>\r\n          <div\r\n            layout="row"\r\n            layout-align="start start"\r\n            style="margin-left: 260px; margin-top: 20px; margin-bottom: 20px"\r\n          >\r\n            <md-button\r\n              ng-click="openFileDialog(\'path_save_programador\')"\r\n              ng-disabled="form.network.$invalid"\r\n              class="md-raised md-accent"\r\n              >{{ \'system.salvarCopia\' | translate }}\r\n            </md-button>\r\n          </div>\r\n        </div>\r\n\r\n        <section\r\n          ng-if="!centralModel.isRepeater"\r\n          layout="row"\r\n          layout-align="center center"\r\n          layout-wrap\r\n          style="padding-bottom: 100px"\r\n        >\r\n          <md-button ng-click="cancel()" class="md-raised"\r\n            >{{ \'system.cancelar\' | translate }}</md-button\r\n          >\r\n          <md-button\r\n            ng-click="saveGatewayCertificates()"\r\n            ng-disabled="form.network.$invalid"\r\n            class="md-raised md-accent"\r\n            >{{ \'system.aplicar\' | translate }}</md-button\r\n          >\r\n        </section>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n');$templateCache.put("zone/zone.html",'<md-toolbar class="toolbar md-accent">\r\n  <div flex layout-align="space-between center" class="md-toolbar-tools">\r\n    <div>\r\n      <div layout="row" layout-align="start center">\r\n        <md-icon\r\n          class="logo"\r\n          md-svg-src="img/toolbar.svg"\r\n          aria-label=""\r\n        ></md-icon>\r\n        <md-divider\r\n          style="width: 0.7px; height: 25px; border-color: white"\r\n        ></md-divider>\r\n        <div class="header-title">{{ \'global.header\' | translate }}</div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <md-button\r\n        ng-disabled="selectedZones.length == 0 || newZone || originalSelectedZone.id == 1"\r\n        ng-click="removeZone()"\r\n        class="md-icon-button"\r\n      >\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'zone.removerZona\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon>delete</md-icon>\r\n      </md-button>\r\n      <md-button ng-click="enableMultipleSelection()" class="md-icon-button">\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'zone.selecionar\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon\r\n          >{{isEnabledMultipleSelection ? \'check_circle\' : \'check\'}}</md-icon\r\n        >\r\n      </md-button>\r\n      <md-button ng-click="createZone()" class="md-icon-button">\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'zone.criarZona\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon>add</md-icon>\r\n      </md-button>\r\n      <md-button ng-click="help()" class="md-icon-button">\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'global.ajuda\' | translate }} (F1)</md-tooltip\r\n        >\r\n        <md-icon>help_outline</md-icon>\r\n      </md-button>\r\n      <locale-button></locale-button>\r\n    </div>\r\n  </div>\r\n</md-toolbar>\r\n\r\n<project-bar></project-bar>\r\n<div\r\n  flex\r\n  layout="row"\r\n  layout-align="center none"\r\n  ng-init="init()"\r\n  class="menu-content"\r\n  dw-loading="list@app.zone"\r\n>\r\n  <div ng-if="!newZone" flex="25" class="sub-menu" id="zoneList">\r\n    <md-content>\r\n      <md-list class="submenu-list">\r\n        <md-list-item\r\n          ng-repeat="zona in zonas | toArray | orderBy: zona.id"\r\n          ng-click="selectZone(zona.id)"\r\n          ng-class="{\'table-item-selected\': selectedZones.indexOf(zona.id) != -1}"\r\n        >\r\n          <md-checkbox\r\n            ng-checked="selectedZones.indexOf(zona.id) != -1"\r\n            ng-if="isEnabledMultipleSelection"\r\n          ></md-checkbox>\r\n          <p>{{zona.id | numberFormat}} - {{zona.nome}}</p>\r\n          <md-icon class="item-disabled" ng-if="!zona.habilitado">lock</md-icon>\r\n          <a class="item-length">{{zona.devicesLength}}</a>\r\n        </md-list-item>\r\n      </md-list>\r\n    </md-content>\r\n  </div>\r\n  <div flex="75">\r\n    <div\r\n      layout-padding\r\n      ng-if="!(selectedZone | isEmpty)"\r\n      class="md-whiteframe-4dp zone-content"\r\n    >\r\n      <md-content>\r\n        <form\r\n          name="form.zone"\r\n          ng-submit="saveZone(form.zone)"\r\n          novalidate\r\n          layout-align="space-around center"\r\n          autocomplete="off"\r\n        >\r\n          <div layout="row" flex-gt-sm="50">\r\n            <md-switch\r\n              class="md-accent switch-enable"\r\n              ng-model="selectedZone.habilitado"\r\n              style="margin-left: 10px; width: 140px"\r\n            >\r\n              {{selectedZone.habilitado ? (\'zone.ativada\' | translate) :\r\n              (\'zone.bloqueada\' | translate)}}\r\n            </md-switch>\r\n            <md-input-container flex="15" style="margin-right: 15px">\r\n              <label>ID</label>\r\n              <input\r\n                ng-disabled="originalSelectedZone.id == 1"\r\n                required\r\n                id-validate\r\n                type="number"\r\n                name="id"\r\n                ng-model="selectedZone.id"\r\n                min="1"\r\n                max="250"\r\n              />\r\n              <div ng-messages="form.zone.id.$error">\r\n                <div ng-message="required">\r\n                  {{ \'zone.campoObrigatorio\' | translate }}.\r\n                </div>\r\n                <div ng-message="idUsed">\r\n                  {{ \'zone.idJaUtilizado\' | translate }}.\r\n                </div>\r\n                <div ng-message="min || max">\r\n                  {{ \'zone.idFaixa\' | translate }}.\r\n                </div>\r\n              </div>\r\n            </md-input-container>\r\n            <md-input-container flex>\r\n              <label>{{ \'zone.nome\' | translate }}</label>\r\n              <input\r\n                required\r\n                ng-disabled="originalSelectedZone.id == 1"\r\n                id="zoneNameInput"\r\n                name="nome"\r\n                focus="true"\r\n                ng-model="selectedZone.nome"\r\n                md-maxlength="zoneMaxLength"\r\n                maxlength="16"\r\n              />\r\n              <div ng-messages="form.zone.nome.$error">\r\n                <div ng-message="required">\r\n                  {{ \'zone.campoObrigatorio\' | translate }}.\r\n                </div>\r\n              </div>\r\n            </md-input-container>\r\n          </div>\r\n          <div layout="row" layout-align="space-between stretch">\r\n            <div\r\n              flex\r\n              class="device-list"\r\n              dnd-list\r\n              dnd-drop="onDropComplete(selectedZone.destinyZone, originalSelectedZone.id)"\r\n            >\r\n              <md-subheader class="zone-container"\r\n                >{{selectedZone.nome}}</md-subheader\r\n              >\r\n              <md-content flex class="list-drop" id="selectedZoneDeviceList">\r\n                <div\r\n                  flex\r\n                  class="loop-empty"\r\n                  ng-if="loopEmpty(\'selectedZoneDeviceList\')"\r\n                >\r\n                  {{ \'zone.nenhumDispositivo\' | translate }}\r\n                </div>\r\n                <section\r\n                  ng-repeat="(lacoId, laco) in lacos"\r\n                  ng-if="!(laco.dispositivos | where: {zona: originalSelectedZone.id} | isEmpty)"\r\n                >\r\n                  <md-subheader class="loop-subheader loop"\r\n                    >{{$index == 0 ? (\'zone.dispositivosLocais\' | translate) :\r\n                    (\'zone.lacoUpper\' | translate) + \' \' +\r\n                    $index}}</md-subheader\r\n                  >\r\n                  <md-list ui-view="list">\r\n                    <md-list-item\r\n                      ng-repeat="dispositivo in laco.dispositivos | where: {zona: originalSelectedZone.id}"\r\n                      ng-if="!dispositivo.saida_padrao"\r\n                      dnd-disable-if="originalSelectedZone.id == 1"\r\n                      dnd-draggable="dispositivo"\r\n                      dnd-dragend="dragging.zone = false"\r\n                      dnd-dragstart="onDragstart(event, \'zone\', \'move\')"\r\n                      ng-class="{\'device-item-selected\' : dispositivo.selected && originalSelectedZone.id != 1, \'device-dragging\': dragging.zone && dispositivo.selected }"\r\n                      class="device-item"\r\n                    >\r\n                      <md-checkbox\r\n                        ng-if="originalSelectedZone.id != 1"\r\n                        ng-model="dispositivo.selected"\r\n                      ></md-checkbox>\r\n                      <p>\r\n                        {{lacoId == 0 ?\r\n                        CONFIG.dispositivos_locais[dispositivo.endereco].saida_local\r\n                        : (dispositivo.endereco | numberFormat)}} -\r\n                        {{dispositivo.nome}}\r\n                      </p>\r\n                      <a class="item-badge"\r\n                        >{{lacoId == 0 ? (\'zone.saidaLocal\' | translate) :\r\n                        (\'config.\' + CONFIG.tipos[dispositivo.tipo].nome |\r\n                        translate)}}</a\r\n                      >\r\n                      <md-icon\r\n                        class="device-disabled"\r\n                        ng-if="!dispositivo.habilitado"\r\n                        >lock</md-icon\r\n                      >\r\n                    </md-list-item>\r\n                  </md-list>\r\n                </section>\r\n              </md-content>\r\n            </div>\r\n            <div\r\n              ng-if="originalSelectedZone.id != 1"\r\n              flex="15"\r\n              layout="column"\r\n              layout-align="center center"\r\n            >\r\n              <div\r\n                ng-click="onDropComplete(selectedZone.destinyZone, originalSelectedZone.id)"\r\n                class="button-change-zone {{form.zone.$invalid ? \'disabled\' : \'\'}}"\r\n              >\r\n                <md-icon>keyboard_arrow_left</md-icon>\r\n                <div>{{ \'zone.adicionar\' | translate }}</div>\r\n              </div>\r\n              <div\r\n                ng-click="onDropComplete(originalSelectedZone.id, selectedZone.destinyZone)"\r\n                class="button-change-zone {{form.zone.$invalid ? \'disabled\' : \'\'}}"\r\n              >\r\n                <md-icon>keyboard_arrow_right</md-icon>\r\n                <div>{{ \'zone.remover\' | translate }}</div>\r\n              </div>\r\n            </div>\r\n            <div\r\n              ng-if="originalSelectedZone.id != 1"\r\n              flex\r\n              dnd-list\r\n              dnd-drop="onDropComplete(originalSelectedZone.id, selectedZone.destinyZone)"\r\n              class="device-list"\r\n            >\r\n              <md-subheader class="zone-container">\r\n                <md-select\r\n                  required\r\n                  name="zona"\r\n                  ng-model="selectedZone.destinyZone"\r\n                  aria-label=""\r\n                >\r\n                  <md-option\r\n                    ng-repeat="zona in zonas | toArray | removeWith: { id: selectedZone.id }"\r\n                    value="{{zona.id}}"\r\n                  >\r\n                    {{zona.nome}}\r\n                  </md-option>\r\n                </md-select>\r\n              </md-subheader>\r\n              <md-content flex class="list-drop" id="zoneDeviceList">\r\n                <div\r\n                  flex\r\n                  class="loop-empty"\r\n                  ng-if="loopEmpty(\'zoneDeviceList\')"\r\n                >\r\n                  {{ \'zone.nenhumDispositivo\' | translate }}\r\n                </div>\r\n                <section\r\n                  ng-repeat="(lacoId, laco) in lacos"\r\n                  ng-if="!(laco.dispositivos | where: {zona: selectedZone.destinyZone} | isEmpty)"\r\n                >\r\n                  <md-subheader class="loop-subheader loop"\r\n                    >{{$index == 0 ? (\'zone.dispositivosLocais\' | translate) :\r\n                    (\'zone.lacoUpper\' | translate) + \' \' +\r\n                    $index}}</md-subheader\r\n                  >\r\n                  <md-list class="md-dense" ui-view="list">\r\n                    <md-list-item\r\n                      ng-repeat="dispositivo in laco.dispositivos | where: {zona: selectedZone.destinyZone}"\r\n                      dnd-draggable="dispositivo"\r\n                      ng-if="!dispositivo.saida_padrao"\r\n                      dnd-dragend="dragging.all = false"\r\n                      dnd-dragstart="onDragstart(event, \'all\', \'move\')"\r\n                      ng-class="{\'device-item-selected\' : dispositivo.selected, \'device-dragging\': dragging.all && dispositivo.selected }"\r\n                      class="device-item"\r\n                    >\r\n                      <md-checkbox\r\n                        ng-model="dispositivo.selected"\r\n                      ></md-checkbox>\r\n                      <p>\r\n                        {{lacoId == 0 ?\r\n                        CONFIG.dispositivos_locais[dispositivo.endereco].saida_local\r\n                        : (dispositivo.endereco | numberFormat)}} -\r\n                        {{dispositivo.nome}}\r\n                      </p>\r\n                      <a class="item-badge"\r\n                        >{{lacoId == 0 ? (\'zone.saidaLocal\' | translate) :\r\n                        (\'config.\' + CONFIG.tipos[dispositivo.tipo].nome |\r\n                        translate)}}</a\r\n                      >\r\n                      <md-icon\r\n                        class="device-disabled"\r\n                        ng-if="!dispositivo.habilitado"\r\n                        >lock</md-icon\r\n                      >\r\n                    </md-list-item>\r\n                  </md-list>\r\n                </section>\r\n              </md-content>\r\n            </div>\r\n          </div>\r\n          <section\r\n            ng-if="!(selectedZone | isEmpty)"\r\n            layout="row"\r\n            layout-align="center center"\r\n            layout-wrap\r\n          >\r\n            <md-button ng-click="cancel()" class="md-raised"\r\n              >{{ \'zone.cancelar\' | translate }}</md-button\r\n            >\r\n            <md-button\r\n              type="submit"\r\n              ng-disabled="form.zone.$invalid"\r\n              class="md-raised md-accent"\r\n              >{{newZone ? (\'zone.criar\' | translate) : (\'zone.aplicar\' |\r\n              translate)}}</md-button\r\n            >\r\n          </section>\r\n        </form>\r\n      </md-content>\r\n    </div>\r\n  </div>\r\n</div>\r\n');$templateCache.put("tools/authGateway.html",'<md-dialog\r\n  aria-label="Mango (Fruit)"\r\n  class="remote-password-content"\r\n  dw-loading="getPassword"\r\n>\r\n  <md-dialog-content>\r\n    <div><b>{{ \'tools.autenticacaoGW\' | translate }}</b></div>\r\n    <div style="text-align: start; margin-top: 40px">\r\n      {{ \'tools.suaSenha\' | translate }}: <b>{{contraSenha}}</b>\r\n    </div>\r\n    <div flex layout="row" layout-align="start center">\r\n      <div>{{ \'tools.contraSenha\' | translate }}:</div>\r\n      <md-input-container style="width: 120px">\r\n        <input\r\n          style="font-size: 16px; margin-left: 5px"\r\n          type="number"\r\n          focus="true"\r\n          name="password"\r\n          ng-model="password"\r\n          maxlength="10"\r\n          md-maxlength="10"\r\n          class="md-accent"\r\n          ng-enter="tryConnection()"\r\n        />\r\n      </md-input-container>\r\n    </div>\r\n    <div class="messages">\r\n      <div ng-if="passwordError" class="errors">\r\n        <span>{{ \'remote.senhaInvalida\' | translate }}</span>\r\n        <span>Tentativas restantes: {{ remainingAttempts }}</span>\r\n      </div>\r\n      <div ng-if="communicationError" class="errors">\r\n        {{ \'remote.falhaComunicacao\' | translate }}\r\n      </div>\r\n    </div>\r\n  </md-dialog-content>\r\n  <md-dialog-actions layout="row">\r\n    <md-button ng-click="close()">\r\n      {{ \'remote.cancelar\' | translate }}\r\n    </md-button>\r\n    <span flex></span>\r\n    <md-button\r\n      ng-click="tryConnection()"\r\n      class="md-raised md-accent"\r\n      md-autofocus\r\n    >\r\n      {{ \'tools.enviar\' | translate }}\r\n    </md-button>\r\n  </md-dialog-actions>\r\n</md-dialog>\r\n');$templateCache.put("tools/tools.html",'<md-toolbar class="toolbar md-accent">\r\n  <div flex layout-align="space-between center" class="md-toolbar-tools">\r\n    <div>\r\n      <div layout="row" layout-align="start center">\r\n        <md-icon\r\n          class="logo"\r\n          md-svg-src="img/toolbar.svg"\r\n          aria-label=""\r\n        ></md-icon>\r\n        <md-divider\r\n          style="width: 0.7px; height: 25px; border-color: white"\r\n        ></md-divider>\r\n        <div class="header-title">{{ \'global.header\' | translate }}</div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <md-button\r\n        ng-if="centralModel.isGateway && selectedScreen == \'log\'"\r\n        ng-disabled="gatewayLogs.length === 0"\r\n        ng-click="clearLogs()"\r\n        class="md-icon-button"\r\n      >\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'tools.limparRegistros\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon>delete</md-icon>\r\n      </md-button>\r\n      <md-button\r\n        ng-if="centralModel.isGateway && selectedScreen == \'log\'"\r\n        ng-disabled="!isCIEConnected"\r\n        ng-click="gatewayRestart()"\r\n        class="md-icon-button"\r\n      >\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'tools.reiniciarEquipamento\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon>refresh</md-icon>\r\n      </md-button>\r\n      <md-button\r\n        ng-if="centralModel.isGateway && selectedScreen == \'log\'"\r\n        ng-disabled="logs.length === 0"\r\n        ng-click="saveLogsToFile()"\r\n        class="md-icon-button"\r\n      >\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'tools.salvarEmArquivo\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon>save</md-icon>\r\n      </md-button>\r\n      <md-button\r\n        ng-if="!centralModel.isGateway"\r\n        ng-disabled="result.steps.length === 0"\r\n        ng-click="print()"\r\n        class="md-icon-button"\r\n      >\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'tools.gerarPdf\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon>picture_as_pdf</md-icon>\r\n      </md-button>\r\n      <md-button ng-click="help()" class="md-icon-button">\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'global.ajuda\' | translate }} (F1)</md-tooltip\r\n        >\r\n        <md-icon>help_outline</md-icon>\r\n      </md-button>\r\n      <locale-button></locale-button>\r\n    </div>\r\n  </div>\r\n</md-toolbar>\r\n<div flex layout="row" layout-align="start stretch">\r\n  <input\r\n    style="display: none"\r\n    id="gateway_logs_file"\r\n    type="file"\r\n    accept=".txt"\r\n    nwdirectory\r\n    input-file="gateway_logs_file"\r\n  />\r\n  <input\r\n    style="display: none"\r\n    id="gateway_dump_file"\r\n    type="file"\r\n    accept=".txt"\r\n    nwdirectory\r\n    input-file="gateway_dump_file"\r\n  />\r\n  <div flex="15" class="sub-menu">\r\n    <md-content>\r\n      <md-list class="submenu-list">\r\n        <md-list-item\r\n          ng-if="!centralModel.isRepeater && !centralModel.isGateway"\r\n          ng-click="changeSelectedScreen(\'calc\')"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'calc\'}"\r\n        >\r\n          <p>{{ \'tools.calculoAlimentacao\' | translate }}</p>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-if="!centralModel.isRepeater && !centralModel.isGateway"\r\n          ng-click="changeSelectedScreen(\'remote\')"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'remote\'}"\r\n        >\r\n          <p>{{ \'tools.operacaoRemota\' | translate }}</p>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-if="centralModel.isGateway"\r\n          ng-disabled="!centralModel.isGateway && !isCIEConnected"\r\n          ng-click="changeSelectedScreen(\'log\')"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'log\'}"\r\n        >\r\n          <p>{{ \'tools.logExecucao\' | translate }}</p>\r\n        </md-list-item>\r\n        <md-list-item\r\n          ng-if="centralModel.isGateway"\r\n          ng-disabled="!centralModel.isGateway && !isCIEConnected"\r\n          ng-click="changeSelectedScreen(\'system\')"\r\n          ng-class="{\'menu-item-selected\': selectedScreen == \'system\'}"\r\n        >\r\n          <p>{{ \'tools.sistema\' | translate }}</p>\r\n        </md-list-item>\r\n      </md-list>\r\n    </md-content>\r\n  </div>\r\n  <div flex layout="row" layout-align="space-between stretch">\r\n    <div\r\n      id="calc-content"\r\n      flex\r\n      ng-if="selectedScreen == \'calc\'"\r\n      layout-padding\r\n      class="md-whiteframe-4dp calc-content"\r\n    >\r\n      <div class="logo-print" layout-align="none stretch">\r\n        <md-icon\r\n          class="logo-print"\r\n          md-svg-src="img/toolbar.svg"\r\n          aria-label=""\r\n        ></md-icon>\r\n      </div>\r\n\r\n      <input\r\n        style="display: none"\r\n        id="open_file_calc"\r\n        type="file"\r\n        accept=".ciecalc"\r\n        input-file="open_file_calc"\r\n      />\r\n      <input\r\n        style="display: none"\r\n        id="save_file_calc"\r\n        type="file"\r\n        accept=".ciecalc"\r\n        nwsaveas\r\n        input-file="save_file_calc"\r\n      />\r\n      <input\r\n        style="display: none"\r\n        id="print"\r\n        type="file"\r\n        accept=".pdf"\r\n        nwsaveas\r\n        input-file="print"\r\n      />\r\n      <input\r\n        style="display: none"\r\n        id="file_import"\r\n        type="file"\r\n        input-file="file_import"\r\n        accept=".cie"\r\n      />\r\n      <div class="section-title">\r\n        {{ \'tools.calculoAlimentacao\' | translate }}\r\n      </div>\r\n\r\n      <div ng-if="!selectedSubScreenCalc" class="options">\r\n        <div class="description">{{ \'tools.info\' | translate }}</div>\r\n        <div layout="row" layout-align="center center">\r\n          <md-card ng-click="selectScreen(\'wizard\')">\r\n            <md-card-title>\r\n              <md-card-title-text>\r\n                <span class="md-headline"\r\n                  >{{ \'tools.assistente\' | translate }}</span\r\n                >\r\n                <span class="md-subhead"\r\n                  >{{ \'tools.assistenteInfo\' | translate }}</span\r\n                >\r\n              </md-card-title-text>\r\n            </md-card-title>\r\n          </md-card>\r\n          <md-card ng-click="selectScreen(\'calc\')">\r\n            <md-card-title>\r\n              <md-card-title-text>\r\n                <span class="md-headline"\r\n                  >{{ \'tools.manual\' | translate }}</span\r\n                >\r\n                <span class="md-subhead"\r\n                  >{{ \'tools.manualInfo\' | translate }}</span\r\n                >\r\n              </md-card-title-text>\r\n            </md-card-title>\r\n          </md-card>\r\n          <md-card onclick="document.getElementById(\'fileInput\').click()">\r\n            <md-card-title>\r\n              <md-card-title-text>\r\n                <input\r\n                  class="md-headline"\r\n                  type="file"\r\n                  id="fileInput"\r\n                  style="display: none"\r\n                  onchange="angular.element(this).scope().fileSelected(this)"\r\n                />\r\n                <span class="md-headline">\r\n                  {{ \'tools.importar\' | translate }}\r\n                </span>\r\n                <span class="md-subhead"\r\n                  >{{ \'tools.importarInfo\' | translate }}</span\r\n                >\r\n              </md-card-title-text>\r\n            </md-card-title>\r\n          </md-card>\r\n        </div>\r\n      </div>\r\n      <div ng-if="selectedSubScreenCalc === \'wizard\'" class="wizard">\r\n        <form\r\n          layout-gt-sm="column"\r\n          layout="column"\r\n          autocomplete="off"\r\n          layout-wrap\r\n        >\r\n          <div class="form-item" layout="row" layout-align="start center">\r\n            <div class="form-value">\r\n              <md-radio-group\r\n                ng-model="formWizard.type"\r\n                ng-change="changeType()"\r\n              >\r\n                <md-radio-button value="enderecavel"\r\n                  >{{ \'tools.sirenesEnderecaveis\' | translate\r\n                  }}</md-radio-button\r\n                >\r\n                <md-radio-button value="convencional"\r\n                  >{{ \'tools.saidaConvencional\' | translate }}</md-radio-button\r\n                >\r\n              </md-radio-group>\r\n            </div>\r\n          </div>\r\n          <div\r\n            class="form-item"\r\n            layout="row"\r\n            layout-align="start center"\r\n            style="margin-top: 20px"\r\n          >\r\n            <label class="form-label"\r\n              >{{ \'tools.quantidadeDispositivo\' | translate }}:</label\r\n            >\r\n            <div layout="row" layout-align="start center">\r\n              <md-input-container style="width: 70px">\r\n                <input\r\n                  required\r\n                  type="number"\r\n                  max="1000"\r\n                  min="0"\r\n                  step="1"\r\n                  ng-model="formWizard.quantity"\r\n                  aria-label="{{ \'tools.quantidade\' | translate }}"\r\n                />\r\n              </md-input-container>\r\n            </div>\r\n          </div>\r\n          <div class="form-item" layout="row" layout-align="start center">\r\n            <label class="form-label">{{ \'tools.cabo\' | translate }}:</label>\r\n            <div layout="row" layout-align="start center">\r\n              <md-select\r\n                ng-model="formWizard.cable"\r\n                aria-label="{{ \'tools.cabo\' | translate }}"\r\n                class="select-tools"\r\n              >\r\n                <md-option ng-repeat="i in cables" value="{{i.name}}">\r\n                  {{i.name}}\r\n                </md-option>\r\n              </md-select>\r\n              <label>mm²</label>\r\n            </div>\r\n          </div>\r\n          <div class="form-item" layout="row" layout-align="start center">\r\n            <label class="form-label"\r\n              >{{ \'tools.distancia\' | translate }}:</label\r\n            >\r\n            <div layout="row" layout-align="start center">\r\n              <md-input-container style="width: 70px">\r\n                <input\r\n                  required\r\n                  type="number"\r\n                  max="1000"\r\n                  min="0"\r\n                  step="1"\r\n                  ng-model="formWizard.distance"\r\n                  aria-label="{{ \'tools.distancia\' | translate }}"\r\n                />\r\n              </md-input-container>\r\n              <label>{{ \'tools.metros\' | translate }}</label>\r\n            </div>\r\n          </div>\r\n          <div class="form-item" layout="row" layout-align="start center">\r\n            <label class="form-label">{{ \'tools.modelo\' | translate }}:</label>\r\n            <div layout="row" layout-align="start center">\r\n              <md-select ng-model="formWizard.device" aria-label="">\r\n                <md-option\r\n                  ng-repeat="i in devices | where: { type: formWizard.type }"\r\n                  value="{{i.name}}"\r\n                >\r\n                  {{i.name}}\r\n                </md-option>\r\n              </md-select>\r\n            </div>\r\n          </div>\r\n        </form>\r\n        <section layout="row" layout-align="center center" layout-wrap>\r\n          <md-button ng-click="cancel()" class="md-accent"\r\n            >{{ \'tools.cancelar\' | translate }}\r\n          </md-button>\r\n          <md-button\r\n            ng-disabled="formWizard.$invalid"\r\n            ng-click="startByWizard()"\r\n            class="md-raised md-accent"\r\n            >{{ \'tools.calcular\' | translate }}\r\n          </md-button>\r\n        </section>\r\n      </div>\r\n      <div ng-if="selectedSubScreenCalc === \'calc\'">\r\n        <form\r\n          layout-gt-sm="row"\r\n          layout="column"\r\n          autocomplete="off"\r\n          layout-align="center center"\r\n          layout-wrap\r\n        >\r\n          <div class="form-item" layout="row" layout-align="start center">\r\n            <div class="form-value">\r\n              <md-radio-group ng-model="form.type" ng-change="changeType()">\r\n                <md-radio-button value="enderecavel"\r\n                  >{{ \'tools.sirenesEnderecaveis\' | translate\r\n                  }}</md-radio-button\r\n                >\r\n                <md-radio-button value="convencional"\r\n                  >{{ \'tools.saidaConvencional\' | translate }}</md-radio-button\r\n                >\r\n              </md-radio-group>\r\n            </div>\r\n          </div>\r\n          <div class="form-item" layout="row" layout-align="start center">\r\n            <label class="form-label"\r\n              >{{ \'tools.mesmoCabo\' | translate }}<br />{{ \'tools.paraTodos\' |\r\n              translate }}:</label\r\n            >\r\n            <div class="form-value">\r\n              <md-checkbox\r\n                class="repeater-check"\r\n                ng-model="form.sameCable"\r\n                aria-label="{{ \'tools.mesmoCabo\' | translate }}"\r\n              >\r\n              </md-checkbox>\r\n            </div>\r\n            <div layout="row" layout-align="start center">\r\n              <md-select\r\n                ng-disabled="!form.sameCable"\r\n                ng-model="form.cable"\r\n                aria-label="{{ \'tools.cabo\' | translate }}"\r\n                class="select-tools"\r\n              >\r\n                <md-option ng-repeat="i in cables" value="{{i.name}}">\r\n                  {{i.name}}\r\n                </md-option>\r\n              </md-select>\r\n              <label>mm²</label>\r\n            </div>\r\n          </div>\r\n          <div class="form-item" layout="row" layout-align="start center">\r\n            <label class="form-label"\r\n              >{{ \'tools.mesmaDistancia\' | translate }}<br />{{\r\n              \'tools.paraTodos\' | translate }}:</label\r\n            >\r\n            <div class="form-value">\r\n              <md-checkbox\r\n                class="repeater-check"\r\n                ng-model="form.sameDistance"\r\n                aria-label="Mesma distância"\r\n              >\r\n              </md-checkbox>\r\n            </div>\r\n            <div layout="row" layout-align="start center">\r\n              <md-input-container style="width: 70px">\r\n                <input\r\n                  ng-disabled="!form.sameDistance"\r\n                  required\r\n                  type="number"\r\n                  max="1000"\r\n                  min="0"\r\n                  step="1"\r\n                  ng-model="form.distance"\r\n                  aria-label="{{ \'tools.distancia\' | translate }}"\r\n                />\r\n              </md-input-container>\r\n              <label>{{ \'tools.metros\' | translate }}</label>\r\n            </div>\r\n          </div>\r\n          <div class="form-item" layout="row" layout-align="start center">\r\n            <md-button ng-click="newProject()" class="md-raised md-accent"\r\n              >{{ \'tools.novoProjeto\' | translate }}\r\n            </md-button>\r\n          </div>\r\n        </form>\r\n        <div layout="row" layout-align="center center" class="title">\r\n          {{ \'tools.tabelaSirenes\' | translate }}:\r\n        </div>\r\n        <div layout="row" layout-align="center center">\r\n          <div class="calc-table" flex flex-md="100" flex-lg="100" flex-xl="60">\r\n            <div\r\n              ng-if="deviceTable.length == 0"\r\n              layout-align="center center"\r\n              layout="row"\r\n              class="empty-description"\r\n            >\r\n              {{ \'tools.adicioneAsSirenes\' | translate }}.\r\n            </div>\r\n            <div\r\n              ng-hide="deviceTable.length == 0"\r\n              layout="row"\r\n              class="table-header"\r\n            >\r\n              <div\r\n                layout="column"\r\n                layout-align="center center"\r\n                style="width: 50px"\r\n              >\r\n                #\r\n              </div>\r\n              <div layout="column" layout-align="center center" flex>\r\n                {{ \'tools.modelo\' | translate }}\r\n              </div>\r\n              <div layout="column" layout-align="center center" flex>\r\n                {{ \'tools.cabo\' | translate }} (mm)\r\n              </div>\r\n              <div layout="column" layout-align="center center" flex>\r\n                {{ \'tools.distancia\' | translate }} (m)\r\n              </div>\r\n              <div layout="column" layout-align="center center" flex></div>\r\n            </div>\r\n            <div class="table-values-content" id="table-values-content">\r\n              <div\r\n                class="table-values"\r\n                layout="row"\r\n                ng-repeat="item in deviceTable"\r\n              >\r\n                <div\r\n                  layout="column"\r\n                  layout-align="center center"\r\n                  style="width: 50px; font-size: 12px"\r\n                >\r\n                  {{$index + 1}}\r\n                </div>\r\n                <div layout="column" layout-align="center center" flex>\r\n                  <md-select\r\n                    ng-model="item.device"\r\n                    aria-label="{{ \'tools.dispositivo\' | translate }}"\r\n                  >\r\n                    <md-option\r\n                      ng-repeat="i in devices | where: { type: form.type }"\r\n                      value="{{i.name}}"\r\n                    >\r\n                      {{i.name}}\r\n                    </md-option>\r\n                  </md-select>\r\n                </div>\r\n                <div layout="column" layout-align="center center" flex>\r\n                  <md-select\r\n                    ng-model="item.cable"\r\n                    aria-label="{{ \'tools.cabo\' | translate }}"\r\n                  >\r\n                    <md-option ng-repeat="i in cables" value="{{i.name}}">\r\n                      {{i.name}}\r\n                    </md-option>\r\n                  </md-select>\r\n                </div>\r\n                <div layout="column" layout-align="center center" flex>\r\n                  <div layout="row" layout-align="center center">\r\n                    <md-input-container style="width: 50px">\r\n                      <input\r\n                        focus="true"\r\n                        required\r\n                        type="number"\r\n                        max="1000"\r\n                        min="0"\r\n                        step="1"\r\n                        ng-model="item.distance"\r\n                        aria-label="{{ \'tools.distancia\' | translate }}"\r\n                      />\r\n                    </md-input-container>\r\n                  </div>\r\n                </div>\r\n                <div layout="column" layout-align="center center" flex>\r\n                  <md-button\r\n                    ng-click="removeItem($index)"\r\n                    class="md-icon-button"\r\n                  >\r\n                    <md-tooltip md-direction="botton"\r\n                      >{{ \'tools.remover\' | translate }}</md-tooltip\r\n                    >\r\n                    <md-icon>delete</md-icon>\r\n                  </md-button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <section layout="row" layout-align="center center" layout-wrap>\r\n              <md-button ng-click="newItem()" class="md-raised md-accent"\r\n                >{{ \'tools.dispositivo\' | translate }}</md-button\r\n              >\r\n              <div flex="20"></div>\r\n              <md-button ng-click="clear()" class="primary"\r\n                >{{ \'tools.limpar\' | translate }}</md-button\r\n              >\r\n              <md-button\r\n                ng-if="form.type === \'enderecaveis\'"\r\n                ng-click="openFileDialog(\'file_import\')"\r\n                class="md-raised"\r\n                >{{ \'tools.importarDeArquivo\' | translate }}\r\n              </md-button>\r\n              <md-button ng-click="calculate()" class="md-raised md-accent"\r\n                >{{ \'tools.calcular\' | translate }}\r\n              </md-button>\r\n            </section>\r\n          </div>\r\n        </div>\r\n        <div\r\n          ng-if="result.metersTotal"\r\n          layout="row"\r\n          layout-align="center center"\r\n          class="title"\r\n        >\r\n          {{ \'tools.resultadoCalculo\' | translate }}:\r\n          <md-button\r\n            ng-click="openFileDialog(\'save_file_calc\')"\r\n            class="md-raised md-accent"\r\n            >{{ \'tools.salvar\' | translate }}\r\n          </md-button>\r\n        </div>\r\n        <div layout="row" layout-align="center center">\r\n          <div\r\n            ng-if="result.metersTotal"\r\n            class="result-draw"\r\n            flex\r\n            flex-md="100"\r\n            flex-lg="100"\r\n            flex-xl="80"\r\n          >\r\n            <div layout="row" flex layout-align="start center">\r\n              <div ng-if="result.steps.length">\r\n                <img style="width: 80px" ng-src="img/cie.png" />\r\n              </div>\r\n              <div\r\n                style="min-width: 110px; width: {{trunc((meters/result.metersTotal) * 100)}}%"\r\n                layout="row"\r\n                layout-align="start center"\r\n                class="step"\r\n                ng-repeat="meters in result.steps track by $index"\r\n              >\r\n                <div flex layout="column" layout-align="start center">\r\n                  <div class="name">\r\n                    {{ \'tools.secao\' | translate }} {{$index + 1}}\r\n                  </div>\r\n                  <div class="distance"><b>{{meters}}</b> m</div>\r\n                </div>\r\n                <div><img ng-src="img/fonte.png" style="width: 50px" /></div>\r\n              </div>\r\n              <div\r\n                ng-if="result.steps.length"\r\n                style="width: {{trunc((result.over/result.metersTotal) * 100)}}%"\r\n                layout="row"\r\n                layout-align="start center"\r\n                class="step"\r\n              >\r\n                <div flex layout="column" layout-align="start center">\r\n                  <div class="distance"><b>{{result.over}}</b> m</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div layout="row" flex layout-align="center center">\r\n              <div class="info">\r\n                <b\r\n                  >{{result.steps.length == 0 ? (\'tools.naoNecessario\' |\r\n                  translate) : result.steps.length}}</b\r\n                >\r\n                {{ \'tools.fontes\' | translate }} FNA\r\n              </div>\r\n              <div class="info">\r\n                {{ \'tools.distanciaTotal\' | translate }}:\r\n                <b>{{result.metersTotal}} {{ \'tools.metros\' | translate }}</b>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="date" flex>\r\n          {{ \'tools.relatorioGerado\' | translate }} {{today |\r\n          date:\'dd/MM/yyyy\'}} às {{today | date:\'HH\'}}h{{today | date:\'mm\'}}min.\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'remote\'"\r\n      layout-padding\r\n      class="md-whiteframe-4dp tools-remote-content"\r\n    >\r\n      <div class="section-title">{{ \'tools.operacaoRemota\' | translate }}</div>\r\n      <div ng-if="connectionMode === \'usb\'" class="alert">\r\n        {{ \'tools.altereModo\' | translate }}\r\n      </div>\r\n      <div>\r\n        <remote-discovery form="formRemote"></remote-discovery>\r\n      </div>\r\n    </div>\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'log\'"\r\n      layout-padding\r\n      class="md-whiteframe-4dp tools-remote-content"\r\n      id="gateway-logs-content"\r\n    >\r\n      <div\r\n        class="section-title stick"\r\n        layout="row"\r\n        layout-align="space-between center"\r\n      >\r\n        <div layout="row" layout-align="start center">\r\n          <span>{{ \'tools.logExecucao\' | translate }}</span>\r\n          <md-progress-circular\r\n            ng-if="loadingLogs && isCIEConnected"\r\n            class="md-accent"\r\n            style="margin-left: 10px"\r\n            md-diameter="20px"\r\n            md-mode="indeterminate"\r\n          ></md-progress-circular>\r\n        </div>\r\n        <div layout="row" layout-align="start center">\r\n          <md-checkbox ng-model="anchorScroll.value" style="margin-bottom: 0">\r\n            Rolagem automática\r\n          </md-checkbox>\r\n        </div>\r\n      </div>\r\n      <div\r\n        flex\r\n        layout="column"\r\n        class="tools-log-gateway"\r\n        style="margin-bottom: 50px"\r\n      >\r\n        <div ng-repeat="log in gatewayLogs track by $index">{{log}}</div>\r\n      </div>\r\n    </div>\r\n    <div\r\n      flex\r\n      ng-if="selectedScreen == \'system\'"\r\n      layout-padding\r\n      class="md-whiteframe-4dp tools-remote-content gateway-system-content"\r\n    >\r\n      <div class="section-title">\r\n        {{ \'tools.reiniciarEquipamento\' | translate }}\r\n      </div>\r\n      <div\r\n        layout="row"\r\n        layout-align="start center"\r\n        style="padding-top: 20px; padding-bottom: 20px"\r\n      >\r\n        <md-button\r\n          ng-click="gatewayRestart()"\r\n          ng-disabled="!isCIEConnected"\r\n          class="md-raised md-accent"\r\n          >{{ \'tools.enviar\' | translate }}</md-button\r\n        >\r\n      </div>\r\n\r\n      <div class="section-title">{{ \'tools.reset\' | translate }}</div>\r\n      <div\r\n        layout="row"\r\n        layout-align="start center"\r\n        style="padding-top: 20px; padding-bottom: 20px"\r\n      >\r\n        <md-button\r\n          ng-click="factoryReset()"\r\n          ng-disabled="!isCIEConnected"\r\n          class="md-raised md-accent"\r\n          >{{ \'tools.enviar\' | translate }}</md-button\r\n        >\r\n      </div>\r\n\r\n      <div ng-if="!gatewayAutenticated" class="section-title">\r\n        {{ \'tools.comandosAvancados\' | translate }}\r\n      </div>\r\n      <div\r\n        ng-if="!gatewayAutenticated"\r\n        flex\r\n        layout="row"\r\n        layout-align="start center"\r\n        style="margin-bottom: 50px"\r\n      >\r\n        <div class="alert" style="margin: 0 10px 0 0">\r\n          {{\'tools.necessarioAutenticacao\' | translate }}\r\n        </div>\r\n        <md-button\r\n          ng-click="startAuthGateway()"\r\n          ng-disabled="!isCIEConnected"\r\n          class="md-raised md-accent"\r\n        >\r\n          {{ \'tools.autenticar\' | translate }}\r\n        </md-button>\r\n      </div>\r\n      <div\r\n        ng-if="gatewayAutenticated"\r\n        flex\r\n        layout="column"\r\n        class="tools-system-gateway"\r\n        style="margin-bottom: 50px"\r\n      >\r\n        <div class="section-title">{{ \'tools.alterarMac\' | translate }}</div>\r\n        <div layout="row" layout-align="start center">\r\n          <label\r\n            class="form-label"\r\n            style="margin-right: 10px; margin-bottom: 32px; width: 85px"\r\n            >{{ \'tools.mac\' | translate }}:</label\r\n          >\r\n          <div class="form-value-container">\r\n            <form\r\n              name="formGatewaySystem"\r\n              layout="column"\r\n              autocomplete="off"\r\n              style="margin-block-end: 0"\r\n            >\r\n              <md-input-container style="width: 160px">\r\n                <input\r\n                  type="text"\r\n                  required\r\n                  name="mac"\r\n                  ng-model="gatewaySystem.mac"\r\n                  maxlength="17"\r\n                  md-maxlength="17"\r\n                  pattern="{{REGEX.MAC}}"\r\n                  ng-pattern="REGEX.MAC"\r\n                />\r\n                <div ng-messages="formGatewaySystem.mac.$error">\r\n                  <div ng-message="pattern">\r\n                    {{ \'tools.macInvalido\' | translate }}\r\n                  </div>\r\n                  <div ng-message="required">\r\n                    {{ \'system.campoObrigatorio\' | translate }}\r\n                  </div>\r\n                </div>\r\n              </md-input-container>\r\n            </form>\r\n          </div>\r\n          <md-button\r\n            ng-disabled="formGatewaySystem.mac.$invalid"\r\n            style="margin-top: -5px; margin-left: 13px"\r\n            ng-click="changeMac()"\r\n            class="md-raised md-accent"\r\n            >{{ \'tools.enviar\' | translate }}</md-button\r\n          >\r\n        </div>\r\n\r\n        <div class="section-title">\r\n          {{ \'tools.apagarRegistro\' | translate }}\r\n        </div>\r\n        <div\r\n          layout="row"\r\n          layout-align="start center"\r\n          style="padding-top: 20px; padding-bottom: 20px"\r\n        >\r\n          <md-button ng-click="clearRegisters()" class="md-raised md-accent"\r\n            >{{ \'tools.enviar\' | translate }}</md-button\r\n          >\r\n        </div>\r\n\r\n        <div class="section-title">{{ \'tools.lerMemoria\' | translate }}</div>\r\n        <div\r\n          layout="row"\r\n          layout-align="start center"\r\n          style="padding-top: 20px; padding-bottom: 20px"\r\n        >\r\n          <md-button ng-click="getGatewayDump()" class="md-raised md-accent"\r\n            >{{ \'tools.enviar\' | translate }}</md-button\r\n          >\r\n          <md-progress-linear\r\n            ng-if="percentDump > 0"\r\n            style="width: 300px; margin-left: 20px"\r\n            class="md-accent"\r\n            md-mode="determinate"\r\n            value="{{percentDump}}"\r\n          ></md-progress-linear>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n');$templateCache.put("shared/1060recover.html",'<md-dialog\r\n  aria-label="{{ \'remote.1060Recover\' | translate }}"\r\n  class="dialog-1060recover"\r\n>\r\n  <form ng-cloak>\r\n    <md-toolbar class="md-accent">\r\n      <div class="md-toolbar-tools">\r\n        <h2>{{ \'system.1060Recover\' | translate }}</h2>\r\n        <span flex></span>\r\n        <md-button class="md-icon-button" ng-click="cancel()">\r\n          <md-icon aria-label="Close dialog">close</md-icon>\r\n        </md-button>\r\n      </div>\r\n    </md-toolbar>\r\n\r\n    <md-dialog-content>\r\n      <div class="md-dialog-content">\r\n        <div class="warning">\r\n          <b>{{\'system.modalRecovery-atencao\' | translate }}</b>\r\n        </div>\r\n\r\n        <p class="text">{{\'system.modalRecovery-descricao\' | translate }}.</p>\r\n\r\n        <ul class="text">\r\n          <li>{{\'system.modalRecovery-passo1\' | translate }}</li>\r\n          <li>{{\'system.modalRecovery-passo2\' | translate }}</li>\r\n          <li>{{\'system.modalRecovery-passo3\' | translate }}</li>\r\n          <li>{{\'system.modalRecovery-passo4\' | translate }}</li>\r\n          <li>{{\'system.modalRecovery-passo5\' | translate }}</li>\r\n        </ul>\r\n\r\n        <div class="info" ng-if="!is1060USBConnectedBootMode" layout="row">\r\n          <div class="msg">\r\n            {{ \'system.modalRecovery-aguarde\' | translate }}\r\n          </div>\r\n          <md-progress-circular\r\n            class="md-accent"\r\n            md-diameter="20px"\r\n            md-mode="indeterminate"\r\n          ></md-progress-circular>\r\n        </div>\r\n        <div\r\n          class="info-ok"\r\n          ng-if="is1060USBConnected && is1060USBConnectedBootMode"\r\n          layout="row"\r\n          layout-align="start center"\r\n        >\r\n          <div class="msg">\r\n            {{ \'system.modalRecovery-conexaoOk\' | translate }}\r\n          </div>\r\n          <md-icon>check</md-icon>\r\n        </div>\r\n\r\n        <div class="cie1060-board">\r\n          <img ng-src="img/cie1060-board.png" aria-label="" />\r\n        </div>\r\n      </div>\r\n    </md-dialog-content>\r\n    <md-dialog-actions layout="row">\r\n      <span flex></span>\r\n      <md-button ng-click="cancel()">\r\n        {{ \'global.cancelar\' | translate }}\r\n      </md-button>\r\n      <md-button\r\n        ng-disabled="!is1060USBConnectedBootMode"\r\n        class="md-raised md-accent"\r\n        ng-click="enableRecovery(); cancel();"\r\n        style="margin-right: 20px"\r\n      >\r\n        {{ \'system.modalRecovery-habilitarRecuperacao\' | translate }}\r\n      </md-button>\r\n    </md-dialog-actions>\r\n  </form>\r\n</md-dialog>\r\n');$templateCache.put("shared/changeAddr-dialog.html",'<md-dialog class="dialog-change-model-content">\r\n  <md-dialog-content>\r\n    <div class="md-dialog-content">\r\n      <h2>{{ \'logs.selecioneEndereco\' | translate }}</h2>\r\n      <div class="form-value" layout="row" layout-align="center center">\r\n        <div class="label">{{ \'logs.endereco\' | translate }}:</div>\r\n        <div>\r\n          <md-select required ng-model="formEndereco.endereco">\r\n            <md-option value="null">\r\n              {{ \'logs.selecione\' | translate }}\r\n            </md-option>\r\n            <md-option\r\n              ng-repeat="endereco in enderecosLivresRegistros"\r\n              value="{{endereco + 1}}"\r\n            >\r\n              {{endereco + 1}}\r\n            </md-option>\r\n          </md-select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </md-dialog-content>\r\n  <md-dialog-actions layout="row" layout-align="center center">\r\n    <md-button\r\n      ng-click="cancel()"\r\n      class="md-raised"\r\n      aria-label="{{ \'logs.cancelar\' | translate }}"\r\n    >\r\n      {{ \'logs.cancelar\' | translate }}\r\n    </md-button>\r\n    <md-button\r\n      ng-disabled="formEndereco.endereco === \'null\'"\r\n      ng-click="save()"\r\n      class="md-raised md-accent"\r\n      >{{ \'logs.adicionar\' | translate }}\r\n    </md-button>\r\n  </md-dialog-actions>\r\n</md-dialog>\r\n');$templateCache.put("shared/changeAddrFromConfig-dialog.html",'<md-dialog class="dialog-change-model-content">\r\n  <md-dialog-content>\r\n    <div class="md-dialog-content">\r\n      <div>\r\n        {{ \'project.enderecoRecebida\' | translate }} <br /><br />\r\n        <b>{{ \'project.escolhaEndereco\' | translate }}:</b>\r\n      </div>\r\n      <div class="form-value" layout="row" layout-align="center center">\r\n        <div class="label">{{ \'project.endereco\' | translate }}:</div>\r\n        <div>\r\n          <md-select required ng-model="formEndereco.endereco">\r\n            <md-option value="null">\r\n              {{ \'project.selecione\' | translate }}\r\n            </md-option>\r\n            <md-option\r\n              ng-repeat="endereco in enderecosLivresRegistros"\r\n              value="{{endereco + 1}}"\r\n            >\r\n              {{endereco + 1}}\r\n            </md-option>\r\n          </md-select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </md-dialog-content>\r\n  <md-dialog-actions layout="row" layout-align="center center">\r\n    <md-button ng-click="cancel()" class="md-raised" aria-label="Cancelar">\r\n      {{ \'project.cancelar\' | translate }}\r\n    </md-button>\r\n    <md-button\r\n      ng-disabled="formEndereco.endereco === \'null\'"\r\n      ng-click="save()"\r\n      class="md-raised md-accent"\r\n      >{{ \'project.aplicar\' | translate }}\r\n    </md-button>\r\n  </md-dialog-actions>\r\n</md-dialog>\r\n');$templateCache.put("shared/logs.html",'<input\r\n  style="display: none"\r\n  id="save_log_file"\r\n  type="file"\r\n  accept=".cielog"\r\n  nwsaveas\r\n  input-file="save_log_file"\r\n/>\r\n<input\r\n  style="display: none"\r\n  id="save_logs_csv"\r\n  type="file"\r\n  accept=".csv"\r\n  nwsaveas\r\n  input-file="save_logs_csv"\r\n/>\r\n<input\r\n  style="display: none"\r\n  id="open_log_file"\r\n  type="file"\r\n  accept=".cielog"\r\n  input-file="open_log_file"\r\n/>\r\n\r\n<div flex layout="column" layout-align="space-between stretch">\r\n  <div\r\n    ng-if="isProject"\r\n    layout="row"\r\n    layout-align="start center"\r\n    class="project-centrals-header"\r\n  >\r\n    <div\r\n      ng-if="projectLogs.length == 0"\r\n      layout="row"\r\n      layout-align="center center"\r\n      class="info"\r\n    >\r\n      <span\r\n        >{{ \'logs.paraVisualizar\' | translate }}<br />\r\n        {{ \'logs.paraSalvar\' | translate }}\r\n        <span class="strong"\r\n          >{{ \'global.menuSistema\' | translate }} > {{ \'logs.registroEventos\' |\r\n          translate }}</span\r\n        >.\r\n      </span>\r\n    </div>\r\n    <div\r\n      ng-repeat="central in projectLogs | orderBy:central"\r\n      ng-click="selectCentral(central)"\r\n      layout="row"\r\n      layout-align="center center"\r\n      class="add-button central-button"\r\n      md-whiteframe="2"\r\n    >\r\n      <md-icon\r\n        >{{central.selected ? \'check_box\' : \'check_box_outline_blank\'}}\r\n        <md-tooltip md-direction="top"\r\n          >{{central.selected ? ( \'logs.ocultar\' | translate ) : (\r\n          \'logs.apresentar\' | translate )}}</md-tooltip\r\n        >\r\n      </md-icon>\r\n      {{ \'logs.central\' | translate }} {{central.central}}\r\n      <md-icon ng-click="removeCentral(central, $event)" class="delete"\r\n        >close\r\n        <md-tooltip md-direction="top"\r\n          >{{ \'logs.remover\' | translate }}</md-tooltip\r\n        >\r\n      </md-icon>\r\n    </div>\r\n    <div\r\n      ng-click="addLogFileToProject()"\r\n      layout="row"\r\n      layout-align="center center"\r\n      class="add-button"\r\n      md-whiteframe="2"\r\n    >\r\n      <md-icon>add</md-icon>\r\n      {{ \'logs.adicionarArquivo\' | translate }}\r\n    </div>\r\n    <div\r\n      ng-if="projectLogs.length > 0 && logs.length === 0"\r\n      layout="row"\r\n      layout-align="center center"\r\n      class="info"\r\n    >\r\n      <span>{{ \'logs.nenhumRegistro\' | translate }}.</span>\r\n    </div>\r\n  </div>\r\n\r\n  <div ng-if="logs.length > 0" layout="row" layout-align="space-between center">\r\n    <div class="div-filters" layout="row">\r\n      <div class="title">{{ \'logs.filtrarData\' | translate }}:</div>\r\n      <md-input-container>\r\n        <input\r\n          type="date"\r\n          ng-model="filter.dateFrom"\r\n          ng-change="filterByDate()"\r\n        />\r\n      </md-input-container>\r\n      <div class="title">{{ \'logs.ate\' | translate }}</div>\r\n      <md-input-container>\r\n        <input\r\n          type="date"\r\n          ng-model="filter.dateTo"\r\n          ng-change="filterByDate()"\r\n        />\r\n      </md-input-container>\r\n    </div>\r\n    <div ng-if="logs.length > 0" class="row" layout-align="end center">\r\n      <md-button\r\n        ng-if="!isProject"\r\n        ng-click="openFileDialog(\'open_log_file\')"\r\n        class="md-accent md-icon-button"\r\n      >\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'logs.abrirArquivo\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon>folder</md-icon>\r\n      </md-button>\r\n      <md-button\r\n        ng-if="!isProject"\r\n        ng-click="getLogs()"\r\n        class="md-accent md-icon-button"\r\n      >\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'logs.receberDaCentral\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon>refresh</md-icon>\r\n      </md-button>\r\n      <md-button\r\n        ng-if="!isProject"\r\n        class="md-accent md-icon-button"\r\n        ng-click="openFileDialog(\'save_log_file\')"\r\n        class="md-icon-button"\r\n      >\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'logs.salvar\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon>save</md-icon>\r\n      </md-button>\r\n      <md-button ng-click="printLogsToPdf()" class="md-accent md-icon-button">\r\n        <md-tooltip md-direction="botton"\r\n          >{{ \'logs.gerarPdf\' | translate }}</md-tooltip\r\n        >\r\n        <md-icon>picture_as_pdf</md-icon>\r\n      </md-button>\r\n    </div>\r\n  </div>\r\n\r\n  <md-tabs\r\n    ng-if="logs.length > 0"\r\n    md-disable-animation\r\n    md-dynamic-height\r\n    md-border-bottom\r\n  >\r\n    <md-tab\r\n      label="{{title}}"\r\n      ng-repeat="(tag, title) in logType"\r\n      md-\r\n      md-on-select="selectTypeLog(tag)"\r\n      md-active="tag == selectedLogType"\r\n    >\r\n    </md-tab>\r\n  </md-tabs>\r\n  <md-content\r\n    ng-if="logs.length && centralModel.is1060"\r\n    flex\r\n    class="table-logs"\r\n    id="table-logs"\r\n  >\r\n    <table md-table>\r\n      <thead md-head md-order="logTableOrder">\r\n        <tr md-row>\r\n          <th ng-if="selectedLogType == \'all\'" md-column md-order-by="evento">\r\n            <span>{{ \'logs.tipoEvento\' | translate }}</span>\r\n          </th>\r\n          <th md-column md-order-by="-date">\r\n            <span>{{ \'logs.data\' | translate }}</span>\r\n          </th>\r\n          <th md-column md-order-by="-date">\r\n            <span>{{ \'logs.hora\' | translate }}</span>\r\n          </th>\r\n          <th md-column md-order-by="tipo">{{ \'logs.evento\' | translate }}</th>\r\n          <th md-column md-order-by="nomeDetalhe"><span>Detalhe</span></th>\r\n          <th md-column md-order-by="endereco"><span>End.</span></th>\r\n          <th md-column md-order-by="nome_dispositivo">\r\n            <span>{{ \'logs.nome\' | translate }}</span>\r\n          </th>\r\n          <th md-column md-order-by="siglaTipo">\r\n            <span>{{ \'logs.tipo\' | translate }}</span>\r\n          </th>\r\n        </tr>\r\n      </thead>\r\n      <tbody md-body>\r\n        <tr\r\n          class="item-log"\r\n          ng-repeat="log in allLogs | orderBy: logTableOrder | limitTo: pagination.limit: (pagination.page - 1) * pagination.limit"\r\n        >\r\n          <td ng-if="selectedLogType == \'all\'" md-cell>\r\n            {{ (\'logs.\' + log.evento | translate)}}\r\n          </td>\r\n          <td md-cell>{{log.date | date: \'dd/MM/yyyy\'}}</td>\r\n          <td md-cell>{{log.date | date: \'HH:mm:ss\'}}</td>\r\n          <td md-cell>\r\n            {{log.nomeEvento ? (\'logs.\' + log.nomeEvento | translate) : \'-\'}}\r\n          </td>\r\n          <td md-cell>\r\n            {{log.nomeDetalhe ? (\'logs.\' + log.nomeDetalhe | translate) : \'-\'}}\r\n          </td>\r\n          <td md-cell>{{log.nomeEvento ? \'-\' : log.endereco}}</td>\r\n          <td md-cell>\r\n            {{ log.endereco === 0 ? (\'logs.NaoRegistrado\' | translate) :\r\n            dispositivos[log.endereco] ? dispositivos[log.endereco].nome :\r\n            log.nome_dispositivo ? log.nome_dispositivo : \'-\' }}\r\n          </td>\r\n          <td md-cell>{{log.siglaTipo ? log.siglaTipo : \'-\'}}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </md-content>\r\n  <md-content\r\n    ng-if="logs.length && !centralModel.is1060"\r\n    flex\r\n    class="table-logs"\r\n    id="table-logs"\r\n  >\r\n    <table md-table>\r\n      <thead md-head md-order="logTableOrder">\r\n        <tr md-row>\r\n          <th style="padding: 0 2px" md-column md-order-by="primeiro_evento">\r\n            <span>1º</span>\r\n          </th>\r\n          <th md-column md-order-by="sequence"><span>Seq.</span></th>\r\n          <th ng-if="selectedLogType == \'all\'" md-column md-order-by="evento">\r\n            <span>{{ \'logs.evento\' | translate }}</span>\r\n          </th>\r\n          <th ng-if="isProject" md-column md-order-by="file">\r\n            <span>{{ \'logs.arquivo\' | translate }}</span>\r\n          </th>\r\n          <th md-column md-order-by="origem">\r\n            <span\r\n              >{{ \'logs.centralDe\' | translate }}<br />{{ \'logs.origem\' |\r\n              translate }}</span\r\n            >\r\n          </th>\r\n          <th md-column md-order-by="date">\r\n            <span>{{ \'logs.data\' | translate }}</span>\r\n          </th>\r\n          <th md-column md-order-by="date">\r\n            <span>{{ \'logs.hora\' | translate }}</span>\r\n          </th>\r\n          <th md-column md-order-by="tipo">{{ \'logs.evento\' | translate }}</th>\r\n          <th md-column md-order-by="laco">\r\n            <span>{{ \'logs.laco\' | translate }}</span>\r\n          </th>\r\n          <th md-column md-order-by="endereco"><span>End.</span></th>\r\n          <th md-column md-order-by="nome_dispositivo">\r\n            <span>{{ \'logs.nome\' | translate }}</span>\r\n          </th>\r\n          <th md-column md-order-by="tipo_dispositivo">\r\n            <span>{{ \'logs.tipo\' | translate }}</span>\r\n          </th>\r\n          <th md-column md-order-by="subtipo_dispositivo">\r\n            <span>{{ \'logs.subtipo\' | translate }}</span>\r\n          </th>\r\n          <th md-column md-order-by="zona">\r\n            <span>{{ \'logs.idZona\' | translate }}</span>\r\n          </th>\r\n          <th md-column md-order-by="nome_zona">\r\n            {{ \'logs.nomeZona\' | translate }}\r\n          </th>\r\n          <th\r\n            ng-if="selectedLogType == \'operacao\' || selectedLogType == \'all\'"\r\n            md-column\r\n            md-order-by="origem"\r\n          >\r\n            {{ \'logs.repetidora\' | translate }}\r\n          </th>\r\n          <th\r\n            ng-if="selectedLogType == \'operacao\' || selectedLogType == \'all\'"\r\n            md-column\r\n            md-order-by="regra_ativacao"\r\n          >\r\n            {{ \'logs.regraAtivacao\' | translate }}\r\n          </th>\r\n        </tr>\r\n      </thead>\r\n      <tbody md-body>\r\n        <tr\r\n          class="item-log"\r\n          ng-repeat="log in allLogs | orderBy: logTableOrder | limitTo: pagination.limit: (pagination.page - 1) * pagination.limit"\r\n        >\r\n          <td>\r\n            <div class="primeiro_evento">\r\n              {{log.primeiro_evento ? \'*\' : \'\'}}\r\n            </div>\r\n          </td>\r\n          <td md-cell>{{log.sequence}}</td>\r\n          <td ng-if="selectedLogType == \'all\'" md-cell>\r\n            {{logType[log.evento]}}\r\n          </td>\r\n          <td ng-if="isProject" md-cell>Central {{log.file}}</td>\r\n          <td md-cell>\r\n            {{log.origem ? (log.origem === 30 ?\r\n            (\'logs.operacaoRemotaProgramador\' | translate) : ((\'logs.laco\' |\r\n            translate) + log.origem)) : \'-\'}}\r\n          </td>\r\n          <td md-cell>{{log.date | date: \'dd/MM/yyyy\'}}</td>\r\n          <td md-cell>{{log.date | date: \'HH:mm:ss\'}}</td>\r\n          <td md-cell>\r\n            {{\'config.\'+ tiposEvento[log.evento][log.tipo] | translate}}\r\n          </td>\r\n          <td md-cell>{{log.laco || \'-\'}}</td>\r\n          <td md-cell>\r\n            {{(log.laco != 0 || selectedLogType == \'operacao\' ? log.endereco :\r\n            \'-\') || \'-\'}}\r\n          </td>\r\n          <td md-cell>{{log.nome_dispositivo || \'-\'}}</td>\r\n          <td md-cell>\r\n            {{tipos[log.tipo_dispositivo].nome ? (\'config.\' +\r\n            tipos[log.tipo_dispositivo].nome | translate) : \'-\'}}\r\n          </td>\r\n          <td md-cell>\r\n            {{subTipos[log.subtipo_dispositivo].nome ? (\'config.\' +\r\n            subTipos[log.subtipo_dispositivo].nome | translate) : \'-\'}}\r\n          </td>\r\n          <td md-cell>{{log.zona || \'-\'}}</td>\r\n          <td md-cell>{{log.nome_zona || \'-\'}}</td>\r\n          <td\r\n            md-cell\r\n            ng-if="selectedLogType == \'operacao\' || selectedLogType == \'all\'"\r\n          >\r\n            {{log.repetidora ? (\'R\' + log.repetidora) : \'-\'}}\r\n          </td>\r\n          <td\r\n            md-cell\r\n            ng-if="selectedLogType == \'operacao\' || selectedLogType == \'all\'"\r\n          >\r\n            {{log.regra_ativacao || \'-\'}}\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </md-content>\r\n  <md-table-pagination\r\n    ng-if="logs.length > 0"\r\n    md-label="{page: (\'logs.pagina\' | translate) + \':\', rowsPerPage: (\'logs.registrosPagina\' | translate) + \':\', of: \'de\'}"\r\n    md-page-select\r\n    md-limit="pagination.limit"\r\n    md-page="pagination.page"\r\n    md-total="{{allLogs.length}}"\r\n  ></md-table-pagination>\r\n  <div\r\n    ng-if="!isProject && logs.length == 0"\r\n    layout="column"\r\n    layout-align="start center"\r\n  >\r\n    <div class="description">{{ \'logs.selecioneOpcao\' | translate }}</div>\r\n    <div layout="row" layout-align="center center" layout-wrap>\r\n      <md-button ng-click="getLogs()" class="md-raised md-accent">\r\n        {{ \'logs.receberDaCentral\' | translate }}\r\n      </md-button>\r\n      <md-button\r\n        ng-click="openFileDialog(\'open_log_file\')"\r\n        ng-disabled="form.generalConfig.$invalid"\r\n        class="md-raised md-accent"\r\n      >\r\n        {{ \'logs.abrirArquivo\' | translate }}\r\n      </md-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n');$templateCache.put("shared/projectBar.html",'<div layout="row" layout-align="start start">\r\n  <button\r\n    ng-if="showButtonLeft"\r\n    class="button-left"\r\n    type="button"\r\n    ng-click="scrollToLeft()"\r\n  >\r\n    left\r\n  </button>\r\n\r\n  <md-card ng-repeat="central in centralSummary">\r\n    <md-card-content\r\n      class="card {{central.endereco === selectedCentralAddress ? \'selected\' : \'\'}}"\r\n    >\r\n      <div layout="row">\r\n        <div class="name">{{ \'project.central\' | translate }}</div>\r\n        <div class="number">{{central.endereco}}</div>\r\n        <md-icon\r\n          ng-if="central.endereco !== selectedCentralAddress"\r\n          ng-click="openCentralConfig(central.endereco)"\r\n          >settings</md-icon\r\n        >\r\n      </div>\r\n    </md-card-content>\r\n  </md-card>\r\n\r\n  <button\r\n    ng-if="showButtonRight"\r\n    class="button-right"\r\n    type="button"\r\n    ng-click="scrollToRight()"\r\n  >\r\n    right\r\n  </button>\r\n</div>\r\n');$templateCache.put("shared/searchCentral.html",'<md-dialog aria-label="{{ \'remote.buscarRede\' | translate }}">\r\n  <form ng-cloak>\r\n    <md-toolbar class="md-accent">\r\n      <div class="md-toolbar-tools">\r\n        <h2>{{ \'remote.buscarRede\' | translate }}</h2>\r\n        <span flex></span>\r\n        <md-button class="md-icon-button" ng-click="cancel()">\r\n          <md-icon aria-label="Close dialog">close</md-icon>\r\n        </md-button>\r\n      </div>\r\n    </md-toolbar>\r\n\r\n    <md-dialog-content>\r\n      <div class="md-dialog-content">\r\n        <remote-discovery form="formRemote"></remote-discovery>\r\n      </div>\r\n    </md-dialog-content>\r\n  </form>\r\n</md-dialog>\r\n');$templateCache.put("shared/toast-print.html",'<md-toast style="margin-bottom: 30px">\r\n  <md-icon style="color: green" class="md-icon-container toast-icon"\r\n    >picture_as_pdf</md-icon\r\n  >\r\n  <span ng-if="!generated" class="md-toast-text" flex\r\n    >{{ \'report.gerandoAguarde\' | translate }}</span\r\n  >\r\n  <span ng-if="generated" class="md-toast-text" flex\r\n    >{{ \'report.gerado\' | translate }}</span\r\n  >\r\n  <md-button ng-if="generated" class="md-highlight" ng-click="openPdfFile()">\r\n    {{ \'report.abrir\' | translate }}\r\n  </md-button>\r\n</md-toast>\r\n');$templateCache.put("shared/toast.html",'<md-toast style="margin-bottom: 30px">\r\n  <span class="md-toast-text" flex>{{msg}}</span>\r\n  <md-icon style="color:{{type}}" class="md-icon-container toast-icon"\r\n    >check</md-icon\r\n  >\r\n</md-toast>\r\n')}]);let versao_minima_compativel={CIE1060:"ALL",CIE1125:"3.1.2",CIE1250:"3.1.2",CIE2500:"3.1.2",REPEATER:"3.1.2",GATEWAY:"1.0.8"};let versao_recomendada={CIE1060:"1.4.3",CIE1125:"4.1.3",CIE1250:"4.1.3",CIE2500:"4.1.3",REPEATER:"4.1.3",GATEWAY:"1.0.8"};let modelos_centrais={CIE1060:{id:"CIE1060",nome:"CIE 1060",QTD_LACOS:1,QTD_DISPOSITIVOS_LACO:60,is1060:true},CIE1125:{id:"CIE1125",nome:"CIE 1125",QTD_LACOS:1,QTD_DISPOSITIVOS_LACO:125},CIE1250:{id:"CIE1250",nome:"CIE 1250",QTD_LACOS:1,QTD_DISPOSITIVOS_LACO:250},CIE2500:{id:"CIE2500",nome:"CIE 2500",QTD_LACOS:2,QTD_DISPOSITIVOS_LACO:250},REPEATER:{id:"REPEATER",nome:"global.rp520",isRepeater:true},PROJECT:{id:"PROJECT",nome:"global.projeto"},GATEWAY:{id:"GATEWAY",nome:"Gateway CIE GW521",isGateway:true}};var controle_versao={modbus:"3.1.0","ponto-a-ponto":"3.1.0"};(function(){"use strict";angular.module("app").factory("$config",["$translateService",function($translateService){var t=$translateService.translatePhrase;var dispositivos_locais={10:{nome:t("config.local-10"),laco:0,endereco:10,habilitado:true,zona:1,tipo:12,subtipo:9,supervisao:false,saida_padrao:true,saida_local:"S1"},13:{nome:t("config.local-13"),laco:0,endereco:13,habilitado:true,zona:1,tipo:12,subtipo:9,supervisao:false,saida_padrao:false,saida_local:"S3"},16:{nome:t("config.local-16"),laco:0,endereco:16,habilitado:true,zona:1,tipo:12,subtipo:12,supervisao:false,saida_padrao:false,saida_local:"R1"},17:{nome:t("config.local-17"),laco:0,endereco:17,habilitado:true,zona:1,tipo:12,subtipo:12,supervisao:false,saida_padrao:false,saida_local:"R2"},18:{nome:t("config.local-18"),laco:0,endereco:18,habilitado:true,zona:1,tipo:12,subtipo:12,supervisao:false,saida_padrao:false,saida_local:"R3"},19:{nome:t("config.local-19"),laco:0,endereco:19,habilitado:true,zona:1,tipo:12,subtipo:12,supervisao:false,saida_padrao:false,saida_local:"R4"},20:{nome:t("config.local-20"),laco:0,endereco:20,habilitado:true,zona:1,tipo:12,subtipo:7,supervisao:false,saida_padrao:false,saida_local:"S2"}};var eventos={1:{habilitado:true,laco:0,nome:t("config.evento-1"),endereco:1,tipo:11,subtipo:11,zona:0},2:{habilitado:true,laco:0,nome:t("config.evento-2"),endereco:2,tipo:11,subtipo:11,zona:0},5:{habilitado:true,laco:0,nome:t("config.evento-5"),endereco:5,tipo:11,subtipo:11,zona:0},6:{habilitado:true,laco:0,nome:t("config.evento-6"),endereco:6,tipo:11,subtipo:11,zona:0},7:{habilitado:true,laco:0,nome:t("config.evento-7"),endereco:7,subtipo:11,tipo:11,zona:0},9:{habilitado:true,laco:0,nome:t("config.evento-9"),endereco:9,tipo:11,subtipo:11,zona:0},14:{habilitado:true,laco:0,nome:t("config.evento-14"),endereco:14,tipo:11,subtipo:11,zona:0},15:{habilitado:true,laco:0,nome:t("config.evento-15"),endereco:15,tipo:11,subtipo:11,zona:0}};var interligacao={25:{habilitado:true,laco:0,nome:t("config.interl-25"),endereco:25,tipo:11,subtipo:11,zona:0},26:{habilitado:true,laco:0,nome:t("config.interl-26"),endereco:26,tipo:11,subtipo:11,zona:0},27:{habilitado:true,laco:0,nome:t("config.interl-27"),endereco:27,tipo:11,subtipo:11,zona:0},28:{habilitado:true,laco:0,nome:t("config.interl-28"),endereco:28,tipo:11,subtipo:11,zona:0},29:{habilitado:true,laco:0,nome:t("config.interl-29"),endereco:29,tipo:11,subtipo:11,zona:0},30:{habilitado:true,laco:0,nome:t("config.interl-30"),endereco:30,tipo:11,subtipo:11,zona:0},31:{habilitado:true,laco:0,nome:t("config.interl-31"),endereco:31,tipo:11,subtipo:11,zona:0},32:{habilitado:true,laco:0,nome:t("config.interl-32"),endereco:32,tipo:11,subtipo:11,zona:0},33:{habilitado:true,laco:0,nome:t("config.interl-33"),endereco:33,tipo:11,subtipo:11,zona:0},34:{habilitado:true,laco:0,nome:t("config.interl-34"),endereco:34,tipo:11,subtipo:11,zona:0},35:{habilitado:true,laco:0,nome:t("config.interl-35"),endereco:35,tipo:11,subtipo:11,zona:0},36:{habilitado:true,laco:0,nome:t("config.interl-36"),endereco:36,tipo:11,subtipo:11,zona:0},37:{habilitado:true,laco:0,nome:t("config.interl-37"),endereco:37,tipo:11,subtipo:11,zona:0},38:{habilitado:true,laco:0,nome:t("config.interl-38"),endereco:38,tipo:11,subtipo:11,zona:0},39:{habilitado:true,laco:0,nome:t("config.interl-39"),endereco:39,tipo:11,subtipo:11,zona:0},40:{habilitado:true,laco:0,nome:t("config.interl-40"),endereco:40,tipo:11,subtipo:11,zona:0},41:{habilitado:true,laco:0,nome:t("config.interl-41"),endereco:41,tipo:11,subtipo:11,zona:0},42:{habilitado:true,laco:0,nome:t("config.interl-42"),endereco:42,tipo:11,subtipo:11,zona:0},43:{habilitado:true,laco:0,nome:t("config.interl-43"),endereco:43,tipo:11,subtipo:11,zona:0},44:{habilitado:true,laco:0,nome:t("config.interl-44"),endereco:44,tipo:11,subtipo:11,zona:0},45:{habilitado:true,laco:0,nome:t("config.interl-45"),endereco:45,tipo:11,subtipo:11,zona:0},46:{habilitado:true,laco:0,nome:t("config.interl-46"),endereco:46,tipo:11,subtipo:11,zona:0},47:{habilitado:true,laco:0,nome:t("config.interl-47"),endereco:47,tipo:11,subtipo:11,zona:0},48:{habilitado:true,laco:0,nome:t("config.interl-48"),endereco:48,tipo:11,subtipo:11,zona:0},49:{habilitado:true,laco:0,nome:t("config.interl-49"),endereco:49,tipo:11,subtipo:11,zona:0},50:{habilitado:true,laco:0,nome:t("config.interl-50"),endereco:50,tipo:11,subtipo:11,zona:0},51:{habilitado:true,laco:0,nome:t("config.interl-51"),endereco:51,tipo:11,subtipo:11,zona:0},52:{habilitado:true,laco:0,nome:t("config.interl-52"),endereco:52,tipo:11,subtipo:11,zona:0},53:{habilitado:true,laco:0,nome:t("config.interl-53"),endereco:53,tipo:11,subtipo:11,zona:0},54:{habilitado:true,laco:0,nome:t("config.interl-54"),endereco:54,tipo:11,subtipo:11,zona:0},55:{habilitado:true,laco:0,nome:t("config.interl-55"),endereco:55,tipo:11,subtipo:11,zona:0},56:{habilitado:true,laco:0,nome:t("config.interl-56"),endereco:56,tipo:11,subtipo:11,zona:0},57:{habilitado:true,laco:0,nome:t("config.interl-57"),endereco:57,tipo:11,subtipo:11,zona:0},58:{habilitado:true,laco:0,nome:t("config.interl-58"),endereco:58,tipo:11,subtipo:11,zona:0},59:{habilitado:true,laco:0,nome:t("config.interl-59"),endereco:59,tipo:11,subtipo:11,zona:0},60:{habilitado:true,laco:0,nome:t("config.interl-60"),endereco:60,tipo:11,subtipo:11,zona:0},61:{habilitado:true,laco:0,nome:t("config.interl-61"),endereco:61,tipo:11,subtipo:11,zona:0},62:{habilitado:true,laco:0,nome:t("config.interl-62"),endereco:62,tipo:11,subtipo:11,zona:0},63:{habilitado:true,laco:0,nome:t("config.interl-63"),endereco:63,tipo:11,subtipo:11,zona:0},64:{habilitado:true,laco:0,nome:t("config.interl-64"),endereco:64,tipo:11,subtipo:11,zona:0},65:{habilitado:true,laco:0,nome:t("config.interl-65"),endereco:65,tipo:11,subtipo:11,zona:0},66:{habilitado:true,laco:0,nome:t("config.interl-66"),endereco:66,tipo:11,subtipo:11,zona:0},67:{habilitado:true,laco:0,nome:t("config.interl-67"),endereco:67,tipo:11,subtipo:11,zona:0},68:{habilitado:true,laco:0,nome:t("config.interl-68"),endereco:68,tipo:11,subtipo:11,zona:0},69:{habilitado:true,laco:0,nome:t("config.interl-69"),endereco:69,tipo:11,subtipo:11,zona:0},70:{habilitado:true,laco:0,nome:t("config.interl-70"),endereco:70,tipo:11,subtipo:11,zona:0},71:{habilitado:true,laco:0,nome:t("config.interl-71"),endereco:71,tipo:11,subtipo:11,zona:0},72:{habilitado:true,laco:0,nome:t("config.interl-72"),endereco:72,tipo:11,subtipo:11,zona:0}};return{VERSION:"",MINIMAL_FIRMWARE_VERSION:versao_minima_compativel,RECOMENDED_FIRMWARE_VERSION:versao_recomendada,QTD_ZONAS:250,QTD_REGRAS:100,modelos_centrais:modelos_centrais,dispositivos_locais:dispositivos_locais,eventos:eventos,interligacao:interligacao,controle_versao:controle_versao,subtipos:{1:{nome:"subtipo-1",modo:"entrada"},2:{nome:"subtipo-2",modo:"entrada"},3:{nome:"subtipo-3",modo:"entrada"},4:{nome:"subtipo-4",modo:"entrada"},5:{nome:"subtipo-5",modo:"entrada"},6:{nome:"subtipo-6",modo:"entrada"},7:{nome:"subtipo-7",modo:"saida"},8:{nome:"subtipo-8",modo:"saida"},9:{nome:"subtipo-9",modo:"saida"},10:{nome:"subtipo-10",modo:"saida"},11:{nome:"subtipo-11",modo:"entrada"},12:{nome:"subtipo-12",modo:"saida"},13:{nome:"subtipo-13",modo:"saida"}},tipos:{1:{nome:"tipo-1",subtipos:[1],icone:"sensor-fumaca.svg"},2:{nome:"tipo-2",subtipos:[2],icone:"sensor-temperatura.svg"},3:{nome:"tipo-3",subtipos:[3],icone:"acionador-manual.svg"},4:{nome:"tipo-4",subtipos:[4],icone:"modulo-zona.svg"},5:{nome:"tipo-5",subtipos:[5],icone:"modulo-entrada.svg"},9:{nome:"tipo-9",subtipos:[5,6,9,8,7,13],icone:"modulo-entrada-saida.svg"},10:{nome:"tipo-10",subtipos:[10],icone:"sinalizador.svg"},12:{nome:"tipo-12",subtipos:[9,7],icone:"modulo-saida.svg"}},CALCULO_LACO:{voltageDefault:24,voltageIntervalPercent:.06,cables:[{name:"0.75",value:.042},{name:"1",value:.034},{name:"1.5",value:.024},{name:"2.5",value:.014}],devices:[{name:"SAV 420",value:.03,type:"convencional"},{name:"SAV 520",value:.05,type:"enderecavel"},{name:"Valkyrie IP65",value:.0075,type:"convencional"},{name:"AME 522",value:.03,type:"convencional"}]},TIPOS_EVENTO:{alarme:["alarme-0","alarme-1","alarme-2","alarme-3","alarme-4","alarme-5","alarme-6"],supervisao:["sup-0","sup-1","sup-2","sup-3"],falha:["falha-0","falha-1","falha-2","falha-3","falha-4","falha-5","falha-6","falha-7","falha-8","falha-9","falha-10","falha-11","falha-12","falha-13","falha-14","falha-15","falha-16","falha-17","falha-18","falha-19","falha-20","falha-21","falha-22","falha-23","falha-24","falha-25","falha-26","falha-27","falha-28","falha-29","falha-30","falha-31","falha-32","falha-33","falha-34","falha-35","falha-36","falha-37","falha-38","falha-39","falha-40","falha-41","falha-42","falha-43","falha-44","falha-45","falha-46","falha-47","falha-48","falha-49","falha-50","falha-51","falha-52"],operacao:["oper-0","oper-1","oper-2","oper-3","oper-4","oper-5","oper-6","oper-7","oper-8","oper-9","oper-10","oper-11","oper-12","oper-13","oper-14","oper-15","oper-16","oper-17","oper-18","oper-19","oper-20","oper-21","oper-22","oper-23","oper-24","oper-25","oper-26","oper-27","oper-28","oper-29","oper-30","oper-31","oper-32","oper-33","oper-34","oper-35","oper-36","oper-37","oper-38","oper-39","oper-40","oper-41","oper-42","oper-43","oper-44","oper-45","oper-46","oper-47","oper-48","oper-49","oper-50","oper-51","oper-52","oper-53","oper-54","oper-55","oper-56","oper-57","oper-58","oper-59","oper-60"]}}}])})(this);(function(){"use strict";angular.module("app").service("$fileService",["$q","$http","$rootScope","$webSocket","$mdDialog","$timeout","$toast","$translateService",function($q,$http,$rootScope,$webSocket,$mdDialog,$timeout,$toast,$translateService){var t=$translateService.translatePhrase;var emptyConfig;function load(){var deferred=$q.defer();function success(data){if($rootScope.centralModel&&$rootScope.centralModel.is1060){data.data.sistema.senha_2="2222";data.data.sistema.senha_3="3333";data.data.sistema.senha_4="4444";data.data.sistema.local_instalacao_linha1="Central Alarme";data.data.sistema.local_instalacao_linha2=" de Incendio  "}deferred.resolve(data.data)}function fail(error){deferred.reject(error)}$http.get("file-empty-"+$translateService.getLang()+".json").then(success,fail);return deferred.promise}load().then((function(file){emptyConfig=file}));function loadProjectFileEmpty(){var deferred=$q.defer();function success(data){deferred.resolve(data.data)}function fail(error){deferred.reject(error)}$http.get("file-project-empty.json").then(success,fail);return deferred.promise}function openFile(path){var deferred=$q.defer();$webSocket.send("open_file",{path:path});function success(data){deferred.resolve(data)}function fail(error){deferred.reject(error)}$webSocket.get().$on("open_file",(function(data){//console.log("WS open_file",data);$timeout((function(){$rootScope.setLoading("rootContent@app",false);if(data.type=="read_err"){$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("file.falha")).textContent(t("file.arquivoInvalido")).ok("OK"));fail(data.type)}else if(data.type=="corrupt_err"){$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("file.falha")).textContent(t("file.arquivoCorrompido")).ok("OK"));fail(data.type)}else if(data.type=="ext_err"){$mdDialog.show($mdDialog.alert().title(t("file.falha")).textContent(t("file.extensaoIncorreta")).ok("OK"));fail(data.type)}else if(data.type=="success"){if(!data.config.versao||$rootScope.versionComparator($rootScope.CONFIG.VERSION,data.config.versao)==-1){if(!data.config.versao){$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("file.atencao")).htmlContent("<b>"+t("file.arquivoIncompativel")+"</b><br>"+t("file.versaoAnterior")+"<br><br>").ok("OK"));fail(data.type)}else{//console.log("ARQUIVO:",data.config.versao,"PROGRAMADOR: ",$rootScope.CONFIG.VERSION);$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("file.atencao")).htmlContent("<b>"+t("file.versaoMaior")+"</b><br>"+t("file.instalarVersao")+" <b>"+data.config.versao+"</b> "+t("file.paraAbrir")+"</b><br><br>").ok("OK"));fail(data.type)}}else{if(data.config.centrais){$rootScope.projectMode=true;$rootScope.centralModel=$rootScope.CONFIG.modelos_centrais["PROJECT"];$rootScope.file=data.path;projectDb=angular.copy(data.config);originalProjectDb=angular.copy(projectDb);$toast.show("success",t("file.projetoCarregado"))}else{//console.log(data.config);db=angular.copy(convertToNewVersion(data.config));//console.log(db);originalDb=angular.copy(db);$rootScope.file=data.path;$rootScope.centralModel=$rootScope.CONFIG.modelos_centrais[data.config.sistema.modelo_central];$toast.show("success",t("file.configuracaoCarregada"))}success(data)}}}),1500)}));return deferred.promise}function convertToNewVersion(oldConfig){var newConfig=angular.copy(emptyConfig);!oldConfig.sistema.interligacao&&(oldConfig.sistema.interligacao=newConfig.sistema.interligacao);!oldConfig.sistema.repetidoras&&(oldConfig.sistema.repetidoras=newConfig.sistema.repetidoras);!oldConfig.sistema.repetidora&&(oldConfig.sistema.repetidora=newConfig.sistema.repetidora);!oldConfig.sistema.rede&&(oldConfig.sistema.rede=newConfig.sistema.rede);!oldConfig.sistema.bateria_externa&&(oldConfig.sistema.bateria_externa=newConfig.sistema.bateria_externa);!oldConfig.sistema.pre_alarme&&(oldConfig.sistema.pre_alarme=newConfig.sistema.pre_alarme);!oldConfig.sistema.modbus&&(oldConfig.sistema.modbus=newConfig.sistema.modbus);return oldConfig}return{load:load,loadProjectFileEmpty:loadProjectFileEmpty,openFile:openFile}}])})();var isNode=typeof process!=="undefined"&&typeof require!=="undefined";var isNodeWebkit=false;if(isNode){try{isNodeWebkit=typeof require("nw.gui")!=="undefined"}catch(e){isNodeWebkit=false}}(function(){"use strict";angular.module("app").service("$windowService",["$rootScope","$mdDialog","$filter","$webSocket","$translateService",function($rootScope,$mdDialog,$filter,$webSocket,$translateService){var t=$translateService.translatePhrase;var win,gui,helpWindow,printWindow;function minimize(){win.minimize()}function close(){win.close()}function maximize(){if(win.isMaximized)win.restore();else win.maximize()}function start(){if(isNodeWebkit){gui=require("nw.gui");win=gui.Window.get();win.on("maximize",(function(){//console.log("maximize");win.isMaximized=true}));win.on("restore",(function(){//console.log("restore");win.isMaximized=false}));win.maximize();win.on("close",(function(){if($rootScope.projectMode&&!angular.equals(projectDb,originalProjectDb)||!$rootScope.projectMode&&!angular.equals(db,originalDb)||!$filter("isEmpty")($rootScope.centralModel)&&$rootScope.file==""){var confirm=$mdDialog.confirm().escapeToClose(false).title(t("global.fecharProgramador")).textContent(t("global.existemAlteracoes")).ok(t("global.fechar")).cancel(t("global.cancelar"));$mdDialog.show(confirm).then((function(){win.close(true);if(helpWindow)helpWindow.close(true);if(printWindow)printWindow.close(true)}))}else{win.close(true);if(helpWindow)helpWindow.close(true);if(printWindow)printWindow.close(true)}}));var helpShortcut=new gui.Shortcut({key:"F1",active:function(){$rootScope.help()},failed:function(msg){}});gui.App.registerGlobalHotKey(helpShortcut)}}function openHelpWindow(url){var urlComplete;if(!isNodeWebkit){urlComplete="help/#/help/?"+$rootScope.CONFIG.VERSION+"&help/"+url;window.open(urlComplete)}else{urlComplete="www/help/index.html?"+$rootScope.CONFIG.VERSION+"&help/"+url;if(helpWindow){var event=new CustomEvent("changeUrl",{detail:{url:"help/"+url}});helpWindow.window.document.dispatchEvent(event);helpWindow.focus()}else{helpWindow=gui.Window.open(urlComplete,{position:"center",width:parseInt(screen.availWidth/1.5),height:parseInt(screen.availHeight),frame:false,title:t("global.programadorAjuda")},(function(helpWin){helpWindow=helpWin;helpWindow.on("close",(function(){helpWindow=undefined}))}))}}}function openPrintWindow(html){var url="printIndex.html";if(!isNodeWebkit){window.open(url)}else{url="www/printIndex.html";if(printWindow){var event=new CustomEvent("sendTemplate",{detail:{html:html,i18n:{}}});printWindow.window.document.dispatchEvent(event);printWindow.focus()}else{printWindow=gui.Window.open(url,{position:"center",width:parseInt(screen.availWidth*.7),height:parseInt(screen.availHeight*.8),frame:false,title:t("global.programadorRelatorio")},(function(printWin){printWindow=printWin;printWindow.on("loaded",(function(){var event=new CustomEvent("sendTemplate",{detail:{html:html,translate:{title:t("global.programadorRelatorio"),salvarPdf:t("global.salvarPdf")}}});printWindow.window.document.dispatchEvent(event);printWindow.window.document.addEventListener("print",(function(event){if(event.detail.pathPdf!==""){$webSocket.send("print",{pathHtml:event.detail.pathHtml,pathPdf:event.detail.pathPdf});printWindow.close();$rootScope.printToast(event.detail.pathPdf)}}),false);$rootScope.setLoading("rootContent@app",false)}));printWindow.on("close",(function(){printWindow.close(true);printWindow=undefined}))}))}}}return{start:start,minimize:minimize,close:close,maximize:maximize,print:print,openHelpWindow:openHelpWindow,openPrintWindow:openPrintWindow}}])})();(function(){"use strict";angular.module("app").directive("focus",(function($timeout){return{scope:{trigger:"@focus"},link:function(scope,element){scope.$watch("trigger",(function(value){if(value==="true"){$timeout((function(){element[0].focus()}),1e3)}}))}}})).directive("addressValidate",(function(){return{require:"ngModel",link:function($scope,elem,attrs,ctrl){elem.on("change",(function(evt){var used=$scope.selectedDevice.endereco in $scope.lacos[$scope.selectedLoop].dispositivos&&$scope.selectedDevice.endereco!=$scope.originalSelectedDevice.endereco;ctrl.$setValidity("addressUsed",!used)}))}}})).directive("idValidate",(function(){return{require:"ngModel",link:function($scope,elem,attrs,ctrl){elem.on("change",(function(evt){var used=$scope.selectedZone.id in db.zonas&&$scope.selectedZone.id!=$scope.originalSelectedZone.id;ctrl.$setValidity("idUsed",!used)}))}}})).directive("ruleAddressValidate",(function(){return{require:"ngModel",link:function($scope,elem,attrs,ctrl){elem.on("change",(function(evt){var used=$scope.selectedRule.id in $scope.regras&&$scope.selectedRule.id!=$scope.originalSelectedRule.id;ctrl.$setValidity("addressUsed",!used)}))}}})).directive("minsecValidate",(function($timeout){return{require:"ngModel",link:function($scope,elem,attrs,ctrl){var zeroAllowed=attrs.zeroAllowed||false;var retardoMaximo=attrs.limitRetardoMaximo||false;var maxValueAttr=attrs.maxvalueattr||false;var minValueAttr=attrs.minvalueattr||false;var defaultRuleRespect=attrs.defaultrulerespect||false;function vality(newVal){var min,sec,maxMin,maxSec;min=parseInt(newVal.split(":")[0]);sec=parseInt(newVal.split(":")[1]);maxMin=parseInt(db.sistema.retardo.split(":")[0]);maxSec=parseInt(db.sistema.retardo.split(":")[1]);var seconds=min*60+sec;var vality={max:true,min:true,"retardo-maximo":true,"retardo-minimo":true,minsec:true};if(maxValueAttr&&seconds>parseInt(maxValueAttr)){vality.max=false}if(minValueAttr&&seconds<parseInt(minValueAttr)){vality.min=false}if(retardoMaximo){if(!zeroAllowed&&sec==0&&min==0||sec>maxSec&&min>=maxMin||min>maxMin||sec>59){vality["retardo-maximo"]=false}else{vality["retardo-maximo"]=true}}else{if(!zeroAllowed&&sec==0&&min==0||min>59||sec>59){vality.minsec=false}else{vality.minsec=true}}if(defaultRuleRespect){const ruleValueMinMinute=parseInt(db.regras["1"].temporizacao.split(":")[0])*60;const ruleValueMinSeconds=parseInt(db.regras["1"].temporizacao.split(":")[1]);//console.log(ruleValueMinMinute,ruleValueMinMinute,ruleValueMinMinute+ruleValueMinSeconds,seconds);if(seconds<ruleValueMinMinute+ruleValueMinSeconds){vality["retardo-minimo"]=false}else{vality["retardo-minimo"]=true}}else{vality["retardo-minimo"]=true}return vality}function setVality(vality){ctrl.$setValidity("minsec",vality.minsec);ctrl.$setValidity("max",vality.max);ctrl.$setValidity("min",vality.min);ctrl.$setValidity("retardo-maximo",vality["retardo-maximo"]);ctrl.$setValidity("retardo-minimo",vality["retardo-minimo"])}elem.on("input",(function(evt){$timeout((function(){//console.log("change")}),500);setVality(vality(this.value))}));elem.on("focus",(function(evt){setVality(vality(this.value))}));elem.on("blur",(function(evt){setVality(vality(this.value))}))}}})).directive("inputFile",(function(){return{scope:{inputFile:"="},link:function($scope,element,attributes){element.on("change",(function(evt){//console.log("change",element,attributes);var path=evt.target.files[0].path||evt.target.files[0].name;$scope.$parent.fileAction(attributes.inputFile,path)}))}}})).directive("fakeButton",(function(){return{restrict:"A",link:function(scope,element,attrs){element.removeClass("md-button")}}})).directive("projectBar",(function($projectService,$state,$toast){return{templateUrl:"shared/projectBar.html",link:function($scope,element,attr){$scope.showButtonRight=false;$scope.showButtonLeft=false;$scope.scrollToRight=function(){element[0].scrollLeft+=Number(200)};$scope.scrollToLeft=function(){element[0].scrollLeft-=Number(200)};$scope.openCentralConfig=function(endereco){var central=_.find(projectDb.centrais,(function(c){return c.sistema.endereco===endereco}));$projectService.selectCentral(central)}}}})).directive("versionAlert",(function(){return{restrict:"E",scope:{version:"=",cieConnected:"="},template:'<div ng-mouseover="hover = true" ng-mouseleave="hover = false" class="version-alert" layout="row" layout-align="center center">'+"   <md-icon>warning</md-icon>"+'   <div ng-if="hover" class="message">'+'       {{"global.funcionalidadeDisponivel" | translate }} {{version}}'+"    </div>"+"</div>",link:function($scope){$scope.hover=false}}})).directive("iconTooltipHelp",(function(){return{restrict:"E",scope:{version:"=",label:"=",type:"="},template:'<div ng-mouseover="hover = true" ng-mouseleave="hover = false" class="version-alert" layout="row" layout-align="center center">'+'   <md-icon style="color: #37af2c; margin-top: -1px;">help</md-icon>'+'   <div ng-if="hover" class="message">'+'   <p style="white-space: pre-line;"> '+"       {{label | translate }}"+"</p>"+"    </div>"+"</div>",link:function($scope){$scope.hover=false}}})).directive("iconTooltipWarning",(function(){return{restrict:"E",scope:{version:"=",label:"=",type:"="},template:'<div ng-mouseover="hover = true" ng-mouseleave="hover = false" class="version-alert" layout="row" layout-align="center center">'+'   <md-icon style="color: orange; margin-top: -1px;">warning</md-icon>'+'   <div ng-if="hover" class="message">'+'   <p style="white-space: pre-line;"> '+"       {{label | translate }}"+"</p>"+"    </div>"+"</div>",link:function($scope){$scope.hover=false}}})).directive("ngEnter",(function(){return function(scope,element,attrs){element.bind("keydown keypress",(function(event){if(event.which===13){scope.$apply((function(){scope.$eval(attrs.ngEnter,{event:event})}));event.preventDefault()}}))}})).directive("passwordOnlyFourDigitsValidate",(function(){return{require:"ngModel",link:function($scope,elem,attrs,ctrl){elem.on("change",(function(evt){ctrl.$setValidity("password",this.value.length>0?this.value.length===4:true)}))}}}))})();(function(){"use strict";angular.module("app").directive("registroEventos",(function($webSocket,$timeout,$interval,$rootScope,$toast,$mdDialog,$q,$filter,$windowService,$compile,$templateCache,$config,$translateService){return{restrict:"E",templateUrl:"shared/logs.html",scope:{showButtons:"@",isProject:"@"},link:function($scope,element,attrs){var t=$translateService.translatePhrase;$scope.tiposEvento=$config.TIPOS_EVENTO;$scope.subTipos=$config.subtipos;$scope.tipos=$config.tipos;$scope.logTableOrder="-sequence";$scope.logType={all:t("logs.todos"),alarme:t("logs.alarme"),falha:t("logs.falha"),operacao:t("logs.operacao")};$scope.selectedLogType="";$scope.logs=[];$scope.allLogs=[];$scope.pagination={limit:20,page:1};$scope.projectLogs=projectDb.registros;$scope.enderecosLivresRegistros=Array.from(Array(16).keys());$scope.centralModel=angular.copy($rootScope.connectedCentralModel);if(db.lacos){$scope.dispositivos=db.lacos[1].dispositivos}if(!$scope.centralModel.is1060){$scope.logType["supervisao"]=t("logs.supervisao")}else{$scope.logTableOrder="evento"}var projectFunctions={loadLogs:function loadProjectLogs(){$scope.logs=[];for(var index in projectDb.registros){if(projectDb.registros[index].selected){projectDb.registros[index].registros.forEach((function(r){r.file=projectDb.registros[index].central}));$scope.logs=$scope.logs.concat(projectDb.registros[index].registros)}}if($scope.logs.length){$scope.filter={dateFrom:new Date($filter("orderBy")($scope.logs,"date")[0].date),dateTo:new Date($filter("orderBy")($scope.logs,"-date")[0].date)};$scope.selectTypeLog("all")}},addCentral:function(enderecoNewCentral,logs){projectDb.registros.push({central:enderecoNewCentral,registros:logs,selected:true});projectDb.registros=_.sortBy(projectDb.registros,[function(c){return c.central}]);$scope.projectLogs=projectDb.registros},removeCentral:function(endereco){_.remove(projectDb.registros,(function(r){return r.central===endereco}));projectFunctions.loadLogs()},hasCentral:function(endereco){return _.find(projectDb.registros,(function(r){return r.central===endereco}))!==undefined}};$scope.selectCentral=function(central){central.selected=!central.selected;projectFunctions.loadLogs()};$scope.removeCentral=function(central,$event){$event.stopPropagation();$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("logs.remover")).htmlContent("<br>"+t("logs.removerRegistros")+central.central+"?<br><br>").ok(t("logs.sim")).cancel(t("logs.cancelar"))).then((function(){projectFunctions.removeCentral(central.central)}))};$scope.addLogFileToProject=function(type){$scope.openFileDialog("open_log_file")};$scope.selectTypeLog=function(type){$scope.selectedLogType=type;$scope.filterByType($scope.selectedLogType);$timeout((function(){$scope.pagination.page=1}),100)};$scope.filterByDate=function(){//console.log("filterByDate");var min=$scope.filter.dateFrom.setHours(0,0,0,0);var max=$scope.filter.dateTo.setHours(0,0,0,0);var range=[];angular.forEach($scope.logs,(function(item){var dateItem=new Date(item.date).setHours(0,0,0,0);if(dateItem>min&&dateItem<max||dateItem==max||dateItem==min){range.push(item)}}));$scope.allLogs=range};$scope.filterByType=function(type){if(type!="all"){var filtered=[];angular.forEach($scope.logs,(function(item){if(item.evento==type){filtered.push(item)}}));$scope.allLogs=filtered}else{$scope.allLogs=angular.copy($scope.logs)}};$scope.openFileDialog=function(id){document.getElementById(id).click()};$scope.fileAction=function(action,path){if(action=="open_log_file"){$rootScope.setLoading("rootContent@app",true,true);$webSocket.send("open_logs",{path:path})}else if(action=="save_log_file"){if($scope.allLogs.length>0){$rootScope.setLoading("rootContent@app",true,true);if(path)path=path.replace(/\.cielog/gi,"")+".cielog";$webSocket.send("save_logs",{path:$rootScope.cleanPath(action,path),logs:angular.copy($scope.allLogs),endereco:$scope.sistema.endereco,modelo:$scope.centralModel})}else{$mdDialog.show($mdDialog.alert().title(t("logs.salvar")).textContent(t("logs.necessarioQueExistam")).ok("OK"))}}else if(action=="firmware_file"){$scope.firmware.file=path;checkFileFirmware()}else if(action=="save_logs_csv"){$rootScope.setLoading("rootContent@app",true,true);$webSocket.send("save_logs",{path:path,logs:angular.copy($scope.allLogs),csv:true})}document.getElementById(action).value=""};$webSocket.get().$on("save_logs",(function(data){//console.log("WS save_logs",data);$timeout((function(){$rootScope.setLoading("rootContent@app",false);if(data.type=="success"){$toast.show("success",t("file.salvoSucesso"))}else if(data.type=="read_err"){$mdDialog.show($mdDialog.alert().title(t("logs.falha")).textContent(t("file.arquivoInvalido")).ok("OK"))}else if(data.type=="corrupt_err"){$mdDialog.show($mdDialog.alert().title(t("logs.falha")).textContent(t("file.arquivoCorrompido")).ok("OK"))}}),1e3)}));var dialogChangeAddr;$scope.closeDialogChangeAddr=function(){$mdDialog.hide();dialogChangeAddr=undefined};$webSocket.get().$on("open_logs",(function(data){//console.log("WS open_logs",data);$timeout((function(){$rootScope.setLoading("rootContent@app",false);if(data.type=="success"){if($scope.isProject){if(data.config.endereco){var enderecoNewCentral=parseInt(data.config.endereco);if(projectFunctions.hasCentral(enderecoNewCentral)){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title("Adicionar Arquivo").htmlContent("<br>"+t("logs.oRegistroDeEventos")+" "+enderecoNewCentral+" "+t("logs.jaAdicionado")+"<br><br><b>"+t("logs.desejaSubstituir")+"</b><br><br>").ok(t("logs.sim")).cancel(t("logs.cancelar"))).then((function(){projectFunctions.removeCentral(enderecoNewCentral);projectFunctions.addCentral(enderecoNewCentral,data.config.logs);projectFunctions.loadLogs();$toast.show("success",t("logs.carregadoCentral"))}))}else{projectFunctions.addCentral(enderecoNewCentral,data.config.logs);projectFunctions.loadLogs();$toast.show("success",t("logs.carregadoCentral"))}}else{dialogChangeAddr=$mdDialog.show({clickOutsideToClose:false,scope:$scope,preserveScope:true,escapeToClose:true,templateUrl:"shared/changeAddr-dialog.html",controller:function DialogController($scope){$scope.formEndereco={endereco:"null"};$scope.cancel=function(){$scope.closeDialogChangeAddr()};$scope.save=function(){var endereco=parseInt($scope.formEndereco.endereco);projectFunctions.removeCentral(endereco);projectFunctions.addCentral(endereco,data.config.logs);projectFunctions.loadLogs();$toast.show("success",t("logs.carregadoCentral"));$scope.closeDialogChangeAddr()}}})}}else{if(data.config.modelo){$scope.centralModel=data.config.modelo}$scope.logs=data.config.logs;$scope.filter={dateFrom:new Date($filter("orderBy")($scope.logs,"date")[0].date),dateTo:new Date($filter("orderBy")($scope.logs,"-date")[0].date)};$toast.show("success",t("logs.carregado"));$scope.selectTypeLog("all")}}else if(data.type=="read_err"){$mdDialog.show($mdDialog.alert().title(t("logs.falha")).textContent("read_err").ok("OK"))}else if(data.type=="corrupt_err"){$mdDialog.show($mdDialog.alert().title(t("logs.falha")).textContent(t("logs.arquivoSelecionado")).ok("OK"))}else if(data.type=="ext_err"){$mdDialog.show($mdDialog.alert().title(t("logs.falha")).htmlContent(t("logs.arquivoInvalido")+"<br>"+t("logs.arquivoExtensao")).ok("OK"))}}),1e3)}));$scope.parseData=function(logs){//console.log("logs",logs);$scope.logs=[];angular.forEach($scope.logType,(function(title,tag){//console.log("tag",tag);if(logs[tag])for(var i in logs[tag]){var item=logs[tag][i];if(item.date.year){item.date=new Date(item.date.year,item.date.month-1,item.date.day,item.date.hour,item.date.min,item.date.sec)}else{item.date=new Date(item.date)}if(!item.evento){item.evento=tag}$scope.logs.push(item)}}));if($scope.logs.length){$scope.filter={dateFrom:new Date($filter("orderBy")($scope.logs,"date")[0].date),dateTo:new Date($filter("orderBy")($scope.logs,"-date")[0].date)}}else{$mdDialog.show($mdDialog.alert().title(t("logs.registroEventos")).textContent(t("logs.naoExistemEventos")).ok("OK"))}$scope.selectTypeLog("all");$rootScope.$emit("loading:hide");$toast.show("success",t("logs.registrosRecebidos"))};$scope.$on("progress:show",(function(evt,data){if(angular.element(document.body).hasClass("md-dialog-is-showing")){return}$mdDialog.show({controller:function DialogController($scope,$mdDialog){$scope.closeDialog=function(){$mdDialog.hide()}},scope:$scope,preserveScope:true,escapeToClose:false,templateUrl:"root/bar-progress-dialog.html",clickOutsideToClose:false})}));$scope.$on("progress:hide",(function(evt,timeout){if(timeout){$timeout((function(){$mdDialog.hide()}),timeout)}else{$mdDialog.hide()}$scope.progress={progress:0,steps:"",message:"",progressText:"",mode:"determinate"}}));$scope.getLogs=function(){$scope.percentSendFirmware=0;if($rootScope.isCIEConnected){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("logs.receberDaCentral")).htmlContent("<br>"+t("logs.podeDemorar")+"<br><br>"+t("logs.desejaContinuar")).ok(t("logs.sim")).cancel(t("logs.cancelar"))).then((function(){$webSocket.send("get_logs");const doneListener=$rootScope.$on("get_logs:done",(function(event,result){$rootScope.$emit("loading:hide");if(result.success){$mdDialog.show($mdDialog.alert().title(t("logs.concluido")).textContent(t("logs.recebimentoConcluido")).ok("OK"))}else{$mdDialog.show($mdDialog.alert().title(t("logs.erro")).textContent(t("logs.falhaAoReceber")).ok("OK"))}doneListener()}))}))}else{$mdDialog.show($mdDialog.alert().title(t("logs.receberDaCentral")).textContent(t("logs.necessarioCentral")).ok("OK"))}};$webSocket.get().$on("get_logs",(function(data){//console.log("Receiving get_logs",data);const logSteps=data.logSteps;let currentStep=0;if(data.success==false){$scope.message=`${t("logs.recebendoRegistros")}`;$rootScope.$emit("loading:show",{text:t("logs.recebendoRegistros")});$scope.$applyAsync();return}$scope.$emit("progress:show");if(data.overallProgress!==undefined){const eventType=t(`logs.${data.currentLogType}`);const logTypeIndex=logSteps.indexOf(data.currentLogType.toLowerCase());if(logTypeIndex!==-1){currentStep=logTypeIndex+1}const totalSteps=logSteps.length;const progress=data.overallProgress;$scope.progress=progress;$scope.steps=`Etapa ${currentStep}/${totalSteps}`;$scope.message=`${t("global.recebendoCentral")} ${eventType}`;$scope.progressText=` - ${progress}%`;$scope.$apply()}if(data.progress!==undefined){const eventType=t(`logs.${data.currentLogType}`);const progress=data.progress;$scope.progress=progress;$scope.message=`${t("global.recebendoCentral")} ${eventType}`;$scope.progressText=` - ${progress}%`;$scope.$apply()}if(data.logs){$rootScope.$emit("loading:hide",300);$scope.$emit("progress:hide",300);$scope.parseData(data.logs);$scope.closeDialog()}}));$scope.printLogsToPdf=function(){if($rootScope.openedPrintingToast){$mdDialog.show($mdDialog.alert().title(t("logs.gerarPdf")).textContent(t("logs.haRelatorioProcessando")).ok("OK"));return}if($scope.logs.length){$mdDialog.show({controller:($scope,$mdDialog,allLogs,centralModel)=>{$scope.today=new Date;$scope.centralModel=centralModel;$scope.allLogs=allLogs;$scope.logTypes={alarme:{label:t("logs.alarme"),selected:false},falha:{label:t("logs.falha"),selected:false},supervisao:{label:t("logs.supervisao"),selected:false},operacao:{label:t("logs.operacao"),selected:false}};if($scope.centralModel.is1060){delete $scope.logTypes.supervisao}$scope.close=()=>$mdDialog.hide();$scope.save=()=>{const selectedTypes=Object.keys($scope.logTypes).filter((type=>$scope.logTypes[type].selected));$scope.getSelectedLogTypes=()=>selectedTypes.map((type=>$scope.logTypes[type].label)).join(", ");$scope.filteredLogs=$scope.allLogs.filter((log=>selectedTypes.includes(log.evento)));const el=$compile($templateCache.get("print/logsPrint.html"))($scope);$timeout((()=>{$windowService.openPrintWindow(el.html())}),300)}},escapeToClose:false,templateUrl:"logs/generatePdfDialog.html",resolve:{allLogs:()=>$scope.allLogs,centralModel:()=>$scope.centralModel}})}else{$mdDialog.show($mdDialog.alert().title(t("logs.gerarPdf")).textContent(t("logs.naoHaEventosImpressos")).ok("OK"))}};if($scope.isProject){projectFunctions.loadLogs()}else{$scope.sistema=db.sistema}}}}))})();(function(){"use strict";angular.module("app").directive("localeButton",(function($translateService){return{restrict:"E",template:'<md-tooltip md-direction="botton">'+$translateService.translatePhrase("global.idioma")+"</md-tooltip>"+'                      <md-menu md-position-mode="target-right target">'+'                        <md-button aria-label="Idioma" ng-click="openMenu($mdMenu, $event)">'+'                           <md-icon class="lang-icon" md-svg-src="img/{{selectedLang.initial.toLowerCase()}}.svg" aria-label="{{selectedLang.initial}}"></md-icon>'+"                               {{selectedLang.initial}} "+'                               <md-icon aria-label="PT">expand_more</md-icon>'+"                        </md-button>"+'                        <md-menu-content class="md-dense">'+"                            <md-menu-item>"+"                                <md-button ng-click=\"changeLanguage('pt_br')\">"+'                                    <md-icon class="lang-icon" md-svg-src="img/pt.svg" aria-label="PT"></md-icon> '+"                                    Português"+"                                </md-button>"+"                            </md-menu-item>"+"                             <md-menu-item>"+"                                <md-button ng-click=\"changeLanguage('es')\">"+'                                    <md-icon class="lang-icon" md-svg-src="img/es.svg" aria-label="ES"></md-icon>'+"                                    Español"+"                                </md-button>"+"                            </md-menu-item>"+"                        </md-menu-content>"+"                    </md-menu>",scope:{showButtons:"@",isProject:"@"},link:function($scope){var originatorEv;var langs={pt_br:{initial:"PT",label:"Português"},es:{initial:"ES",label:"Español"}};$scope.selectedLang=langs[$translateService.getLang()];$scope.openMenu=function($mdMenu,ev){originatorEv=ev;$mdMenu.open(ev)};$scope.changeLanguage=function(lang){$translateService.changeLanguage(lang);$scope.selectedLang=langs[$translateService.getLang()]}}}}))})();(function(){"use strict";angular.module("app").service("$toast",["$mdToast","$rootScope",function($mdToast,$rootScope){var show=function(type,msg){if(!$rootScope.openedPrintingToast){var typeColor={success:"green"};$mdToast.show({templateUrl:"shared/toast.html",hideDelay:5e3,position:"bottom left",controller:function($scope){$scope.type=typeColor[type];$scope.msg=msg}})}};return{show:show}}])})();(function(){"use strict";angular.module("app").factory("$webSocket",["$websocket","$rootScope","$mdDialog","$translateService","$toast","$window",function($websocket,$rootScope,$mdDialog,$translateService,$toast){const t=$translateService.translatePhrase;let ws=undefined;function handleDisconnection(){//console.log("WS handle disconnection");if($rootScope.isCIEConnected==true){setTimeout((function(){$toast.show("success",t("file.centralDesconectada"))}),300)}$rootScope.centralInfo={};$rootScope.cieUsbConnected=false;$rootScope.isCIEConnected=false;$rootScope.isCIEBlocked=false;$rootScope.developerMode=false;$rootScope.connectedCentralModel={};$rootScope.gatewayAutenticated=false;$rootScope.lastQuestionUpdateSkipped=false;$rootScope.loadingText=undefined;$rootScope.centralModel={};$rootScope.setLoading("info@app.system",false);$rootScope.$emit("loading:hide");$rootScope.$apply()}const connect=function(){ws=$websocket.$new({url:"ws://127.0.0.1:12348",protocols:[],subprotocols:["base46"]}).$on("$open",(function(data){//console.log("WS $open",data);$rootScope.isSocketConnected=true;ws.$emit("change_connection_mode",{connectionMode:$rootScope.connectionMode})})).$on("$error",(function(message){//console.log("WS $error",message)})).$on("error",(function(message){//console.log("WS error in communication",message);if($rootScope.isCIEConnected){handleDisconnection();setTimeout((function(){$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("global.falha")).textContent(t("global.falhaNaComunicacao")).ok("OK"))}),3e3)}})).$on("$close",(function(message){$rootScope.isSocketConnected=false;//console.log("WS $close",message);$rootScope.isCIEConnected=false;$rootScope.isCIEBlocked=false;$rootScope.connectedCentralModel={};$rootScope.$emit("loading:hide");$rootScope.developerMode=false;$rootScope.cieUsbConnected=false;$rootScope.gatewayAutenticated=false;$rootScope.$apply()})).$on("close",(function(data){//console.log("communication closed");$rootScope.isSocketConnected=false;$rootScope.$emit("loading:hide");$rootScope.$apply()})).$on("version",(function(data){//console.log("version",data);$rootScope.CONFIG.VERSION=data.version;$rootScope.$apply()})).$on("connected",(function(data){//console.log("connected",data);$rootScope.cieUsbConnected=false;$rootScope.isCIEConnected=true;$rootScope.isCIEBlocked=false;if(data.developerMode)$rootScope.developerMode=true;$rootScope.connectedCentralModel=$rootScope.CONFIG.modelos_centrais[data.model];if(data.version){$rootScope.connectedCentralModel.version=data.version}$rootScope.setFirmwareUploadPath($rootScope.connectedCentralModel);if($rootScope.centralModel){$rootScope.centralModel=angular.copy($rootScope.connectedCentralModel)}$rootScope.$apply()})).$on("blocked",(function(data){//console.log("blocked");if($rootScope.connectionMode!=="wifi"){$rootScope.cieUsbConnected=false;$rootScope.isCIEConnected=false;$rootScope.isCIEBlocked=true;$rootScope.$emit("loading:hide");$rootScope.connectedCentralModel={};$rootScope.gatewayAutenticated=false;$rootScope.$apply()}})).$on("disconnected",(function(){//console.log("ws disconnected");if(!$rootScope.sendFirmware){handleDisconnection()}})).$on("usb_connected",(function(data){$rootScope.cieUsbConnected=data;$rootScope.$apply()})).$on("timeout_config",(function(data){$rootScope.$emit("loading:hide",500);$rootScope.setLoading("info@app.system",false);if($rootScope.isCIEConnected){//console.log("timeout_config",$rootScope.loadingText);if($rootScope.loadingText){setTimeout((function(){$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("global.falha")).textContent(t("file.confiraTente")).ok("OK"))}),2e3);$rootScope.errorWasCalled=true}}$rootScope.loadingText=undefined})).$on("tcp_fail",(function(data){//console.log("tcp_fail",data);if($rootScope.isCIEConnected){$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("global.falha")).textContent(t("global.falhaNaComunicacao")).ok("OK"))}}))};const send=function(event,data){//console.log("▶▶▶ WS",event,data);ws.$emit(event,{...data,connectionMode:$rootScope.connectionMode,model:$rootScope.connectedCentralModel.id})};const close=function(){ws.close()};const get=function(){return ws};return{get:get,connect:connect,send:send,close:close}}])})();(function(){"use strict";angular.module("app").filter("numberFormat",(function(){return function(obj){return("000"+obj).slice(-3)}})).filter("removeDefaultOutputsFromLocalDevices",(function(){return function(items){var outputs=["alarme","falha","supervisao"];var isOutput=false;angular.forEach(items,(function(localDevice){isOutput=false;for(var i in outputs){var tag=outputs[i];if(db.sistema[tag]&&parseInt(db.sistema[tag].endereco)==localDevice.endereco){isOutput=true}}if(isOutput){delete items[localDevice.endereco]}}));return items}})).filter("removeDefaultOutputsFromLoops",(function(){return function(items){var outputs=["alarme","falha","supervisao"];var isOutput=false;angular.forEach(items,(function(laco,idLaco){angular.forEach(laco.dispositivos,(function(device){isOutput=false;for(var i in outputs){var tag=outputs[i];if(db.sistema[tag]&&parseInt(db.sistema[tag].endereco)==device.endereco&&parseInt(db.sistema[tag].laco)==idLaco+1){isOutput=true}}if(isOutput){delete laco.dispositivos[device.endereco]}}))}));return items}}))})();(function(){"use strict";angular.module("app").factory("$loopScan",["$webSocket","$rootScope","$q",function($webSocket,$rootScope,$q){var get=function(loop){var deferred=$q.defer();$webSocket.send("call_loop_scan",{loop:loop});function success(data){deferred.resolve(data)}function fail(error){deferred.reject(error)}$webSocket.get().$on("call_loop_scan",(function(data){//console.log("WS call_loop_scan",data);if(data.success==true){success(data.config)}else{fail(data.error)}}));$webSocket.get().$on("error_on_loop_scan",(function(data){//console.log("WS error_on_loop_scan",data);fail(1)}));return deferred.promise};return{get:get}}])})();(function(){"use strict";angular.module("app").service("$remoteControlService",["$webSocket","$timeout","$interval","$rootScope","$toast","$mdDialog","$config","$filter","$udpAuthService","$translateService",function($webSocket,$timeout,$interval,$rootScope,$toast,$mdDialog,$config,$filter,$udpAuthService,$translateService){var centralInfo;function Controller($scope){var t=$translateService.translatePhrase;$scope.loadingEvents=false;$scope.activeVisualization="none";$scope.selectedTypeEventVisualization="none";$scope.waitingType=undefined;$scope.waitingForStatus=false;$scope.waitingEvents=false;var TIPO_CARREGA={regra:{CarregaEndereco:0,CarregaPosicao:1,CarregaBloqueio:2,CarregaTemporizando:3,CarregaTemporizandoExcedida:4},zona:{CarregaEndereco:0,CarregaPosicao:1,CarregaBloqueio:2},dispositivo:{CarregaEndereco:0,CarregaPosicao:1,CarregaBloqueio:3},sirene:{CarregaPosicao:11,CarregaBloqueio:5,CarregaAtiva:9},saida:{CarregaPosicao:2,CarregaBloqueio:4,CarregaAtiva:8},laco:{CarregaPosicao:2,CarregaBloqueio:4},atuador:{CarregaPosicao:12,CarregaBloqueio:6,CarregaAtiva:10}};$scope.contadoresGlobais={};$scope.centralMode="normal";var modes=["alarme","falha","supervisao"];var qtdLacos;$scope.tiposEvento=$config.TIPOS_EVENTO;$scope.logType={all:t("remote.todos"),alarme:t("remote.tipoAlarme"),falha:t("remote.tipoFalha"),supervisao:t("remote.tipoSupervisao"),operacao:t("remote.tipoOperacao"),bloqueio:t("remote.tipoBloqueio")};var timeInterval;function generateIdentificator(){return Math.floor(Math.random()*(65535-1)+1)}function startUtc(){if($scope.central.utc){$scope.central.utc=new Date($scope.central.utc);$scope.central.utc.setSeconds($scope.central.utc.getSeconds()+1);var dateDifference=(new Date).getTime()-$scope.central.timestamp;$scope.central.utc.setTime($scope.central.utc.getTime()+dateDifference);timeInterval=$interval((function(){$scope.central.utc.setSeconds($scope.central.utc.getSeconds()+1);rulesTimingDecrement()}),1e3)}}$scope.clearVisualization=function(){$scope.activeVisualization="none";$scope.selectedSubMenu.visualization=undefined};$webSocket.get().$on("udp_error",(function(data){//console.log("< WS udp_error");if(!waitingCentralRestart){connectionError()}}));$webSocket.get().$on("udp_nak",(function(data){//console.log("< WS udp_nak")}));$scope.close=function(){$mdDialog.hide()};var connectionError=function(){var confirm=$mdDialog.confirm().escapeToClose(false).hasBackdrop(true).multiple(true).title(t("remote.conexaoPerdida")).textContent(t("remote.conectarNovamente")).ok(t("remote.sim")).cancel(t("remote.cancelar"));$mdDialog.show(confirm).then((function(){$udpAuthService.auth({ip:$scope.central.ip,endereco:$scope.central.endereco}).then((function(token){startCommunication(token)}))}),(function(){$scope.close()}));//console.log("connectionError");resetScreen();$rootScope.setLoading("remote",false)};function resetScreen(){$webSocket.send("udp_stop_communication");try{$scope.activeVisualization="none";$scope.centralMode="normal";$scope.eventos={alarme:[],falha:[],supervisao:[],bloqueio:[]};$scope.logs={alarme:[],falha:[],supervisao:[],operacao:[]};$scope.contadoresEventos={alarme:0,falha:0,supervisao:0,bloqueio:0};$scope.leds={};$scope.contadoresLogs={alarme:0,falha:0,supervisao:0,operacao:0};$interval.cancel(timeInterval);$scope.central.online=false;clearRulesTiming();resetBlocks()}catch(e){//console.log(e)}}$webSocket.get().$on("udp_info",(function(data){//console.log("udp_info",data);$scope.contadoresGlobais=data}));$webSocket.get().$on("udp_regra",(function(regra){if($scope.waitingType===TIPO_CARREGA.regra.CarregaTemporizando){//console.log("RECEBE REGRA",regra.valorTimer,regra);$scope.loadingEvents=false;if($scope.resetRulesTiming){$scope.regrasTemporizando=[];$scope.resetRulesTiming=false}if(regra.valorTimer>0){regra.dateToFire=new Date(regra.date);$scope.regrasTemporizando.push(regra)}if($scope.regrasTemporizando.length<$scope.contadoresEventos.regrasTemporizando){getUdpTimingRule($scope.regrasTemporizando.length+1)}else{startVerifyCRCRulesTiming()}}else{//console.log("udp_regra","CarregaRegraBloqueio",$scope.waitingType,regra);handlerBlockItem("regra",regra)}}));var comandoTipoBloqueio={"TipoBloqueio-dispositivo":0,"TipoBloqueio-zona":1,"TipoBloqueio-regra":2,"TipoBloqueio-laco":3};var enderecoBloqueioTodos={dispositivo:255,saida:251,atuador:253,sirene:252};var resetBlocks=function(){$scope.changedItems=[];$scope.list={outputs:{atuador:{name:t("remote.atuadores"),items:[],todos:false},sirene:{name:t("remote.sirenes"),items:[],todos:false},saida:{name:t("remote.saidas"),items:[],todos:false}},blocks:{dispositivo:{name:t("remote.dispositivos"),items:[],todos:false},atuador:{name:t("remote.atuadores"),items:[],todos:false},sirene:{name:t("remote.sirenes"),items:[],todos:false},saida:{name:t("remote.saidas"),items:[],todos:false},regra:{name:t("remote.regras"),items:[],todos:false},zona:{name:t("remote.zonas"),items:[],todos:false},laco:{name:t("remote.lacos"),items:[],todos:false}}};$scope.contadores={outputs:{},blocks:{}};if(qtdLacos===2){$scope.loops={dispositivo:[1,2],sirene:[0,1,2],saida:[0,1,2],atuador:[0,1,2]}}else{$scope.loops={dispositivo:[1],sirene:[0,1],saida:[0,1],atuador:[0,1]}}$scope.selectedSubMenu={visualization:undefined,loop:1,tab:"lock"};$scope.waitingType=undefined;//console.log("$scope.loops ",$scope.loops)};$scope.changeBlocksVisualization=function(type){//console.log("changeBlocksVisualization",type);if(type==="dispositivo"){$scope.selectedSubMenu.loop=1}else{$scope.selectedSubMenu.loop=0}if(type==="laco"){var params={ip:$scope.central.ip,endereco:$scope.central.endereco};$webSocket.send("udp_laco",params)}$scope.selectedSubMenu.visualization=type;//console.log("$scope.loops2 ",$scope.loops)};$scope.isListEmpty=function(){try{if($scope.list[$scope.activeVisualization][$scope.selectedSubMenu.visualization].items.length===0&&!$scope.waitingType)return true}catch(e){return false}};$scope.selectBlockTab=function(tab){//console.log("selectBlockTab",tab);$scope.selectedSubMenu.tab=tab};$scope.getBlocksCounters=function(){resetBlocks();if($scope.activeVisualization!=="blocks"){$scope.activeVisualization="blocks"}$webSocket.send("udp_bloqueios_contadores",{ip:$scope.central.ip,endereco:$scope.central.endereco})};$scope.changeCheckBox=function(item){if(item==="all"){var itemKey=$scope.activeVisualization==="blocks"?"bloqueado":"ativo";item={endereco:enderecoBloqueioTodos[$scope.selectedSubMenu.visualization]||255};item[itemKey]=$scope.list[$scope.activeVisualization][$scope.selectedSubMenu.visualization].todos;var status=$scope.list[$scope.activeVisualization][$scope.selectedSubMenu.visualization].todos;$scope.list[$scope.activeVisualization][$scope.selectedSubMenu.visualization].items.forEach((function(item){item[itemKey]=status;item.disabled=status}))}var hasItem=$filter("where")($scope.changedItems,{endereco:item.endereco});//console.log("changeCheckBox",$scope.selectedSubMenu.visualization,item,hasItem);if(hasItem.length){$scope.changedItems=$filter("xor")($scope.changedItems,hasItem)}else{$scope.changedItems.push(item)}};$scope.getOutputCounters=function(){resetBlocks();if($scope.activeVisualization!=="outputs"){$scope.activeVisualization="outputs"}$webSocket.send("udp_saidas_contadores",{ip:$scope.central.ip,endereco:$scope.central.endereco})};$webSocket.get().$on("udp_bloquear",(function(data){//console.log("udp_bloquear",data);$scope.changedItems.pop();$scope.saveChangedBlocks()}));$scope.saveChangedBlocks=function(){if($scope.changedItems.length>0){var item=$scope.changedItems[$scope.changedItems.length-1];$timeout((function(){$webSocket.send("udp_bloquear",{ip:$scope.central.ip,tipoBloqueio:comandoTipoBloqueio["TipoBloqueio-"+convertToNativeType($scope.selectedSubMenu.visualization)],laco:$scope.selectedSubMenu.loop,numero:item.endereco||0,bloquear:item.bloqueado?1:0,identificador:generateIdentificator()})}),100)}else{$timeout((function(){$scope.getBlocksCounters()}),2e3)}};$scope.saveChangedOutputs=function(){if($scope.changedItems.length>0){var item=$scope.changedItems[$scope.changedItems.length-1];$timeout((function(){$webSocket.send("udp_ativar_saida",{ip:$scope.central.ip,laco:$scope.selectedSubMenu.loop,numero:item.endereco||0,ativo:item.ativo?1:0,identificador:generateIdentificator()})}),100)}else{$timeout((function(){$scope.getOutputCounters()}),500)}};$webSocket.get().$on("udp_ativar_saida",(function(data){//console.log("udp_ativar_saida",data);$scope.changedItems.pop();$scope.saveChangedOutputs()}));$scope.clearBlocksChanges=function(){$scope.changedItems=[]};$scope.getBlocks=function(tab){var typeKey,laco=$scope.selectedSubMenu.loop;var typeCarrega=$scope.activeVisualization==="outputs"?"Ativa":"Bloqueio";var type=$scope.selectedSubMenu.visualization;var params={ip:$scope.central.ip,endereco:$scope.central.endereco,numero:1};var paramsAll={ip:$scope.central.ip,endereco:$scope.central.endereco,numero:255};if(tab){$scope.selectedBlocksTabVisualization=tab}//console.log("getBlocks",type,$scope.selectedBlocksTabVisualization,laco,$scope.waitingType);if($scope.waitingType||!type)return;switch(type){case"dispositivo":case"saida":case"sirene":case"atuador":paramsAll.laco=laco;typeKey=type+"Laco"+laco;params.laco=laco;break;default:typeKey=type;break}$scope.list[$scope.activeVisualization][type].items=[];if($scope.selectedBlocksTabVisualization==="all"){if($scope.contadoresGlobais[typeKey]===0)return;$scope.waitingType=TIPO_CARREGA[type].CarregaPosicao}else{if($scope.contadores[$scope.activeVisualization][typeKey]===0)return;$scope.waitingType=TIPO_CARREGA[type]["Carrega"+typeCarrega]}paramsAll.tipoCarrega=TIPO_CARREGA[type]["Carrega"+typeCarrega];type=convertToNativeType(type);$webSocket.send("udp_"+type+"_todos",paramsAll);type=convertToNativeType(type);params.tipoCarrega=$scope.waitingType;$webSocket.send("udp_"+type,params)};$webSocket.get().$on("udp_bloqueios_contadores",(function(data){//console.log("udp_bloqueios_contadores",data);$scope.contadores[$scope.activeVisualization]=data}));$webSocket.get().$on("udp_saidas_contadores",(function(data){//console.log("udp_saidas_contadores",data);$scope.contadores[$scope.activeVisualization]=data}));$scope.goBackVisualization=function(){$scope.selectedSubMenu.visualization=undefined;$scope.clearBlocksChanges()};function handlerBlockItem(type,item){//console.log("handlerBlockItem",type,item);type=$scope.selectedSubMenu.visualization;var typeCarrega=$scope.activeVisualization==="outputs"?t("remote.ativaSaida"):t("remote.bloqueioSaida");var laco=$scope.selectedSubMenu.loop,typeKey;var params={ip:$scope.central.ip,endereco:$scope.central.endereco,tipoCarrega:$scope.waitingType};switch(type){case"dispositivo":case"saida":case"sirene":case"atuador":params.laco=laco;typeKey=type+"Laco"+laco;break;default:typeKey=type;break}if(!_.find($scope.list[$scope.activeVisualization][type].items,{numero:item.numero})){$scope.list[$scope.activeVisualization][type].items.push(item)}else{//console.log("JA TEM",item.numero)}if($scope.waitingType===TIPO_CARREGA[type].CarregaPosicao&&$scope.list[$scope.activeVisualization][type].items.length<$scope.contadoresGlobais[typeKey]||$scope.waitingType===TIPO_CARREGA[type]["Carrega"+typeCarrega]&&$scope.list[$scope.activeVisualization][type].items.length<$scope.contadores[$scope.activeVisualization][typeKey]){params.numero=$scope.list[$scope.activeVisualization][type].items.length+1;type=convertToNativeType(type);$webSocket.send("udp_"+type,params)}else{$scope.waitingType=undefined;$scope.list[$scope.activeVisualization][type].items=_.orderBy($scope.list[$scope.activeVisualization][type].items,["numero"],["asc"])}}function convertToNativeType(type){switch(type){case"saida":case"sirene":case"atuador":return"dispositivo"}return type}$scope.changeSelectedBlocksLoop=function(loop){//console.log("changeSelectedBlocksLoop",loop,$scope.selectedBlocksLoop);$scope.getBlocks("dispositivo")};$scope.$watch("selectedSubMenu.loop",(function(newVal){if(newVal!==undefined){//console.log("selectedSubMenu.loop",$scope.selectedSubMenu.loop);$scope.getBlocks()}}));$webSocket.get().$on("udp_laco",(function(lacos){//console.log("udp_laco",$scope.waitingType,lacos);$scope.list[$scope.activeVisualization].laco.items=lacos;$scope.waitingType=undefined}));$webSocket.get().$on("udp_zona",(function(zona){//console.log("udp_zona",$scope.waitingType,zona);handlerBlockItem("zona",zona)}));$webSocket.get().$on("udp_dispositivo",(function(dispositivo){//console.log("dispositivo",$scope.waitingType,dispositivo);handlerBlockItem("dispositivo",dispositivo)}));$webSocket.get().$on("udp_zona_todos",(function(zona){//console.log("udp_zona_todos",zona);if($scope.activeVisualization==="outputs"){$scope.list[$scope.activeVisualization].zona.todos=zona.ativo}else{$scope.list[$scope.activeVisualization].zona.todos=zona.bloqueado}}));$webSocket.get().$on("udp_regra_todos",(function(regra){//console.log("udp_regra_todos",regra);if($scope.activeVisualization==="outputs"){$scope.list[$scope.activeVisualization].regra.todos=regra.ativo}else{$scope.list[$scope.activeVisualization].regra.todos=regra.bloqueado}}));$webSocket.get().$on("udp_dispositivo_todos",(function(dispositivo){//console.log("udp_dispositivo_todos",dispositivo);if($scope.activeVisualization==="outputs"){$scope.list[$scope.activeVisualization][$scope.selectedSubMenu.visualization].todos=dispositivo.ativo}else{$scope.list[$scope.activeVisualization][$scope.selectedSubMenu.visualization].todos=dispositivo.bloqueado}}));$scope.buttons={TipoBotaoReunirBrigada:0,TipoBotaoAlarmeGeral:1,TipoBotaoAdiarTemporizacaoRegra:2,TipoBotaoReiniciarCentral:3,TipoBotaoSilenciarSirene:4,TipoBotaoSilenciarCentral:5,TipoBotaoDispararRegraTemporizando:6};var waitingCentralRestart=false;var lastButton=undefined;var lastParameter=0;$scope.buttonCommand=function(button,parametro){lastButton=button;lastParameter=parametro;$webSocket.send("udp_enviar_comando",{ip:$scope.central.ip,endereco:$scope.central.endereco,botao:button,identificador:generateIdentificator(),parametro:parametro||0});$rootScope.setLoading("remote",true)};$webSocket.get().$on("udp_enviar_comando",(function(data){//console.log("WS udp_enviar_comando",data);switch(data.resposta){case"StatusBotaoOk":if(!waitingCentralRestart){$rootScope.setLoading("remote",false)}break;case"StatusBotaoWaiting":$scope.buttonCommand(lastButton,lastParameter);break;case"StatusBotaoNaoConfigurado":$mdDialog.show($mdDialog.alert().multiple(true).title(t("remote.atencao")).textContent(t("remote.comandoNaoConfigurado")).ok("OK"));break;case"StatusBotaoTempoRegraEstourado":break;case"StatusBotaoTempoMultiplasRegrasEstourado":break}}));$scope.centralRestart=function(){var confirm=$mdDialog.confirm().escapeToClose(false).hasBackdrop(true).multiple(true).title(t("remote.reiniciar")).textContent(t("remote.confirmaReinicializacao")).ok(t("remote.sim")).cancel(t("project.cancelar"));$mdDialog.show(confirm).then((function(){waitingCentralRestart=true;$rootScope.setLoading("remote",true);$scope.buttonCommand($scope.buttons.TipoBotaoReiniciarCentral);$timeout((function(){//console.log("centralRestart");resetScreen();$udpAuthService.auth({ip:$scope.central.ip,endereco:$scope.central.endereco}).then((function(token){startCommunication(token)}))}),8e3)}),(function(){}))};$scope.actionOnRule=function(action,ruleId){if($scope.regrasTemporizando.length===0)return;if($scope.activeVisualization!=="rules"){$scope.activeVisualization="rules"}else{$scope.buttonCommand(action,ruleId)}};var tipoEventoIdx={0:"alarme",1:"falha",2:"supervisao",3:"operacao"};$scope.contadoresEventos={alarme:0,falha:0,supervisao:0,bloqueio:0};$scope.eventos={alarme:[],falha:[],supervisao:[],bloqueio:[]};$webSocket.get().$on("udp_evento",(function(data){$scope.loadingEvents=false;var tipoEvento=tipoEventoIdx[data.tipo_evento];//console.log("<< udp_evento",tipoEvento,data.numero,data);if(!_.find($scope.eventos[tipoEvento],{numero:data.numero})){$scope.eventos[tipoEvento].push(data);if($scope.eventos[tipoEvento].length<$scope.contadoresEventos[tipoEvento]){getUdpEvent(tipoEvento,$scope.eventos[tipoEvento].length+1)}else{$scope.eventos[tipoEvento]=_.orderBy($scope.eventos[tipoEvento],["numero"],["asc"]);$scope.waitingEvents=false}}}));function getUdpEvent(tipoEvento,index){//console.log("PEDE EVENTO",tipoEvento,index);$timeout((function(){$webSocket.send("udp_evento",{ip:$scope.central.ip,endereco:$scope.central.endereco,evento:tipoEvento,numero:index})}),100)}$scope.regrasTemporizando=[];$scope.CRCRegrasTemporizando=undefined;$scope.resetRulesTiming=false;$webSocket.get().$on("udp_crc_regras_temporizando",(function(CRC){if($scope.CRCRegrasTemporizando&&CRC!==$scope.CRCRegrasTemporizando){$scope.resetRulesTiming=true;//console.log("mudou CRC")}$scope.CRCRegrasTemporizando=CRC;if($scope.contadoresEventos.regrasTemporizando===0){clearRulesTiming();$scope.clearVisualization()}}));function rulesTimingDecrement(){for(var regraIdx in $scope.regrasTemporizando){var regra=$scope.regrasTemporizando[regraIdx];if(!regra.dateToFire){}var seconds=regra.dateToFire.getSeconds();var minutes=regra.dateToFire.getMinutes();if(minutes===0&&seconds===1){$scope.regrasTemporizando.splice(regraIdx,1)}if(minutes===0&&seconds<=10){regra.finishing=true}regra.dateToFire.setSeconds(regra.dateToFire.getSeconds()-1)}}function getUdpTimingRule(index){//console.log("Pede regra ",index);$timeout((function(){$webSocket.send("udp_regra",{ip:$scope.central.ip,endereco:$scope.central.endereco,numero:index,tipoCarrega:TIPO_CARREGA.regra.CarregaTemporizando});$scope.waitingType=TIPO_CARREGA.regra.CarregaTemporizando;$scope.loadingEvents=false}),100)}function clearRulesTiming(){$interval.cancel($scope.timeoutCRCRegrasTemporizando);$scope.timeoutCRCRegrasTemporizando=undefined;$scope.regrasTemporizando=[];$scope.CRCRegrasTemporizando=undefined;$scope.resetRulesTiming=false}function startVerifyCRCRulesTiming(){//console.log("startVerifyCRCRulesTiming",$scope.timeoutCRCRegrasTemporizando);if(!$scope.timeoutCRCRegrasTemporizando){$scope.timeoutCRCRegrasTemporizando=$interval((function(){$webSocket.send("udp_crc_regras_temporizando",{ip:$scope.central.ip,endereco:$scope.central.endereco})}),500)}}$scope.leds={};$webSocket.get().$on("udp_data_hora",(function(data){console.info("WS udp_data_hora",data);if(data.error){return}if(data.utc){$scope.central.utc=data.utc}if(data.timestamp){$scope.central.timestamp=data.timestamp}startUtc();getNomeModelo()}));$webSocket.get().$on("udp_mac",(function(data){console.info("WS udp_mac",data);if(data.error){return}$scope.central.mac=data.mac;getInfo()}));$webSocket.get().$on("udp_nome_e_modelo",(function(data){console.info("< WS udp_nome_e_modelo",data);if(data.error){return}data.endereco&&($scope.central.endereco=data.endereco);$scope.central.nome=data.nome;$scope.central.modelo=data.modelo;qtdLacos=$rootScope.centralsModels[$scope.central.modelo].QTD_LACOS;getMac()}));$webSocket.get().$on("udp_status",(function(data){console.info("< WS udp_status",data);$scope.waitingForStatus=false;if(data.error&&!waitingCentralRestart){connectionError()}if(data.error){return}waitingCentralRestart=false;var status=data.status;var leds=data.leds;$rootScope.setLoading("remote",false);var normalMode=true;for(var modeIdx in modes){if(status[modes[modeIdx]]!==0){normalMode=false}else{$scope.eventos[modes[modeIdx]]=[]}}if(!normalMode){for(var modeIdx in modes){var mode=modes[modeIdx];if(status[mode]>0){$scope.centralMode=mode;break}}if($scope.eventos[$scope.centralMode].length===0){$scope.eventos[$scope.centralMode]=[];getUdpEvent($scope.centralMode,1)}else if(!$scope.waitingEvents&&$scope.eventos[$scope.centralMode].length<$scope.contadoresEventos[$scope.centralMode]&&$scope.selectedTypeEventVisualization===$scope.centralMode){getUdpEvent($scope.centralMode,$scope.eventos[$scope.centralMode].length+1)}if(($scope.regrasTemporizando.length===0||$scope.resetRulesTiming)&&status.regrasTemporizando>0){getUdpTimingRule(1)}}else{$scope.centralMode="normal";$scope.eventos={alarme:[],falha:[],bloqueio:[],supervisao:[]};clearRulesTiming()}$scope.contadoresEventos=status;$scope.leds=leds;$scope.central.online=true;$scope.$apply();$timeout((function(){if(!$scope.waitingForStatus)getStatus()}),1e3)}));var tipoLogIdx={0:"alarme",1:"falha",2:"supervisao",3:"operacao"};$scope.logs={alarme:[],falha:[],supervisao:[],operacao:[]};$scope.contadoresLogs={alarme:0,falha:0,supervisao:0,operacao:0};$scope.getLogs=function(logType,pagination){$scope.waitingEvents=true;$scope.loadingEvents=true;$scope.activeVisualization="logs";$scope.selectedTypeEventVisualization=logType;var index=$scope.logs[logType].length+1;if(!pagination){$scope.logs[logType]=[];index=1}getUdpLog(logType,index)};$webSocket.get().$on("udp_log",(function(data){//console.log("< WS udp_log",data);$scope.loadingEvents=false;var tipoLog=tipoLogIdx[data.tipo_evento];$scope.contadoresLogs[tipoLog]=data.contador;if(!_.find($scope.logs[tipoLog],{numero:data.numero})){if(data.contador>0){$scope.logs[tipoLog].push(data)}if($scope.logs[tipoLog].length%20!==0&&$scope.logs[tipoLog].length<$scope.contadoresLogs[tipoLog]){getUdpLog(tipoLog,$scope.logs[tipoLog].length+1)}else{$scope.logs[tipoLog]=_.orderBy($scope.logs[tipoLog],["numero"],["asc"]);$scope.waitingEvents=false}}else{//console.log("JA TEM ",data.numero)}}));function getUdpLog(tipoEvento,index){$timeout((function(){$webSocket.send("udp_log",{ip:centralInfo.ip,endereco:centralInfo.endereco,evento:tipoEvento,numero:index})}),100)}$scope.changeEventsVisualization=function(type,subType){$scope.waitingEvents=true;$scope.loadingEvents=true;$scope.activeVisualization=type;$scope.selectedTypeEventVisualization=subType;//console.log(subType,$scope.eventos,$scope.contadoresEventos);$scope.eventos[subType]=[];if($scope.eventos[subType].length===0&&$scope.contadoresEventos[subType]>0){getUdpEvent(subType,1)}else{$scope.waitingEvents=false;$scope.loadingEvents=false}$timeout((function(){$scope.loadingEvents=false}),500)};$scope.$on("$destroy",(function(){//console.log("destroy");if(!waitingCentralRestart)resetScreen()}));$scope.central=centralInfo;$webSocket.send("udp_data_hora",{ip:$scope.central.ip,endereco:$scope.central.endereco});var getMac=function(){$webSocket.send("udp_mac",{ip:centralInfo.ip,endereco:centralInfo.endereco})};var getInfo=function(){$webSocket.send("udp_info",{ip:centralInfo.ip,endereco:centralInfo.endereco});getStatus()};var getNomeModelo=function(){$webSocket.send("udp_nome_e_modelo",{ip:centralInfo.ip,endereco:centralInfo.endereco})};var getStatus=function(){$scope.waitingForStatus=true;$webSocket.send("udp_status",{ip:centralInfo.ip,endereco:centralInfo.endereco})}}function openRemoteDialog(){$mdDialog.show({clickOutsideToClose:false,multiple:true,fullscreen:true,escapeToClose:true,templateUrl:"remote/remoteControl.html",onComplete:function(element){$rootScope.setLoading("remote",true)},onRemoving:function(element,promise){promise.then((function(){$timeout((function(){//console.log("onRemoving");$rootScope.$emit("close-remote")}),2e3)}))},controller:Controller})}$webSocket.get().$on("udp_start_communication",(function(){console.info("< WS udp_start_communication");$mdDialog.hide();openRemoteDialog()}));var startCommunication=function(token){$webSocket.send("udp_start_communication",{ip:centralInfo.ip,endereco:centralInfo.endereco,token:token})};function open(central,token){centralInfo=central;startCommunication(token)}return{open:open}}])})();(function(){"use strict";angular.module("app").controller("rootController",["$rootScope","$state","$config","$timeout","$mdDialog","$windowService","$window","$loading","$filter","$webSocket","$projectService","$fileService","$mdToast","$translateService",function($rootScope,$state,$config,$timeout,$mdDialog,$windowService,$window,$loading,$filter,$webSocket,$projectService,$fileService,$mdToast,$translateService){var t=$translateService.translatePhrase;$rootScope.file="";$rootScope.CONFIG=$config;$rootScope.centralsModels=angular.copy($rootScope.CONFIG.modelos_centrais);delete $rootScope.centralsModels["CIE1060"];delete $rootScope.centralsModels["REPEATER"];delete $rootScope.centralsModels["PROJECT"];$rootScope.isCIEConnected=false;$rootScope.isCIEBlocked=false;$rootScope.developerMode=false;$rootScope.cieUsbConnected=false;$rootScope.projectMode=false;$rootScope.selectedCentralAddress=undefined;$rootScope.projectCentralTransition=false;$rootScope.centralSummary=[];$rootScope.menuSystem=false;$rootScope.centralModel={};$rootScope.connectedCentralModel={};$rootScope.acceptedExtentionFirmware=".cief";const isCIE1060=$rootScope.centralModel.is1060;const connectionMode=isCIE1060?"wifi":"usb";$rootScope.formConnectionMode={connectionMode:connectionMode};$rootScope.connectionMode=connectionMode;//console.log(`connectionMode`,connectionMode);$rootScope.gatewayAutenticated=false;$rootScope.gatewayLogs=[];$rootScope.lastQuestionUpdateSkipped=false;$rootScope.searchCentralInNetwork=function(ev){$mdDialog.show({controller:DialogController,templateUrl:"shared/searchCentral.html",parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:true})};$rootScope.centralAddressConnection=undefined;$rootScope.showInfo=function(ev){$mdDialog.show($mdDialog.alert().title(t("global.conexao")).htmlContent(t("global.centralUsb")+"<br>"+t("global.altereUsb")).ok("OK").parent(angular.element(document.body)).targetEvent(ev))};$rootScope.lastSelectedCentralModelOption=undefined;let changingConnectionMode=false;$rootScope.$watch("formConnectionMode.connectionMode",(function(newVal,oldVal){//console.log("connectionMode",newVal,oldVal,changingConnectionMode);if(newVal){if($rootScope.isCIEConnected&&!changingConnectionMode){changingConnectionMode=true;var confirm=$mdDialog.confirm().escapeToClose(false).title(t("global.atencao")).textContent(t("global.alterandoConexao")).ok("OK").cancel(t("global.cancelar"));$mdDialog.show(confirm).then((function(){changeConnectionMode(newVal)}),(function(){$rootScope.formConnectionMode.connectionMode=oldVal}))}else{if(!changingConnectionMode){changeConnectionMode(newVal)}changingConnectionMode=false}if(newVal){$rootScope.$emit("change-connectionMode",newVal)}}}));function changeConnectionMode(mode){$rootScope.connectionMode=mode;$webSocket.send("change_connection_mode",{connectionMode:mode});changingConnectionMode=false}$rootScope.changeConnectionMode=function(mode){$rootScope.formConnectionMode.connectionMode=mode};function DialogController($scope,$mdDialog){$scope.formRemote={searchType:"cies",type:"discovery"};$scope.hide=function(){$mdDialog.hide()};$scope.cancel=function(){$mdDialog.cancel()};$scope.answer=function(answer){$mdDialog.hide(answer)}}$loading.setDefaultOptions({active:false,text:"",className:"",overlay:true,spinner:true,spinnerOptions:{lines:12,length:4,width:3,radius:10,rotate:0,corners:1,color:"rgb(55, 175, 44)",direction:1,speed:2,trail:100,opacity:1/4,fps:60,zIndex:1001,className:"dw-spinner",top:"auto",left:"auto",position:"relative"}});$rootScope.loading={percent:0,text:"",extra:"",mode:"query"};function menuIsDisabled(){return $rootScope.projectMode&&!$rootScope.selectedCentralAddress||$filter("isEmpty")($rootScope.centralModel)||$rootScope.centralModel.isRepeater===true||$rootScope.centralModel.isGateway===true}$rootScope.menu=[{name:"global.menuLacos",icon:"img/lacos.svg",state:"app.loop",disabled:menuIsDisabled},{name:"global.menuZonas",icon:"img/zonas.svg",state:"app.zone",disabled:function(){return menuIsDisabled()||$rootScope.centralModel.is1060}},{name:"global.menuRegras",icon:"img/regras.svg",state:"app.rule",disabled:menuIsDisabled},{name:"global.menuSistema",icon:"img/sistema.svg",state:"app.system",disabled:function(){return!$rootScope.menuSystem&&($rootScope.centralModel.isGateway||$rootScope.projectMode&&!$rootScope.selectedCentralAddress)}},{name:"global.menuFerramentas",icon:"img/tools.svg",state:"app.tools",disabled:function(){return $rootScope.centralModel.is1060||$rootScope.projectMode&&!$rootScope.selectedCentralAddress||$filter("isEmpty")($rootScope.centralModel)}}];$rootScope.$on("loading:show",(function(evt,data){if(angular.element(document.body).hasClass("md-dialog-is-showing")){$rootScope.$emit("loading:hide")}$mdDialog.show({controller:function($scope){$scope.loading=$rootScope.loading;$scope.text=data.text;$rootScope.loadingText=data.text},escapeToClose:false,templateUrl:"root/loading-dialog.html",clickOutsideToClose:false})}));$rootScope.$on("loading:hide",(function(evt,timeout){if(timeout){$timeout((function(){$mdDialog.hide()}),timeout)}else{$mdDialog.hide()}$rootScope.loading={percent:0,text:"",extra:"",mode:"query"};//console.log("cancel loading:hide")}));$rootScope.go=function(location,parameters){$state.go(location,parameters||{})};$rootScope.setLoading=function(view,show,keepRootContent){if(show){$loading.start(view);if(!keepRootContent){$timeout((function(){$loading.finish("rootContent@app")}),100)}}else{$timeout((function(){$loading.finish(view)}),100)}};$rootScope.menuChange=function(stateTo,event){if(stateTo==$state.current.name||stateTo=="app.file"&&$state.current.name=="app.file.print"){event.preventDefault()}};$rootScope.$on("$stateChangeStart",(function(event,toState,params){if(angular.equals(changeController.originalConfig,changeController.editedConfig)){$loading.start("rootContent@app");changeController={originalConfig:undefined,editedConfig:undefined,saveFn:undefined,viewName:""};if($rootScope.projectMode&&$rootScope.projectCentralTransition){$projectService.nextCentral(true)}}else{event.preventDefault();var confirm=$mdDialog.confirm().escapeToClose(false).title(t("global.foramFeitasAlteracoes")+" "+changeController.viewName).textContent(t("global.desejaSalvar")).ok(t("global.salvar")).cancel(t("global.descartar"));$mdDialog.show(confirm).then((function(){if(changeController.saveFn)changeController.saveFn();if($rootScope.projectMode&&$rootScope.projectCentralTransition){$projectService.nextCentral()}}),(function(){changeController={originalConfig:undefined,editedConfig:undefined,saveFn:undefined,viewName:""};if($rootScope.projectMode&&$rootScope.projectCentralTransition){$projectService.nextCentral(true);$state.reload()}else{$state.go(toState.name)}}))}}));$rootScope.$on("$viewContentLoading",(function(event,viewConfig){$loading.start(viewConfig)}));$rootScope.$on("$viewContentLoaded",(function(event,viewConfig){$loading.finish(viewConfig)}));$rootScope.windowMinimize=function(){$windowService.minimize()};$rootScope.windowMaximize=function(){$windowService.maximize()};$rootScope.windowClose=function(){$windowService.close()};$rootScope.helpUrl=function(){return""};$rootScope.help=function(){$windowService.openHelpWindow($rootScope.helpUrl())};var messageConfirmBlock=function(){$rootScope.btnDisconnectDisabled=true;$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("global.atencao")).htmlContent("<b>"+t("global.seraDesconectada")+"</b><br><br>"+t("global.desejaContinuar")).ok(t("global.sim")).cancel(t("global.cancelar"))).then((function(){$rootScope.$emit("loading:show",{text:t("global.aguarde")});$webSocket.send("block")})).finally((function(){$rootScope.btnDisconnectDisabled=false}))};$rootScope.centralBlock=function(){if(!$rootScope.projectMode&&!angular.equals(db,lastSentDb)){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("global.atencao")).htmlContent("<b>"+t("global.existemAlteracoesNaoEnviadas")+"</b><br><br>"+t("global.desconectarMesmoAssim")).ok(t("global.sim")).cancel(t("global.cancelar"))).then((function(){messageConfirmBlock()}))}else{messageConfirmBlock()}};var dialogDeveloperMode;$rootScope.$watch("developerMode",(function(newVal){//console.log("developerMode",newVal);if(newVal){dialogDeveloperMode=$mdDialog.show({clickOutsideToClose:false,scope:$rootScope,preserveScope:true,escapeToClose:false,templateUrl:"root/developer-mode-dialog.html",controller:function DialogController($scope){$scope.dump={};$scope.openFileDialog=function(){document.getElementById("dump_file").click()};$scope.fileAction=function(action,path){$scope.dump.path=path;$rootScope.$apply()};$scope.newSent=function(){$scope.dump.msg="";$scope.dump.finished=false};$scope.getDump=function(){$scope.dump.loading=true;$webSocket.send("get_flash_dump",{path:$scope.dump.path});$scope.dump.msg=t("global.recebendoSalvando")};$webSocket.get().$on("flash_dump_finish",(function(data){//console.log("WS flash_dump_finish",data);$scope.dump.path="";document.getElementById("dump_file").value="";$scope.dump.loading=false;$scope.dump.finished=true;if(data.success){$scope.dump.msg=t("global.arquivoSalvoEm")+" "+data.path}else{$scope.dump.msg=t("global.erroTente")}$rootScope.$apply()}))}})}else{if(dialogDeveloperMode){$mdDialog.hide(dialogDeveloperMode,"finished");dialogDeveloperMode=undefined}}}));$rootScope.hasFeatureInVersion=function(featureName){try{var minimalVersion=$rootScope.CONFIG.controle_versao[featureName];return $rootScope.versionComparator($rootScope.connectedCentralModel.version,minimalVersion)!==-1}catch(e){//console.log("minimalVersion error",e);return true}};$rootScope.versionComparator=function(version,otherVersion){if(!version||!otherVersion){return-1}var v1=version.split(".");var v2=otherVersion.split(".");for(var i=0;i<3;i++){var n1=parseInt(v1[i]);var n2=parseInt(v2[i]);if(n1==n2){continue}else if(n1<n2){return-1}else if(n1>n2){return 1}}return 0};var parseVersion=function(stringVersion){var splited=stringVersion.split(".");return{major:parseInt(splited[0]),minor:parseInt(splited[1]),path:parseInt(splited[2])}};var isMinor=function(version1,version2){var v1=parseVersion(version1);var v2=parseVersion(version2);return v1.major<v2.major||v1.major===v2.major&&v1.minor<v2.minor||v1.major===v2.major&&v1.minor===v2.minor&&v1.path<v2.path};var dataVersionIsMajor=function(version1,version2){var v1=parseVersion(version1);var v2=parseVersion(version2);return v1.minor>v2.minor};var dataVersionIsMinor=function(version1,version2){var v1=parseVersion(version1);var v2=parseVersion(version2);return v1.minor<v2.minor};var isMajor=function(version1,version2){var numberVersion1=version1.split(".");var numberVersion2=version2.split(".");return parseInt(numberVersion1[0])>parseInt(numberVersion2[0])||parseInt(numberVersion1[0])===parseInt(numberVersion2[0])&&parseInt(numberVersion1[1])>parseInt(numberVersion2[1])};$rootScope.isCompatibleVersion=function(){return new Promise(((acc,rej)=>{var centralVersion=$rootScope.connectedCentralModel.version;//console.log("centralVersion",centralVersion);if(!centralVersion){acc();return}if($rootScope.connectedCentralModel.is1060){acc();return}var minimumFirmwareVersion=$rootScope.CONFIG.MINIMAL_FIRMWARE_VERSION[$rootScope.connectedCentralModel.id];var recomendedFirmwareVersion=$rootScope.CONFIG.RECOMENDED_FIRMWARE_VERSION[$rootScope.connectedCentralModel.id];var needUpdateProgramador=minimumFirmwareVersion&&dataVersionIsMajor(centralVersion,recomendedFirmwareVersion);var needUpdateCentral=minimumFirmwareVersion&&(dataVersionIsMinor(centralVersion,minimumFirmwareVersion)||isMinor(centralVersion,minimumFirmwareVersion));var wouldBeUpdateCentral=recomendedFirmwareVersion&&isMinor(centralVersion,recomendedFirmwareVersion);if(!needUpdateCentral&&(!wouldBeUpdateCentral||wouldBeUpdateCentral&&$rootScope.lastQuestionUpdateSkipped)&&!needUpdateProgramador){acc();return}if(needUpdateProgramador){$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("file.atencao")).htmlContent("<b>"+t("file.necessarioAtualizacaoProgramador")+"</b><br><br>"+t("file.versaoCentral")+": <b>"+$rootScope.connectedCentralModel.version+"</b>").ok("OK"));rej();return}if(needUpdateCentral){$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("file.atencao")).htmlContent("<b>"+t("file.necessarioAtualizacao")+"</b><br><br>"+($rootScope.connectedCentralModel.version==="3.1.0"?"":t("file.versaoMinima")+": <b>"+minimumFirmwareVersion+"</b><br>"+"")+t("file.versaoCentral")+": <b>"+$rootScope.connectedCentralModel.version+"</b>").ok("OK")).finally((function(){$state.go("app.system",{firmware:true});rej()}));return}if(wouldBeUpdateCentral&&!$rootScope.lastQuestionUpdateSkipped){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("file.atencao")).htmlContent("<b>"+t("file.novaVersaoDisponivel")+"</b><br><br>"+t("file.recomendadoAtualizacao")+"<br><br>"+t("file.versaoRecomendada")+": <b>"+recomendedFirmwareVersion+"</b><br>"+t("file.versaoCentral")+": <b>"+$rootScope.connectedCentralModel.version+"</b>").ok(t("system.atualizar")).cancel(t("global.pular"))).then((()=>{$state.go("app.system",{firmware:true});rej()}),(()=>{$rootScope.lastQuestionUpdateSkipped=true;acc()}));return}}))};$rootScope.setFirmwareUploadPath=function(centralModel){try{var path=require("path");var model=centralModel.isGateway?"GW521":centralModel.is1060?"CIE1060":"CIE";$rootScope.nwworkingdir=path.dirname(process.execPath)+"\\Firmwares\\"+model+(model==="CIE"?"\\"+$translateService.getLang():"")}catch(e){$rootScope.nwworkingdir=""}$rootScope.acceptedExtentionFirmware=centralModel.isGateway?".gwf":centralModel.is1060?".cie1060f":".cief"};var img={};img.copy=new Image;img.copy.src="img/drag-copy.png";img.remove=new Image;img.remove.src="img/drag-remove.png";img.move=new Image;img.move.src="img/drag-move.png";$rootScope.dragging={};$rootScope.onDragstart=function(event,list,type){$rootScope.dragging[list]=true;if(event.dataTransfer.setDragImage){event.dataTransfer.setDragImage(img[type],0,0)}};var dropEvent=function(e){e.preventDefault();e.stopPropagation();if(e.dataTransfer.files.length>0){var lostConfig="";var file=e.dataTransfer.files[e.dataTransfer.files.length-1];var ext=file.name.split(".")[file.name.split(".").length-1];if(ext.toUpperCase()=="CIE"||ext.toUpperCase()=="CIEPROJ"){if(!angular.equals(db,originalDb)||!$filter("isEmpty")($rootScope.centralModel)){lostConfig="<br><br>"+t("global.configuracoesPerdidas")}var confirm=$mdDialog.confirm().escapeToClose(false).title(t("global.atencao")).htmlContent(t("global.arquivoConfiguracoes")+" <b>"+file.name+"</b> "+t("global.seraAberto")+"."+lostConfig+"<br><br>"+t("global.desejaContinuar")).ok(t("global.sim")).cancel(t("global.cancelar"));$mdDialog.show(confirm).then((function(){$rootScope.setLoading("rootContent@app",true,true);$fileService.openFile(file.path).then((function(data){if(data.config.centrais){$projectService.updateSummary();$state.go("app.interconnection")}else{$state.go("app.file")}}),(function(){$rootScope.setLoading("rootContent@app",false)}))}))}else{$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("global.atencao")).textContent(t("global.permiteAbrir")).ok("OK"))}}};var stopEvent=function(e){e.preventDefault();e.stopPropagation()};document.body.addEventListener("dragover",stopEvent,false);document.body.addEventListener("dragenter",stopEvent,false);document.body.addEventListener("dragend",stopEvent,false);document.body.addEventListener("drop",dropEvent,false);$rootScope.REGEX={IP:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,MAC:/([0-9a-fA-F]{2}[:]){5}([0-9a-fA-F]{2})/};$rootScope.openedPrintingToast=false;var toastPrinting;$rootScope.printToast=function(path){$rootScope.openedPrintingToast=true;toastPrinting=$mdToast.show({hideDelay:0,position:"bottom left",templateUrl:"shared/toast-print.html",controller:"ToastCtrl",locals:{path:path}})}}]).controller("ToastCtrl",(function($scope,$mdToast,$mdDialog,$rootScope,path,$webSocket,$timeout,$translateService){var t=$translateService.translatePhrase;var gui;var isNode=typeof process!=="undefined"&&typeof require!=="undefined";var isNodeWebkit=false;if(isNode){try{isNodeWebkit=typeof require("nw.gui")!=="undefined"}catch(e){isNodeWebkit=false}}if(isNodeWebkit){//console.log("isNodeWebkit");gui=require("nw.gui")}$scope.path=path;$scope.generated=false;$scope.closeToast=function(){$mdToast.hide().then((function(){$rootScope.openedPrintingToast=false}))};$scope.openPdfFile=function(){gui.Window.open("file:"+$scope.path,{position:"center",width:parseInt(screen.availWidth*.7),height:parseInt(screen.availHeight*.8)});$scope.closeToast()};$webSocket.get().$on("print",(function(data){$timeout((function(){if(!data.success){$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("report.relatorio")).htmlContent(t("report.falhaPdf")+"<br><br>"+data.error).ok("OK"))}$scope.generated=true}),100)}))}))})();(function(){"use strict";angular.module("app").controller("loopController",["$scope","$rootScope","$mdDialog","$toast","$q","$timeout","$filter","$webSocket","$loopScan","$window","$translateService",function($scope,$rootScope,$mdDialog,$toast,$q,$timeout,$filter,$webSocket,$loopScan,$window,$translateService){var t=$translateService.translatePhrase;var loadingView="list@app.loop";$scope.form={};$scope.newDevice=false;$scope.selectedDevices=[];$scope.selectedDevice={};$scope.originalSelectedDevice={};$scope.lacos=db.lacos;$scope.zonas=db.zonas;$scope.selectedLoop=1;$scope.loopOrder="endereco";$scope.isEnabledMultipleSelection=false;$scope.loopMaxLength=14;$scope.paginationLimit=20;$scope.pagination={limit:20,page:1};$scope.devices={};$scope.tipos=angular.copy($rootScope.CONFIG.tipos);delete $scope.tipos["12"];$scope.enableMultipleSelection=function(){hasChanges().then((function(){$scope.saveDevice()}),(function(){$scope.isEnabledMultipleSelection=!$scope.isEnabledMultipleSelection;$scope.selectedDevice={};$scope.originalSelectedDevice={};if(!$scope.isEnabledMultipleSelection){$scope.selectedDevices=[]}}))};$scope.onChangeDeviceName=function(){if($rootScope.centralModel.is1060){$scope.selectedDevice.nome=_.deburr($scope.selectedDevice.nome).replace(/[^\x00-\x7F]/g,"")}};$scope.addMode=function(item){try{if(item.subtipo){item.modo=$rootScope.CONFIG.subtipos[item.subtipo].modo}else{item.modo=$rootScope.CONFIG.subtipos[item.tipo].modo}}catch(e){item.modo=t("loop.desconhecido")}return item};$scope.selectDevice=function(endereco){var device=db.lacos[$scope.selectedLoop].dispositivos[endereco];hasChanges().then((function(){$scope.saveDevice()}),(function(){select(device)}))};var hasChanges=function(){var deferred=$q.defer();//console.log("equals",angular.equals($scope.selectedDevice,$scope.originalSelectedDevice));if(!angular.equals($scope.selectedDevice,$scope.originalSelectedDevice)){var confirm=$mdDialog.confirm().escapeToClose(false).title(t("loop.foramFeitasAlteracoes")).textContent(t("loop.desejaSalvar")).ok(t("loop.salvar")).cancel(t("loop.descartar"));$mdDialog.show(confirm).then((function(){deferred.resolve()}),(function(){deferred.reject()}))}else{deferred.reject()}return deferred.promise};var select=function(device,moveScroll){//console.log("select",device);if(!$scope.isEnabledMultipleSelection){$scope.selectedDevice=angular.copy(device);$scope.originalSelectedDevice=angular.copy(device);$scope.selectedDevices=[device.endereco];if(moveScroll&&$scope.selectedLoop!=0&&Object.keys($scope.lacos[$scope.selectedLoop].dispositivos).length>=device.endereco){$scope.pagination.page=parseInt(device.endereco/$scope.pagination.limit)+1;$timeout((function(){try{$window.document.getElementById("loop-table").scrollTop=(device.endereco-1)*48}catch(e){}}),1e3)}$rootScope.setLoading(loadingView,false)}};$scope.removeDevice=function(ev){var text="";var rulesAndZones=$filter("unique")(ruleAndZoneUsedDevices());if(rulesAndZones.length>0){text=($scope.selectedDevices.length==1?t("loop.dispositivoSelecionado"):t("loop.seraoRemovidos"))+"<br><br><b>"+rulesAndZones.join().replace(/,/g,"<br>")+"</b><br><br>"+t("loop.confirmaRemocao")+"<br>"}else{text=t("loop.confirmaRemocao")+"<br>"}var confirm=$mdDialog.confirm().escapeToClose(false).title(t("loop.removerDispositivo")).htmlContent(text).targetEvent(ev).ok(t("loop.remover")).cancel(t("loop.cancelar"));$mdDialog.show(confirm).then((function(){ruleAndZoneUsedDevices($scope.selectedDevices,true);angular.forEach($scope.selectedDevices,(function(endereco){delete db.lacos[$scope.selectedLoop].dispositivos[endereco]}));$toast.show("success",t("loop.dispositivosRemovidos"));$scope.cancel()}),(function(){}))};var removeDeviceFromRule=function(loop,deviceId){var itensForRemove=[];for(var idRegra in db.regras){var regra=db.regras[idRegra];itensForRemove=$filter("where")(regra.itens,{tipo:"dispositivo",laco:loop,endereco:deviceId});if(itensForRemove.length>0){regra.itens=$filter("xor")(regra.itens,itensForRemove)}}};var ruleAndZoneUsedDevices=function(devices,remove){var used=[];var loop=$scope.selectedLoop;if(!devices)devices=$scope.selectedDevices;angular.forEach(devices,(function(endereco){var device=db.lacos[$scope.selectedLoop].dispositivos[endereco];var itensForRemove=[];for(var idRegra in db.regras){var regra=db.regras[idRegra];itensForRemove=$filter("where")(regra.itens,{laco:loop,endereco:device.endereco});if(itensForRemove.length>0&&regra.id!=1){used.push(t("loop.regra")+": "+regra.id+" - "+regra.nome)}if(remove)regra.itens=$filter("xor")(regra.itens,itensForRemove)}var zoneDevice=db.lacos[loop].dispositivos[device.endereco];if(zoneDevice.zona!=1){used.push(t("loop.zona")+": "+db.zonas[zoneDevice.zona].id+" - "+db.zonas[zoneDevice.zona].nome)}}));return used};var devicesMode={entrada:{key:"entrada",text:t("loop.entrada")},saida:{key:"saida",text:t("loop.saida")}};$scope.saveDevice=function(){if($scope.form.device.$invalid)return;$rootScope.setLoading(loadingView,true);if($rootScope.CONFIG.tipos[$scope.selectedDevice.tipo].subtipos.length==1){$scope.selectedDevice.subtipo=angular.copy($rootScope.CONFIG.tipos[$scope.selectedDevice.tipo].subtipos[0])}const type=$rootScope.CONFIG.subtipos[$scope.selectedDevice.tipo];const subtype=$rootScope.CONFIG.subtipos[$scope.selectedDevice.subtipo];let modo=$scope.selectedDevice.subtipo?devicesMode[subtype.modo]:devicesMode[type.modo];var modoAnterior;if(!$scope.newDevice){if($scope.originalSelectedDevice.subtipo){modoAnterior=devicesMode[$rootScope.CONFIG.subtipos[$scope.originalSelectedDevice.subtipo].modo]}}if(!$rootScope.centralModel.is1060&&!$scope.newDevice&&modoAnterior.key!=modo.key){$rootScope.setLoading(loadingView,false);$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("loop.atencao")).htmlContent(t("loop.alterandoTipo")+" <b>"+modoAnterior.text+"</b> para <b>"+modo.text+"</b>, "+t("loop.podeSeInvalidar")+"<br><br>"+t("loop.desejaContinuar")+"<br>").ok(t("loop.sim")).cancel(t("loop.cancelar"))).then((function(){removeDeviceFromRule($scope.selectedLoop,$scope.selectedDevice.endereco);continuar()}),(function(){$scope.selectedDevice.tipo=$scope.originalSelectedDevice.tipo;$scope.selectedDevice.subtipo=$scope.originalSelectedDevice.subtipo}))}else{continuar()}function continuar(){var devices=db.lacos[$scope.selectedLoop].dispositivos;if(!$scope.newDevice){if($scope.originalSelectedDevice.endereco!=$scope.selectedDevice.endereco){delete devices[$scope.originalSelectedDevice.endereco];removeDeviceFromRule($scope.selectedLoop,$scope.originalSelectedDevice.endereco)}}if(modo.key=="saida"){$scope.selectedDevice.supervisao=false}devices[$scope.selectedDevice.endereco]=angular.copy($scope.selectedDevice);fillNamesTipoAndSubtipo();select(devices[$scope.selectedDevice.endereco],$scope.newDevice);if($scope.newDevice){$scope.newDevice=false;$toast.show("success",t("loop.dispositivoCriado"))}else{$toast.show("success",t("loop.alteracoesAplicadas"))}}};$scope.cancel=function(){hasChanges().then((function(){$scope.saveDevice()}),(function(){$scope.selectedDevice={};$scope.originalSelectedDevice={};$scope.newDevice=false;$scope.selectedDevices=[];$rootScope.setLoading(loadingView,false)}))};$scope.$watch("lacos[selectedLoop].habilitado",(function(newValue){if(newValue!==undefined){if($scope.selectedLoop===1&&db.bloqueios_locais!==undefined){db.bloqueios_locais.laco=!$scope.lacos[1].habilitado}}}),true);$scope.$watch("pagination.page",(function(newValue){if(typeof newValue!=="undefined"){$window.document.getElementById("loop-table").scrollTop=0}}),true);$scope.$watch("selectedDevice.subtipo",(function(newValue){if(typeof newValue!=="undefined"){const modo=$rootScope.CONFIG.subtipos[$scope.selectedDevice.subtipo].modo;$scope.selectedDevice.modo=modo}}),true);$scope.$watch("selectedDevice.tipo",(function(newValue){if(typeof newValue!=="undefined"){if($rootScope.CONFIG.tipos[$scope.selectedDevice.tipo].subtipos.length==1){$scope.selectedDevice.subtipo=angular.copy($rootScope.CONFIG.tipos[$scope.selectedDevice.tipo].subtipos[0])}}}),true);$scope.selectLoop=function(index){//console.log("index",index);//console.log("$scope.lacos",$scope.lacos);hasChanges().then((function(){$scope.saveDevice()}),(function(){$rootScope.setLoading(loadingView,true);$timeout((function(){$scope.pagination.page=1;$scope.selectedLoop=index;$scope.devices=$scope.lacos[index].dispositivos;fillNamesTipoAndSubtipo();$scope.loopOrder=index==0?"saida_local":"endereco";$scope.cancel()}),100)}))};function fillNamesTipoAndSubtipo(){try{for(var deviceId in $scope.devices){var device=$scope.devices[deviceId];device.nomeTipo=$scope.CONFIG.tipos[device.tipo].nome||device.tipo;device.nomeSubtipo=$scope.CONFIG.subtipos[device.subtipo].nome||device.subtipo}}catch(e){}}$scope.createDevice=function(){hasChanges().then((function(){$scope.saveDevice()}),(function(){if($rootScope.centralModel.QTD_DISPOSITIVOS_LACO==Object.keys($scope.lacos[$scope.selectedLoop].dispositivos).length){$mdDialog.show($mdDialog.alert().title(t("loop.atencao")).textContent(t("loop.criarMaximo")+" "+$rootScope.centralModel.QTD_DISPOSITIVOS_LACO+" "+t("loop.dispositivoPorLaco")).ok("OK"));return}$scope.isEnabledMultipleSelection=false;$scope.newDevice=true;var address=getAvailableAddress();$scope.selectedDevice={nome:"",zona:1,habilitado:true,supervisao:false,endereco:address};$scope.originalSelectedDevice=angular.copy($scope.selectedDevice);$timeout((function(){var element=$window.document.getElementById("deviceNameInput");if(element)element.focus()}),1e3)}))};var getAvailableAddress=function(){var devices=db.lacos[$scope.selectedLoop].dispositivos;for(var index=1;index<=$rootScope.centralModel.QTD_DISPOSITIVOS_LACO;index++){if(!devices[index])break}return index};$scope.init=function(){$timeout((function(){$scope.selectLoop(1)}))};function resetLoop(loop){var devicesForRemove=[];for(var id in db.lacos[loop].dispositivos){devicesForRemove.push(id)}ruleAndZoneUsedDevices(devicesForRemove,true)}function saveDeviceFromLoopScan(device){var newDevice={};newDevice.endereco=device.endereco;newDevice.tipo=device.tipo;newDevice.subtipo=device.tipo;newDevice.zona=1;newDevice.habilitado=true;newDevice.supervisao=false;newDevice.nome="L"+device.laco+" - D"+$filter("numberFormat")(device.endereco);db.lacos[device.laco].dispositivos[device.endereco]=angular.copy(newDevice)}$scope.loopScan=function(loopId){if(Object.keys($scope.lacos[loopId].dispositivos).length>0){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("loop.atencao")).htmlContent(t("loop.refazerScan")+" "+loopId+" <b>"+t("loop.seraoRemovidos2")+"</b>.<br>"+t("loop.novosSeraoAdicionados")+".<br><br>"+t("loop.desejaContinuar")+"<br>").ok("SIM").cancel(t("loop.cancelar"))).then((function(){scan()}))}else{scan()}function scan(){$rootScope.$emit("loading:show",{text:t("loop.realizandoScan")});$loopScan.get(loopId).then((function(loop){resetLoop(loopId);db.lacos[loopId].dispositivos={};$scope.lacos[loopId].dispositivos=db.lacos[loopId].dispositivos;for(var id in loop){var device=loop[id];if(device.inconsistency=="novo"){saveDeviceFromLoopScan(device)}}$scope.selectLoop(loopId);$rootScope.$emit("loading:hide");$mdDialog.show($mdDialog.alert().title("Scan do Laço "+loopId).htmlContent(t("loop.cetralPossui")+" "+Object.keys(db.lacos[loopId].dispositivos).length+" "+t("loop.dispositivosNoLaco")+" "+loopId+".<br><br>"+t("loop.foramAdicionados")+".").ok("OK"))}),(function(error){$rootScope.$emit("loading:hide");var msg;if(error==0){msg=t("loop.nenhumDispositivoEncontrado")+" "+loopId+".<br><br>"+t("loop.verifiqueInstalacao")}else if(error==-4){msg=t("loop.possuiMaisQue")+" "+loopId+" "+t("loop.verifiqueInstalacao")+".<br><br>"+t("loop.verifiqueInstalacao")}else if(error==-5){msg=t("loop.lacoPossuiMaiores")+"<br><br>"+t("loop.verifiqueDispositivos")}else{msg=t("loop.falhaConexao")+"<br><br>"+t("loop.verifique")+"."}$mdDialog.show($mdDialog.alert().title(t("loop.scanLaco")+" "+loopId).htmlContent(msg).ok("OK"))}))}};$scope.loopMaxLength=14;$scope.$watch("selectedDevice.nome",(function(newValue){if(typeof newValue!=="undefined"){$scope.loopMaxLength=13;$timeout((function(){$scope.loopMaxLength=14}))}}),true);$scope.$watch("selectedDevice.habilitado",(function(newValue){//console.log("selectedDevice.habilitado",$scope.selectedDevice.habilitado);if($scope.selectedLoop==0&&$scope.selectedDevice.saida_padrao&&newValue==false){$mdDialog.show($mdDialog.alert().title(t("loop.atencao")).textContent(t("loop.naoEPossivelDesabilitar")).ok("OK"));$scope.selectedDevice.habilitado=true}}),true);$scope.$watch("selectedDevice",(function(newValue){changeController.editedConfig=newValue}),true);$scope.$watch("originalSelectedDevice",(function(newValue){changeController.originalConfig=newValue}),true);changeController.saveFn=$scope.saveDevice;changeController.viewName=t("loop.noDispositivo");$rootScope.helpUrl=function(){return"loop"+($scope.newDevice?"/deviceEdit":"")}}])})();(function(){"use strict";angular.module("app").controller("zoneController",["$scope","$rootScope","$mdDialog","$toast","$q","$filter","$timeout","$document","$window","$translateService",function($scope,$rootScope,$mdDialog,$toast,$q,$filter,$timeout,$document,$window,$translateService){var t=$translateService.translatePhrase;var loadingView="list@app.zone";$scope.form={};$scope.newZone=false;$scope.selectedZones=[];$scope.selectedZone={};$scope.selectedDevices=[];$scope.originalSelectedZone={};$scope.zonas=db.zonas;$scope.lacos=angular.copy(db.lacos);$scope.isEnabledMultipleSelection=false;$scope.enableMultipleSelection=function(state){hasChanges().then((function(){$scope.saveZone()}),(function(){if(state!=undefined)$scope.isEnabledMultipleSelection=state;else $scope.isEnabledMultipleSelection=!$scope.isEnabledMultipleSelection;$scope.cancel()}))};$scope.selectZone=function(id){var zone=db.zonas[id];hasChanges().then((function(){$scope.saveZone()}),(function(){if(!$scope.isEnabledMultipleSelection)$rootScope.setLoading(loadingView,true);$timeout((function(){select(zone)}),100)}))};$scope.onDropComplete=function(sourceZone,destinyZone){if(!$scope.form.zone.$invalid){var devicesForChange=[];for(var idLaco in $scope.lacos){devicesForChange=$filter("where")($scope.lacos[idLaco].dispositivos,{zona:sourceZone,selected:true});if(devicesForChange.length>0){$scope.selectedZone.devicesChanges=true}for(var endereco in devicesForChange){var device=devicesForChange[endereco];device.zona=destinyZone}}}};var getDevicesLength=function(){var length=0,zoneDevices=[],zoneId=0;for(var i in $scope.zonas){length=0;zoneId=$scope.zonas[i].id;zoneDevices=[];for(var idLaco in $scope.lacos){zoneDevices=$filter("where")($scope.lacos[idLaco].dispositivos,{zona:zoneId});length+=zoneDevices.length}$scope.zonas[zoneId].devicesLength=length}};$scope.loopEmpty=function(id){return document.querySelectorAll("#"+id+" .loop").length==0};$scope.listEmpty=function(id){return document.querySelectorAll("#"+id+" .item").length==0};var hasChanges=function(){var deferred=$q.defer();//console.log("equals",angular.equals($scope.selectedZone,$scope.originalSelectedZone));if(!angular.equals($scope.selectedZone,$scope.originalSelectedZone)){var confirm=$mdDialog.confirm().escapeToClose(false).title(t("zone.foramFeitasAlteracoes")).textContent(t("zone.desejaSalvar")).ok(t("zone.salvar")).cancel(t("zone.descartar"));$mdDialog.show(confirm).then((function(){deferred.resolve()}),(function(){deferred.reject()}))}else{deferred.reject()}return deferred.promise};var select=function(zone,moveScroll){if(!$scope.isEnabledMultipleSelection){zone.destinyZone=1;$scope.selectedZone=angular.copy(zone);$scope.selectedZones=[zone.id];$scope.originalSelectedZone=angular.copy(zone);//console.log("SELECT",$scope.selectedZone,$scope.originalSelectedZone);if(moveScroll){$timeout((function(){try{$window.document.getElementById("zoneList").scrollTop=(zone.id-1)*40}catch(e){}}),1e3)}$rootScope.setLoading(loadingView,false)}else{var indexZone=$scope.selectedZones.indexOf(zone.id);//console.log("indexZone",indexZone);if(indexZone==-1){$scope.selectedZones.push(zone.id)}else{$scope.selectedZones.splice(indexZone,1)}}};$scope.removeZone=function(ev){if($scope.selectedZones.length==1&&$scope.selectedZones.indexOf(1)!=-1){$mdDialog.show($mdDialog.alert().title(t("zone.falha")).textContent(t("zone.naoPermitido")).ok("OK"));return}var confirm=$mdDialog.confirm().escapeToClose(false).title(t("zone.confirmaRemocao")).textContent(t("zone.aoRemover")).targetEvent(ev).ok(t("zone.excluir")).cancel(t("zone.cancelar"));$mdDialog.show(confirm).then((function(){var zoneDevices=[];for(var i in $scope.selectedZones){var zoneId=$scope.selectedZones[i];if(zoneId!=1){for(var idLaco in db.lacos){zoneDevices=$filter("where")(db.lacos[idLaco].dispositivos,{zona:zoneId});for(var endereco in zoneDevices){var device=zoneDevices[endereco];device.zona=1}}for(var id in db.regras){var regra=db.regras[id];var itensForRemove=$filter("where")(regra.itens,{tipo:"zona",id:zoneId});if(itensForRemove.length>0){regra.itens=$filter("xor")(regra.itens,itensForRemove)}}delete db.zonas[zoneId]}}$scope.lacos=angular.copy(db.lacos);$scope.enableMultipleSelection(false);getDevicesLength();$toast.show("success",t("zone.zonasRemovidas"))}),(function(){}))};$scope.saveZone=function(){$rootScope.setLoading(loadingView,true);if($scope.form.zone.$invalid){$rootScope.setLoading(loadingView,false);return}if(!$scope.newZone){if($scope.originalSelectedZone.id!=$scope.selectedZone.id){delete $scope.zonas[$scope.originalSelectedZone.id];angular.forEach($scope.lacos,(function(laco,id){angular.forEach(laco.dispositivos,(function(dispositivo,endereco){if(dispositivo.zona==$scope.originalSelectedZone.id){dispositivo.zona=angular.copy($scope.selectedZone.id)}}))}));for(var id in db.regras){var regra=db.regras[id];var itensForRemove=$filter("where")(regra.itens,{tipo:"zona",id:$scope.originalSelectedZone.id});for(var i in itensForRemove){var item=itensForRemove[i];item.id=$scope.selectedZone.id}}}}delete $scope.selectedZone["devicesChanges"];$scope.zonas[$scope.selectedZone.id]=angular.copy($scope.selectedZone);angular.forEach($scope.lacos,(function(laco,id){angular.forEach(laco.dispositivos,(function(dispositivo,endereco){if(db.lacos[id].dispositivos[endereco].zona!=dispositivo.zona){db.lacos[id].dispositivos[endereco].zona=angular.copy(dispositivo.zona)}}))}));$scope.lacos=angular.copy(db.lacos);select($scope.zonas[$scope.selectedZone.id],$scope.newZone);getDevicesLength();if($scope.newZone){$scope.newZone=false;$toast.show("success",t("zone.zonaCriada"))}else{$toast.show("success",t("zone.alteracoesAplicadas"))}};$scope.cancel=function(){hasChanges().then((function(){$scope.saveZone()}),(function(){$scope.selectedZone={};$scope.originalSelectedZone={};$scope.newZone=false;$scope.selectedZones=[]}))};$scope.selectLoop=function(index){hasChanges((function(){$scope.selectedLoop=index;$scope.cancel()}))};$scope.createZone=function(){$scope.isEnabledMultipleSelection=false;hasChanges().then((function(){$scope.saveZone()}),(function(){if($rootScope.CONFIG.QTD_ZONAS==Object.keys($scope.zonas).length){$mdDialog.show($mdDialog.alert().title(t("zone.atencao")).textContent(t("zone.permiteNoMaximo")+" "+$rootScope.CONFIG.QTD_ZONAS+" "+t("zone.zonas")).ok("OK"));return}$scope.newZone=true;$scope.selectedZone={nome:"",habilitado:true,id:getAvailableID(),destinyZone:1};$scope.originalSelectedZone=angular.copy($scope.selectedZone);$timeout((function(){var element=$window.document.getElementById("zoneNameInput");if(element)element.focus()}),1e3)}))};var getAvailableID=function(){var zones=db.zonas;for(var index=1;index<=$rootScope.CONFIG.QTD_ZONAS;index++){if(!zones[index])break}return index};$scope.init=function(){$timeout((function(){$scope.selectZone(1)}),100);getDevicesLength()};$scope.zoneMaxLength=16;$scope.$watch("selectedZone.nome",(function(newValue){if(typeof newValue!=="undefined"){$scope.zoneMaxLength=15;$timeout((function(){$scope.zoneMaxLength=16}))}}),true);$scope.$watch("selectedZone.id",(function(newValue,oldValue){if(!newValue){return}var used=newValue in db.zonas&&$scope.selectedZone.id!=$scope.originalSelectedZone.id;if($scope.newZone&&!used){for(var idLaco in $scope.lacos){var devicesForChange=$filter("where")($scope.lacos[idLaco].dispositivos,{zona:$scope.originalSelectedZone.id});for(var endereco in devicesForChange){var device=devicesForChange[endereco];//console.log($scope.selectedZone.destinyZone);device.zona=newValue}}$scope.originalSelectedZone.id=newValue}}),true);$scope.$watch("selectedZone",(function(newValue){changeController.editedConfig=newValue}),true);$scope.$watch("originalSelectedZone",(function(newValue){changeController.originalConfig=newValue}),true);changeController.saveFn=$scope.saveZone;changeController.viewName=t("naZona");$rootScope.helpUrl=function(){return"zone"+($scope.newZone?"/zoneEdit":"")}}])})();let nodePath;if(typeof process!=="undefined"&&process.versions&&process.versions.node){nodePath=require("path")}(function(){"use strict";angular.module("app").controller("fileController",["$scope","$webSocket","$timeout","$rootScope","$toast","$mdDialog","$q","$filter","$projectService","$fileService","$mdMedia","$premise","$state","$translateService",function($scope,$webSocket,$timeout,$rootScope,$toast,$mdDialog,$q,$filter,$projectService,$fileService,$mdMedia,$premise,$state,$translateService){var t=$translateService.translatePhrase;$scope.btnOpenDisabled=false;$scope.startingProjectMode=false;$scope.selectedScreen=$filter("isEmpty")($rootScope.centralModel)?"newFile":"transmission";$scope.newFileModel={option:$rootScope.lastSelectedCentralModelOption||Object.keys($rootScope.CONFIG.modelos_centrais)[1]};$scope.project={model:"0",todasInterligadas:"true",quantidade:"0",comandos:{alarme_geral:true,reiniciar_central:true,silenciar_central:true,silenciar_sirene:true,sirene_brigada:true}};$scope.timeoutSendConfig=undefined;$scope.timeoutGetConfig=undefined;$scope.createProject=function(){resetProjectMode();$rootScope.projectMode=true;$rootScope.centralModel=$rootScope.CONFIG.modelos_centrais[$scope.newFileModel.option];$rootScope.file="";$projectService.createProject($scope.project).then((function(res){$toast.show("success",t("file.novoProjetoCriado"));$state.go("app.interconnection")}),(function(){//console.log("error",res)}))};if($rootScope.isCIEConnected){$scope.newFileModel.option=$rootScope.connectedCentralModel.id}var resetProjectMode=function(){$rootScope.projectMode=false;$scope.startingProjectMode=false;$rootScope.selectedCentralAddress=undefined;$rootScope.projectCentralTransition=false;$rootScope.centralSummary=[];projectDb={};originalProjectDb={};dbTransitory={}};var waitingSaveToSend=false;var saveWithInconsistency=false;$scope.openFileDialog=function(id){//console.log("openFileDialog",id);document.getElementById(id).click()};$scope.newFile=function(){hasChanges().then((function(){//console.log("$scope.centralOption",$scope.newFileModel.option);if($scope.newFileModel.option==="PROJECT"){$scope.startingProjectMode=true;$webSocket.send("generate_cert")}else{resetProjectMode();$rootScope.centralModel=$rootScope.CONFIG.modelos_centrais[$scope.newFileModel.option];if($rootScope.centralModel.isGateway){$rootScope.menuSystem=true}$rootScope.setFirmwareUploadPath($rootScope.centralModel);$rootScope.file="";//console.log("$rootScope.centralModel",$rootScope.centralModel);$fileService.load().then((function(res){res.lacos=res.lacos.splice(0,$rootScope.centralModel.QTD_LACOS+1);db=res;db.sistema.modelo_central=$rootScope.centralModel.id;originalDb=angular.copy(db);$toast.show("success",t("file.novaConfiguragao")+" - "+t($rootScope.centralModel.nome))}),(function(){//console.log("error",res)}))}}))};$scope.newFileByCentral=function(model){hasChanges().then((function(){$rootScope.isCompatibleVersion().then((()=>{$rootScope.centralModel=angular.copy($rootScope.connectedCentralModel);$rootScope.file="";$scope.fileAction("get_configuration");$rootScope.menuSystem=true}))}))};$scope.getConfiguration=function(model){$rootScope.isCompatibleVersion().then((()=>{$scope.fileAction("get_configuration");$rootScope.menuSystem=true}))};$scope.openFile=function(model){$scope.btnOpenDisabled=true;hasChanges().then((function(){$scope.openFileDialog("open_file")})).finally((function(){$scope.btnOpenDisabled=false}))};var errors={1:{message:"file.mensagem1",soluction:"file.solucao1"},2:{message:"file.mensagem2",soluction:"file.solucao2"},3:{message:"file.mensagem3",soluction:"file.solucao3"},4:{message:"file.mensagem4",soluction:"file.solucao4"},5:{message:"file.mensagem5",soluction:"file.solucao5"},6:{message:"file.mensagem6",soluction:"file.solucao6"},7:{message:"file.mensagem7",soluction:"file.solucao7"},8:{message:"file.mensagem8",soluction:"file.solucao8"}};function showMessageWarningToSend(error){var e=errors[error.error];var itens=error.items.join().replace(/,/g,"<br>");return new Promise((function(resolve,reject){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("file.atencao")).htmlContent(""+t(e.message)+"<br><br>"+"<b>"+itens+"</b><br><br>"+t(e.soluction)+"<br>"+"<b>").ok("Continuar").cancel("Cancelar")).then((function(){try{//console.log("showMessageWarningToSend",error);for(var idxC=0;idxC<Object.keys(error.configurationsToChange).length;idxC++){var configName=Object.keys(error.configurationsToChange)[idxC];for(var idxConfig=0;idxConfig<error.configurationsToChange[configName].length;idxConfig++){var config=error.configurationsToChange[configName][idxConfig];_.set(db,config.path,config.value)}}resolve()}catch(e){console.error(e);resolve()}}),(function(){reject()}))}))}function showMessageValidateToSend(error){var e=errors[error.error];var itens=error.items.join().replace(/,/g,"<br>");$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("file.inconsistenciaProgramacao")).htmlContent(""+t(e.message)+"<br><br>"+"<b>"+itens+"</b><br><br>"+t(e.soluction)+"<br>"+"<b>"+t("file.necessarioAjustar")+"</b>").ok("OK"))}function showMessageValidateToSave(error){var e=errors[error.error];var itens=error.items.join().replace(/,/g,"<br>");var title=$rootScope.projectMode?t("file.inconsistenciaProgramacaoCentral")+" "+db.sistema.endereco+"!":t("file.inconsistenciaProgramacao");return $mdDialog.show($mdDialog.confirm().escapeToClose(false).title(title).htmlContent(""+t(e.message)+"<br><br>"+"<b>"+itens+"</b><br><br>"+t(e.soluction)+"<br>"+"<b>"+t("file.recomedadoAjustar")+"</b>").ok(t("file.salvarInconsistencia")).cancel(t("file.cancelar")))}function compareModel(){if(!angular.equals(db,originalDb)||!$filter("isEmpty")($rootScope.centralModel)&&$rootScope.file==""){$mdDialog.show({controller:function($scope,$mdDialog){$scope.closeDialog=function(){$mdDialog.hide()};$scope.saveAndSend=function(){saveAndSend()};$scope.send=function(){sendConfig(true)}},escapeToClose:false,templateUrl:"file/send-question-dialog.html"})}else{sendConfig(true)}}$rootScope.cleanPath=(action,path)=>{const dir=nodePath.dirname(path||$rootScope.file);const extension=action==="save_project_file"?".cieproj":action==="save_log_file"?".cielog":".cie";const fileObj=nodePath.parse(path||$rootScope.file);let fileName=fileObj.base.replace(/\.[^.]+(?!(\.cie|\.cieproj|\.cielog))/gi,"");const full=nodePath.join(dir,fileName+extension);return full};$scope.fileAction=function(action,path){//console.log(action,path);switch(action){case"open_file":$rootScope.setLoading("rootContent@app",true,true);document.getElementById(action).value="";resetProjectMode();$fileService.openFile(path).then((function(data){if(data.config.centrais){$projectService.updateSummary();$state.go("app.interconnection")}else{$state.go("app.file")}}),(function(reason){$rootScope.setLoading("rootContent@app",false)}));break;case"save_project_file":var saveContinue=function(){if(!path&&$rootScope.file==""){$scope.openFileDialog("save_project_file")}else{var data={path:$rootScope.cleanPath(action,path||$rootScope.file),config:angular.copy(projectDb),replace:true};if(!waitingSaveToSend)$rootScope.$emit("loading:show",{text:t("file.salvando")});$webSocket.send("save_file",data);if(!$rootScope.file)$rootScope.file=$rootScope.cleanPath(action,path||$rootScope.file)}document.getElementById(action).value=""};if(waitingSaveToSend||saveWithInconsistency){saveContinue();return}var index=0;var next=function(){if(index<projectDb.centrais.length-1){index++;validate()}else{saveContinue()}};$rootScope.selectedCentralAddress=undefined;var validate=function(){db=projectDb.centrais[index];$premise.configurationValidade().then((function(){next()}),(function(error){showMessageValidateToSave(error).then((function(){saveContinue();saveWithInconsistency=true}))}))};validate();break;case"save_file":var saveContinue=function(){if(!path&&$rootScope.file==""){$scope.openFileDialog("save_file")}else{var data={path:path||$rootScope.file,config:angular.copy(db),replace:true};if(!waitingSaveToSend)$rootScope.$emit("loading:show",{text:t("file.salvando")});$webSocket.send("save_file",data);if(!$rootScope.file)$rootScope.file=path}document.getElementById(action).value=""};if(waitingSaveToSend||saveWithInconsistency){saveContinue();return}$premise.configurationValidade().then((function(){saveContinue()}),(function(error){showMessageValidateToSave(error).then((function(){saveContinue();saveWithInconsistency=true}))}));break;case"save_file_replace":$rootScope.$emit("loading:show",{text:t("file.salvando")});$webSocket.send("save_file",{path:$rootScope.cleanPath(action,$rootScope.file),replace:true,config:db});break;case"send_configuration":$premise.configurationValidade().then((function(){if($rootScope.centralModel.id!=$rootScope.connectedCentralModel.id){$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("file.atencao")).htmlContent("<b>"+t("file.naoPossivelReceber")+"</b><br><br>"+t("file.centralConectada")+" <b>"+t($rootScope.centralModel.nome)+"</b><br>"+t("file.centralConfigurada")+" <b>"+t($rootScope.connectedCentralModel.nome)+"</b>").ok("OK"))}else{$rootScope.isCompatibleVersion().then((()=>{$premise.verifyBreakChanges().then((function(){compareModel()}),(function(error){showMessageWarningToSend(error).then((function(){compareModel()}))}))}))}}),(function(error){showMessageValidateToSend(error)}));break;case"get_configuration":var get=function(){$rootScope.$emit("loading:show",{text:t("file.recebendoProgramacoes")});getConfig()};if($rootScope.centralModel.id!=$rootScope.connectedCentralModel.id){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("file.atencao")).htmlContent(t("file.modeloCentralDiferente")+"<br><br>"+"<b>"+t("file.desejaContinuar")+"</b><br>").ok(t("file.sim")).cancel(t("file.cancelar"))).then((function(){get()}))}else if($rootScope.file!=""){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("file.atencao")).htmlContent(t("file.aoReceberConfiguracao")+"<br><br>"+"<b>"+t("file.desejaContinuar")+"</b><br>").ok(t("file.sim")).cancel(t("file.cancelar"))).then((function(){get()}))}else{get()}break}};function saveAndSend(){waitingSaveToSend=true;$scope.fileAction("save_file")}$scope.saveAs=function(){$rootScope.file="";$scope.openFileDialog("save_file")};$scope.saveAsProject=function(){$rootScope.file="";$scope.openFileDialog("save_project_file")};$webSocket.get().$on("block",(function(data){//console.log("WS block",data);if(data.success&&$rootScope.isCIEConnected==true){$toast.show("success",t("file.centralDesconectada"));//console.log("central bloqueada")}$rootScope.$emit("loading:hide",300)}));$webSocket.get().$on("central_restart",(function(data){//console.log("WS central_restart",data);$timeout((function(){$rootScope.$emit("loading:hide",300);if(data.success&&$rootScope.isCIEConnected==true){$toast.show("success",t("file.configuracaoEnviadaCentralReiniciada"))}}),2e4)}));$webSocket.get().$on("save_file",(function(data){//console.log("WS save_file",data);if(data.type=="success"){originalDb=angular.copy(db);if($rootScope.projectMode){originalProjectDb=projectDb}$toast.show("success",t("file.salvoSucesso"));if(waitingSaveToSend){$scope.fileAction("send_configuration");waitingSaveToSend=false}else{$rootScope.$emit("loading:hide",500)}saveWithInconsistency=false}else if(data.type=="write_err"){$rootScope.file=""}else if(data.type=="exist"){$rootScope.$emit("loading:hide");var dialog=$mdDialog.confirm().escapeToClose(false).title(t("file.arquivoJaExiste")).textContent(t("file.desejaSobrescrever")).ok(t("file.sim")).cancel(t("file.cancelar"));$mdDialog.show(dialog).then((function(){$scope.fileAction("save_file_replace")}),(function(){$scope.openFileDialog("save_file")}))}else if(data.type=="error"){}}));$webSocket.get().$on("send_configuration",(function(data){//console.log("WS send_configuration",data);if(data.success==true){$scope.inconsistency=false;$scope.diff=[];$rootScope.$emit("loading:hide");if(data.inconsistency){$scope.diff=data.config;$scope.inconsistency=true;//console.log("$scope.diff ",$scope.diff);$timeout.cancel($scope.timeoutSendConfig);return}$webSocket.send("block");$toast.show("success",t("file.configuracaoEnviadaSucesso"));$rootScope.$emit("loading:hide");$rootScope.loadingText=undefined}else{$rootScope.$emit("loading:hide");if($rootScope.connectedCentralModel.isGateway&&data.error){var certsName={root_ca:t("system.certificadoRaizServidorIntegracao"),self_ca:t("system.certificadoDoGateway"),self_ca_pk:t("system.chavePrivadaDoGateway")};$mdDialog.show($mdDialog.alert().title(t("file.falhaValidacaoCertificado")).htmlContent("<br><b>"+certsName[data.error]+"</b> "+t("file.certificadoNaoImportado")+"<br><br>"+t("file.importeETenteNovamente")).textContent(data.type).ok("OK"))}else{$mdDialog.show($mdDialog.alert().title(t("file.falha")).textContent(data.type).ok("OK"))}}$timeout.cancel($scope.timeoutSendConfig)}));$scope.diff=[];$scope.inconsistency=false;$scope.tipos=$rootScope.CONFIG.tipos;$scope.subtipos=$rootScope.CONFIG.subtipos;$webSocket.get().$on("configuration_error_on_update",(function(data){$mdDialog.show($mdDialog.alert().title(t("file.falhaComunicacao")).textContent(t("file.confiraTente")).ok("OK"))}));$webSocket.get().$on("no_inconsistency",(function(data){$rootScope.$emit("loading:show",{text:t("file.eviandoProgramacoes")})}));$webSocket.get().$on("restarting_central",(function(data){//console.log("restarting_central");$rootScope.$emit("loading:show",{text:t("file.configuracaoEnviadaCentralReiniciada")});$timeout((function(){$rootScope.$emit("loading:hide",500);$toast.show("success",t("file.configuracaoEnviadaSucesso"))}),25e3)}));$webSocket.get().$on("no_network_board",(function(){//console.log("WS no_network_board");$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("file.atencao")).htmlContent(t("file.centraoNaoPossuiPlaca")+"<br><br>"+t("file.desconfigureSistema")).ok("OK"))}));$webSocket.get().$on("get_configuration_gateway",(function(data){//console.log("data",data);$fileService.load().then((function(res){$rootScope.centralModel=angular.copy($rootScope.connectedCentralModel);res.gateway=data.config.gateway;res.sistema.pwd_prog_cie=data.config.sistema.pwd_prog_cie;const isAllNull=$scope.areAllCharactersNull(res.sistema.pwd_prog_cie);$rootScope.cannotSendGatewayConfig=isAllNull?true:false;res.sistema.rede=data.config.rede;res.sistema.modelo_central=$rootScope.centralModel.id;res.sistema.firmware=$rootScope.connectedCentralModel.version;db=res;lastSentDb=angular.copy(db);$scope.newFileModel.option=$rootScope.connectedCentralModel.id;$rootScope.$emit("loading:hide");$toast.show("success",t("file.recebidaSucesso"));$rootScope.loadingText=undefined;if($rootScope.cannotSendGatewayConfig&&$rootScope.connectedCentralModel.isGateway&&$rootScope.connectionMode=="network"){db.sistema.pwd_prog_cie="";$mdDialog.show($mdDialog.alert().title(t("file.atencao")).htmlContent(t("system.gwPasswordAlert")).ok("OK")).then((function(){$state.go("app.system",{firmware:"accessLevels"})}));return}}),(function(){$rootScope.centralModel={};$mdDialog.show($mdDialog.alert().title(t("file.falha")).textContent(data.type).ok("OK"))}));$timeout.cancel($scope.timeoutGetConfig);$scope.timeoutGetConfig=undefined}));$scope.areAllCharactersNull=inputString=>{for(let i=0;i<inputString.length;i++){if(inputString.charCodeAt(i)!==255){return false}}return true};$webSocket.get().$on("get_configuration_repeater",(function(data){//console.log("WS get_configuration_repeater",data);if(data.success===true){$rootScope.centralModel=angular.copy($rootScope.connectedCentralModel);$fileService.load().then((function(res){res.lacos=res.lacos.splice(0,$rootScope.centralModel.QTD_LACOS+1);db=res;db.sistema.firmware=$rootScope.connectedCentralModel.version;db.sistema.local_instalacao=data.config.local_instalacao;db.sistema.senha_2=data.config.senha_2;db.sistema.senha_3=data.config.senha_3;db.sistema.senha_4=data.config.senha_4;db.sistema.retardo=data.config.retardo;db.sistema.repetidora=data.config.repetidora;originalDb=angular.copy(db);lastSentDb=angular.copy(originalDb);$rootScope.$emit("loading:hide");$toast.show("success",t("file.recebidaSucesso"))}),(function(){$rootScope.centralModel={};$mdDialog.show($mdDialog.alert().title(t("file.falha")).textContent(data.type).ok("OK"))}))}else if(data.type=="err"){$rootScope.centralModel={};$mdDialog.show($mdDialog.alert().title(t("file.falha")).textContent(data.type).ok("OK"))}}));$webSocket.get().$on("get_configuration",(function(data){//console.log("WS get_configuration",data);if(data.success==true){//console.log("get configuration success");$scope.inconsistency=false;$scope.diff=[];$rootScope.$emit("loading:hide");if(data.inconsistency){$scope.diff=data.config;$scope.inconsistency=true;//console.log("$scope.diff ",$scope.diff);return}$rootScope.centralModel=angular.copy($rootScope.connectedCentralModel);data.config.lacos=data.config.lacos.splice(0,$rootScope.centralModel.QTD_LACOS+1);$scope.newFileModel.option=$rootScope.connectedCentralModel.id;if($rootScope.projectMode){//console.log("is project mode");if(data.config.sistema.endereco_mac){var found=$projectService.getCentralByMac(data.config.sistema.endereco_mac);if(found&&parseInt(found.sistema.endereco)!==parseInt($rootScope.selectedCentralAddress)){$mdDialog.show($mdDialog.alert().multiple(true).title(t("file.atencao")).htmlContent(t("file.centralMac")+" <b>"+data.config.sistema.endereco_mac+"</b> "+t("file.jaEstaNo")+" <b>"+found.sistema.endereco+"</b>.<br>"+t("file.selecioneEssa")).ok("OK"));return}}data.config.sistema.modelo_central=$rootScope.centralModel.id;data.config.sistema.firmware=$rootScope.connectedCentralModel.version;if(parseInt(data.config.sistema.endereco)!==parseInt($rootScope.selectedCentralAddress)){$mdDialog.show({clickOutsideToClose:false,scope:$scope,preserveScope:true,escapeToClose:true,templateUrl:"shared/changeAddrFromConfig-dialog.html",controller:function DialogController($scope,$mdDialog){$scope.enderecosLivresRegistros=Array.from(Array(16).keys());$scope.formEndereco={endereco:"null"};$scope.cancel=function(){$scope.closeDialogChangeAddr()};$scope.save=function(){if(data.config.sistema.interligacao){data.config.sistema.interligacao.centrais[parseInt(data.config.sistema.endereco)-1]=0}data.config.sistema.endereco=parseInt($scope.formEndereco.endereco);$projectService.setConfiguration(data.config.sistema.endereco,data.config);$mdDialog.hide()}}})}else{data.config.sistema.endereco=parseInt($rootScope.selectedCentralAddress);$projectService.setConfiguration(data.config.sistema.endereco,data.config)}}else{db=angular.copy(data.config);db.sistema.modelo_central=$rootScope.centralModel.id;db.sistema.firmware=$rootScope.connectedCentralModel.version;//console.log("DB",db);originalDb=angular.copy(db);lastSentDb=angular.copy(originalDb);$toast.show("success",t("file.recebidaSucesso"))}}else if(data.type=="err"){$rootScope.centralModel={};$mdDialog.show($mdDialog.alert().title(t("file.falha")).textContent(data.type).ok("OK"))}else{$mdDialog.show($mdDialog.alert().title(t("file.falha")).textContent(t("global.falhaNaComunicacao")).ok("OK"))}$timeout.cancel($scope.timeoutGetConfig);$scope.timeoutGetConfig=undefined}));var hasChanges=function(){var deferred=$q.defer();if(!angular.equals(db,originalDb)||!$filter("isEmpty")($rootScope.centralModel)){var confirm=$mdDialog.confirm().escapeToClose(false).title(t("file.atencao")).textContent(t("file.aoCriarNova")).ok(t("file.sim")).cancel(t("file.nao"));$mdDialog.show(confirm).then((function(){deferred.resolve()}),(function(){deferred.reject()}))}else{deferred.resolve()}return deferred.promise};$scope.closeDialogChangeAddr=function(){$mdDialog.hide()};$scope.acceptChanges=function(){var copyDb=angular.copy(db);$scope.diff.map((function(device){if(device.inconsistency=="novo"){var newDevice={};newDevice.endereco=device.endereco;newDevice.tipo=device.tipo;newDevice.subtipo=device.tipo;newDevice.zona=1;newDevice.habilitado=true;newDevice.supervisao=false;newDevice.nome="L"+device.laco+" - D"+$filter("numberFormat")(device.endereco);db.lacos[device.laco].dispositivos[device.endereco]=angular.copy(newDevice)}else if(device.inconsistency=="tipo"){var dbDevice=db.lacos[device.laco].dispositivos[device.endereco];dbDevice.tipo=device.novoTipo;dbDevice.subtipo=device.novoTipo;dbDevice.zona=1;for(var id in db.regras){var regra=db.regras[id];var devicesOfRule=$filter("where")(regra.itens,{tipo:"dispositivo",endereco:device.endereco});if(devicesOfRule.length>0){regra.itens=$filter("xor")(regra.itens,devicesOfRule)}}}else{delete db.lacos[device.laco].dispositivos[device.endereco];for(var id in db.regras){var regra=db.regras[id];var devicesOfRule=$filter("where")(regra.itens,{tipo:"dispositivo",endereco:device.endereco});if(devicesOfRule.length>0){regra.itens=$filter("xor")(regra.itens,devicesOfRule)}}}}));//console.log("DB",db);var size=0;for(var id in db.lacos){size+=Object.keys(db.lacos[id].dispositivos).length}if(size==0){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("file.configuracaoInvalida")).htmlContent("<b>"+t("file.naoFoiPossivelEnviar")+"</b><br><br>"+t("file.dispositivosNaoExistem")+"<br>"+t("file.verifiqueDispositivos")).ok("OK").cancel(t("file.forcarEnvio"))).then((function(){db=angular.copy(copyDb)}),(function(){sendConfig(true)}))}else{$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("file.enviarConfiguracao")).htmlContent(t("file.todosDispositivosIconsistencia")+"<br><br>"+t("file.desejaContinuarEnvio")+"<br>").ok(t("file.sim")).cancel(t("file.cancelar"))).then((function(){sendConfig(true)}),(function(){db=angular.copy(copyDb)}))}};$scope.hide=function(){$mdDialog.hide()};$scope.cancel=function(){$scope.inconsistency=false;$scope.diff=[]};$scope.cancelProject=function(){$scope.startingProjectMode=false};function getConfig(){if($rootScope.isCIEConnected){$rootScope.sendFirmware=false;if($rootScope.connectedCentralModel.isRepeater){$webSocket.send("get_configuration_repeater")}else if($rootScope.connectedCentralModel.isGateway){$rootScope.errorWasCalled=false;$webSocket.send("get_configuration_gateway");//console.log("get configuration gateway progress...");$scope.timeoutGetConfig=$timeout((function(){$rootScope.$emit("loading:hide");$rootScope.loadingText=undefined;//console.log("get configuration gateway error");if($rootScope.isCIEConnected&&!$rootScope.errorWasCalled){$mdDialog.show($mdDialog.alert().title(t("file.falhaComunicacao")).textContent(t("file.confiraTente")).ok("OK"))}$rootScope.errorWasCalled=true}),4e4)}else if($rootScope.connectionMode==="wifi"){$fileService.load().then((function(res){$webSocket.send("get_configuration_tcp",{emptyConfig:res,model:$rootScope.connectedCentralModel.id})}));$scope.timeoutGetConfig=$timeout((function(){$rootScope.$emit("loading:hide");$rootScope.loadingText=undefined;$mdDialog.show($mdDialog.alert().title(t("file.falhaComunicacao")).textContent(t("file.confiraTente")).ok("OK"))}),12e4)}else{$webSocket.send("get_configuration");$scope.timeoutGetConfig=$timeout((function(){$rootScope.$emit("loading:hide");$rootScope.loadingText=undefined;$mdDialog.show($mdDialog.alert().title(t("file.falhaComunicacao")).textContent(t("file.confiraTente")).ok("OK"))}),12e4)}}else{$mdDialog.show($mdDialog.alert().title(t("file.falhaComunicacao")).textContent(t("file.confiraTente")).ok("OK"))}}function sendConfig(testNetworkBoard){if($rootScope.isCIEConnected){if($rootScope.connectedCentralModel.isRepeater){$rootScope.$emit("loading:show",{text:t("file.eviandoProgramacoes")});$webSocket.send("send_configuration_repeater",{config:db.sistema});lastSentDb=angular.copy(db)}else if($rootScope.connectedCentralModel.isGateway){if($rootScope.cannotSendGatewayConfig){$timeout.cancel($scope.timeoutSendConfig);$mdDialog.show($mdDialog.alert().title(t("file.falhaComunicacao")).textContent(t("system.gwSendEthernetAlert")).ok("OK"));return}$rootScope.$emit("loading:show",{text:t("file.eviandoProgramacoes")});$webSocket.send("send_configuration_gateway",{config:db});$rootScope.errorWasCalled=false;//console.log("send configuration gateway progress...");$scope.timeoutSendConfig=$timeout((function(){$rootScope.$emit("loading:hide");$rootScope.loadingText=undefined;if($rootScope.isCIEConnected&&!$rootScope.errorWasCalled){$mdDialog.show($mdDialog.alert().title(t("file.falhaComunicacao")).textContent(t("file.confiraTente")).ok("OK"))}$rootScope.errorWasCalled=true}),6e4);lastSentDb=angular.copy(db)}else if($rootScope.connectionMode==="wifi"&&$rootScope.connectedCentralModel.is1060){$rootScope.$emit("loading:show",{text:t("file.verificandoInconsistencias")});var copyDb=angular.copy(db);lastSentDb=angular.copy(db);$webSocket.send("send_configuration_tcp",{config:copyDb})}else{$rootScope.$emit("loading:show",{text:t("file.verificandoInconsistencias")});var copyDb=angular.copy(db);lastSentDb=angular.copy(db);angular.extend(copyDb.lacos[0].dispositivos,$rootScope.CONFIG.eventos);angular.extend(copyDb.lacos[0].dispositivos,$rootScope.CONFIG.interligacao);$webSocket.send("send_configuration",{config:copyDb,testNetworkBoard:testNetworkBoard});$scope.timeoutSendConfig=$timeout((function(){$rootScope.$emit("loading:hide");$mdDialog.show($mdDialog.alert().title(t("file.falhaComunicacao")).textContent(t("file.confiraTente")).ok("OK"))}),12e4)}}else{$mdDialog.show($mdDialog.alert().title(t("file.falhaComunicacao")).textContent(t("file.confiraTente")).ok("OK"))}}$scope.$watch("newFileModel.option",(function(newVal){if(newVal){$rootScope.lastSelectedCentralModelOption=newVal;if(newVal==="CIE1060"&&!$rootScope.isCIEConnected){$rootScope.changeConnectionMode("wifi")}}}));$rootScope.$watch("connectedCentralModel.id",(function(newVal){if(newVal&&!$rootScope.isCIEConnected){if(!$rootScope.connectedCentralModel.online){$scope.newFileModel.option=$rootScope.connectedCentralModel.id}}}));$rootScope.helpUrl=function(){return"file/"+$scope.selectedScreen}}])})();(function(){"use strict";angular.module("app").controller("ruleController",["$scope","$rootScope","$mdDialog","$toast","$q","$filter","$timeout","$window","$translateService",function($scope,$rootScope,$mdDialog,$toast,$q,$filter,$timeout,$window,$translateService){var t=$translateService.translatePhrase;var loadingView="list@app.rule";$scope.types={dispositivo:t("rule.dispositivos"),zona:t("rule.zonas"),evento:t("rule.eventos"),interligacao:t("rule.interligacao")};$scope.eventNames={1:t("config.evento-1"),2:t("config.evento-2"),14:t("config.evento-14"),15:t("config.evento-15"),5:t("config.evento-5"),6:t("config.evento-6"),7:t("config.evento-7"),9:t("config.evento-9"),25:t("config.evento-25"),26:t("config.evento-26"),27:t("config.evento-27"),28:t("config.evento-28"),29:t("config.evento-29"),30:t("config.evento-30"),31:t("config.evento-31"),32:t("config.evento-32"),33:t("config.evento-33"),34:t("config.evento-34"),35:t("config.evento-35"),36:t("config.evento-36"),37:t("config.evento-37"),38:t("config.evento-38"),39:t("config.evento-39"),40:t("config.evento-40"),41:t("config.evento-41"),42:t("config.evento-42"),43:t("config.evento-43"),44:t("config.evento-44"),45:t("config.evento-45"),46:t("config.evento-46"),47:t("config.evento-47"),48:t("config.evento-48"),49:t("config.evento-49"),50:t("config.evento-50"),51:t("config.evento-51"),52:t("config.evento-52"),53:t("config.evento-53"),54:t("config.evento-54"),55:t("config.evento-55"),56:t("config.evento-56"),57:t("config.evento-57"),58:t("config.evento-58"),59:t("config.evento-59"),60:t("config.evento-60"),61:t("config.evento-61"),62:t("config.evento-62"),63:t("config.evento-63"),64:t("config.evento-64"),65:t("config.evento-65"),66:t("config.evento-66"),67:t("config.evento-67"),68:t("config.evento-68"),69:t("config.evento-69"),70:t("config.evento-70"),71:t("config.evento-71"),72:t("config.evento-72")};$scope.selectedType="dispositivo";$scope.selectedMode="entrada";$scope.form={};$scope.newRule=false;$scope.selectedRules=[];$scope.selectedRule={};$scope.selectedDevices=[];$scope.originalSelectedRule={};$scope.regras={};$scope.zonas={};$scope.lacos=[];$scope.eventos={};$scope.interligacao={};$scope.ruleControl={entrada:{},saida:{}};$scope.tempoMaximoRetardo=db.sistema.retardo;function initRuleControl(){for(var id in $scope.regras){var rule=$scope.regras[id];["entrada","saida"].map((function(mode){//console.log("$$$$ mode",mode);$scope.ruleControl[mode][id]={dispositivo:{},zona:{},evento:{},interligacao:{}};for(var i in rule.itens){var item=rule.itens[i];if(item.modo==mode)addItemToRuleControl(mode,item.tipo,item,id)}}))}}function addItemToRuleControl(mode,type,item,id){if(!id)id=$scope.newRule?"new":$scope.originalSelectedRule.id;if(item.laco>=0){if(!$scope.ruleControl[mode][id][type][item.laco]){$scope.ruleControl[mode][id][type][item.laco]={}}$scope.ruleControl[mode][id][type][item.laco][item.endereco]=true}else{$scope.ruleControl[mode][id][type][item.id]=true}}function removeItemToRuleControl(item){var id=$scope.newRule?"new":$scope.originalSelectedRule.id;if(item.laco>=0){delete $scope.ruleControl[item.modo][id][item.tipo][item.laco][item.endereco]}else{delete $scope.ruleControl[item.modo][id][item.tipo][item.id]}}$scope.$watch("selectedRule.temporizacao",(function(newVal,oldVal){if(!newVal)return;var input=newVal+"";var numbers=input.replace(/\D+/g,"");var time="";if(numbers.length==5){time=numbers.slice(1,3)+":"+numbers.slice(3,5)}else if(numbers.length==4){time=numbers.slice(0,2)+":"+numbers.slice(2,4)}else if(numbers.length==3){time="0"+numbers.slice(0,1)+":"+numbers.slice(1,3)}else if(numbers.length==2){time="0:"+numbers.slice(0,2)}else if(numbers.length==1){time="0:0"+numbers}$scope.selectedRule.temporizacao=time}));$scope.enableMultipleSelection=function(state){hasChanges().then((function(){$scope.saveRule()}),(function(){if(state!=undefined)$scope.isEnabledMultipleSelection=state;else $scope.isEnabledMultipleSelection=!$scope.isEnabledMultipleSelection;$scope.cancel()}))};$scope.selectMode=function(mode){$scope.selectedMode=mode;angular.forEach($filter("where")($scope.selectedRule.itens,{}),(function(item){delete item.selected}))};$scope.selectType=function(type){//console.log("type",type);$scope.selectedType=type};$scope.selectRule=function(id){var rule=$scope.regras[id];hasChanges().then((function(){$scope.saveRule()}),(function(){if(!$scope.isEnabledMultipleSelection)$rootScope.setLoading(loadingView,true);$timeout((function(){select(rule)}),100)}))};$scope.removeItem=function(){var itensForRemove=[];//console.log("$scope.selectedRule",$scope.selectedRule);itensForRemove=$filter("where")($scope.selectedRule.itens,{selected:true});$scope.selectedRule.itens=$filter("xor")($scope.selectedRule.itens,itensForRemove);if(itensForRemove.length>0){$scope.selectedRule.changes=true;for(var i in itensForRemove){removeItemToRuleControl(itensForRemove[i])}}};var hasDeviceInZone=function(laco,deviceId,zoneId){return db.lacos[laco].dispositivos[deviceId].zona==zoneId};var hasItem=function(item){var params={tipo:$scope.selectedType,modo:$scope.selectedMode};if($scope.selectedType=="dispositivo"){params.endereco=item.endereco;params.laco=item.laco}else if($scope.selectedType=="evento"||$scope.selectedType=="interligacao"){params.endereco=item.endereco}else if($scope.selectedType=="zona"){params.id=item.id}var searchItems=$filter("where")($scope.selectedRule.itens,params);//console.log($scope.selectedType,item,searchItems,$scope.selectedRule.itens);return searchItems.length>0};$scope.addItem=function(){var itens=[];var selectedItens=[];//console.log("addItem",$scope.selectedRule);switch($scope.selectedType){case"dispositivo":for(var idLaco in $scope.lacos){itens=itens.concat($filter("where")($scope.lacos[idLaco].dispositivos,{selected:true}))}var ruleZones=$filter("where")($scope.selectedRule.itens,{tipo:"zona",modo:$scope.selectedMode.toLowerCase()});var devicesForRemove=[];var add=true;//console.log("itens",itens);for(var i in itens){add=true;var item=itens[i];delete item.selected;if(item.modo&&item.modo==$scope.selectedMode&&!hasItem(item)){for(var j in ruleZones){var zone=ruleZones[j];if(hasDeviceInZone(item.laco,item.endereco,zone.id)){add=false;devicesForRemove.push($filter("numberFormat")(item.endereco)+" - "+item.nome+" ("+db.zonas[zone.id].nome+")")}}if(add){$scope.selectedRule.itens.push({tipo:"dispositivo",endereco:item.endereco,laco:item.laco,modo:$scope.selectedMode,selected:true});addItemToRuleControl($scope.selectedMode,"dispositivo",item)}}}if(devicesForRemove.length>0){var text=t("rule.dispositivosNaoPodem")+":<br><br><b>"+devicesForRemove.join().replace(/,/g,"<br>")+"</b><br>";$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("rule.adicionarDispositivo")).htmlContent(text).ok("OK"))}break;case"zona":itens=$filter("where")($scope.zonas,{selected:true});var ruleDevices=$filter("where")($scope.selectedRule.itens,{tipo:"dispositivo",modo:$scope.selectedMode.toLowerCase()});for(var i in itens){var item=itens[i];delete item.selected;if(!hasItem(item)){var devicesForRemove=[];for(var j in ruleDevices){var device=ruleDevices[j];if(hasDeviceInZone(device.laco,device.endereco,item.id)){devicesForRemove.push(device)}}if(devicesForRemove.length>0){var text=t("rule.regraJaPossui")+".<br><br>"+"<b>"+t("rule.desejaContinuar")+"</b>";var confirm=$mdDialog.confirm().escapeToClose(false).title(t("rule.adicionarZona")).htmlContent(text).ok(t("rule.adicionar")).cancel(t("rule.cancelar"));$mdDialog.show(confirm).then((function(){$scope.selectedRule.itens=$filter("xor")($scope.selectedRule.itens,devicesForRemove);$scope.selectedRule.itens.push({tipo:$scope.selectedType,id:item.id,modo:$scope.selectedMode,selected:true});addItemToRuleControl($scope.selectedMode,"zona",item)}))}else{$scope.selectedRule.itens=$filter("xor")($scope.selectedRule.itens,devicesForRemove);$scope.selectedRule.itens.push({tipo:$scope.selectedType,id:item.id,modo:$scope.selectedMode,selected:true});addItemToRuleControl($scope.selectedMode,"zona",item)}}}break;case"evento":itens=$filter("where")($scope.eventos,{selected:true});//console.log("itens",itens);for(var i in itens){var item=itens[i];delete item.selected;if(!hasItem(item)){$scope.selectedRule.itens.push({tipo:$scope.selectedType,endereco:item.endereco,modo:$scope.selectedMode,laco:0,selected:true});addItemToRuleControl($scope.selectedMode,"evento",item)}}break;case"interligacao":itens=$filter("where")($scope.interligacao,{selected:true});//console.log("itens",itens);for(var i in itens){var item=itens[i];delete item.selected;if(!hasItem(item)){$scope.selectedRule.itens.push({tipo:$scope.selectedType,endereco:item.endereco,modo:$scope.selectedMode,laco:0,selected:true});addItemToRuleControl($scope.selectedMode,"interligacao",item)}}break}};$scope.hasClass=function(css){return document.querySelectorAll("."+css).length>0};$scope.loopEmpty=function(id){return document.querySelectorAll("#"+id+" .loop").length==0};$scope.deviceItensEmpty=function(id){return document.querySelectorAll("#"+id+" .device-item").length==0};var hasChanges=function(){var deferred=$q.defer();//console.log("equals",angular.equals($scope.selectedRule,$scope.originalSelectedRule));if(!angular.equals($scope.selectedRule,$scope.originalSelectedRule)){var confirm=$mdDialog.confirm().escapeToClose(false).title(t("rule.foramFeitasAlteracoes")).textContent(t("rule.desejaSalvar")).ok(t("rule.salvar")).cancel(t("rule.descartar"));$mdDialog.show(confirm).then((function(){deferred.resolve()}),(function(){deferred.reject()}))}else{deferred.reject()}return deferred.promise};var select=function(rule,moveScroll){if(!$scope.isEnabledMultipleSelection){//console.log("rule",rule);$scope.selectedRule=angular.copy(rule);$scope.selectedRules=[rule.id];$scope.originalSelectedRule=angular.copy(rule);if(moveScroll){$timeout((function(){try{$window.document.getElementById("ruleList").scrollTop=(rule.id-1)*40}catch(e){}}),1e3)}$rootScope.setLoading(loadingView,false)}else{var indexRule=$scope.selectedRules.indexOf(rule.id);//console.log("indexRule",indexRule);if(indexRule==-1){$scope.selectedRules.push(rule.id)}else{$scope.selectedRules.splice(indexRule,1)}}};$scope.removeRule=function(ev){if($scope.selectedRules.length==1&&$scope.selectedRules.indexOf(1)!=-1){$mdDialog.show($mdDialog.alert().title(t("rule.falha")).textContent(t("rule.naoPermitidoExcluir")).ok("OK"));return}var confirm=$mdDialog.confirm().escapeToClose(false).title(t("rule.confirmaRemocao")).targetEvent(ev).ok(t("rule.excluir")).cancel(t("rule.cancelar"));$mdDialog.show(confirm).then((function(){for(var i in $scope.selectedRules){if($scope.selectedRules[i]!=1){delete $scope.regras[$scope.selectedRules[i]]}}$scope.selectedRule={};$scope.selectedRules=[];$scope.originalSelectedRule={};$scope.enableMultipleSelection(false);$toast.show("success",t("rule.regrasRemovidas"))}),(function(){}))};$scope.saveRule=function(){var next=function(){var items=[];var modes={entrada:t("rule.entrada"),saida:t("rule.saida")};["entrada","saida"].forEach((function(mode){var devicesOfRule=$filter("where")($scope.selectedRule.itens,{modo:mode,tipo:"dispositivo"});for(var deviceItemId in devicesOfRule){var deviceItem=devicesOfRule[deviceItemId];var device=db.lacos[deviceItem.laco].dispositivos[deviceItem.endereco];var deviceMode=$rootScope.CONFIG.subtipos[device.subtipo].modo;if(mode!=deviceMode){items.push(t("rule.oDispositivo")+" "+$filter("numberFormat")(device.endereco)+" - "+device.nome+" ("+t("rule.laco")+" "+deviceItem.laco+") "+t("rule.estaDefinido")+" "+modes[mode].toUpperCase()+" "+t("rule.masDispositico")+" "+$rootScope.CONFIG.subtipos[device.subtipo].modo.toUpperCase()+".")}}}));if(items.length>0){$rootScope.setLoading(loadingView,false);$mdDialog.show($mdDialog.alert().title(t("rule.atencao")).htmlContent(t("rule.regraPossui")+":<br><b>"+items.join().replace(/,/g,"<br>")+"</b><br><br>"+t("rule.ajusteAConfiguracap")).ok("OK"));return}var supervisionRule=true;var inputItens=[];if($scope.selectedRule!=1&&$filter("where")($scope.selectedRule.itens,{modo:"saida"}).length==0){inputItens=$filter("where")($scope.selectedRule.itens,{modo:"entrada"});for(var inputItemId in inputItens){var item=inputItens[inputItemId];if(item.tipo=="evento"){supervisionRule=false;break}else if(item.tipo=="zona"){for(var idLaco in db.lacos){$filter("where")(db.lacos[idLaco].dispositivos,{zona:item.id}).some((function(device){if(!device.supervisao){supervisionRule=false;return}}));if(!supervisionRule)break}}else if(item.tipo=="dispositivo"){if(!db.lacos[item.laco].dispositivos[item.endereco].supervisao){supervisionRule=false;break}}}if(inputItens.length==0){supervisionRule=false}}if(!supervisionRule&&$filter("where")($scope.selectedRule.itens,{modo:"saida"}).length==0){$mdDialog.show($mdDialog.alert().title(t("rule.atencao")).textContent(t("rule.paraSalvar")).ok("OK"));$scope.selectMode("saida");$rootScope.setLoading(loadingView,false);return}if($scope.newRule){$scope.ruleControl["entrada"][$scope.selectedRule.id]=angular.copy($scope.ruleControl["entrada"]["new"]);$scope.ruleControl["saida"][$scope.selectedRule.id]=angular.copy($scope.ruleControl["saida"]["new"]);delete $scope.ruleControl["entrada"]["new"];delete $scope.ruleControl["saida"]["new"]}else{if($scope.originalSelectedRule.id!=$scope.selectedRule.id){delete $scope.regras[$scope.originalSelectedRule.id];$scope.ruleControl["entrada"][$scope.selectedRule.id]=angular.copy($scope.ruleControl["entrada"][$scope.originalSelectedRule.id]);$scope.ruleControl["saida"][$scope.selectedRule.id]=angular.copy($scope.ruleControl["saida"][$scope.originalSelectedRule.id])}}angular.forEach($scope.selectedRule.itens,(function(item){delete item.selected}));$scope.regras[$scope.selectedRule.id]=angular.copy($scope.selectedRule);select($scope.regras[$scope.selectedRule.id],$scope.newRule);if($scope.selectedRule.id===1&&db.bloqueios_locais!==undefined){db.bloqueios_locais.regraPadrao=!$scope.regras[$scope.selectedRule.id].habilitado}if($scope.newRule){$scope.newRule=false;$toast.show("success",t("rule.regraCriada"))}else{$toast.show("success",t("rule.alteracoesAplicadas"))}$rootScope.setLoading(loadingView,false)};if($scope.form.rule.$invalid){return}$rootScope.setLoading(loadingView,true);var inputItens=$filter("where")($scope.selectedRule.itens,{modo:"entrada"});if(inputItens.length==0){$rootScope.setLoading(loadingView,false);if($scope.selectedRule.alarme||$scope.selectedRule.brigada){var sentence;!$scope.selectedRule.alarme&&$scope.selectedRule.brigada&&(sentence=t("rule.acionamentoBrigada"));$scope.selectedRule.alarme&&!$scope.selectedRule.brigada&&(sentence=t("rule.acionemantoAlarmeGeral"));$scope.selectedRule.alarme&&$scope.selectedRule.brigada&&(sentence=t("rule.acionemantoAlarmeGeral"));var confirm=$mdDialog.confirm().escapeToClose(false).title(t("rule.atencao")).htmlContent(t("rule.regraNaoPossui")+"<br>"+sentence+".<br><br>"+t("rule.desejaContinuar")).ok(t("rule.sim")).cancel(t("rule.cancelar"));$mdDialog.show(confirm).then((function(){next()}))}else{$mdDialog.show($mdDialog.alert().title(t("rule.atencao")).htmlContent(t("rule.paraSalvarItemEntrada")).ok("OK"));$scope.selectMode("entrada")}}else if($scope.selectedRule.condicao_entrada=="dupla"&&inputItens.length<2){var qtyInputDevices=0;for(var inputItemId in inputItens){var item=inputItens[inputItemId];if(item.tipo=="zona"){for(var idLaco in db.lacos){$filter("where")(db.lacos[idLaco].dispositivos,{zona:item.id}).some((function(device){var deviceMode=$rootScope.CONFIG.subtipos[device.subtipo].modo;if(deviceMode=="entrada"){qtyInputDevices++}}))}}}if(qtyInputDevices<2){$rootScope.setLoading(loadingView,false);$mdDialog.show($mdDialog.alert().title(t("rule.atencao")).htmlContent(t("rule.regraPrecisaDois")).ok("OK"));$scope.selectMode("entrada");return}else{next()}}else{next()}};$scope.cancel=function(){hasChanges().then((function(){$scope.saveRule()}),(function(){$scope.selectedRule={};$scope.originalSelectedRule={};$scope.newRule=false;$scope.selectedRules=[]}))};$scope.selectLoop=function(index){hasChanges().then((function(){$scope.saveRule()}),(function(){$scope.selectedLoop=index;$scope.cancel()}))};$scope.createRulePopupType=function(evt){hasChanges().then((function(){$scope.saveRule()}),(function(){if($rootScope.centralModel.QTD_REGRAS==Object.keys($scope.regras).length){$mdDialog.show($mdDialog.alert().title(t("rule.atencao")).textContent(t("rule.sistemaPermite")+" "+$rootScope.CENTRAL.QTD_REGRAS+" "+t("rule.regras")+".").ok("OK"));return}}))};$scope.createRule=function(){if($rootScope.centralModel.is1060){$mdDialog.show($mdDialog.alert().title(t("rule.atencao")).textContent(t("rule.nesseModeloNaoPermitidoCriarRegra")).ok("OK"));return}$scope.isEnabledMultipleSelection=false;$scope.selectedRule={nome:"",habilitado:true,id:getAvailableID(),tipo_regra:"sinalizacao",condicao_entrada:"unica",ativacao_saida:"imediata",brigada:false,alarme:true,temporizacao:"00:00",cancelavel:false,itens:[]};if($scope.selectedRule.tipo_regra=="sinalizacao"){$scope.selectedRule.alarme=true;$scope.selectedRule.brigada=false}else{$scope.selectedRule.alarme=false;$scope.selectedRule.brigada=false}$scope.newRule=true;$scope.originalSelectedRule=angular.copy($scope.selectedRule);$scope.selectedType="dispositivo";$scope.selectedMode="entrada";["entrada","saida"].map((function(mode){$scope.ruleControl[mode]["new"]={dispositivo:{},zona:{},evento:{},interligacao:{}}}));$timeout((function(){var element=$window.document.getElementById("ruleNameInput");if(element)element.focus()}),1e3)};var getAvailableID=function(){var rules=db.regras;for(var index=1;index<=$rootScope.CONFIG.QTD_REGRAS;index++){if(!rules[index])break}return index};$scope.init=function(){if(parseInt(db.sistema.endereco)!==0){$scope.interligacao=angular.copy($rootScope.CONFIG.interligacao)}var enderecoCentralInterligacao=parseInt(db.sistema.endereco);for(var evInterligacao in $scope.interligacao){var central=parseInt((parseInt(evInterligacao)-25)/3);if(db.sistema.interligacao&&(!db.sistema.interligacao.centrais[central]||enderecoCentralInterligacao-1===central)){delete $scope.interligacao[evInterligacao]}}$scope.regras=db.regras;$scope.zonas=angular.copy(db.zonas);$scope.lacos=angular.copy(db.lacos);$scope.eventos=angular.copy($rootScope.CONFIG.eventos);delete $scope.eventos["14"];delete $scope.eventos["15"];if($rootScope.centralModel.QTD_LACOS==1){delete $scope.eventos["2"]}initRuleControl();$scope.selectRule(1)};$scope.addMode=function(item){item.modo=$rootScope.CONFIG.subtipos[item.subtipo].modo=="entrada"?"entrada":"saida";return item};$scope.addLaco=function(item,laco){item.laco=laco;return item};$scope.isDisabled=function(type,item){if(type=="dispositivo")return item.laco>0&&$scope.lacos[item.laco].dispositivos[item.endereco].habilitado==false;if(type=="zona")return $scope.zonas[item.id].habilitado==false;return false};$scope.changeAlarmeButton=function(){if($scope.selectedRule.alarme==false){var confirm=$mdDialog.confirm().escapeToClose(false).title(t("rule.atencao")).htmlContent(t("rule.seraoAcionandos")+".<br><br>"+t("rule.desejaContinuar")).ok(t("rule.sim")).cancel(t("rule.cancelar"));$mdDialog.show(confirm).then((function(){}),(function(){$scope.selectedRule.alarme=true}))}};$scope.changeAtivacaoSaida=function(){if($scope.selectedRule.brigada==true&&$scope.selectedRule.ativacao_saida=="imediata"){var confirm=$mdDialog.confirm().escapeToClose(false).title(t("rule.atencao")).htmlContent(t("rule.exclusaoTemporizacao")+".<br><br>"+t("rule.desejaContinuar")).ok(t("rule.sim")).cancel(t("rule.cancelar"));$mdDialog.show(confirm).then((function(){$scope.selectedRule.brigada=false}),(function(){$scope.selectedRule.ativacao_saida="temporizada";$scope.selectedRule.brigada=true}))}};$scope.changeBrigadaButton=function(){if($scope.selectedRule.brigada==true&&$scope.selectedRule.ativacao_saida=="imediata"){var confirm=$mdDialog.confirm().escapeToClose(false).title(t("rule.atencao")).htmlContent(t("rule.necessarioDefinir")+".<br><br>"+t("rule.desejaContinuar")).ok(t("rule.sim")).cancel(t("rule.cancelar"));$mdDialog.show(confirm).then((function(){$scope.selectedRule.ativacao_saida="temporizada";$timeout((function(){var element=$window.document.getElementById("inputTemporizacao");if(element)element.focus()}),1e3)}),(function(){$scope.selectedRule.brigada=false}))}};$scope.ruleMaxLength=14;$scope.$watch("selectedRule.nome",(function(newValue){if(typeof newValue!=="undefined"){$scope.ruleMaxLength=13;$timeout((function(){$scope.ruleMaxLength=14}))}}),true);$scope.$watch("selectedRule",(function(newValue){changeController.editedConfig=newValue}),true);$scope.$watch("originalSelectedRule",(function(newValue){changeController.originalConfig=newValue}),true);changeController.saveFn=$scope.saveRule;changeController.viewName=t("rule.naRegra");$rootScope.helpUrl=function(){return"rule"+($scope.newRule?"/ruleEdit":"")}}])})();(function(){"use strict";angular.module("app").controller("projectController",["$scope","$webSocket","$timeout","$rootScope","$toast","$mdDialog","$q","$filter","$fileService","$projectService","$mdToast","$interval","$udpAuthService","$remoteControlService","$translateService",function($scope,$webSocket,$timeout,$rootScope,$toast,$mdDialog,$q,$filter,$fileService,$projectService,$mdToast,$interval,$udpAuthService,$remoteControlService,$translateService){var t=$translateService.translatePhrase;db={};originalDb={};var dialogNewCentral;var dialogChangeModel;$scope.selectedTab="centrals";$rootScope.centralModel=$rootScope.CONFIG.modelos_centrais["PROJECT"];$rootScope.projectMode=true;$scope.selectTab=function(tab){$scope.selectedTab=tab;if(tab==="interconnections"){getInterconnections()}if(tab==="globals"){getGlobals()}};$scope.centrais=projectDb.centrais;$scope.centralOrigin=undefined;$scope.copyMode=false;$scope.newCentralByCopy=false;$scope.form={copyOption:"all"};$scope.enderecosCentraisInterligacao=$projectService.getEnderecosCentraisInterligacao();$scope.modelos=angular.copy($rootScope.centralsModels);$rootScope.selectedCentralAddress=undefined;$scope.copyOption="all";$scope.firstDiscoveryReceived=false;$scope.networkCentrals={};$scope.networkNewCentrals={};$scope.openRemote=function(centralInfo){if($rootScope.isCIEConnected){$mdDialog.show($mdDialog.alert().multiple(true).escapeToClose(false).title(t("project.atencao")).textContent(t("project.centralConectada")).ok("OK"))}else{$rootScope.setLoading("remote",true);$udpAuthService.auth({ip:centralInfo.ip,endereco:centralInfo.endereco}).then((function(token){stopDiscovery();$remoteControlService.open(centralInfo,token);var handler=$rootScope.$on("close-remote",(function(){startDiscovery()}));$scope.$on("$destroy",handler)}))}};$scope.openConnection=function(centralInfo){$udpAuthService.auth({ip:centralInfo.ip,endereco:centralInfo.endereco}).then((function(token){$rootScope.centralAddressConnection=centralInfo.endereco;$webSocket.send("udp_start_connection",{ip:centralInfo.ip,endereco:centralInfo.endereco,token:token})}))};var handlerChangeConnectionMode=$rootScope.$on("change-connectionMode",(function(event,mode){//console.log("change-connectionMode",mode);if(mode==="network"){startDiscovery()}else{stopDiscovery()}}));$scope.$on("$destroy",handlerChangeConnectionMode);$scope.discoveryLoading=false;$scope.discovery=function(){$webSocket.send("udp_assign",{getNameMac:true});$scope.discoveryLoading=true;$scope.noCentral=false};var intervalDiscovery;function startDiscovery(){if(!intervalDiscovery)intervalDiscovery=$interval((function(){//console.log("intervalDiscovery",$rootScope.connectionMode);if($rootScope.connectionMode==="network"&&!$scope.discoveryLoading){$scope.discovery()}}),7e3);if($rootScope.connectionMode==="network"&&!$scope.discoveryLoading){$scope.discovery()}}function stopDiscovery(){//console.log("stopDiscovery");$scope.stoppedDiscovery=true;$scope.networkCentrals={};$scope.networkNewCentrals={};$interval.cancel(intervalDiscovery);intervalDiscovery=undefined}startDiscovery();$scope.$on("$destroy",(function(){//console.log("destroy");stopDiscovery()}));$webSocket.get().$on("udp_descobrir",(function(data){//console.log("WS udp_descobrir",data);$scope.discoveryLoading=false;//console.log(data);if(data){$scope.stoppedDiscovery=false;$scope.networkNewCentrals={};for(var dataIdx in data){var centralDiscoveryData=data[dataIdx];var centralDiscovery=undefined;for(var dbIdx in $scope.centrais){var centralDb=$scope.centrais[dbIdx];if(centralDb.sistema.endereco_mac&&centralDiscoveryData.mac===centralDb.sistema.endereco_mac){centralDiscovery=centralDiscoveryData;break}}//console.log("centralDiscovery",centralDiscovery);if(centralDiscovery){if(!$scope.networkCentrals[centralDb.sistema.endereco])$scope.networkCentrals[centralDb.sistema.endereco]={};$scope.networkCentrals[centralDb.sistema.endereco]=centralDiscovery}else{if($scope.networkCentrals[centralDiscoveryData.endereco])delete $scope.networkCentrals[centralDiscoveryData.endereco];if(!$scope.networkNewCentrals[centralDiscoveryData.endereco])$scope.networkNewCentrals[centralDiscoveryData.endereco]={};$scope.networkNewCentrals[centralDiscoveryData.endereco]=centralDiscoveryData}}if(data.length===0){$scope.noCentral=true;$scope.networkCentrals={}}}$scope.lastDiscoveryTime=new Date;//console.log($scope.centrais);$scope.firstDiscoveryReceived=true;$timeout((function(){$scope.$apply()}),100);//console.log("$scope.networkNewCentrals",$scope.networkNewCentrals)}));$scope.openCentralConfig=function(central){$projectService.selectCentral(central,"app.file")};$scope.startNewCentralByCopy=function(){$scope.newCentralByCopy=true};$scope.startNewCentral=function(){dialogNewCentral=$mdDialog.show({clickOutsideToClose:false,scope:$scope,preserveScope:true,escapeToClose:true,templateUrl:"project/newcentral-dialog.html",controller:function DialogController($scope){$scope.formNew={option:"new",modelo:"null",endereco:"null",selectedCentralFromNetwork:"null"};$scope.cancel=function(){$scope.closeNewCentral()};$scope.openFileDialog=function(){document.getElementById("file_import").click()};$scope.fileAction=function(action,path){$scope.formNew.path=path;$rootScope.$apply()};$scope.save=function(){if($scope.formNew.option==="import"){$rootScope.setLoading("rootContent@app",true,true);$fileService.openFile($scope.formNew.path).then((function(data){if(!data.config.centrais){data.config.sistema.endereco=parseInt($scope.formNew.endereco);$projectService.newCentralByConfig(data.config);$scope.closeNewCentral();$toast.show("success",t("project.novaCentralImportada"));$scope.centralBlink=parseInt(data.config.sistema.endereco)}else{$toast.show("error",t("project.arquivoInvalido"))}}),(function(){$rootScope.setLoading("rootContent@app",false);$toast.show("error",t("project.arquivoInvalido"))}))}else if($scope.formNew.option==="network"){var centralNetwork=$scope.networkNewCentrals[$scope.formNew.selectedCentralFromNetwork];//console.log("$scope.networkNewCentrals",$scope.networkNewCentrals,$scope.formNew.selectedCentralFromNetwork);$projectService.removeCentral(centralNetwork.endereco).then((function(){$projectService.newCentral("all",centralNetwork.endereco,undefined,{modelo:centralNetwork.modelo,nome:centralNetwork.nome,mac:centralNetwork.mac}).then((function(){$scope.centralBlink=parseInt($scope.formNew.endereco);$scope.closeNewCentral();$toast.show("success",t("project.centralCriada"));$scope.centralBlink=parseInt(centralNetwork.endereco);stopDiscovery();startDiscovery()}))}))}else{$projectService.newCentral("all",$scope.formNew.endereco,undefined,{modelo:$scope.formNew.modelo}).then((function(){$scope.centralBlink=parseInt($scope.formNew.endereco);$scope.closeNewCentral();$toast.show("success",t("project.centralCriada"))}))}}}})};$scope.closeNewCentral=function(){$mdDialog.hide();dialogNewCentral=undefined;$scope.cancelNewCentral()};$scope.removeCentral=function(central){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("project.removerCentralProjeto")).htmlContent("<br><br>"+t("project.confirmaRemocao")+" "+central.sistema.endereco+" "+t("project.doProjeto")+".<br><br>").ok(t("project.remover")).cancel(t("project.cancelar"))).then((function(){return $projectService.removeCentral(parseInt(central.sistema.endereco))}),(function(){})).then((function(){$scope.centrais=projectDb.centrais;resetState();$toast.show("success",t("project.removidoSucesso"))}))};$scope.changeModel=function(central){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("project.alterarModelo")).htmlContent("<br>"+t("project.aoAlterar")+"<br><br>"+t("project.desejaContinuar")+"<br><br>").ok(t("project.sim")).cancel(t("project.cancelar"))).then((function(){dialogChangeModel=$mdDialog.show({clickOutsideToClose:false,scope:$scope,preserveScope:true,escapeToClose:true,templateUrl:"project/changeModel-dialog.html",controller:function DialogController($scope){$scope.formModel={modelo:"null"};$scope.cancel=function(){$scope.closeDialogChangeModel()};$scope.save=function(){$projectService.changeModel(central.sistema.endereco,$scope.formModel.modelo);$scope.centralBlink=parseInt(central.sistema.endereco);$scope.closeDialogChangeModel();$toast.show("success",t("project.modeloSucesso"))}}})}))};$scope.closeDialogChangeModel=function(){$mdDialog.hide();dialogChangeModel=undefined;resetState()};$scope.paste=function(centralDestination){$projectService.pasteCentral($scope.form.copyOption,centralDestination,$scope.centralOrigin).then((function(){resetState();$toast.show("success",t("project.copiadoSucesso"));$scope.centralBlink=parseInt(centralDestination)}))};$scope.new=function(){$projectService.newCentral($scope.form.copyOption,$scope.form.endereco,$scope.centralOrigin).then((function(){$scope.centralBlink=parseInt($scope.form.endereco);resetState();$toast.show("success",t("project.centralCriada"))}))};$scope.copy=function(central){$scope.copyMode=true;$scope.centralOrigin=central.sistema.endereco};$scope.cancelNewCentral=function(){resetState()};$scope.cancelCopy=function(){resetState()};var originatorEv;$scope.openMenu=function($mdMenu,ev){originatorEv=ev;$mdMenu.open(ev)};var resetState=function(){$scope.newCentralByCopy=false;$scope.copyMode=false;$scope.centrais=projectDb.centrais;$scope.form={copyOption:"all"};$scope.centralOrigin=undefined;$scope.enderecosCentraisInterligacao=$projectService.getEnderecosCentraisInterligacao();$scope.interconnection=[];$timeout((function(){$scope.centralBlink=undefined}),3e3)};$scope.graphOptions={height:"70%",physics:{solver:"repulsion"},nodes:{color:"#37af2c"},edges:{color:"#2c3d47"}};$scope.visualization={option:"table"};$scope.interconnections=[];$scope.graphData={};var tipos={0:"alarme",1:"falha",2:"supervisao"};var dataGraphGenerate=function(){var nodes=[];var edges=[];//console.log($scope.interconnection);for(var row=0;row<$scope.interconnections.length;row++){for(var col=0;col<$scope.interconnections[row].length;col++){var item=$scope.interconnections[row][col];if(col===0){nodes.push({id:item.from,label:item.from+" - "+item.name,shape:"box"})}if(row===col)continue;if(item.monitora){edges.push({id:"e"+item.from+"-"+item.to,from:item.from,to:item.to,arrows:"to"})}}}$scope.graphData={edges:edges,nodes:nodes}};var getInterconnectionsRules=function(regras,centralDestino){var interconnectionRules={supervisao:false,falha:false,alarme:false};for(var regraInterator in regras){var regra=regras[regraInterator];$filter("where")(regra.itens,{tipo:"interligacao"}).some((function(item){var central=parseInt((parseInt(item.endereco)-25)/3);var tipo=parseInt((parseInt(item.endereco)-25)%3);if(centralDestino===central){interconnectionRules[tipos[tipo]]=true}}))}return interconnectionRules};var getInterconnections=function(){if($scope.interconnections.length)return;$rootScope.setLoading("interconnections@app.project",true);$timeout((function(){$scope.interconnections=[];for(var fromInterator in $scope.centrais){var from=$scope.centrais[fromInterator];var row=[];var interligacao=from.sistema.interligacao.centrais;var regras=from.regras;for(var toInterator in $scope.centrais){var to=$scope.centrais[toInterator];var regrasInterligacao=getInterconnectionsRules(regras,parseInt(to.sistema.endereco)-1);var item={name:from.sistema.local_instalacao,to:parseInt(to.sistema.endereco),from:parseInt(from.sistema.endereco),monitora:interligacao[parseInt(to.sistema.endereco)-1]===true,supervisao:regrasInterligacao.supervisao,falha:regrasInterligacao.falha,alarme:regrasInterligacao.alarme};row.push(item)}$scope.interconnections.push(row)}$timeout((function(){$rootScope.setLoading("interconnections@app.project",false);dataGraphGenerate()}),1e3)}),500)};$scope.hoverIndex=function(row,col){$scope.hover={row:row,col:col}};$scope.leaveIndex=function(){$scope.hover={};$scope.infoBox=undefined};$scope.globals=[];$scope.tiposComandosGlobais={alarme_geral:t("project.alarmeGeral"),reiniciar_central:t("project.reiniciarCentral"),silenciar_central:t("project.silenciarCentral"),silenciar_sirene:t("project.silenciarSirene"),sirene_brigada:t("project.sireneBrigada")};var getGlobalsRules=function(){var globalsRules={};for(var centralIndex in projectDb.centrais){var central=projectDb.centrais[centralIndex];var object={alarme_geral:false,sirene_brigada:false};for(var regraInterator in central.regras){var regra=central.regras[regraInterator];if(!regra.alarme){object.alarme_geral=true}if(!regra.brigada){object.sirene_brigada=true}}globalsRules[central.sistema.endereco]=object}return globalsRules};var getGlobals=function(){if($scope.globals.length)return;$rootScope.setLoading("globals@app.project",true);$timeout((function(){$scope.globals=[];var commandRules=getGlobalsRules();for(var interator in $scope.centrais){var central=$scope.centrais[interator];var cols=[];var interligacao=central.sistema.interligacao;for(var comando in $scope.tiposComandosGlobais){var item={endereco:parseInt(central.sistema.endereco),enabled:interligacao[comando]===true,rules:[]};if(comando==="alarme_geral"||comando==="sirene_brigada"){for(var centralEndereco in commandRules){if(parseInt(centralEndereco)===item.endereco)continue;if(central.sistema.interligacao.centrais[parseInt(centralEndereco)-1]!==true)continue;var ruleItem=commandRules[centralEndereco][comando];if(ruleItem){item.rules.push(centralEndereco)}}}cols.push(item)}$scope.globals.push(cols)}$timeout((function(){$rootScope.setLoading("globals@app.project",false)}),1e3)}),500)};$scope.hoverIndexGlobals=function(row,col,central){$scope.hover={row:row,col:col};$scope.infoBox=central.problem};$scope.addLogFile=function(row,col,central){$scope.hover={row:row,col:col};$scope.infoBox=central.problem};$rootScope.helpUrl=function(){return"file/"+$scope.selectedScreen}}])})();(function(){"use strict";angular.module("app").controller("systemController",["$scope","$webSocket","$timeout","$interval","$rootScope","$toast","$mdDialog","$q","$filter","$windowService","$compile","$templateCache","$stateParams","$projectService","$translateService","$state",function($scope,$webSocket,$timeout,$interval,$rootScope,$toast,$mdDialog,$q,$filter,$windowService,$compile,$templateCache,$stateParams,$projectService,$translateService,$state){var t=$translateService.translatePhrase;$scope.form={};$scope.sistema=angular.copy(db.sistema);$scope.originalSistema=angular.copy(db.sistema);$scope.temporizacaoRegra=db.regras?db.regras[1].temporizacao:"10:00";if(db.bloqueios_locais){$scope.bloqueios_locais=angular.copy(db.bloqueios_locais);$scope.originalBloqueios_locais=angular.copy(db.bloqueios_locais)}else{$scope.bloqueios_locais={};$scope.originalBloqueios_locais={}}if($rootScope.centralModel.is1060){$scope.cie1060CentralInfo={qtdDevices:Object.keys(db.lacos[1].dispositivos).length,classe:db.sistema.operacao,ativacao_saida:db.regras[1].ativacao_saida,temporizacao:db.regras[1].temporizacao}}if($stateParams.firmware){if($stateParams.firmware=="accessLevels"){$scope.selectedScreen="accessLevels"}else{$scope.selectedScreen="firmware"}}else{$scope.selectedScreen=$scope.sistema?"generalConfig":"logs"}$scope.$on("$destroy",(function(){$interval.cancel(timeout1060USBIsConnected);$interval.cancel(dateTimeInterval)}));$rootScope.$on("systemStateReset",(function(){db.sistema=angular.copy("");$rootScope.centralModel={}}));$scope.getInfoFromCentral=function(){if($rootScope.isCIEConnected){$rootScope.setLoading("info@app.system",true);if($rootScope.connectedCentralModel.isGateway){getInfoWithRetry("get_info_gateway","get_info",20,1e3)}else{$webSocket.send("get_info")}}};function getInfoWithRetry(command1,command2,maxAttempts,interval){$scope.responseReceived=false;let attempts=0;let timer;function sendCommandsAndRetry(){attempts++;//console.log("Tentativa número",attempts,"de",maxAttempts);if($rootScope.isCIEConnected){if(!$scope.responseReceived){if(attempts>=maxAttempts){//console.log("Número máximo de tentativas alcançado. Não há resposta.");$rootScope.setLoading("info@app.system",false);clearTimeout(timer);return}$webSocket.send(command1);if(command2){$webSocket.send(command2)}timer=setTimeout(sendCommandsAndRetry,interval)}}else{//console.log("Central desconectada. Não há resposta.");clearTimeout(timer);return}if($scope.responseReceived){clearTimeout(timer);return}}timer=setTimeout(sendCommandsAndRetry,interval)}$scope.getNetworkInfo=function(){if($rootScope.isCIEConnected){if($rootScope.connectedCentralModel.isGateway){$webSocket.send("get_info_gateway")}else{$webSocket.send("get_info")}}};$webSocket.get().$on("get_info_gateway",(function(data){//console.log("WS get_info_gateway",data);$rootScope.setLoading("info@app.system",false);if(data.success){$scope.centralInfo=data.config.rede;$webSocket.send("get_gateway_errors");$rootScope.setLoading("info@app.system",false);$timeout((function(){$scope.$apply()}));$scope.responseReceived=true}}));$webSocket.get().$on("get_gateway_errors",(function(data){$rootScope.setLoading("info@app.system",false);//console.log("WS get_gateway_errors",data);if(data.success){$scope.gatewayErrors=data.config.errors;$timeout((function(){$scope.$apply()}))}}));$webSocket.get().$on("get_info",(function(data){$rootScope.setLoading("info@app.system",false);//console.log("WS get_info",data);if(data.success==true){$scope.centralInfo=data;$scope.centralInfo.centralModel=$rootScope.CONFIG.modelos_centrais[data.centralModel].nome;$scope.centralInfo.centralConectadaRepetidora=$rootScope.CONFIG.modelos_centrais[data.centralConectadaRepetidora].nome;$timeout((function(){$scope.$apply()}));$scope.responseReceived=true}}));$scope.saveDefaultLocks=function(){db.lacos["1"].habilitado=!$scope.bloqueios_locais.laco;db.regras["1"].habilitado=!$scope.bloqueios_locais.regraPadrao;db.bloqueios_locais=angular.copy($scope.bloqueios_locais);$scope.originalBloqueios_locais=angular.copy($scope.bloqueios_locais);$toast.show("success",t("system.configuracoesAplicadas"))};$scope.saveGeneralConfig=function(){if($rootScope.centralModel.isGateway&&$scope.selectedScreen==="generalConfig"){$scope.saveGatewayConfig();return}if($rootScope.centralModel.is1060&&$scope.selectedScreen==="defaultLocks"){$scope.saveDefaultLocks();return}if($scope.selectedScreen==="standardOutputs"){$scope.saveStandardOutputs()}else{for(var i=0;i<4;i++){if($scope.originalSistema.repetidoras[i]!==$scope.sistema.repetidoras[i]){var idLocalDevice=(16+i).toString();if($scope.sistema.repetidoras[i]){db.lacos[0].dispositivos[idLocalDevice]=angular.copy($rootScope.CONFIG.dispositivos_locais[idLocalDevice])}else{if(db.lacos[0].dispositivos[idLocalDevice]){$scope.ruleAndZoneUsedDevices(db.lacos[0].dispositivos[idLocalDevice],true);delete db.lacos[0].dispositivos[idLocalDevice]}}}}for(var i=0;i<16;i++){if($scope.originalSistema.interligacao.centrais[i]!==$scope.sistema.interligacao.centrais[i]){if(!$scope.sistema.interligacao.centrais[i]){$scope.ruleAndZoneUsedEvent(i,true)}}}db.sistema=angular.copy($scope.sistema);$scope.originalSistema=angular.copy($scope.sistema);$toast.show("success",t("system.configuracoesAplicadas"))}};$scope.saveAccessLevels=function(pwd_prog_cie){if(pwd_prog_cie){$scope.onChangeLocalInstalation("pwd_prog_cie");$rootScope.cannotSendGatewayConfig=false}function next(){db.sistema=angular.copy($scope.sistema);$scope.originalSistema=angular.copy($scope.sistema);$toast.show("success",t("system.configuracoesAplicadas"))}if($scope.sistema.senha_2===""||$scope.sistema.senha_3===""||$scope.sistema.senha_4===""){var confirm=$mdDialog.confirm().escapeToClose(false).title(t("system.configuracoesAplicadas")).htmlContent(t("system.configuracaoSenha")+"<br><br><b>"+t("system.desejaContinuar")+"</b>").ok(t("system.sim")).cancel(t("system.nao"));$mdDialog.show(confirm).then((function(){next()}))}else{next()}};$scope.saveStandardOutputs=function(){var devicesToOutput=[];var devicesFromOutput=[];["alarme","falha","supervisao"].forEach((function(type){if(parseInt($scope.sistema[type].endereco)==0){$scope.sistema[type].habilitada=false}else if(db.sistema[type].habilitada&&!$scope.sistema[type].habilitada){devicesFromOutput.push({laco:db.sistema[type].laco,endereco:parseInt(db.sistema[type].endereco)})}else if(!db.sistema[type].habilitada&&$scope.sistema[type].habilitada){devicesToOutput.push({laco:$scope.sistema[type].laco,endereco:parseInt($scope.sistema[type].endereco)})}else if($scope.sistema[type].habilitada&&(db.sistema[type].laco!=$scope.sistema[type].laco||db.sistema[type].endereco!=parseInt($scope.sistema[type].endereco))){devicesToOutput.push({laco:$scope.sistema[type].laco,endereco:parseInt($scope.sistema[type].endereco)});devicesFromOutput.push({laco:db.sistema[type].laco,endereco:parseInt(db.sistema[type].endereco)})}else if($scope.sistema[type].habilitada){devicesToOutput.push({laco:$scope.sistema[type].laco,endereco:parseInt($scope.sistema[type].endereco)})}}));devicesToOutput.forEach((function(device){$scope.ruleAndZoneUsedDevices(device,true);var actualDevice=db.lacos[device.laco].dispositivos[device.endereco];actualDevice.zona=0;actualDevice.saida_padrao=true}));devicesFromOutput.forEach((function(device){var isDeviceToOutput=false;devicesToOutput.forEach((function(deviceToOutput){if(deviceToOutput.laco==device.laco&&deviceToOutput.endereco==device.endereco){isDeviceToOutput=true}}));if(!isDeviceToOutput){var previousDevice=db.lacos[device.laco].dispositivos[device.endereco];previousDevice.zona=1;delete previousDevice.saida_padrao}}));db.sistema=angular.copy($scope.sistema);$scope.originalSistema=angular.copy($scope.sistema);$scope.cancelSelectDevice();$toast.show("success",t("system.configuracoesAplicadas"))};$scope.cancel=function(){$scope.sistema=$scope.originalSistema;if($scope.selectedScreen==="defaultLocks"){$scope.bloqueios_locais=$scope.originalBloqueios_locais}$scope.selectedScreen="";$scope.resetGatewayScope()};$scope.outputNames={alarme:t("system.saidaAlarme"),falha:t("system.saidaFalha"),supervisao:t("system.saidaSupervisao")};$scope.selectedDevice={};$scope.typeChange="";$scope.lacos=db.lacos;$scope.dispositivos_saida=[];$scope.initStandardOutputs=function(){angular.forEach(db.lacos,(function(laco,i){$scope.dispositivos_saida[i]={};angular.forEach(laco.dispositivos,(function(dispositivo,endereco){if($rootScope.CONFIG.subtipos[dispositivo.subtipo].modo=="saida"){$scope.dispositivos_saida[i][endereco]=dispositivo}}))}))};$scope.changeDevice=function(type){$scope.typeChange=type;if($filter("isEmpty")($scope.sistema[type])){$scope.selectedDevice={laco:0,endereco:10}}else{$scope.selectedDevice=angular.copy($scope.sistema[type])}};$scope.cancelSelectDevice=function(){$scope.selectedDevice={};$scope.typeChange=""};$scope.selectDevice=function(){if(!db.lacos[$scope.selectedDevice.laco].dispositivos[$scope.selectedDevice.endereco].habilitado){$mdDialog.show($mdDialog.alert().title(t("system.atencao")).textContent(t("system.naoPossivelAdicionar")).ok("OK"));return}var ruleAndZoneUsedDevices=$scope.ruleAndZoneUsedDevices($scope.selectedDevice);if(ruleAndZoneUsedDevices.length>0){var confirm=$mdDialog.confirm().escapeToClose(false).title(t("system.atencao")).htmlContent(t("system.dispositivoSelecionado")+":<br><br><b>"+ruleAndZoneUsedDevices.toString().replace(",","<br>")+"</b><br><br>"+t("system.aoDefinir")+"<br><br>"+t("system.desejaContinuar")).ok(t("system.sim")).cancel(t("system.nao"));$mdDialog.show(confirm).then((function(){$scope.sistema[$scope.typeChange]=angular.copy($scope.selectedDevice);$scope.cancelSelectDevice()}))}else{$scope.sistema[$scope.typeChange]=angular.copy($scope.selectedDevice);$scope.cancelSelectDevice()}};$scope.disableOutput=function(){$scope.sistema[$scope.typeChange].habilitada=true;$scope.cancelSelectDevice()};$scope.enableOutput=function(type){if($scope.sistema[type].habilitada){$scope.changeDevice(type)}else if($scope.typeChange){$scope.sistema[$scope.typeChange].habilitada=false}};$scope.$watch("sistema.alarme.temporizador",(function(newVal,oldVal){if(!newVal)return;var input=newVal+"";var numbers=input.replace(/\D+/g,"");var time="";if(numbers.length==5){time=numbers.slice(1,3)+":"+numbers.slice(3,5)}else if(numbers.length==4){time=numbers.slice(0,2)+":"+numbers.slice(2,4)}else if(numbers.length==3){time="0"+numbers.slice(0,1)+":"+numbers.slice(1,3)}else if(numbers.length==2){time="0:"+numbers.slice(0,2)}else if(numbers.length==1){time="0:0"+numbers}$scope.sistema.alarme.temporizador=time}));$scope.$watch("sistema.falha.temporizador",(function(newVal,oldVal){if(!newVal)return;var input=newVal+"";var numbers=input.replace(/\D+/g,"");var time="";if(numbers.length==5){time=numbers.slice(1,3)+":"+numbers.slice(3,5)}else if(numbers.length==4){time=numbers.slice(0,2)+":"+numbers.slice(2,4)}else if(numbers.length==3){time="0"+numbers.slice(0,1)+":"+numbers.slice(1,3)}else if(numbers.length==2){time="0:"+numbers.slice(0,2)}else if(numbers.length==1){time="0:0"+numbers}$scope.sistema.falha.temporizador=time}));$scope.$watch("sistema.supervisao.temporizador",(function(newVal,oldVal){if(!newVal)return;var input=newVal+"";var numbers=input.replace(/\D+/g,"");var time="";if(numbers.length==5){time=numbers.slice(1,3)+":"+numbers.slice(3,5)}else if(numbers.length==4){time=numbers.slice(0,2)+":"+numbers.slice(2,4)}else if(numbers.length==3){time="0"+numbers.slice(0,1)+":"+numbers.slice(1,3)}else if(numbers.length==2){time="0:"+numbers.slice(0,2)}else if(numbers.length==1){time="0:0"+numbers}$scope.sistema.supervisao.temporizador=time}));$scope.ruleAndZoneUsedDevices=function(device,remove){var used=[];for(var idRegra in db.regras){var regra=db.regras[idRegra];var itensForRemove=$filter("where")(regra.itens,{laco:device.laco,endereco:device.endereco});if(itensForRemove.length>0)used.push("Regra: "+regra.id+" - "+regra.nome);if(remove)regra.itens=$filter("xor")(regra.itens,itensForRemove)}var zoneDevice=db.lacos[device.laco].dispositivos[device.endereco];if(zoneDevice.zona!=0){used.push("Zona: "+db.zonas[zoneDevice.zona].id+" - "+db.zonas[zoneDevice.zona].nome);if(remove)zoneDevice.zona=0}return used};$scope.ruleAndZoneUsedEvent=function(central,remove){var used=[];var enderecoEventoInicial=central*3+25;var enderecoEventoFinal=enderecoEventoInicial+3;for(var idRegra in db.regras){var regra=db.regras[idRegra];for(var endereco=enderecoEventoInicial;endereco<enderecoEventoFinal;endereco++){var itensForRemove=$filter("where")(regra.itens,{laco:0,endereco:endereco});if(itensForRemove.length>0)used.push(t("system.regra")+": "+regra.id+" - "+regra.nome);if(remove)regra.itens=$filter("xor")(regra.itens,itensForRemove)}}return used};$scope.dateMax={date:new Date(2099,11,31)};$scope.date={pc:new Date};var dateTimeInterval;function getDesktopDate(){$webSocket.send("get_desktop_date")}$webSocket.get().$on("get_desktop_date",(function(data){//console.log("get_desktop_date",data);var date=new Date;date.setHours(data.hour,data.min,data.sec,0);$scope.date.pc=date;dateTimeInterval=$interval((function(){$scope.date.pc.setSeconds($scope.date.pc.getSeconds()+1);//console.log("increment")}),1e3)}));$scope.getDateFromCentral=function(){if($rootScope.isCIEConnected){$rootScope.$emit("loading:show",{text:t("system.aguarde")});$webSocket.send("get_date")}};$scope.sendDateTime=function(){var data=$filter("date")($scope.date.newDate,"dd/MM/yyyy");var hora=$filter("date")($scope.date.newTime,"HH:mm:ss");$scope.date.newDate.setHours($scope.date.newTime.getHours(),$scope.date.newTime.getMinutes(),$scope.date.newTime.getSeconds(),0);$webSocket.send("set_date",{data:data,hora:hora,dateFormat:$scope.date.newDate.getTime()});$rootScope.$emit("loading:show",{text:t("system.aguarde")})};$scope.syncDateTime=function(){var date=new Date($scope.date.pc);date.setSeconds(date.getSeconds()+2);var data=$filter("date")(date,"dd/MM/yyyy");var hora=$filter("date")(date,"HH:mm:ss");$webSocket.send("set_date",{data:data,hora:hora,dateFormat:date.getTime()});$rootScope.$emit("loading:show",{text:t("system.aguarde")})};$webSocket.get().$on("get_date",(function(data){//console.log("WS get_date",data);if(data.success==true){if(data.dateFormat){$scope.date.central=new Date(data.dateFormat)}else{var date=data.data.split("/");var time=data.hora.split(":");$scope.date.central=new Date(date[2],parseInt(date[1])-1,date[0],time[0],time[1],time[2])}}$rootScope.$emit("loading:hide")}));$webSocket.get().$on("set_date",(function(data){//console.log("WS set_date",data);if(data.success==true){$toast.show("success",t("system.dataHoraAtualizadas"))}$rootScope.$emit("loading:hide")}));$scope.$watch("sistema.retardo",(function(newVal,oldVal){if(!newVal)return;var input=newVal+"";var numbers=input.replace(/\D+/g,"");var time="";if(numbers.length==5){time=numbers.slice(1,3)+":"+numbers.slice(3,5)}else if(numbers.length==4){time=numbers.slice(0,2)+":"+numbers.slice(2,4)}else if(numbers.length==3){time="0"+numbers.slice(0,1)+":"+numbers.slice(1,3)}else if(numbers.length==2){time="0:"+numbers.slice(0,2)}else if(numbers.length==1){time="0:0"+numbers}$scope.sistema.retardo=time}));$scope.$watch("sistema.senha_2",(function(newVal){if(!newVal)return;var input=newVal+"";$scope.sistema.senha_2=input.replace(/\D+/g,"")+""}));$scope.$watch("sistema.senha_3",(function(newVal){if(!newVal)return;var input=newVal+"";$scope.sistema.senha_3=input.replace(/\D+/g,"")+""}));$scope.$watch("sistema.senha_4",(function(newVal){if(!newVal)return;var input=newVal+"";$scope.sistema.senha_4=input.replace(/\D+/g,"")+""}));$scope.onChangeLocalInstalation=(local_inst,$event)=>{if($event){$scope.sistema[local_inst]=$event.target.value}if(!$scope.sistema[local_inst]){return}const type=$rootScope.connectedCentralModel.is1060||$rootScope.connectedCentralModel.isGateway||!$rootScope.isCIEConnected?"ascii":"alpha";try{if(type==="ascii"){$scope.sistema[local_inst]=_.deburr($scope.sistema[local_inst]).replace(/[^\x00-\x7F]/g,"")}if(type==="alpha"){$scope.sistema[local_inst]=_.deburr($scope.sistema[local_inst]).replace(/[^\p{L}\p{N}\p{P}\p{Z}^$\n]/gu,"")}}catch(e){return str}};$scope.verifyShowAlertDefaultPassword=function(){if($rootScope.centralModel.is1060&&$scope.originalSistema.senha_2==="2222"&&$scope.originalSistema.senha_3==="3333"&&$scope.originalSistema.senha_4==="4444"){return true}if(!$rootScope.centralModel.is1060&&!$rootScope.centralModel.isGateway&&$scope.originalSistema.senha_2==="222222"&&$scope.originalSistema.senha_3==="333333"&&$scope.originalSistema.senha_4==="444444"){return true}return false};$scope.localInstalacaoMaxLength=$rootScope.centralModel.is1060?14:21;$scope.resetConfiguration=function(){$webSocket.send("reset_configuration")};$scope.resetLogs=function(){$webSocket.send("reset_configuration")};$webSocket.get().$on("reset_configuration",(function(data){//console.log("WS get_date",data);if(data.success==true){$toast.show("success","RESET!")}}));var progressWindow;$scope.percentSendFirmware=0;$scope.firmware={};$scope.openFileDialog=function(id){document.getElementById(id).click()};$scope.fileAction=function(action,path){switch(action){case"open_log_file":$rootScope.setLoading("rootContent@app",true,true);$webSocket.send("open_logs",{path:path});break;case"save_log_file":$rootScope.setLoading("rootContent@app",true,true);if(path){path=path.replace(/\.cielog/g,"").replace(/\.CIELOG/g,"")+".cielog"}$webSocket.send("save_logs",{path:path,logs:angular.copy($scope.allLogs)});break;case"firmware_file":$scope.firmware.file=path;checkFileFirmware();break;case"save_logs_csv":$rootScope.setLoading("rootContent@app",true,true);$webSocket.send("save_logs",{path:path,logs:angular.copy($scope.allLogs),csv:true});break;case"root_ca_file":case"self_ca_file":case"self_ca_pk_file":$scope.cryptoFiles[action]=path;$rootScope.setLoading("rootContent@app",true,true);$webSocket.send("read_certificate_file",{path:path,type:action});break;case"select_path":$rootScope.setLoading("info@app.system",true);$scope.certificateImport.pathGateway=path;$webSocket.send("generate_client_ca",{values:$scope.certificateImport});break;case"path_save_programador":$rootScope.setLoading("info@app.system",true);$webSocket.send("save_programador_cert",{path:path});break}document.getElementById(action).value=""};$scope.sendFirmware=function(){if($scope.firmware.file){progressWindow=$mdDialog.show({clickOutsideToClose:false,scope:$scope,preserveScope:true,escapeToClose:false,templateUrl:"root/loading-progress-dialog.html",controller:function DialogController($scope,$mdDialog){$scope.closeDialog=function(){$mdDialog.hide()}}});$interval.cancel(timeout1060USBIsConnected);var path=$rootScope.centralModel.is1060&&$scope.firmware.path?$scope.firmware.path:$scope.firmware.file;$webSocket.send("firmware",{path:path,is1060:$rootScope.connectedCentralModel.is1060,bootMode:$scope.is1060USBBootModeEnabled})}};var checkFileFirmware=function(){$scope.firmware.readyToSend=false;if($scope.firmware.file){$webSocket.send("check_firmware_file",{path:$scope.firmware.file,centralVersion:$rootScope.connectedCentralModel.version||"0",isGateway:$rootScope.connectedCentralModel.isGateway,is1060:$rootScope.connectedCentralModel.is1060||$scope.is1060USBBootModeEnabled});$rootScope.$emit("loading:show",{text:t("system.aguarde")})}};$webSocket.get().$on("check_firmware_file",(function(data){//console.log("WS check_firmware_file",data);$rootScope.$emit("loading:hide");$scope.firmware.fileVersion=data.fileVersion;$scope.firmware.centralVersion=data.centralVersion;if(data.success&&data.success==true){$scope.firmware.readyToSend=true;if(data.path){$scope.firmware.path=data.path}}else{$scope.firmware.readyToSend=false;var msg="";if(data.error=="disconnected"){msg=t("system.centralDesconectada")}else if(data.error=="same_version"){msg=t("system.aVersaoArquivo")+"<br>"+t("system.necessarioSuperior")}else if(data.error=="minor_version"){$scope.firmware.readyToSend=true;if(data.path){$scope.firmware.path=data.path}}else if(data.error=="error"){msg=t("system.erro")}else if(data.error=="corrupt_err"){msg=t("system.arquivoCorrompido")}else if(data.error=="ext_err"){msg=t("system.necessarioExtensao")}else if(data.error=="size_err"){msg=t("system.arquivoCorrompido")+"<br>"+t("system.arquivoFirmware")}$timeout((function(){$scope.firmware.file="";$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("system.arquivoInvalido")).htmlContent(msg).ok("OK"))}),1e3)}}));$webSocket.get().$on("firmware_error_on_update",(function(data){$scope.percentSendFirmware=0;$scope.firmware={};$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("system.falhaAtualizacao")).htmlContent(t("system.ocorreuErro")+"<br>"+t("system.verifiqueConexao")).ok("OK"))}));$webSocket.get().$on("firmware",(function(data){$rootScope.sendFirmware=false;//console.log("WS firmware",data);if(data.progress!==undefined){if($scope.percentSendFirmware<100)$scope.percentSendFirmware=data.progress;$rootScope.sendFirmware=true;$timeout((function(){$scope.$apply()}))}else if(data.success==true){if($scope.is1060USBBootModeEnabled&&$scope.is1060USBConnectedBootMode){$mdDialog.show($mdDialog.alert().title(t("system.firmwareRecuperado")).htmlContent(t("system.recuperacao1060Item1")+"<br>"+t("system.recuperacao1060Item2")+"<br>"+t("system.recuperacao1060Item3")+"<br>").ok("OK"))}else{$mdDialog.show($mdDialog.alert().title(t("system.firmwareAtualizado")).textContent(t("system.seraReiniciada")).ok("OK"))}$scope.percentSendFirmware=0;$scope.firmware={};//console.log("$scope.percentSendFirmware",$scope.percentSendFirmware);$scope.is1060USBConnectedBootMode=false;$scope.is1060USBBootModeEnabled=false;$state.go("app.file")}else{$rootScope.$emit("loading:hide");$scope.percentSendFirmware=0;//console.log("$scope.percentSendFirmware",$scope.percentSendFirmware);$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("system.falhaAtualizacao")).htmlContent(t("system.ocorreuErro")+"<br>"+t("system.verifiqueConexao")).ok("OK"))}if($rootScope.connectedCentralModel.is1060){$interval.cancel(timeout1060USBIsConnected);$webSocket.send("stop_wifi_communication")}}));var initInterconection=function(){$scope.enderecosCentraisInterligacao=[];if($rootScope.projectMode){var ids=_.keys(_.keyBy(projectDb.centrais,"sistema.endereco"));for(var j=1;j<=16;j++){if(ids.indexOf(j.toString())===-1||db.sistema.endereco==j){$scope.enderecosCentraisInterligacao.push(j)}}}else{for(var i=1;i<=16;i++){$scope.enderecosCentraisInterligacao.push(i)}}};initInterconection();$scope.saveInterconnection=function(){for(var i=0;i<16;i++){if($scope.originalSistema.interligacao.centrais[i]!==$scope.sistema.interligacao.centrais[i]){if(!$scope.sistema.interligacao.centrais[i]){$scope.ruleAndZoneUsedEvent(i,true)}}}if(parseInt($scope.originalSistema.endereco)!=0&&parseInt($scope.sistema.endereco)==0){for(var i=0;i<16;i++){$scope.ruleAndZoneUsedEvent(i,true)}}db.sistema=angular.copy($scope.sistema);$scope.originalSistema=angular.copy($scope.sistema);if($rootScope.projectMode){$projectService.updateSummary();$rootScope.selectedCentralAddress=db.sistema.endereco}$toast.show("success",t("system.configuracoesAplicadas"))};$scope.$watch("sistema.endereco",(function(newVal,oldVal){if(newVal===oldVal)return;if(newVal===undefined)return;if(newVal==0){$scope.sistema.interligacao.centrais=new Array(16).fill(false);$scope.sistema.interligacao.alarme_geral=false;$scope.sistema.interligacao.reiniciar_central=false;$scope.sistema.interligacao.silenciar_central=false;$scope.sistema.interligacao.silenciar_sirene=false;$scope.sistema.interligacao.sirene_brigada=false}else{$scope.sistema.interligacao.centrais[oldVal-1]=false;$scope.sistema.interligacao.centrais[newVal-1]=true}}));$scope.rede={};function verifyNetworkMode(){if($scope.sistema){if($scope.sistema.rede.p2p){$scope.rede.modo="p2p"}else if($scope.sistema.rede.dhcp){$scope.rede.modo="dhcp"}else{$scope.rede.modo="fixo"}}}verifyNetworkMode();$scope.$watch("rede.modo",(function(newVal,oldVal){if(newVal===oldVal)return;if(newVal===undefined)return;if(newVal==="p2p"){$scope.sistema.rede.p2p=true}else{$scope.sistema.rede.p2p=false}if(newVal==="fixo"){$scope.sistema.rede.dhcp=false}else{$scope.sistema.rede.dhcp=true}}));$scope.saveNetwork=function(){if(!$rootScope.centralModel.isGateway&&$scope.originalSistema.rede.p2p!==$scope.sistema.rede.p2p){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("system.conexaoPontoPonto")).htmlContent(t("system.interligacaoDesconfigurada")+".<br><br>"+t("system.desejaContinuar")).ok(t("system.sim")).cancel(t("system.nao"))).then((function(){$scope.sistema.endereco=0;$rootScope.setLoading("rootContent@app",true,true);$timeout((function(){$rootScope.setLoading("rootContent@app",false,false);initInterconection();$scope.saveInterconnection();if($scope.rede.modo==="p2p"){$mdDialog.show($mdDialog.alert().escapeToClose(false).title(t("system.pontoPontoHabilitada")).htmlContent(t("system.habiliteInterligacao")+".<br><br>").ok("OK")).then((function(){$scope.changeSelectedScreen("interconnection",$scope.saveNetwork)}))}}),1e3)}),(function(){$scope.sistema.rede.p2p=false;verifyNetworkMode()}))}else{db.sistema=angular.copy($scope.sistema);$scope.originalSistema=angular.copy($scope.sistema);$toast.show("success",t("system.configuracoesAplicadas"))}};$scope.is1060USBConnected=false;var timeout1060USBIsConnected;function verify1060USBIsConnected(){timeout1060USBIsConnected=$interval((function(){if($rootScope.isCIEConnected){$webSocket.send("verify_usb_1060_connection")}else{$webSocket.send("verify_usb_1060_connection_boot_mode")}}),3e3)}$webSocket.get().$on("verify_usb_1060_connection",(function(data){//console.log("WS verify_usb_1060_connection",data);if(data.success&&data.usbConnection){$scope.is1060USBConnected=true;$scope.is1060USBConnectedBootMode=data.usbConnection==="boot"}else{$scope.is1060USBConnected=false;$scope.is1060USBConnectedBootMode=false}}));var lastSaveFunction=$scope.saveGeneralConfig;$scope.changeSelectedScreen=function(newSelectedScreen,saveFunction){var database=$scope.sistema;var originalDatabase=$scope.originalSistema;if(angular.isDefined(dateTimeInterval)){$interval.cancel(dateTimeInterval);dateTimeInterval=undefined}if(newSelectedScreen==="date"){getDesktopDate()}$interval.cancel(timeout1060USBIsConnected);if(newSelectedScreen==="firmware"&&$rootScope.centralModel.is1060){verify1060USBIsConnected()}if($rootScope.centralModel.isGateway&&$scope.selectedScreen==="generalConfig"){database=$scope.gateway;originalDatabase=$scope.originalGateway}if($rootScope.centralModel.is1060&&$scope.selectedScreen==="defaultLocks"){database=$scope.bloqueios_locais;originalDatabase=$scope.originalBloqueios_locais}if(newSelectedScreen!==$scope.selectedScreen){if(!angular.equals(database,originalDatabase)){var confirm=$mdDialog.confirm().escapeToClose(false).title(t("system.existemAlteracoes")).textContent(t("system.desejaAplicar")).ok(t("system.salvar")).cancel(t("system.descartar"));$mdDialog.show(confirm).then((function(){lastSaveFunction&&lastSaveFunction();saveFunction&&(lastSaveFunction=saveFunction);!saveFunction&&(lastSaveFunction=undefined)}),(function(){saveFunction&&(lastSaveFunction=saveFunction);!saveFunction&&(lastSaveFunction=undefined);if($rootScope.centralModel.isGateway&&$scope.selectedScreen==="generalConfig"){$scope.gateway=angular.copy(db.gateway);$scope.originalGateway=angular.copy(db.gateway)}else{$scope.sistema=angular.copy(db.sistema);$scope.originalSistema=angular.copy(db.sistema);if($rootScope.centralModel.is1060&&$scope.selectedScreen==="defaultLocks"){$scope.bloqueios_locais=angular.copy(db.bloqueios_locais);$scope.originalBloqueios_locais=angular.copy(db.bloqueios_locais)}}$scope.selectedScreen=newSelectedScreen;$scope.cancelSelectDevice()}))}else{saveFunction&&(lastSaveFunction=saveFunction);!saveFunction&&(lastSaveFunction=undefined);$scope.selectedScreen=newSelectedScreen}}};$scope.resetGatewayScope=function(){$scope.gateway=angular.copy(db.gateway);$scope.originalGateway=angular.copy(db.gateway);$scope.formGateway={};$scope.gatewayErrors={};$scope.certificateImport={mode:"import",pais:"BR"};$scope.form.certificate={};if($scope.gateway){$scope.cryptoFiles=$scope.gateway.webhook&&$scope.gateway.webhook.cryptoFiles?angular.copy($scope.gateway.webhook.cryptoFiles):{};$scope.certificates_frames=$scope.gateway.webhook.certificates_frames?angular.copy($scope.gateway.webhook.certificates_frames):{};$scope.certificates_info=$scope.gateway.certificates_info}else{$scope.cryptoFiles={};$scope.certificates_frames={};$scope.certificates_info={}}$scope.formSituador={showPassword:false}};$scope.resetGatewayScope();$scope.$watch("gateway.modbusTCP.timeout",(function(newVal,oldVal){if(!newVal)return;var input=newVal+"";var numbers=input.replace(/\D+/g,"");var time="";if(numbers.length==5){time=numbers.slice(1,3)+":"+numbers.slice(3,5)}else if(numbers.length==4){time=numbers.slice(0,2)+":"+numbers.slice(2,4)}else if(numbers.length==3){time="0"+numbers.slice(0,1)+":"+numbers.slice(1,3)}else if(numbers.length==2){time="0:"+numbers.slice(0,2)}else if(numbers.length==1){time="0:0"+numbers}$scope.gateway.modbusTCP.timeout=time}));$scope.generatePrivateKey=function(){$webSocket.send("generate_private_key")};$scope.generateGatewayCert=function(){if($scope.certificateImport.mode==="generate"){$scope.form.certificate.$setSubmitted();if($scope.form.certificate.$invalid)return;document.getElementById("select_path").click()}};$scope.addNewCertificate=function(type){if(type==="self_ca"){if($scope.certificates_info["self_ca"])delete $scope.certificates_info["self_ca"];if($scope.certificates_info["self_ca_pk"])delete $scope.certificates_info["self_ca_pk"]}else{if($scope.certificates_info["root_ca"])delete $scope.certificates_info["root_ca"]}};$scope.clearGenerateGatewayCert=function(){$scope.certificateImport.generated=false};$webSocket.get().$on("generate_client_ca",(function(data){$rootScope.setLoading("info@app.system",false);//console.log("generate_client_ca",data);if(data.success===true){$scope.certificateImport.generated=true;for(var type in data.parsed){$scope.certificates_frames[type]=data.parsed[type]}}else{$mdDialog.show($mdDialog.alert().title(t("system.atencao")).textContent(t("system.naoFoiPossivelGerar")).ok("OK"))}}));$webSocket.get().$on("save_programador_cert",(function(data){$rootScope.setLoading("info@app.system",false);if(data.success===true){$toast.show("success",t("system.copiaSalva"))}else{$mdDialog.show($mdDialog.alert().title(t("system.atencao")).textContent(t("system.naoFoiPossivelGerar")).ok("OK"))}}));$webSocket.get().$on("generate_private_key",(function(data){if(data.success===true){$scope.gateway.webhook.chavePrivada=data.config;$timeout((function(){$scope.$apply()}))}}));$scope.removeCertificateFile=function(type){$scope.cryptoFiles[type]="";$scope.certificates_frames[type]=""};$scope.saveGatewayCertificates=function(){//console.log($scope.certificates_info,$scope.certificateImport.generated,$scope.cryptoFiles["root_ca_file"],$scope.cryptoFiles["self_ca_file"]);if(($scope.certificateImport.generated||$scope.cryptoFiles["self_ca_file"])&&!($scope.cryptoFiles["root_ca_file"]||$scope.certificates_info["root_ca"])){$mdDialog.show($mdDialog.alert().title(t("system.atencao")).textContent(t("system.necessarioClientePrivada")).ok("OK"));return}$scope.gateway.webhook.cryptoFiles=$scope.cryptoFiles;$scope.gateway.webhook.certificates_frames=$scope.certificates_frames;db.gateway=angular.copy($scope.gateway);$scope.originalGateway=angular.copy($scope.gateway);$toast.show("success",t("system.configuracoesAplicadas"))};$scope.saveGatewayConfig=function(){//console.log("$scope.gateway",$scope.gateway);if($scope.gateway.integracao==="modbusTCP"){$scope.form.modbusTCP.$setSubmitted();if($scope.form.modbusTCP.$invalid){$mdDialog.show($mdDialog.alert().title(t("system.atencao")).textContent(t("system.preenchaCorretamente")).ok("OK"));return}}if($scope.gateway.integracao==="situador"){$scope.form.situador.$setSubmitted();if($scope.form.situador.$invalid){$mdDialog.show($mdDialog.alert().title(t("system.atencao")).textContent(t("system.preenchaCorretamente")).ok("OK"));return}if($scope.gateway.situador.host){try{const validIp=isIp($scope.gateway.situador.host);if(validIp){$scope.gateway.situador.host=validIp}var http="";if(!$scope.gateway.situador.host.includes("://")){http="https://"}var domain=new URL(http+$scope.gateway.situador.host);//console.log(domain);$scope.gateway.situador.host=domain.hostname;$scope.gateway.situador.host=domain.hostname.replace("www.","")}catch(e){$mdDialog.show($mdDialog.alert().title(t("system.atencao")).textContent(t("system.enderecoURLInvalido")).ok("OK"));return}}}if($scope.gateway.integracao==="webhook"){$scope.form.webhook.$setSubmitted();if($scope.form.webhook.$invalid){$mdDialog.show($mdDialog.alert().title(t("system.atencao")).textContent(t("system.preenchaCorretamente")).ok("OK"));return}if($scope.gateway.webhook.host){try{//console.log("$scope.gateway.webhook.host",$scope.gateway.webhook.host);const validIp=isIp($scope.gateway.webhook.host);if(validIp){$scope.gateway.webhook.host=validIp}//console.log("validIp",validIp);var http="";if(!$scope.gateway.webhook.host.includes("://")){http="https://"}var domain=new URL(http+$scope.gateway.webhook.host);$scope.gateway.webhook.host=domain.hostname+(domain.pathname==="/"?"":domain.pathname);$scope.gateway.webhook.host=$scope.gateway.webhook.host.replace("www.","");//console.log(domain)}catch(e){$mdDialog.show($mdDialog.alert().title(t("system.atencao")).textContent(t("system.enderecoURLInvalido")).ok("OK"));return}}}if($scope.gateway.integracao==="rcptip"){$scope.form.rcptip.$setSubmitted();if($scope.form.rcptip.$invalid){$mdDialog.show($mdDialog.alert().title(t("system.atencao")).textContent(t("system.preenchaCorretamente")).ok("OK"));return}if($scope.gateway.rcptip.host){try{//console.log("$scope.gateway.rcptip.host",$scope.gateway.rcptip.host);const validIp=isIp($scope.gateway.rcptip.host);if(validIp){$scope.gateway.rcptip.host=validIp}//console.log("validIp",validIp);let http="";if(!$scope.gateway.rcptip.host.includes("://")){http="https://"}const domain=new URL(http+$scope.gateway.rcptip.host);$scope.gateway.rcptip.host=domain.hostname+(domain.pathname==="/"?"":domain.pathname);$scope.gateway.rcptip.host=$scope.gateway.rcptip.host.replace("www.","");//console.log(domain)}catch(e){$mdDialog.show($mdDialog.alert().title(t("system.atencao")).textContent(t("system.enderecoURLInvalido")).ok("OK"));return}}}db.gateway=angular.copy($scope.gateway);$scope.originalGateway=angular.copy($scope.gateway);$toast.show("success",t("system.configuracoesAplicadas"))};$webSocket.get().$on("read_certificate_file",(function(data){//console.log("read_certificate_file",data);if(!data.data.error){$scope.certificates_frames[data.type]=data.data}else{delete $scope.cryptoFiles[data.type];$mdDialog.show($mdDialog.alert().title(t("system.atencao")).textContent(t("system.certificadoInvalido")).ok("OK"))}$rootScope.setLoading("rootContent@app",false,false)}));var isIp=function(str){var ip="";var path="";var host=str;if(str.includes("//")){host=str.split("//");host.shift();host=host.join()}if(host.includes("/")){host=host.split("/");host=host.shift()}var split=host.split(".");if(split.length===4){for(var i=0;i<4;i++){if(isNaN(parseInt(split[i])))return false;ip+=parseInt(split[i])+"."}ip=ip.slice(0,-1)}if(str.includes("//")){path=str.split("//")[1].split("/");path.shift();path=path.join("/")}else if(str.includes("/")){path=str.split("/");path.shift();path=path.join("/")}return ip?ip+(path?"/"+path:""):str};$scope.$watch("gateway.webhook.heartbeat",(function(newVal,oldVal){if(!newVal)return;var input=newVal+"";var numbers=input.replace(/\D+/g,"");var time="";if(numbers.length==5){time=numbers.slice(1,3)+":"+numbers.slice(3,5)}else if(numbers.length==4){time=numbers.slice(0,2)+":"+numbers.slice(2,4)}else if(numbers.length==3){time="0"+numbers.slice(0,1)+":"+numbers.slice(1,3)}else if(numbers.length==2){time="0:"+numbers.slice(0,2)}else if(numbers.length==1){time="0:0"+numbers}$scope.gateway.webhook.heartbeat=time}));$scope.$watch("gateway.rcptip.heartbeat",(function(newVal,oldVal){if(!newVal)return;var input=newVal+"";var numbers=input.replace(/\D+/g,"");var time="";if(numbers.length==5){time=numbers.slice(1,3)+":"+numbers.slice(3,5)}else if(numbers.length==4){time=numbers.slice(0,2)+":"+numbers.slice(2,4)}else if(numbers.length==3){time="0"+numbers.slice(0,1)+":"+numbers.slice(1,3)}else if(numbers.length==2){time="0:"+numbers.slice(0,2)}else if(numbers.length==1){time="0:0"+numbers}$scope.gateway.rcptip.heartbeat=time}));if($rootScope.centralModel.isGateway&&$scope.selectedScreen==="generalConfig"){$scope.$watch("gateway",(function(newValue){changeController.editedConfig=newValue}),true);$scope.$watch("originalGateway",(function(newValue){changeController.originalConfig=newValue}),true)}else{$scope.$watch("sistema",(function(newValue){changeController.editedConfig=newValue}),true);$scope.$watch("originalSistema",(function(newValue){changeController.originalConfig=newValue}),true);$scope.$watch("bloqueios_locais",(function(newValue){changeController.editedConfig=newValue}),true);$scope.$watch("originalBloqueios_locais",(function(newValue){changeController.originalConfig=newValue}),true)}changeController.saveFn=$scope.saveGeneralConfig;changeController.viewName=t("system.emSistema");$scope.isWin7=function(){try{if(navigator.appVersion.indexOf("Windows NT 6.1")!=-1){return true}return false}catch(e){return false}};$rootScope.helpUrl=function(){return"system/"+$scope.selectedScreen};$scope.canEnableSendFirmwareButton=function(){if($scope.centralModel.is1060){if($scope.is1060USBConnectedBootMode){return $scope.is1060USBBootModeEnabled}else{return $scope.is1060USBConnected&&$rootScope.isCIEConnected}}if(!$scope.centralModel.is1060&&!$rootScope.isCIEConnected){return false}if($rootScope.connectionMode==="wifi"){return false}return true};$scope.canSendFirmware=function(){if(!$scope.firmware.readyToSend){return false}return $scope.canEnableSendFirmwareButton()};$scope.is1060USBConnectedBootMode=false;$scope.is1060USBBootModeEnabled=false;$scope.enableRecovery=function(){$scope.is1060USBBootModeEnabled=true;$rootScope.acceptedExtentionFirmware=".cie1060f"};$scope.trimInput=function(event,input){const inputValue=event.target.value;const trimmedValue=inputValue.trim();$scope.sistema[input]="";$timeout((function(){$scope.sistema[input]=trimmedValue}),0)};$scope.goTo1060Recover=function(ev){$scope.is1060USBBootModeEnabled=false;$mdDialog.show({controller:function DialogController($scope,$mdDialog){$scope.cancel=function(){$mdDialog.cancel()}},scope:$scope,preserveScope:true,templateUrl:"shared/1060recover.html",parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:true})}}])})();(function(){"use strict";angular.module("app").controller("printController",["$scope","$rootScope","$config","$windowService","$templateCache","$compile","$timeout","$loading","$translateService",function($scope,$rootScope,$config,$windowService,$templateCache,$compile,$timeout,$loading,$translateService){var t=$translateService.translatePhrase;$scope.types={loop:t("global.menuLacos")};$scope.loops=db.lacos;$scope.zones=db.zonas;$scope.rules=db.regras;$scope.sistema=db.sistema;$scope.selectedType={name:""};$scope.tiposEvento=$config.TIPOS_EVENTO;$scope.subTipos=$config.subtipos;$scope.tipos=$config.tipos;if($rootScope.centralModel&&!$rootScope.centralModel.is1060){$scope.types.zone=t("global.menuZonas");$scope.types.rule=t("global.menuRegras")}(function(){for(var id in $scope.zones){$scope.zones[id].devices=[]}for(var i in $scope.loops){var loop=$scope.loops[i];for(var id in loop.dispositivos){var device=loop.dispositivos[id];var zone=device.zona;if(zone!=0)$scope.zones[zone].devices.push({laco:parseInt(i),endereco:id,nome:device.nome,habilitado:device.habilitado,tipo:device.tipo})}}for(var id in $scope.rules){var rule=$scope.rules[id];for(var i in rule.itens){var item=rule.itens[i];var nome="";if(item.tipo=="zona"){nome=$scope.zones[item.id].nome}else if(item.tipo=="evento"){nome=$rootScope.CONFIG.eventos[item.endereco].nome}else if(item.tipo=="dispositivo"){nome=$scope.loops[item.laco].dispositivos[item.endereco].nome}rule.itens[i].nome=nome}}})();$scope.today=new Date;$scope.addMode=function(item){item.modo=$rootScope.CONFIG.subtipos[item.subtipo].modo;return item};$scope.print=function(){$rootScope.setLoading("rootContent@app",true);$scope.today=new Date;var el=$compile($templateCache.get("print/printable.html"))($scope);$timeout((function(){$windowService.openPrintWindow(el.html())}),300)};$rootScope.setLoading("rootContent@app",false)}])})();(function(){"use strict";angular.module("app").factory("$premise",["$rootScope","$q","$filter","$translateService",function($rootScope,$q,$filter,$translateService){var t=$translateService.translatePhrase;var modes={Entrada:{key:"entrada",text:t("file.entrada")},"Saída":{key:"saida",text:t("file.saida")},entrada:{key:"entrada",text:t("file.entrada")},saida:{key:"saida",text:t("file.saida")}};function existZoneInRules(idZone,mode){for(var id in db.regras){var regra=db.regras[id];var devicesOfRule=$filter("where")(regra.itens,{tipo:"zona",id:idZone,modo:mode});if(devicesOfRule.length>0)return true}return false}function existDeviceInRules(idLoop,idDevice,mode){for(var id in db.regras){var regra=db.regras[id];var devicesOfRule=$filter("where")(regra.itens,{tipo:"dispositivo",endereco:idDevice,laco:idLoop,modo:mode});if(devicesOfRule.length>0)return true}return false}function isSupervisionRule(idRule){var supervisionRule=true;var inputItens=$filter("where")(db.regras[idRule].itens,{modo:"entrada"});for(var idItem in inputItens){var item=inputItens[idItem];if(item.tipo=="evento"){supervisionRule=false;return}else if(item.tipo=="zona"){for(var idLaco in db.lacos){$filter("where")(db.lacos[idLaco].dispositivos,{zona:item.id}).some((function(device){if(!device.supervisao){supervisionRule=false;return}}));if(!supervisionRule)break}}else if(item.tipo=="dispositivo"){if(!db.lacos[item.laco].dispositivos[item.endereco].supervisao){supervisionRule=false;return}}}if(inputItens.length==0){supervisionRule=false}return supervisionRule}function getZonesRules(mode){var zones={};for(var id in db.zonas){var zona=db.zonas[id];zones[id]={saida:true,entrada:true};["entrada","saida"].forEach((function(mode){if(!existZoneInRules(id,mode)){zones[id][mode]=false}}))}return zones}function getZonesMode(){var zones={};for(var id in db.zonas){var zona=db.zonas[id];zones[id]={saida:false,entrada:false};for(var idLaco in db.lacos){$filter("where")(db.lacos[idLaco].dispositivos,{zona:id}).some((function(device){var deviceMode=modes[$rootScope.CONFIG.subtipos[device.subtipo].modo];zones[id][deviceMode.key]=true}))}}return zones}function configurationValidade(){var deferred=$q.defer();var items=[];var zones={};for(var idLaco in db.lacos){var dispositivos=db.lacos[idLaco].dispositivos;for(var endereco in dispositivos){var device=dispositivos[endereco];zones[device.zona]=true}}for(var idZone in db.zonas){var zona=db.zonas[idZone];if(zona.id>1&&typeof zones[zona.id]==="undefined"){items.push("Zona "+$filter("numberFormat")(zona.id))}}if(items.length>0){deferred.reject({error:2,items:items});return deferred.promise}var zonesRules=getZonesRules();for(var idLaco in db.lacos){var dispositivos=db.lacos[idLaco].dispositivos;for(var endereco in dispositivos){var device=dispositivos[endereco];//console.log(device);var deviceMode=modes[$rootScope.CONFIG.subtipos[device.subtipo].modo];var loop=parseInt(idLaco);if(device.zona>0&&!device.saida_padrao&&!zonesRules[device.zona][deviceMode.key]){if(!existDeviceInRules(loop,endereco,deviceMode.key)){if(loop==0){items.push(t("file.dispostitivoLocal")+" -  "+device.nome)}else{items.push(t("file.laco")+" "+loop+" - "+t("file.dispositivo")+" "+$filter("numberFormat")(endereco))}}}}}if(items.length>0){deferred.reject({error:1,items:items});return deferred.promise}for(var id in db.regras){var regra=db.regras[id];if(regra.id!=1){["entrada","saida"].forEach((function(mode){var itensOfRule=$filter("where")(regra.itens,{modo:mode});if(mode=="saida"&&itensOfRule.length==0&&!isSupervisionRule(id)||mode=="entrada"&&itensOfRule.length==0&&!regra.brigada&&!regra.alarme){items.push(t("file.regra")+" "+$filter("numberFormat")(id)+" - "+t("file.naoPossuem")+" "+modes[mode].text)}}))}}if(items.length>0){deferred.reject({error:3,items:items});return deferred.promise}for(var id in db.regras){var regra=db.regras[id];var itensOfRule=$filter("where")(regra.itens,{modo:"entrada"});if(regra.condicao_entrada==="dupla"&&itensOfRule.length<2){var qtyInputDevices=0;for(var itemId in itensOfRule){var item=itensOfRule[itemId];if(item.tipo==="zona"){for(var idLaco in db.lacos){$filter("where")(db.lacos[idLaco].dispositivos,{zona:item.id}).some((function(device){var deviceMode=$rootScope.CONFIG.subtipos[device.subtipo].modo;if(deviceMode==="entrada"){qtyInputDevices++}}))}}}if(qtyInputDevices<2){items.push(t("file.regra")+" "+$filter("numberFormat")(id)+" - "+t("file.regraEntradaDupla"))}}}if(items.length>0){deferred.reject({error:6,items:items});return deferred.promise}var zonesMode=getZonesMode();for(var id in db.regras){var regra=db.regras[id];if(regra.id!=1){["entrada","saida"].forEach((function(mode){var itensOfRule=$filter("where")(regra.itens,{modo:mode});var existDevices=$filter("where")(itensOfRule,{tipo:"dispositivo"}).length>0;var existEvents=$filter("where")(itensOfRule,{tipo:"evento"}).length>0;var zonesOfRuleByMode=$filter("where")(itensOfRule,{tipo:"zona"});//console.log("zonesOfRuleByMode",zonesOfRuleByMode);if(zonesOfRuleByMode.length>0&&!existEvents&&!existDevices){var errorZones=[];var hasMode=false;for(var zoneIndex in zonesOfRuleByMode){if(zonesMode[zonesOfRuleByMode[zoneIndex].id][mode]){hasMode=true}else{errorZones.push($filter("numberFormat")(zonesOfRuleByMode[zoneIndex].id))}}if(!hasMode){items.push(t("file.regra")+" "+$filter("numberFormat")(id)+": "+t("file.asZonas")+" "+errorZones.join(" ")+" "+t("file.estaoConfiguradas")+" "+modes[mode].text+" "+t("file.masNaoPossuem")+" "+modes[mode].text+";")}}}))}}if(items.length>0){deferred.reject({error:3,items:items});return deferred.promise}for(var id in db.regras){var regra=db.regras[id];["entrada","saida"].forEach((function(mode){var devicesOfRule=$filter("where")(regra.itens,{modo:mode,tipo:"dispositivo"});for(var deviceItemId in devicesOfRule){var deviceItem=devicesOfRule[deviceItemId];var device=db.lacos[deviceItem.laco].dispositivos[deviceItem.endereco];var deviceMode=modes[$rootScope.CONFIG.subtipos[device.subtipo].modo].key;if(mode!=deviceMode){items.push(t("file.regra")+" "+$filter("numberFormat")(id)+" - "+t("file.oDispositivo")+" "+$filter("numberFormat")(device.endereco)+" - "+device.nome+" ("+t("file.laco")+" "+deviceItem.laco+") "+t("file.estaDefinido")+" "+modes[mode].text.toUpperCase()+" "+t("file.dispositivoDe")+" "+$rootScope.CONFIG.subtipos[device.subtipo].modo.toUpperCase()+".")}}}))}if(items.length>0){deferred.reject({error:5,items:items});return deferred.promise}var maxSeconds=parseInt(db.sistema.retardo.split(":")[0])*60+parseInt(db.sistema.retardo.split(":")[1]);for(var id in db.regras){var regra=db.regras[id];if(regra.ativacao_saida=="temporizada"){var ruleSeconds=parseInt(regra.temporizacao.split(":")[0])*60+parseInt(regra.temporizacao.split(":")[1]);if(ruleSeconds>maxSeconds){items.push(t("file.regra")+" "+$filter("numberFormat")(id)+" - "+t("file.temporizacao")+": "+regra.temporizacao+".")}}}if(items.length>0){deferred.reject({error:4,items:items});return deferred.promise}//console.log("PREMISE",db.gateway);if(db.gateway&&db.gateway.integracao==="webhook"&&db.gateway.webhook){if(db.gateway.webhook.autenticacao==="https"){if(db.gateway.webhook.nivelAutenticacao==="criptografia"){if(!db.gateway.certificates_info&&(!db.gateway.webhook.cryptoFiles||db.gateway.webhook.cryptoFiles&&!db.gateway.webhook.cryptoFiles["root_ca_file"]||db.gateway.webhook.cryptoFiles&&!db.gateway.webhook.cryptoFiles["self_ca_file"])){items.push(t("system.erroSomenteCriptografia"))}}if(db.gateway.webhook.nivelAutenticacao==="opcional"){if(!db.gateway.certificates_info&&(!db.gateway.webhook.cryptoFiles||db.gateway.webhook.cryptoFiles&&!db.gateway.webhook.cryptoFiles["root_ca_file"])){items.push(t("system.erroOpcionalRaiz"))}if(!db.gateway.certificates_info&&(!db.gateway.webhook.cryptoFiles||db.gateway.webhook.cryptoFiles&&!db.gateway.webhook.cryptoFiles["self_ca_file"])){items.push(t("system.erroOpcionalCliente"))}}if(db.gateway.webhook.nivelAutenticacao==="obrigatoria"){if(!db.gateway.certificates_info&&(!db.gateway.webhook.cryptoFiles||db.gateway.webhook.cryptoFiles&&!db.gateway.webhook.cryptoFiles["root_ca_file"])){items.push(t("system.erroObrigatorioRaiz"))}if(!db.gateway.certificates_info&&(!db.gateway.webhook.cryptoFiles||db.gateway.webhook.cryptoFiles&&!db.gateway.webhook.cryptoFiles["self_ca_file"])){items.push(t("system.erroObrigatorioCliente"))}}}}if(items.length>0){deferred.reject({error:8,items:items});return deferred.promise}deferred.resolve();return deferred.promise}function verifyBreakChanges(){var deferred=$q.defer();var items=[];try{var featureNames={modbus:t("system.monitoramentoModbus"),"ponto-a-ponto":t("system.conexaoPontoPonto")};var featureConfig={modbus:db.sistema.modbus&&db.sistema.modbus===true,"ponto-a-ponto":db.sistema.rede&&db.sistema.rede.p2p&&db.sistema.rede.p2p===true};var defaultConfiguration={modbus:[{path:"sistema.modbus",value:false}],"ponto-a-ponto":[{path:"sistema.rede.p2p",value:false},{path:"sistema.rede.dhcp",value:true}]};var configurationsToChange={};for(var feature in $rootScope.CONFIG.controle_versao){//console.log(feature,$rootScope.hasFeatureInVersion(feature));if(!$rootScope.hasFeatureInVersion(feature)){if(featureConfig[feature]){items.push(featureNames[feature]);configurationsToChange[feature]=defaultConfiguration[feature]}}}if(items.length>0){deferred.reject({error:7,items:items,configurationsToChange:configurationsToChange});deferred.reject();return deferred.promise}}catch(e){console.error(e);deferred.resolve()}deferred.resolve();return deferred.promise}return{configurationValidade:configurationValidade,verifyBreakChanges:verifyBreakChanges}}])})();(function(){"use strict";angular.module("app").service("$udpAuthService",["$q","$http","$rootScope","$webSocket","$mdDialog",function($q,$http,$rootScope,$webSocket,$mdDialog){const auth=params=>{var deferred=$q.defer();$mdDialog.hide();$mdDialog.show({clickOutsideToClose:false,multiple:true,fullscreen:true,escapeToClose:true,templateUrl:"remote/getPassword.html",controller:($scope,$webSocket,$rootScope,$timeout)=>{$scope.searchType=params.tipo;$scope.password="";$scope.error=false;$scope.timeout=undefined;$scope.isGateway=$scope.searchType==="gw521";$rootScope.remainingAttemptsExceeded=$rootScope.remainingAttemptsExceeded!=undefined?$rootScope.remainingAttemptsExceeded:false;$scope.blockBtn=false;$scope.tryConnection=()=>{if($scope.blockBtn)return;$scope.passwordError=false;$scope.communicationError=false;$rootScope.setLoading("getPassword",true);if(!$scope.isGateway)$webSocket.send("udp_force_stop_communication");$timeout((()=>{$webSocket.send($scope.isGateway?"set_gateway_auth_eth":"udp_autenticacao",{ip:params.ip,endereco:params.endereco||0,password:$scope.password})}),1e3);$scope.timeout=$timeout((()=>{$scope.communicationError=true;$rootScope.setLoading("getPassword",false)}),5e3)};$scope.getPasswordMaxLength=()=>$scope.searchType==="gw521"?20:6;$scope.close=()=>{$mdDialog.hide()};$scope.checkPasswordLength=function(){const passwordLength=$scope.searchType==="gw521"?20:6;if($scope.password.length>passwordLength){$scope.password=$scope.password.substring(0,passwordLength)}return passwordLength};if($rootScope.remainingAttemptsExceeded){$scope.remainingAttemptsExceeded=$rootScope.remainingAttemptsExceeded;$scope.tryConnection()}$webSocket.get().$on($scope.isGateway?"set_gateway_auth_eth":"udp_autenticacao",(data=>{//console.log($scope.isGateway?"set_gateway_auth_eth":"udp_autenticacao",data);$rootScope.setLoading("getPassword",false);if(data.fail){$scope.passwordError=true;const{remainingAttempts:remainingAttempts,remainingBlockTime:remainingBlockTime}=data;$scope.remainingAttempts=remainingAttempts;$scope.remainingBlockTime=remainingBlockTime;$scope.remainingAttemptsExceeded=remainingAttempts==0?true:false;$rootScope.remainingAttemptsExceeded=$scope.remainingAttemptsExceeded;if($scope.remainingAttemptsExceeded){$scope.blockBtn=true;const errorsDiv=document.querySelector(".errors");const remainingTimeSpan=errorsDiv.querySelector(".remainingAttemptsExceededTime");errorsDiv.style.display="block";if(errorsDiv.dataset.timerInterval){clearInterval(errorsDiv.dataset.timerInterval)}let remainingBlockTimer=remainingBlockTime;function updateTimer(){remainingTimeSpan.innerHTML=`<br>Aguarde ${remainingBlockTimer} segundos`}const timerInterval=setInterval((()=>{if(remainingBlockTimer>0){remainingBlockTimer--;updateTimer()}else{clearInterval(timerInterval);errorsDiv.style.display="none";$scope.blockBtn=false;$rootScope.remainingAttemptsExceeded=false}}),1e3);errorsDiv.dataset.timerInterval=timerInterval}}else if(data.network_error){$scope.communicationError=true}else{$mdDialog.hide();if(!$scope.isGateway)deferred.resolve(data.token)}$timeout.cancel($scope.timeout);$scope.timeout=undefined}))}});return deferred.promise};return{auth:auth}}])})();(function(){"use strict";angular.module("app").constant("$i18n",{es:{config:{invalido:"Inválido","evento-1":"Falla Lazo 1","evento-2":"Falla Lazo 2","evento-5":"Sistema Alarma","evento-6":"Sistema Falla","evento-7":"Sistema Sup.","evento-9":"Alimentación","evento-14":"Alarma General","evento-15":"Llamar Brigada","evento-25":"Panel 1 Alarma","evento-26":"Panel 1 Falla","evento-27":"Panel 1 Supervisión","evento-28":"Panel 2 Alarma","evento-29":"Panel 2 Falla","evento-30":"Panel 2 Supervisión","evento-31":"Panel 3 Alarma","evento-32":"Panel 3 Falla","evento-33":"Panel 3 Supervisión","evento-34":"Panel 4 Alarma","evento-35":"Panel 4 Falla","evento-36":"Panel 4 Supervisión","evento-37":"Panel 5 Alarma","evento-38":"Panel 5 Falla","evento-39":"Panel 5 Supervisión","evento-40":"Panel 6 Alarma","evento-41":"Panel 6 Falla","evento-42":"Panel 6 Supervisión","evento-43":"Panel 7 Alarma","evento-44":"Panel 7 Falla","evento-45":"Panel 7 Supervisión","evento-46":"Panel 8 Alarma","evento-47":"Panel 8 Falla","evento-48":"Panel 8 Supervisión","evento-49":"Panel 9 Alarma","evento-50":"Panel 9 Falla","evento-51":"Panel 9 Supervisión","evento-52":"Panel 10 Alarma","evento-53":"Panel 10 Falla","evento-54":"Panel 10 Supervisión","evento-55":"Panel 11 Alarma","evento-56":"Panel 11 Falla","evento-57":"Panel 11 Supervisión","evento-58":"Panel 12 Alarma","evento-59":"Panel 12 Falla","evento-60":"Panel 12 Supervisión","evento-61":"Panel 13 Alarma","evento-62":"Panel 13 Falla","evento-63":"Panel 13 Supervisión","evento-64":"Panel 14 Alarma","evento-65":"Panel 14 Falla","evento-66":"Panel 14 Supervisión","evento-67":"Panel 15 Alarma","evento-68":"Panel 15 Falla","evento-69":"Panel 15 Supervisión","evento-70":"Panel 16 Alarma","evento-71":"Panel 16 Falla","evento-72":"Panel 16 Supervisión","alarme-0":"Sin Alarma","alarme-1":"Alarma","alarme-2":"Reset de la Alarma","alarme-3":"Salida Confirmada","alarme-4":"salida Desactivada","alarme-5":"IO Restaurada","alarme-6":"Sistema Alarmado","sup-0":"Sin Supervisión","sup-1":"Supervisión","sup-2":"Reset de Supervisión","sup-3":"Sistema en Supervisión","falha-0":"Fallas Restauradas","falha-1":"Dispositivo Inconsistente","falha-2":"Dispositivo No Configurado","falha-3":"Salida Padrón Falla No Configurada","falha-4":"Salida Padrón Alarma No Configurada","falha-5":"Salida Padrón Sup. No Configurada","falha-6":"Limpiar Sensor de Humo","falha-7":"Disp. en Falla","falha-8":"Disp. en Falla Salida Padrón Alarma","falha-9":"Disp. en Falla Salida Padrón Falla","falha-10":"Disp. en Falla Salida Padrón Sup.","falha-11":"Falla Energia C.A.","falha-12":"Sobrevoltaje Fuente","falha-13":"Subvoltage Fuente","falha-14":"Fuga al Tierra Negativa","falha-15":"Fuga al Tierra Positiva","falha-16":"Salida Cargador Reserva Abajo 0.9V","falha-17":"Desconexion Fuente de Energia Reserva","falha-18":"Sin Alimentación Batería Insuficiente","falha-19":"Falla del Sistema Comunicación Placa Lazo","falha-20":"Falla del Sistema Comunicación Fuente","falha-21":"Falla del Sistema Memoria Dañada","falha-22":"Falla del Sistema Firmware Dañado","falha-23":"Falla del Sistema Memoria Lazo Dañada","falha-24":"Config. Inconsistente Conecta la Computadora","falha-25":"Falla Comunicación Dispositivo","falha-26":"Falla Comunicación Salida Padrón Alarma","falha-27":"Falla Comunicación Salida Padrón Falla","falha-28":"Falla Comunicación Salida Padrón Sup.","falha-29":"Circuito General Abierto Dispositivo Salida Lazo","falha-30":"Circuito Abierto Salida Padrón Alarma","falha-31":"Circuito Abierto Salida Padrón Falla","falha-32":"Circuito Abierto Salida Padrón Sup.","falha-33":"Corto circuito Salida Padrón Alarma","falha-34":"Corto circuito Salida Padrón Falla","falha-35":"Corto circuito Salida Padrón Sup.","falha-36":"Falla Función Salida","falha-37":"Falla en el Sistema","falha-38":"Datos Inconsistentes","falha-39":"Fallas Restauradas","falha-40":"Sistema en Falla","falha-41":"Falla Batería","falha-42":"Inicialización de Fuente","falha-43":"Lazo en Falla","falha-44":"Falla Función Salida Padrón Alarma","falha-45":"Falla Función Salida Padrón Falla","falha-46":"Falla Función Salida Padrón Sup.","falha-47":"Falla de Comunicación con el Repetidor","falha-48":"Falla de Comunicación con el Repetidor - Versión Incompatible","falha-49":"Falla Comunicación com el Panel","falha-50":"Falla Batería Externa","falha-51":"Falla Comunicación en la Interconexión","falha-52":"Falla Comunicación Coord. Version distinta","oper-0":"Operación","oper-1":"Reset Operación","oper-2":"Panel Silenciado","oper-3":"Sirena Silenciada","oper-4":"Reactivación Sirena","oper-5":"Acceso Nivel 2","oper-6":"Acceso Nivel 3","oper-7":"Acceso Nivel 4","oper-8":"Regla Pospuesta","oper-9":"Panel Reiniciado","oper-10":"Sistema Iniciado","oper-11":"Bloqueo Realizado","oper-12":"Conexión PC","oper-13":"Reloj Ajustado","oper-14":"Botón Sirena Brigada","oper-15":"Botón Alarma General","oper-16":"Regla Cumplida","oper-17":"Evento Desconocido","oper-18":"Retraso Cancelado","oper-19":"Evento en Temp.","oper-20":"1/2 Regla Doble","oper-21":"Regla No Config.","oper-22":"Disp. No Config.","oper-23":"Zona No Config.","oper-24":"Botón Silenciar S.","oper-25":"Startup Ejecutado","oper-26":"Tiempo Maximo Retraso","oper-27":"Falla Restaurada","oper-28":"Disp. Bloqueado","oper-29":"Disp. Desbloqueado","oper-30":"Disp. Activado","oper-31":"Disp. Desactivado","oper-32":"Panel Atualizado","oper-33":"Error Actualización","oper-34":"Ejecutando Regla","oper-35":"Accionar bloqueo de regla","oper-36":"Regla Bloqueada","oper-37":"Regla Desbloqueada","oper-38":"Zona Bloqueada","oper-39":"Zona Desbloqueada","oper-40":"Lazo Bloqueado","oper-41":"Lazo Desbloqueado","oper-42":"Claves Reseteadas","oper-43":"Disp. Eliminado","oper-44":"Disp. Insertado","oper-45":"Error Comunicación Fuente","oper-46":"Lazo Registrado","oper-47":"Configuración Padrón","oper-48":"2/2 Regla Doble","oper-49":"Regla Accionada","oper-50":"Guardar/Leer Disp.","oper-51":"Tiempo Retraso Conf","oper-52":"Regla Accionada Man.","oper-53":"Nuevo Modelo Panel","oper-54":"Datos Sistema Cambiado","oper-55":"Clave Nivel2 Alterada","oper-56":"Clave Nivel3 Alterada","oper-57":"Clave Nivel4 Alterada","oper-58":"Sistema con Falla de Energia","oper-59":"Sistema en Pre Alarma","oper-60":"Operación Remota Programador","tipo-1":"Sensor de Humo","tipo-2":"Sensor de Temperatura","tipo-3":"Actuador Manual","tipo-4":"Módulo de Zona","tipo-5":"Módulo de entrada","tipo-9":"Módulo de entrada o salida","tipo-10":"Señalizador Audiovisual","tipo-12":"Salida Local","subtipo-1":"Sensor de Humo","subtipo-2":"Sensor de Temperatura","subtipo-3":"Actuador Manual","subtipo-4":"Módulo de Zona","subtipo-5":"Entrada sin controle de alimentación","subtipo-6":"Entrada con controle de alimentación","subtipo-7":"Sirena Convencional","subtipo-8":"Salida con confirmación","subtipo-9":"Salida sin confirmación","subtipo-10":"Señalizador Audiovisual","subtipo-11":"Entrada local","subtipo-12":"Salida Local","subtipo-13":"Sirena con confirmación","interl-25":"Panel 1","interl-26":"Panel 1","interl-27":"Panel 1","interl-28":"Panel 2","interl-29":"Panel 2","interl-30":"Panel 2","interl-31":"Panel 3","interl-32":"Panel 3","interl-33":"Panel 3","interl-34":"Panel 4","interl-35":"Panel 4","interl-36":"Panel 4","interl-37":"Panel 5","interl-38":"Panel 5","interl-39":"Panel 5","interl-40":"Panel 6","interl-41":"Panel 6","interl-42":"Panel 6","interl-43":"Panel 7","interl-44":"Panel 7","interl-45":"Panel 7","interl-46":"Panel 8","interl-47":"Panel 8","interl-48":"Panel 8","interl-49":"Panel 9","interl-50":"Panel 9","interl-51":"Panel 9","interl-52":"Panel 10","interl-53":"Panel 10","interl-54":"Panel 10","interl-55":"Panel 11","interl-56":"Panel 11","interl-57":"Panel 11","interl-58":"Panel 12","interl-59":"Panel 12","interl-60":"Panel 12","interl-61":"Panel 13","interl-62":"Panel 13","interl-63":"Panel 13","interl-64":"Panel 14","interl-65":"Panel 14","interl-66":"Panel 14","interl-67":"Panel 15","interl-68":"Panel 15","interl-69":"Panel 15","interl-70":"Panel 16","interl-71":"Panel 16","interl-72":"Panel 16","local-10":"Salida localS1","local-13":"Salida localS3","local-16":"Salida Repet 1","local-17":"Salida Repet 2","local-18":"Salida Repet 3","local-19":"Salida Repet 4","local-20":"Salida localS2"},file:{novo:"Nuevo",abrir:"Abrir",salvar:"Guardar",salvarComo:"Guardar Como",relatorios:"Informes",comunicar:"Comunicar",configuracoesPadrao:"Configuraciones padrón",novoProjeto:"Nuevo Proyecto de Interconexión de Paneles",interligacaoIntroA:"La interconexión entre paneles de alarma contra incendios en la línea CIE proporciona al escenario de instalación la posibilidad de conectar hasta 16 paneles en red, que se comunican en caso de eventos en el sistema, permitiendo al usuario verificar y enviar comandos a todos",interligacaoIntroB:"Al crear un proyecto de Interconexión de paneles, se creará un archivo de Proyecto de Interconexión, este archivo abarca las configuraciones individuales de todos los paneles configurados en el proyecto de interconexión de paneles e inserta recursos para una mejor visión global del proyecto de interconexión de paneles, como monitoreo entre paneles y envío de comandos globales.",selecione:"Seleccione",configurarPosteriormente:"Configurar más tarde",quantasCentrais:"¿Cuántos paneles estarán interconectados?",modeloCentrais:"¿Modelo de los Paneles?",sim:"Si",nao:"No",todasMonitoram:"¿Todos los paneles se monitorean?",ativacaoComandos:"Activación de Comandos Globales:",alarmeGeral:"Alarma General",reiniciarCentral:"Reiniciar Panel",silenciarCentral:"Silenciar Panel",silenciarSirene:"Silenciar Sirena",sireneBrigada:"Sirena de Brigada",criarProjeto:"Crear proyecto",cancelar:"Cancelar",crieNovoArquivo:"Cree un nuevo archivo con la configuración padrón. Seleccione el modelo de panel para crear un nuevo archivo de configuración padrón",online:"ONLINE",novoArquivo:"Archivo nuevo",configuracoesCentral:"Configuraciones del panel",ativeConexao:"Active la conexión del panel para enviar o recibir configuraciones.",crieUmNovo1:"Cree un nuevo archivo con las configuraciones que estan en operacion en el panel",crieUmNovo2:"que esta conectado.",conecteCentral:"Conecte el Panel CIE para crear un nuevo archivo con las configuraciones que estan en funcionamiento.",receberConfiguracao:"Recibir configuración",estaPronta:"está listo para enviar y recibir programaciones.",conecteCentral1:"Conecte un panel",conecteCentral2:"para enviar y recibir programaciones",centralBloqueada:"Panel Bloqueado",naoPossivel:"¡No es posible enviar las configuraciones de paneles diferentes!",centralConectada:"Panel conectado:",centralConfigurada:"Panel configurado:",selecioneUmaCentral:"Seleccione un panel en el proyecto para habilitar acciones.",enviarProgramacaoCentral:"Enviar la programación para el Panel",enviar:"ENVIAR",receber:"RECIBIR",receberProgramacao:"Recibir programación del Panel",haInconsistencias:"¡Hay inconsistencias en la programación!",confiraALista:"Consulte la lista de inconsistencias abajo, para enviar la programación debe aceptar los cambios.",laco:"Lazo",endereco:"Direccion",nome:"Nombre",tipo:"Tipo",novoTipo:"Nuevo Tipo",inconsistencia:"Inconsistencia",aceitarAlteracoes:"Aceptar cambios",novoProjetoCriado:"Nuevo proyecto de interconexión creado",novaConfiguragao:"Nueva configuración creada",atencao:"Atención",necessarioAtualizacao:"¡Es necesario actualizar el firmware del panel para recibir/enviar la configuración!",novaVersaoDisponivel:"¡Hay una nueva versión de firmware disponible!",recomendadoAtualizacao:"¡Se recomienda hacer la actualización del firmware del switch para recibir/enviar la configuración!",versaoRecomendada:"Versión recomendada",versaoMinima:"Versión mínima obligatoria",versaoCentral:"Versión del panel conectado",mensagem1:"Los dispositivos abajo no pertenecen a una regla:",solucao1:"Agrega los dispositivos en una regla o en una zona que pertenece a una regla.",mensagem2:"Las zonas abajo no tienen dispositivos configurados:",solucao2:"Cada zona debe contener al menos un dispositivo, por lo tanto, agregue dispositivos a las zonas.",mensagem3:"Las reglas abajo no tienen elementos configurados:",solucao3:"Todas las reglas deben contener elementos como Entrada y Salida, por lo tanto, agregue elementos a las Reglas.",mensagem4:"Las Reglas abajo tienen un retraso mayor que el Tiempo Máximo de Retraso:",solucao4:"Ajuste el tiempo de las reglas o el campo Tiempo de Retraso Máximo en Sistema > Configuración.",mensagem5:"Las reglas abajo tienen configuraciones de dispositivo inconsistentes:",solucao5:"Ajuste la configuración de la regla moviendo los dispositivos a su modo correspondiente, Entrada o Salida.",mensagem6:"Las Reglas abajo no cumplen con la Condición de Entrada Doble:",solucao6:"¡Agregue al menos dos elementos de entrada para cumplir con la Condición de Entrada Doble, configure la Regla en Condición de entrada única o active los botones de sirena de brigada o alarma general!",mensagem7:"Es posible que las siguientes funciones no estén disponibles en la versión de panel conectado y volverá a la predeterminada:",solucao7:"Para activarlos es necesario actualizar el Panel.",inconsistenciaProgramacao:"Inconsistencia en la programación!",necessarioAjustar:"Es necessario ajustar la programación para enviar.",inconsistenciaProgramacaoCentral:"Inconsistencia en la programación del Panel",salvarInconsistencia:"GRAVAR CON INCONSISTENCIA",recomedadoAjustar:"Se recomienda ajustar la programación antes de guardar.",salvando:"Guardando...",naoPossivelReceber:"¡No es posible recibir/enviar la configuración de paneles diferentes!",recebendoProgramacoes:"Recibiendo programaciones ...",modeloCentralDiferente:"El modelo de Panel configurado es diferente del Panel conectado.<br>Al recibir la configuración, el modelo cambiará y se perderá la configuración actual.",desejaContinuar:"¿Desea continuar?",aoReceberConfiguracao:"Al recibir la configuración del Panel conectado, se perderá la configuración actual.",centralDesconectada:"Panel Desconectado",salvoSucesso:"¡Guardado con éxito!",arquivoJaExiste:"¡Este archivo ya existe!",desejaSobrescrever:"¿Desea sobrescribir las configuracionesn?",configuracaoEnviadaSucesso:"¡Configuración enviada con éxito!",falha:"Falla!",falhaComunicacao:"¡Falla de comunicación!",confiraTente:"Verifique la conexión e intente nuevamente.",eviandoProgramacoes:"Enviando programaciones ...",centraoNaoPossuiPlaca:"La interconexión del panel está configurada pero el panel conectado no tiene una Placa Ethernet.",desconfigureSistema:"Desconfigure en Sistema > Interconexión de Paneles y envíe la configuración nuevamente.",recebidaSucesso:"¡Nueva configuración recibida con éxito!",aoCriarNova:"Al crear una nueva configuración, se perderá la actual, ¿desea continuar?",configuracaoInvalida:"¡Configuración inválida!",naoFoiPossivelEnviar:"No fue posible enviar la programación.",dispositivosNaoExistem:"¡Los dispositivos configurados no existen en el Panel!",verifiqueDispositivos:"Verifique los dispositivos instalados y la configuración realizada e intente nuevamente.",forcarEnvio:"Forzar envio",enviarConfiguracao:"Enviar configuración",todosDispositivosIconsistencia:"Todos los dispositivos inconsistentes se eliminarán de las Zonas y Reglas, y se agregarán nuevamente en la Zona Padrón y la Regla padrón.",desejaContinuarEnvio:"¿Desea seguir enviando la programación?",verificandoInconsistencias:"Verificando inconsistencias ...",centralMac:"El Panel con el MAC",jaEstaNo:"ya está en el proyecto con dirección",enviarProgramacao:"Enviar programación",existemConfiguracoes:"Hay configuraciones no guardadas.",salvarEnviar:"Guardar e enviar",somenteEnviar:"Solo enviar",selecioneEssa:"Seleccione este Panel para vincular la configuración correctamente.",arquivoInvalido:"¡Archivo inválido!",arquivoCorrompido:"¡El archivo seleccionado está dañado!",extensaoIncorreta:"¡El archivo seleccionado no es un archivo válido! El archivo de programación debe ser una extensión .cie o .cieproj",arquivoIncompativel:"El archivo de datos es incompatible con la versión del programador CIE",versaoAnterior:"¡Debe instalar una versión anterior para abrir el archivo!",versaoMaior:"La versión del archivo de datos es más alta que la versión del Programador CIE.",instalarVersao:"Es necesario instalar la versión",paraAbrir:"o superior para abrir el archivo de programación",projetoCarregado:"Proyecto de interconexión cargado!",configuracaoCarregada:"Configuración cargada!",entrada:"Entrada",saida:"Salida",dispostitivoLocal:"Dispositivo local",dispositivo:"Dispositivo",naoPossuem:"no tiene ítems de",regra:"Regla",regraEntradaDupla:"La Regla necesita dos elementos de entrada para cumplir con la Condición de Entrada Doble.",asZonas:"la(s) Zona(s)",estaoConfiguradas:"están configurados como",masNaoPossuem:"pero no tiene dispositivos de",oDispositivo:"El dispositivo",estaDefinido:"se define como",dispositivoDe:"pero es un dispositivo de",temporizacao:"Retraso",necessarioAtualizacaoProgramador:"¡Es necesario actualizar el Programador para recibir / enviar la configuración!",versaoMinimaProgramador:"Versión mínima obligatoria del Programador CIE",falhaValidacaoCertificado:"La validación del certificado falló",certificadoNaoImportado:"no importado.",importeETenteNovamente:"Importe un certificado válido y vuelva a intentarlo.",configuracaoEnviadaCentralReiniciada:"¡Configuración enviada! El Panel se reiniciará"},global:{header:"PANEL DE ALARMA CONTRA INCENDIO",modoConexao:"MODO DE CONEXIÓN",rede:"RED",buscar:"BUSCAR",centralBloqueada:"Panel bloqueado: active la conexión en el Panel",aguardando:"Esperando",central:"panel",centralUpper:"Panel",desconectar:"DESCONECTAR",arquivo:"Archivo",online:"online",offline:"offline",arquivoNaoSalvo:"Archivo no guardado",projetoInterligacao:"Proyecto de interconexión",menuArquivo:"Archivo","menuInterligação":"Interconexión",menuLacos:"Lazos",menuZonas:"Zonas",menuRegras:"Reglas",menuSistema:"Sistema",menuFerramentas:"Herramientas",rp520:"Repetidor RP 520",projeto:"Proyecto de Interconexión",ajuda:"Ayuda",idioma:"Idioma",fecharProgramador:"Cerrar Programador CIE",existemAlteracoes:"No se han guardado cambios de configuración. ¿Desea cerrar?",fechar:"cerrar",cancelar:"cancelar",programadorAjuda:"Programador CIE - Ayuda",programadorRelatorio:"Programador CIE - Informe",atualizandoCentral:"Actualización del Panel. Espere...",recebendoCentral:"Recibiendo eventos de ",eventosCarregados:"Se cargarán los siguintes eventos: ",conexao:"Conexión",centralUsb:"Hay un Panel conectado a través de USB, pero el MODO DE CONEXIÓN actual es RED",altereUsb:"Cambie a USB para realizar la conexión remota.",atencao:"Atención",alterandoConexao:"Al cambiar el modo de conexión, se perderá la conexión actual.",desejaSalvar:"¿Quieres guardar los cambios?",foramFeitasAlteracoes:"Se han realizado cambios",salvar:"GUARDAR",descartar:"DESCARTAR",aguarde:"Espere...",recebendoSalvando:"Recibiendo y guardando en archivo. Espere...",arquivoSalvoEm:"Archivo guardado con éxito en",erroTente:"Error, intente nuevamente.",configuracoesPerdidas:"La configuración actual se perderá.",arquivoConfiguracoes:"El archivo de configuración",seraAberto:"estara abierto",desejaContinuar:"¿Desea continuar?",sim:"SI",seraDesconectada:"El panel se desconectará.",permiteAbrir:"El programador CIE le permite abrir solo archivos con la extensión .CIE o .CIEPROJ.",salvarPdf:"GUARDAR PDF",funcionalidadeDisponivel:"Funcionalidad disponible desde la versión CIE",conecteUmaCentral:"Conecte el panel para habilitar.",novaVersao:"Hay una nueva actualización disponible para el Panel",desejaAtualizarAgora:"¿Quieres actualizar ahora?",pular:"Saltar",existemAlteracoesNaoEnviadas:"Hay cambios de configuración que no se han enviado al conmutador conectado.",desconectarMesmoAssim:"¿Quieres desconectarte de todos modos?",falha:"Falla",falhaNaComunicacao:"Hubo un fallo de comunicación. Inténtalo de nuevo."},logs:{paraVisualizar:"Para ver el REGISTRO DE EVENTOS, agregue el archivo del panel deseado.",paraSalvar:"Para guardar un archivo, entre en Registro de eventos.",registroEventos:"Registro de Eventos",apresentar:"Presentar",ocultar:"Esconder",central:"Panel",adicionarArquivo:"AGREGAR ARCHIVO",nenhumRegistro:"No hay registros para ser presentado",filtrarData:"Filtrar por fecha",ate:"hasta",abrirArquivo:"Abrir archivo",receberDaCentral:"Recibir del Panel",salvar:"Guardar",gerarPdf:"Generar PDF",generatePdfDialog:"Gerar PDF de los eventos de:",evento:"Evento",arquivo:"Archivo",origem:"Origen",centralDe:"Panel de",data:"Fecha",hora:"Hora",laco:"Lazo",nome:"Nombre",tipo:"Tipo",subtipo:"Subtipo",idZona:"ID Zona",nomeZona:"Nombre Zona",repetidora:"Repetidor",regraAtivacao:"Regla Activación",operacaoRemotaProgramador:"Operación Remota Programador",selecioneOpcao:"Seleccione la opción deseada para mostrar el Registro de Eventos de alarma, falla, supervisión y operación.",todos:"Todos",alarme:"Alarma",operacao:"Operación",supervisao:"Supervisión",falha:"Falla",remover:"Retirar",sim:"Si",cancelar:"Cancelar",removerRegistros:"Retirar registros de eventos del Panel",necessarioQueExistam:"¡Se requieren registros para guardar!",arquivoSelecionado:"¡El archivo seleccionado está dañado!",arquivoInvalido:"¡El archivo seleccionado no es un archivo de Registro de Eventos válido!",arquivoExtensao:"El archivo debe tener una extensión .cielog",carregado:"¡Registro de eventos cargado con éxito!",carregadoCentral:"¡Registro de eventos del Panel cargado con éxito!",oRegistroDeEventos:"El registro de eventos del Panel",jaAdicionado:" ya está agregado",desejaSubstituir:"¿Desea sustituir?",naoExistemEventos:"No hay eventos para ser presentado",falhaAoReceber:"Se produjo un error al recibir los registros.",registrosRecebidos:"¡Registro de eventos recibido con éxito!",recebendoRegistros:"Recibiendo el registro de eventos del Panel. Espere...",getLogsTypeProgress:"Recibiendo Eventos de",necessarioCentral:"¡Es necesario tener un Panel conectado para recibir los registros!",haRelatorioProcessando:"Hay un informe en proceso, espere a que se complete para generar nuevamente.",naoHaEventosImpressos:"¡No hay eventos para imprimir!",selecioneEndereco:"Seleccione la dirección del panel al que pertenece el archivo",endereco:"Dirección ",selecione:"Seleccione",adicionnar:"AGREGAR",registrosPagina:"Registros por página",pagina:"Página",tipoEvento:"Tipo Evento",falhaClasseABIndeterminada:"Indeterminada",falhaClasseABNaSaidaDoLaco:"Saída do Laço",falhaClasseABNoRetornoDoLaco:"Retorno do Laço",falhaClasseABNaSaidaERetornoDoLaco:"Saída e retorno do Laço",falhaFaltaRedeEletrica:"Falta de rede elétrica",falhaFaltaBateria:"Falta de bateria",falhaFugaTerraPositivo:"Terra positivo",falhaFugaTerraNegativo:"Terra negativo",falhaSireneEmCurto:"Sirene em curto",falhaSireneEmAberto:"Sirene em aberto",falhaSaida24VEmCurto:"Saída 24V em curto",falhaSubtensao:"Subtensão",Desconhecido:"Desconhecido",CentralIniciada:"Centr.Iniciada",CentralReiniciada:"Cen.Reiniciada",AcessoSenha_2_:"Acesso Senha 2",AcessoSenha_3_:"Acesso Senha 3",AcessoSenha_4_:"Acesso Senha 4",BipInternoSilenciado:"Bip Silenciado",SireneAdiada:"Sirene Adiada ",SireneSilenciada:"Sir.Silenciada",DataHoraAlterada:"AjusteDataHora",FuncaoGravarEnderececo:"Gravacao Ende.",FuncaoLerEndereco:"Leitura Ender.",RegistroDeLaco:"Registro Laco ",AjusteTempoAtraso:"Aj.TempoAtraso",AjusteTempoMaximo:"Aj.TempoMaximo",AcessoFuncaoWiFi:"Acesso WiFi   ",ConclusaoFuncaoWiFi:"Configur. WiFi",AcessoFuncaoWizzard:"Acesso Wizzard",ConcluidoWizzardPadrao:"Config. Padrao",AjusteDisplayContrasteBacklight:"Ajuste Display",AcessoEdicaoNomesDispositivos:"Ac.EdicaoNomes",AlteradoSenha_2_:"AlteradoSenha2",AlteradoSenha_3_:"AlteradoSenha3",AlteradoSenha_4_:"AlteradoSenha4",AcessoEdicaoLocalInstalacao:"Ac.EdicaoLocal",RegraPadraoAlterada:"Aj.RegraPadrao",AlteradoCentralParaClasseA:"Aj.LacoClasseA",AlteradoCentralParaClasseB:"Aj.LacoClasseB",SireneConvencionalAcionadaManualmente:"SireneAcionada",SireneConvencionalDesacionadaManualmente:"SirereDesliga.",SireneConvencionalBloqueadaManualmente:"SirereBloqueio",SireneConvencionalDesbloqueadaManualmente:"SirereDesbloq.",ReleAlarmeAcionadoManualmente:"ReleAlarme Ac.",ReleAlarmeDesacionadoManualmente:"ReleAlarmeDes.",ReleAlarmeBloqueadoManualmente:"ReleAlarmeBloq",ReleAlarmeDesbloqueadoManualmente:"ReleAlarmeDesb",ReleFalhaAcionadoManualmente:"ReleFalha  Ac.",ReleFalhaDesacionadoManualmente:"ReleFalha Des.",ReleFalhaBloqueadoManualmente:"ReleFalha Bloq",ReleFalhaDesbloqueadoManualmente:"ReleFalha Desb",BloqueioRegraPadrao:"Bloq.RegraPadr",DesbloqueioRegraPadrao:"Desb.RegraPadr",BloqueioLaco:"Bloqueio Laco ",DesbloqueioLaco:"Desbloq. Laco ",BloquearTodos:"Bloquear Todos",DesbloquearTodos:"Desbloq. Todos",AcionarTodos:"Acionar Todos ",DesacionarTodos:"Desacion.Todos",OperacaoBloqueado:"Bloqueado",OperacaoDesbloqueado:"Desbloqueado",OperacaoAcionado:"Acionado",OperacaoDesacionado:"Desacionado",OperacaoIncluidoNaTabelaDeRegistros:"IncluidoNoLaco",OperacaoExluidoDaTabelaDeRegistros:"ExcluidoDoLaco",alarmeGeral:"Alarme Geral",NaoRegistrado:"Não Registrado",podeDemorar:"Dependiendo de la cantidad de registros en el Panel, la recepción de eventos puede demorar varios minutos.",desejaContinuar:"¿Desea continuar?"},loop:{removerDispositivo:"Retirar Dispositivo",selecionar:"Seleccionar",criarDispositivo:"Crear Dispositivo",laco:"Lazo",saidasLocais:"Salidas Locales",ativado:"ativado",bloqueado:"bloqueado",ativadoUpper:"Activado",bloqueadoUpper:"Bloqueado",nenhumDispositivo:"Ningún dispositivo no LAZO",selecioneBotao:"Seleccione el boton",paraCriar:"para crear dispositivos",endereco:"Dirección",ativo:"Activo",saidaLocal:"Salida Local",nome:"Nombre",zona:"Zona",tipo:"Tipo",subtipo:"Subtipo",modo:"Modo",supervisao:"Supervisión",sim:"Si",nao:"No",cadastrarNovo:"Registrar nuevo dispositivo",fechar:"Cerrar",campoObrigatorio:"Campo obligatorio",enderecoJaUtilizado:"Dirección ya utilizada",enderecoDeveSer:"La dirección debe ser de 1 a 250",cancelar:"Cancelar",criar:"Crear",aplicar:"Aplicar",desconhecido:"Desconocido",Desconhecido:"Desconocido",foramFeitasAlteracoes:"Se hicieron cambios en el dispositivo.",desejaSalvar:"¿Desea guardar los cambios?",salvar:"GAUARDAR",descartar:"DESCARTAR",dispositivoSelecionado:"El dispositivo seleccionado se eliminará de las siguientes Reglas y Zonas:",seraoRemovidos:"Los dispositivos seleccionados se eliminarán de las siguientes Reglas y Zonas:",confirmaRemocao:"¿Confirma la retirada de los dispositivos?",remover:"Retirar",dispositivosRemovidos:"Dispositivos retirados!",entrada:"Entrada",saida:"Salida",atencao:"Atención",naoEPossivelDesabilitar:"No es posible desactivar un dispositivo que está configurado como Salida Padrón.",noDispositivo:"en el dispositivo",regra:"Regla",alterandoTipo:"Cambiando el tipo de dispositivo",podeSeInvalidar:"puede invalidar la configuración de la regla a la que pertenece.",desejaContinuar:"¿Desea continuar?",dispositivoCriado:"¡Dispositivo creado con éxito!",alteracoesAplicadas:"¡Cambios aplicados con éxito!",criarMaximo:"El sistema te permite crear un máximo de",dispositivoPorLaco:"dispositivos por Lazo",refazerScan:"Al volver a escanear, todos los dispositivos en el Lazo",seraoRemovidos2:"serán retirados",novosSeraoAdicionados:"Los nuevos dispositivos se agregarán automáticamente en la Zona Padrón y la Regla Padrón",realizandoScan:"Realizando el escaneo. Espere..",cetralPossui:"El panel conectado tiene",dispositivosNoLaco:"dispositivos en el Lazo",foramAdicionados:"Estos dispositivos se agregaron automáticamente en la Zona Padrón y la Regla Padrón",nenhumDispositivoEncontrado:"No se encontraron dispositivos en el lazo",verifiqueInstalacao:"Verifique la instalación del Lazo e intente nuevamente.",possuiMaisQue:"El panel tiene más de 125 dispositivos en el Lazo.",modeloSuporta:"El modelo CIE 1125 admite un máximo de 125 dispositivos por lazo.",lacoPossuiMaiores:"El lazo tiene direccion(es) superiores a 125. El modelo CIE 1125 admite direcciones hasta 125.",verifiqueDispositivos:"Verifique los dispositivos del lazo e intente nuevamente.",falhaConexao:"¡Falla de conexión!",verifique:"Verifique e intente nuevamente",scanLaco:"Escaneo del Lazo",nenhumaSaidaPadrao:"Ninguna - Salida Padrón"},project:{selecioneNovo:"Seleccione el nuevo modelo del Panel",modelo:"Modelo",selecione:"Seleccione",cancelar:"CANCELAR",alterar:"Cambiar",novaCentral:"Nuevo Panel",novaCentralPadrao:"Crear nuevo panel con la configuración padrón",importarArquivo:"Importar archivo de configuración",buscarRede:"Busca en la red",nenhumaEncontrada:"No se encontraron Paneles nuevos",novasCentrais:"Nuevos Paneles encontrados",central:"Panel",selecionarArquivo:"Seleccione Archivo",endereco:"Dirección",centrais:"PANELES",interligacoes:"INTERCONEXIONES",comandosGlobais:"COMANDOS GLOBALES",registroEventos:"REGISTRO DE EVENTOS",esseComando:"Este comando no está configurado en ninguna de las Reglas en",legenda:"subtítulo",enviaComando:"Envía el comando",naoTrata:"No maneja el comando",modoVisualizacao:"Modo de vista previa",tabela:"Tabla",grafo:"Grafo",aCentral:"El Panel",monitoraACentral:"Monitorea el Panel",trataEventosAlarme:"maneja eventos de ALARMA del Panel",trataEventosFalha:"maneja eventos de FALLA del Panel",trataEventosSupervisao:"maneja eventos de SUPERVISIÓN del Panel",monitora:"Monitorea",trataAlarme:"Maneja eventos de Alarma",trataFalha:"Maneja eventos de Falla",trataSupervisao:"Maneja eventos de Supervisión",colarToda:"Pegar toda la configuración",colarApenas:"Pegar solo la configuración de interconexión",online:"ONLINE",offline:"OFFLINE",alterarModelo:"Cambiar modelo",excluirProjeto:"Eliminar del proyecto",modeloUpper:"MODELO",descohecido:"Desconocido",configurar:"Configurar",copiar:"Copiar",ativarConexao:"Activar conexión",operarRemotamente:"Operar remotamente",copiado:"COPIADO",colar:"PEGAR",colarNovaCentral:"PEGAR NUEVO PANEL",atencao:"Atención",centralConectada:"Hay un Panel conectado, es necesario desconectarlo para operar remotamente",novaCentralImportada:"¡Nuevo Panel importado con éxito!",arquivoInvalido:"¡Archivo inválido!",centralCriada:"Panel creado con éxito!",removerCentralProjeto:"Eliminar Panel del proyecto",confirmaRemocao:"Confirma la eliminación del Panel",doProjeto:"del Proyecto?",remover:"Eliminar",removidoSucesso:"Eliminado con éxito!",aoAlterar:"Al cambiar el modelo, la configuración actual se perderá y volverá a la predeterminada.",desejaContinuar:"¿Desea continuar?",sim:"Si",modeloSucesso:"¡Modelo cambiado con éxito!",copiadoSucesso:"¡Copiado con éxito!",alarmeGeral:"Alarma General",reiniciarCentral:"Reiniciar Panel",silenciarCentral:"Silenciar Panel",silenciarSirene:"Silenciar Sirena",sireneBrigada:"Sirena de Brigada",configuracaoCarregada:"Configuración cargada!",enderecoRecebida:"La dirección de la configuración recibida es diferente de la dirección del Panel seleccionado en el proyecto de interconexión.",escolhaEndereco:"Elija la dirección para vincular a la configuración recibida "},remote:{insiraSenha:"Introducir la clave",nivel:"NIVEL",paraIniciar:"para comenzar la operación",senhaInvalida:"¡Clave invalida!",falhaComunicacao:"¡Falla de comunicación!",cancelar:"CANCELAR",conectar:"CONECTAR",buscarNaRede:"Buscar Paneles en la Red",conectarIp:"Conectar por dirección IP",buscar:"Buscar",nenhumaCentral:"No se encontraron Paneles.",buscando:"Buscando",enderecoIp:"Dirección IP",enderecoIpInvalido:"Dirección IP inválido",campoObrigatorio:"Campo obligatorio",operar:"OPERAR",configurar:"CONFIGURAR",centraisEncontradas:"Paneles encontrados",central:"Panel",buscarRede:"Buscar Equipos en la Red",buscarCIEs:"Buscar CIE1125, CIE1250 y CIE2500",operacaoRemota:"Operación Remota",fonte:"FUENTE",bateria:"BATERÍA",offline:"OFFLINE",online:"ONLINE",operacaoNormal:"OPERACIÓN NORMAL",sistemaEm:"SISTEMA EN",estadoAtual:"ESTADO ACTUAL",alarme:"ALARMA",falha:"FALLA",bloqueio:"BLOQUEO",supervisao:"SUPERVISIÓN",acoesGerais:"ACCIONES GENERALES",ativarSaida:"ACTIVAR SALIDA",registroEventos:"REGISTRO DE EVENTOS",operacao:"OPERACIÓN",silenciarBip:"SILENCIAR BIP INTERNO",adiarSirene:"POSPONER SIRENA",alarmeGeral:"ALARMA GENERAL",modelo:"MODELO",reiniciarCentral:"REINICIAR PANEL",bloqueios:"BLOQUEOS",silenciarSirene:"SILENCIAR SIRENA",sireneDeBrigada:"SIRENA DE BRIGADA",areaVisualizacao:"ÁREA DE VISUALIZACIÓN",selecioneAcao:"Seleccione una acción para que la información se muestre aquí",eventosDe:"EVENTOS DE",nenhumEvento:"No hay eventos para mostrar",regEventos:"REG. DE EVENTOS DE",nenhumregistro:"No hay registro para mostrar",regrasTemporizando:"REGLAS TIEMPO",adiarTodas:"Posponer a todo",dispararTodas:"Disparar a todos",ativarSaidas:"ACTIVAR SALIDAS",lacoUpper:"LAZO",ativos:"ACTIVOS",bloqueados:"BLOQUEADOS",todosUpper:"TODOS",nenhum:"Nengun",salvar:"GUARDAR",local:"LOCAL",atencao:"Atención",aoBuscar:"Al buscar nuevos Paneles, se perderá la conexión actual.",todos:"Todos",tipoAlarme:"Alarma",tipoFalha:"Falla",tipoSupervisao:"Supervisión",tipoOperacao:"Operación",tipoBloqueio:"Bloqueo",sim:"Si",conectarNovamente:"¿Desea conectarse nuevamente?",conexaoPerdida:"Se perdió la conexión con el Panel.",atuadores:"Actuadores",sirenes:"Sirenas",saidas:"Salidas",dispositivos:"Dispositivos",regras:"Reglas",zonas:"Zonas",lacos:"Lazos",ativaSaida:"Activa",bloqueioSaida:"Bloqueo",comandoNaoConfigurado:"Comando no configurado!",reiniciar:"Reiniciar Panel.",confirmaReinicializacao:"¿Confirmar el reinicio del Panel?",opRemotaProgramador:"Op. Remota Programador"},report:{relatorio:"Informe",relatorios:"Informes",selecioneConfiguracao:"Seleccione la configuración deseada para generar el informe",localInstalacao:"Local de Instalación",modeloCentral:"Modelo del Panel",laco:"Lazo",ativado:"Activado",sim:"Si",nao:"No",dispositivos:"Dispositivos",ativo:"Activo",nome:"Nombre",zona:"Zona",tipo:"Tipo",subtipo:"Subtipo",modo:"Modo",supervisao:"Sup.",ativada:"Activada",endAbreviado:"Dir.",endereco:"Dirección",itensEntradaSaida:"ítems de entrada/saída",respondeBotaoBrigada:"Responde al botón de Brigada",respondeBotaoAlarme:"Responde al botón de Alarma General",condicaoEntrada:"Condición de entrada",unica:"Única",dupla:"Duble",ativacaoSaida:"Activación de salida",temporizada:"Retraso de Tiempo",imediata:"Inmediata",novaEntrada:"Nueva entrada cancela el retraso de tiempo",saida:"Salida",entrada:"Entrada",relatorioGerado:"Informe generado en",nomeResponsavel:"Nombre del responsable",assinatura:"Firma",projetoInterligacao:"Proyecto de interconexión",registroEventos:"Registro de eventos",primeiroEvento:"1º Evt",evento:"Evento",centralDe:"Panel de",origem:"Origen",data:"Fecha",hora:"Hora",idZona:"ID Zona",nomeZona:"Nombre Zona",repetidora:"Repetidor",regraAtivacao:"Regla Acivación",operacaoRemota:"Operación Remota Programador",central:"Panel",gerandoAguarde:"Generando informe. Espere ... ",gerado:"Informe generado!",abrir:"Abrir",falhaPdf:"Error al generar informe PDF.",gerarRelatorio:"Generar informe",regra:"Regla"},rule:{removerRegra:"Retirar Regla",criarRegra:"Crear Regla",selecionar:"Seleccionar",ativada:"Activada",bloqueada:"Bloqueada",campoObrigatorio:"Campo obligatorio",idJaUtilizado:"ID ya utilizada",idFaixa:"La ID debe ser de 1 a 100",nome:"Nombre",responderBotaoDe:"Responder al botón de",brigada:"Brigada",alarmeGeral:"Alarma General",condicaoEntrada:"Condición de Entrada",unico:"Única",dupla:"Doble",ativacaoSaida:"Activación de salida",imediata:"Inmediata",temporizada:"Tiempo",temporizacao:"Temporización",tempoDeveSer:"El tiempo debe ser entre 00:01 y",tempoMaximoRetardo:"tiempo máximo de retraso",novaEntradaCancela:"Nueva entrada cancela el tiempo",pertencemARegra:"Pertenecen a la regla",entrada:"Entrada",saida:"Salida",nennhumItem:"Ningún Item",local:"LOCAL",laco:"LAZO",adicionar:"Agregar",remover:"Retirar",disponiveis:"Disponibles",dispositivos:"Dispositivos",zonas:"Zonas",eventos:"Eventos",interligacao:"Interconexión",dispositivosLocais:"DISPOSITIVOS LOCALES",nenhumEvento:"Ningún Evento",nenhumaZona:"Ningúna Zona",criar:"Crear",aplicar:"Aplicar",cancelar:"Cancelar",nenhumDispositivo:"Ningún Dispositivo de",adicionarDispositivo:"Agregar dispositivo",adicionarZona:"Agregar Zona",foramFeitasAlteracoes:"Se han realizado cambios a la Regla.",desejaSalvar:"¿Desea guardar los cambios?",salvar:"GUARDAR",descartar:"DESCARTAR",falha:"¡Falla!",naoPermitidoExcluir:"No es permitido eliminar la Regla 001.",confirmaRemocao:"¿Confirma la eliminación de la Regla?",excluir:"Eliminar",regrasRemovidas:"¡Reglas eliminadas!",oDispositivo:"El dispositivo",estaDefinido:"se define como",masDispositico:"pero es un dispositivo de",atencao:"Atención",regraPossui:"La regla tiene configuraciones inconsistentes",ajusteAConfiguracap:"Ajuste la configuración de la regla moviendo los dispositivos a su modo correspondiente, Entrada o Salida.",paraSalvar:"¡Para guardarlo es obligatorio agregar al menos un elemento como salida!",regraCriada:"¡Regla creada con éxito!",alteracoesAplicadas:"¡Cambios aplicados con éxito!",acionamentoBrigada:"activación del botón de Brigada",acionemantoAlarmeGeral:"activación del botón de Alarma General",acionamentoBrigadaAlarme:"activación del botón de Brigada o Alarma General",regraNaoPossui:"La regla no tiene dispositivo de entrada, el gatillo de la regla sólo ocurrirá con el",desejaContinuar:"Desea continuar?",paraSalvarItemEntrada:"Para guardar, es obligatorio agregar al menos un elemento como entrada, o la activación de las teclas de Sirena de Brigada o Alarma General.",regraPrecisaDois:"La regla necesita dos elementos de entrada para cumplir con la condición de Entrada Doble",sistemaPermite:"El sistema le permite crear un máximo de",regras:"reglas",seraoAcionandos:"Los dispositivos de esta regla no se activarán mediante el botón de alarma general del Panel",exclusaoTemporizacao:"Eliminar el tiempo en la regla deshabilitará la función y la respuesta al botón Sirena de Brigada",necessarioDefinir:"Es necesario definir un tiempo en la regla para definir el período de funcionamiento de la Sirena de Brigada",sim:"Si",nao:"No",naRegra:"en la regla",dispositivosNaoPodem:"Los dispositivos a continuación no se pueden agregar ya que ya pertenecen a las Zonas agregadas en esta regla",regraJaPossui:"La regla ya tiene dispositivos de esa zona agregados, esos dispositivos se eliminarán sin redundancia",nesseModeloNaoPermitidoCriarRegra:"En la Panel CIE 1060, la configuración de la Regla está estandarizada y no es posible crear otra Regla además de la Regla padrón."},system:{configuracoes:"Configuración",configuracoesRede:"Configuración de red",configuracoesTls:"Configuración TLS/SSL",dataHora:"Fecha y Hora",firmware:"Firmware",informacoesCentral:"Información del Panel",eRepetidoras:"y Repetidores",interligacaoCentrais:"Interconexión de Paneles",niveisAcesso:"Niveles de acceso",gwAuthPassword:"Contraseña de autenticación para acceso vía Ethernet(Red)",gwAuthPasswordTitle:"Contraseña de autenticación para acceso vía Ethernet(Red)",registroEventos:"Registro de Eventos",saidasPadrao:"Salidas padrón",aConfiguracaoPontoAPonto:"La configuración punto a punto está habilitada. Para deshabilitarlo, vaya a",configuracaoRede:"Configuración de red",enderecoCentral:"Dirección del Panel",interligacaoDesabilitada:"Interconexión deshabilitada",centraisMonitoradas:"Paneles Monitoreados",comandosGlobais:"Comandos Globales",alarmeGeral:"Alarma General",reiniciarCentral:"Reiniciar Panel",silenciarCentral:"Silenciar Panel",silenciarSirene:"Silenciar Sirena",sireneBrigada:"Sirena de Brigada",cancelar:"Cancelar",aplicar:"Aplicar",modo:"Modo",ipFixo:"IP Fija",pontoAPonto:"Punto a punto",enderecoIp:"Dirección IP",enderecoIpInvalido:"Dirección IP inválida",campoObrigatorio:"Campo obligatorio",faixaTempo:"El tiempo debe ser entre 00:01 y 59:59",modoOperacao:"Modo de Operación",classeA:"Clase A",classeB:"Clase B",bateriaExterna:"Batería Externa",desabilitada:"Desabilitada",habilitada:"Habilitada",habilitarRepetidoras:"Habilitar Repetidores",preAlarme:"Pre-Alarma Detectores de Humo",monitoramentoModbus:"Monitoreo Modbus UDP",senhaNivel:"Clave Nivel",dataHoraCentral:"Fecha y hora del Panel",atualizar:"Actualizar",dataHoraComputador:"Fecha y hora de la Computadora",sincronizar:"Sincronizar",alterarData:"Cambiar Fecha",faixaAno:"El año no puede ser mayor que 2099",hora:"Hora",enviar:"Enviar",saidaAlarme:"Salida de Alarma",saidaFalha:"Salida de Falla",saidaSupervisao:"Salida de Supervisión",inativa:"Inactiva",ativa:"Activa",dispositivo:"Dispositivo",laco:"Lazo",alterar:"Cambiar",dispostivosLocais:"Dispostivos Locales",nenhumDispositivoSaida:"Ningún dispositivo de salida",atualizacaoFirmware:"Actualización de Firmware",arquivo:"Archivo",carregarArquivo:"cargar archivo",versaoArquivo:"Versión del archivo",versaoCentral:"Versión del Panel",atualizarCentral:"actualizar panel",recuperarCentral:"Recuperar central",mascaraInvalida:"Máscara inválida",gatewayInvalido:"Puerta de enlace inválida",modeloCentral:"Modelo del Panel",versaoFirmware:"Versión de Firmware",versaoFonte:"Versión Fuente",versaoLaco:"Versión Lazo",versaoProtocolo:"Versión Protocolo",enderecoRepetidora:"Dirección del Repetidor",localInstalacao:"Local de Instalación",tempoMaximo:"Tiempo máximo de retraso",mascara:"Máscara de Subred",gatewayPadrao:"Puerta de Enlace Predeterminada",configuracoesAplicadas:"Configuraciones aplicadas!",atencao:"Atención!",configuracaoSenha:"Al configurar la clave como vacía, evitará que el Panel solicite una clave para realizar las operaciones protegidas.",desejaContinuar:"Desea continuar?",sim:"Si",nao:"No",naoPossivelAdicionar:"No es posible agregar un dispositivo bloqueado como Salida Padrón.",dispositivoSelecionado:"El dispositivo seleccionado se está utilizando en las siguientes Reglas/Zonas",aoDefinir:"Al definir como Salida Padrón, el dispositivo será eliminado de las Reglas/Zonas arriba.",aguarde:"Espere...",regra:"Regla",dataHoraAtualizadas:"Fecha/Hora actualizada!",centralDesconectada:"Panel desconectado!",aVersaoArquivo:"La versión del archivo de firmware es la misma que la del Panel conectado.",necessarioSuperior:"Debe ser superior para realizar la actualización.",versaoArquivoMenor:"La versión del archivo de firmware es menor que la versión del Panel conectado.",erro:"Error",arquivoCorrompido:"¡El archivo seleccionado está dañado!",firmwareInvalido:"¡No es un archivo de firmware válido!",necessarioExtensao:"Se requiere un archivo con una extensión .cief (CIE), .cie1060f (CIE 1060) o .gwf (GW 521)",arquivoFirmware:"Asegúrese de que sea un archivo de firmware.",arquivoInvalido:"¡Archivo no válido para la actualización!",falhaAtualizacao:"Error en la actualización!",ocorreuErro:"Ocurrió un error al actualizar el Panel.",verifiqueConexao:"Verifique la conexión o que el archivo .CIEF sea correcto.",firmwareAtualizado:"¡Firmware actualizado con éxito!",firmwareRecuperado:"¡Firmware recuperado con éxito!",recuperacao1060Item1:"- Retire la JUMPER BOOT;",recuperacao1060Item2:"- Presiona el botóno RESET;",recuperacao1060Item3:"- El panel se reiniciará;",seraReiniciada:"El panel se reiniciará.",conexaoPontoPonto:"Conexión punto a punto",interligacaoDesconfigurada:"Al habilitar la conexión punto a punto, la interconexión se deshabilitará",pontoPontoHabilitada:"Conexión punto a punto habilitada",habiliteInterligacao:"Habilite la interconexión para que la conexión punto a punto funcione correctamente",existemAlteracoes:"Hay cambios no aplicados.",desejaAplicar:"¿Desea aplicar los cambios?",salvar:"GUARDAR",descartar:"DESCARTAR",emSistema:"en Sistema",centralOffline:"Panel OFFLINE",alertaSenhaPadrao:"Atención: Por su seguridad, es esencial que cambie las claves-padrón tan pronto como se instale el producto.",gwPasswordAlert:"El primer acceso al equipo no requiere autenticación, sin embargo, es necesario registrar una contraseña para accesos posteriores vía Ethernet.",gwSendEthernetAlert:"Durante la primera configuración del equipo es necesario registrar una contraseña para acceder al equipo vía Ethernet.",integracaoDesabilitada:"Integración deshabilitada",modbusTCP:"Modbus TCP",situador:"Situator",Webhook:"Webhook",rcptip:"Receptor IP Intelbras",identificadorEquipamento:"Identificador de equipo",infoCodigoConta:"Cuenta de Cliente configurada en el Receptor IP.",infoIdentificadorEquipamento:'Información que se introducirá en el campo "Partición" de los eventos en el Receptor IP. Generalmente se usa para diferenciar múltiples GW521 asociados con la misma cuenta.',porta:"Puerta",unitID:"Unit ID",timeout:"Timeout Conexión",padrao:"Defecto",testarComunicacao:"Probar la Comunicación",testar:"Probar",host:"IP o Host del servidor",usuarioESenha:"Usuario y contraseña",modoAutenticacao:"Modo de autenticación",usuario:"Usuario",senha:"Contraseña",modoDaRede:"Modo de Red",enderecoWebhook:"Dirección del Webhook",enderecoInvalido:"Dirección inválida",autenticacao:"Autenticación",chavePrivada:"Llave privada",gerar:"Generar",nivelAutenticacao:"Nivel de autenticación",criptografia:"Solo encriptación",autenticacaoOpcional:"Autenticación opcional ",autenticacaoObrigatoria:"Autenticacion requerida ",infoChavePrivada:"La clave privada se usa para que el servidor pueda autenticar los mensajes del Gateway. La clave privada debe ser la misma para Gateway y Servidor para que la autenticación HMAC funcione correctamente. Puede insertar una clave previamente generada por el Servidor o generar una nueva.",infoNivelAutenticacao:"-Sólo encriptación: no se realiza ninguna acción para verificar la autenticidad del servidor, sin embargo, los mensajes están encriptados\n-Autenticación opcional: se solicita el certificado del servidor pero se ignoran las fallas del certificado. Los mensajes se cifran normalmente.\n-Autenticación requerida: se solicita el certificado del servidor y cualquier falla del certificado interrumpe la conexión.",intervaloHeartbeat:"Intervalo Heartbeat",intervaloEntreEventos:"Intervalo entre eventos",infoHeartbeat:'Intervalo de tiempo en que el dispositivo enviará eventos del tipo "Estoy Vivo" al servidor para señalar su correcto funcionamiento.\nPuede desactivarse estableciendo en 00:00.',infoHttps:"La comunicación HTTPS generalmente tiene lugar en los puertos 443 o 8443",necessarioClientePrivada:"Para aplicar la configuración es necesario importar el certificado raíz del servidor de integración, el certificado GW521 y la clave privada GW521.",certificadoRaizServidorIntegracao:"Certificado Raíz del Servidor de Integración.",certificadoDoGateway:"Certificado del GW521",chavePrivadaDoGateway:"Llave Privada del GW521",certificadoRaizProgramador:"Certificado Raíz autofirmado del Programador CIE",certificadoCarregado:"Certificado cargado en el equipo",validoAPartir:"Válido desde",validoAte:"Válido hasta",requerente:"Solicitante ",emitidoPor:"Emitido por",numeroSerie:"Numero de serie",importar:"Importar",importarCertificado:"Importar Certificado",importarChavePrivada:"Importar Llave Privada",gerarCertificado:"Generar Certificado",arquivoImportado:"Archivo que se va a importar",infoCertificadosVazio:"Obtenga la configuración para ver las propiedades del certificado actual. Para agregar o cambiar el certificado existente, seleccione Importar y envíe la configuración.",infoCertificadosReceba:"Obtenga la configuración para ver las propiedades del certificado actual.",infoCertificadoImportacaoNecessariaServidor:"Para importar o generar este certificado, se debe importar el certificado raíz del servidor de integración. ",infoCertificadoImportacaoNecessariaGateway:"Para importar o generar este certificado, se debe importar el certificado del GW521.",infoCertificadoRaizProgramador:"El Programador CIE tiene un certificado autofirmado que debe importarse al servidor de integración. Guarde en su computadora usando el botón GUARDAR a continuación:",enderecoURLInvalido:"Agrega una dirección válida.",codigoConta:"Código de Cuenta ",codigoZona:"Código da Zona",habilitarGwt:"Habilitar Gateway CIE GW521",opcional:"opcional",infoCodigoZona:"El código de zona debe ser el mismo código registrado en el Situator, de lo contrario, los eventos enviados no son aceptados por el Situator.",infoCertificadoRaiz:"GW521 utiliza el certificado raíz para verificar la autenticidad del servidor.\n\nSolo se debe importar el utilizado para autenticar el servidor que se va a conectar en formato “.PEM”. No es posible importar una lista de certificados raíz.",infoCertificadoCliente:'El Certificado del Cliente es el propio certificado del equipo (GW521) para que el Servidor pueda verificar la autenticidad.\n\nDebe importarse junto con su clave privada en formato ".PEM". ',detalhamentoDeErros:"Detalle de error",configuracoesIpFixo:"Configuración de IP fija ",pt:"Portugués",es:"Español",interfaceDesconectada:"Interfaz de red desconectada ",semErros:"Sin errores",sistema:"Sistema",flashExterna:"Flash Externa",ethernet:"Ethernet",comunicacao:"Comunicación CIE",modbus:"Modbus",webhook:"Webhook","gtw-erro-sistema-0":"Inicialización del reloj interno","gtw-erro-flashExterna-0":"Inicialización de la memoria flash externa","gtw-erro-flashExterna-1":"Operación de escritura de datos","gtw-erro-flashExterna-2":"Operaciones de borrado de datos","gtw-erro-ethernet-0":"Interfaz de rede desconectada","gtw-erro-ethernet-1":"IP fija no válida o asignación de IP por DHCP falló","gtw-erro-ethernet-2":"Inicialización de la interfaz Ethernet","gtw-erro-ethernet-3":"Sin tipo de integración configurado","gtw-erro-comunicacao-0":"Sin comunicación con la CIE","gtw-erro-modbus-0":"Error al asociar la conexión al puerto","gtw-erro-modbus-1":"Error al iniciar el servidor Modbus","gtw-erro-modbus-2":"Error al conectar con el cliente","gtw-erro-situador-0":"Error al resolver el nombre de host a IP","gtw-erro-situador-1":"Dirección IP del servidor no configurada","gtw-erro-situador-2":"Error al conectar con el Situator","gtw-erro-situador-3":"Situator rechazó el evento (Consultar código de cuenta y lista de eventos registrados en el sistema)","gtw-erro-situador-4":"No es posible autenticarse en el Situator (Login/Password o token incorrectos)","gtw-erro-webhook-0":"Error al resolver el nombre de host a IP","gtw-erro-webhook-1":"Dirección IP del servidor no configurada","gtw-erro-webhook-2":"Error al conectar con el Servidor","gtw-erro-webhook-3":"Servidor rechazó el evento","gtw-erro-webhook-4":"Error al establecer una conexión HTTPS segura",erroSomenteCriptografia:"El certificado del cliente y la llave privada no se importaron. Si el servidor está configurado para verificar la autenticidad del cliente, no será posible establecer una conexión segura.",erroOpcionalRaiz:"El certificado raíz no se importó. Se solicitará el certificado del servidor, pero no se verificará.",erroOpcionalCliente:"El certificado del cliente y la llave privada no se importaron. Si el servidor está configurado para verificar la autenticidad del cliente, no será posible establecer una conexión segura.",erroObrigatorioRaiz:"Se debe importar el certificado raíz",erroObrigatorioCliente:"El certificado del cliente y la llave privada no se importaron. Si el servidor está configurado para verificar la autenticidad del cliente, no será posible establecer una conexión segura.",certificadoPais:"País",certificadoCidade:"Ciudad",certificadoEstado:"Estado",certificadoUnidadeOrganizacao:"Unidad de la organización",certificadoNomeOrganizacao:"Nombre de la organización",infoGeracaoCertificadoGateway1:"Este proceso de generación creará un certificado autofirmado para el equipo.",infoGeracaoCertificadoGateway2:"Los certificados autofirmados no son de confianza pública ya que no fueron generados por autoridades de certificación reconocidas.",infoGeracaoCertificadoGateway3:"En este caso, el propio Programador CIE actúa como una autoridad certificadora no reconocida. ",infoGeracaoCertificadoGateway4:'Para evitar problemas de autenticación, luego de generar los certificados es necesario que el "Certificado Raíz Autofirmado del Programador CIE" sea guardado e importado al sistema integrador. ',cancelarEGerarNovo:"Cancelar y regenerar",infoCertificageGenerated:"Certificado generado! Aplique la configuración y envíe la programación para activarla.",naoFoiPossivelGerar:"No se pudo generar el certificado. Ver ayuda.",localizacaoDiretorio:"El certificado se puede encontrar en",salvarCopia:"Guardar una copia ",substituirCertificado:"Reemplazar certificado",copiaSalva:"¡Copia del certificado guardada correctamente!",algoritmo:"Algoritmo",codigoDoEquipamento:"Codigo del equipo",infoPreAlarme:"Esta configuración le permite habilitar o deshabilitar la pre-alarma para detectores de humo. Cuando está habilitado, hace que un detector de humo, cuando se active, coloque el sistema en pre-alarma. Si otro detector de humo se activa nuevamente dentro de los 10 minutos, el sistema entra en alarma normalmente. Si no ocurre, el panel de control permanece en un estado operativo normal.",codigoContaNegativo:"No se permiten valores negativos.",oValorMinimo:"El valor mínimo es",oValorMaximo:"El valor máximo es",preenchaCorretamente:"Complete los campos correctamente para aplicar",certificadoInvalido:"¡Certificado inválido! Vuelva a ingresar.",localDeInstalacaoLinha1:"Local de Instalación (1ª línea)",localDeInstalacaoLinha2:"Local de Instalación (2ª línea)",aSenhaDeveTer4Digitos:"La contraseña debe ser de 4 dígitos",pwdProgCieMaxLength:"La contraseña debe tener un máximo de 20 dígitos",pwdProgCieMinLength:"la contraseña debe tener al menos 6 dígitos",bloqueiosLocais:"Bloques locales",sireneConvencional:"Sirena Convencional",releDeAlarme:"Relé de Alarma",releDeFalha:"Relé de Falla",regraPadrao:"Regla Padrón",habilitado:"Habilitado",bloqueado:"Bloqueado",tempoDeveSerMenorRegraPadrao:"El valor debe ser mayor que el tiempo de la Regla Padrón",quantidadeDispositivos:"Cantidad de dispositivos",classe:"Clase",imediata:"Inmediata",temporizada:"Retraso de Tiempo",alertaUSB1060:"Atención: Conecte el cable USB del Panel CIE 1060 para realizar la actualización del Firmware.",alertaConexaoCie:"Atención: Active la conexión USB del Panel para realizar la actualización del firmware.",alertaConexaoCieIni:"Atención: No es posible actualizar el firmware por Wi-Fi. ",alertaConexaoCieMei:"Desconéctese",alertaConexaoCieFi:"y luego reconéctese usando USB o RED para actualizar el firmware.",centralEmBoot:"Atención: Panel conectada en Modo Recovery, active el modo para realizar la actualización de Firmware.","1060Recover":"Recuperación de Firmware","modalRecovery-title":"Recuperación de Firmware da CIE 1060","modalRecovery-atencao":"Aviso. ¡Use este procedimiento solo si hay un problema con el procedimiento de actualización de firmware estándar!","modalRecovery-descricao":"Procedimiento para realizar la recuperación de Firmware CIE 1060","modalRecovery-passo1":"Encender USB","modalRecovery-passo2":"Poner Jumper BOOT","modalRecovery-passo3":"Presionar el botón RESET","modalRecovery-passo4":"Abra el Programador CIE, seleccione CIE 1060, Nuevo archivo","modalRecovery-passo5":"Vaya a la pestaña del sistema y use el botón Recuperación de firmware","modalRecovery-passo6":"Enviar Firmware","modalRecovery-aguarde":"Esperando procedimiento y conexión USB ...","modalRecovery-conexaoOk":"¡Usb conectado!","modalRecovery-habilitarRecuperacao":"Habilitar la recuperación"},tools:{gerarPdf:"Generar PDF",calculoAlimentacao:"Cálculo de Alimentación de Sirenas",operacaoRemota:"Operación Remota",info:"El cálculo del suministro de la sirena es una herramienta para ayudar al diseño del sistema de detección y alarma de incendios. A partir de la configuración del escenario, configurando campos como el número de sirenas, el tipo de dispositivos, la longitud y la sección del cable, calcula la corriente requerida para el funcionamiento correcto de todas las sirenas en el sistema y, si es necesario, indica cuántas fuentes auxiliares (FNA520) se necessitan y su punto de inserción.",assistente:"Asistente",assistenteInfo:"Asistente para facilitar la configuración de un escenario inicial con múltiples dispositivos.",manual:"Manual",manualInfo:"Abre un escenario vacío para la inserción manual de dispositivos individualmente.",importar:"Importar",importarInfo:"Abre un escenario de configuración, desde un archivo guardado.",sirenesEnderecaveis:"Sirenas Direccionables",saidaConvencional:"Salida Convencional",quantidadeDispositivo:"Cantidad de dispositivos",quantidade:"Cantidad",cabo:"Cable",distancia:"Distancia",metros:"metros",modelo:"Modelo",cancelar:"Cancelar",calcular:"Calcular",mesmoCabo:"Mismo Cable",paraTodos:"para todos",mesmaDistancia:"Misma distancia",novoProjeto:"Nuevo proyecto",tabelaSirenes:"Tabla de Sirenas",adicioneAsSirenes:"Agregue las sirenas del proyecto para realizar el cálculo.",dispositivo:"Dispositivo",remover:"Retirar",novoDispositivo:"Nuevo Dispositivo",importarDeArquivo:"Importar desde un Archivo",resultadoCalculo:"Resultado del cálculo",salvar:"Grabar",secao:"SECCIÓN",naoNecessario:"No es necesario",fontes:"fuentes",distanciaTotal:"Distancia total",relatorioGerado:"Informe generado en",altereModo:"Cambie el MODO DE CONEXIÓN a RED para usar esta funcionalidad.",limpar:"Limpiar",atencao:"Atención",sim:"Si",aoIniciarUmProjeto:"Al comenzar un nuevo proyecto, se perderá el actual.",aDistanciaEntre:"La distancia entre las sirenas es la misma para todos, ajuste individualmente para que el cálculo se realice correctamente.",arquivoImportado:"Archivo importado con éxito!",arquivoInvalido:"¡Archivo inválido!",seraoSubstituidos:"Los dispositivos serán sustituidos.",arquivoSalvo:"Archivo guardado con éxito!",falha:"Falla!",arquivoCarregado:"¡Documento cargado exitosamente!",emCalculoAlimentacao:"en Cálculo de Alimentación de Sirenas",relatorio:"Reporte",dispositivos:"Dispositivos",nomeResponsavel:"Nombre del responsable",assinatura:"Firma",desejaContinuar:"¿Desea continuar?",logExecucao:"Registro de ejecución en tiempo real",sistema:"Sistema",autenticacaoGW:"Autenticación en el GW521",suaSenha:"Su contraseña",contraSenha:"Contraseña",enviar:"Mandar",autenticar:"Autenticar",necessarioAutenticacao:"Es necesario autenticarse para ver la información",alterarMac:"Cambiar MAC Address",mac:"MAC Address",macInvalido:"MAC inválido",apagarRegistro:"Eliminar registros",reset:"Reset de Fábrica",lerMemoria:"Leer memoria",reiniciarEquipamento:"Restablecer equipo",operacaoRealizada:"¡Operación realizada con éxito!",limparRegistros:"Limpiar registros",salvarEmArquivo:"Guardar en archivo",confirmaOperacao:"¿Confirmas la operación?",comandosAvancados:"Comandos Avanzados"},zone:{criarZona:"Crear Zona",selecionar:"Seleccionar",removerZona:"Retirar Zona",ativada:"Activada",bloqueada:"Bloqueada",campoObrigatorio:"Campo obligatorio",idJaUtilizado:"ID ya utilizada",idFaixa:"La ID debe ser de 1 a 250",dispositivosLocais:"DISPOSITIVOS LOCALES",lacoUpper:"LAZO",saidaLocal:"Salida Local",adicionar:"agregar",remover:"retirar",cancelar:"Cancelar",criar:"Crear",aplicar:"Aplicar",nome:"Nombre",foramFeitasAlteracoes:"Se han realizado cambios en la Zona.",desejaSalvar:"¿Desea guardar tus cambios?",salvar:"GUARDAR",descartar:"DESCARTAR",falha:"¡Falla!",naoPermitido:"No es permitido eliminar la Zona 1.",confirmaRemocao:"¿Confirmar la eliminación de la zona?",aoRemover:"Cuando elimine la zona, todos los dispositivos volverán a la Zona Padrón.",excluir:"eliminar",zonasRemovidas:"¡Zonas eliminadas!",zonaCriada:"¡Zona creada con éxito!",alteracoesAplicadas:"¡Cambios aplicados con éxito!",permiteNoMaximo:"El sistema te permite crear un máximo de",zonas:"zonas.",atencao:"Atención",naZona:"en la Zona",nenhumDispositivo:"Ningún Dispositivo"}},pt_br:{config:{invalido:"Inválido","evento-1":"Falha Laço 1","evento-2":"Falha Laço 2","evento-5":"Sistema Alarme","evento-6":"Sistema Falha","evento-7":"Sistema Sup.","evento-9":"Alimentação","evento-14":"Alarme Geral","evento-15":"Chamar Brigada","evento-25":"Central 1 Alarme","evento-26":"Central 1 Falha","evento-27":"Central 1 Supervisão","evento-28":"Central 2 Alarme","evento-29":"Central 2 Falha","evento-30":"Central 2 Supervisão","evento-31":"Central 3 Alarme","evento-32":"Central 3 Falha","evento-33":"Central 3 Supervisão","evento-34":"Central 4 Alarme","evento-35":"Central 4 Falha","evento-36":"Central 4 Supervisão","evento-37":"Central 5 Alarme","evento-38":"Central 5 Falha","evento-39":"Central 5 Supervisão","evento-40":"Central 6 Alarme","evento-41":"Central 6 Falha","evento-42":"Central 6 Supervisão","evento-43":"Central 7 Alarme","evento-44":"Central 7 Falha","evento-45":"Central 7 Supervisão","evento-46":"Central 8 Alarme","evento-47":"Central 8 Falha","evento-48":"Central 8 Supervisão","evento-49":"Central 9 Alarme","evento-50":"Central 9 Falha","evento-51":"Central 9 Supervisão","evento-52":"Central 10 Alarme","evento-53":"Central 10 Falha","evento-54":"Central 10 Supervisão","evento-55":"Central 11 Alarme","evento-56":"Central 11 Falha","evento-57":"Central 11 Supervisão","evento-58":"Central 12 Alarme","evento-59":"Central 12 Falha","evento-60":"Central 12 Supervisão","evento-61":"Central 13 Alarme","evento-62":"Central 13 Falha","evento-63":"Central 13 Supervisão","evento-64":"Central 14 Alarme","evento-65":"Central 14 Falha","evento-66":"Central 14 Supervisão","evento-67":"Central 15 Alarme","evento-68":"Central 15 Falha","evento-69":"Central 15 Supervisão","evento-70":"Central 16 Alarme","evento-71":"Central 16 Falha","evento-72":"Central 16 Supervisão","alarme-0":"Nenhum Alarme","alarme-1":"Alarme","alarme-2":"Reset de Alarme","alarme-3":"Saída Confirmada","alarme-4":"Saída Desativada","alarme-5":"IO Restaurada","alarme-6":"Sistema em Alarme","sup-0":"Nenhuma Supervisão","sup-1":"Supervisão","sup-2":"Reset de Supervisão","sup-3":"Sistema em Supervisão","falha-0":"Falhas Restauradas","falha-1":"Dispositivo Inconsistente","falha-2":"Dispositivo Não Configurado","falha-3":"Saída Padrão Falha Não Configurada","falha-4":"Saída Padrão Alarme Não Configurada","falha-5":"Saída Padrão Sup. Não Configurada","falha-6":"Limpar Sensor de Fumaça","falha-7":"Disp. em Falha","falha-8":"Disp. em Falha Saída Padrão Alarme","falha-9":"Disp. em Falha Saída Padrão Falha","falha-10":"Disp. em Falha Saída Padrão Sup.","falha-11":"Falta de Energia AC","falha-12":"Sobretensão Fonte","falha-13":"Subtensão Fonte","falha-14":"Fuga Terra Negativa","falha-15":"Fuga Terra Positiva","falha-16":"Saída Carregador Reserva Abaixo de 0.9V","falha-17":"Desconexão Fonte de Energia Reserva","falha-18":"Sem Alimentação Bateria Insuficiente","falha-19":"Falha de Sistema Comunicação Placa Laço","falha-20":"Falha de Sistema Comunicação Fonte","falha-21":"Falha de Sistema Memória Corrompida","falha-22":"Falha de Sistema Firmware Corrompido","falha-23":"Falha de Sistema Memória Laço Corrompida","falha-24":"Config. Inconsistente Conecte o Computador","falha-25":"Falha Comunicação Dispositivo","falha-26":"Falha Comunicação Saída Padrão Alarme","falha-27":"Falha Comunicação Saída Padrão Falha","falha-28":"Falha Comunicação Saída Padrão Sup.","falha-29":"Circuito Geral Aberto Dispositivo Saída Laço","falha-30":"Circuito Aberto Saída Padrão Alarme","falha-31":"Circuito Aberto Saída Padrão Falha","falha-32":"Circuito Aberto Saída Padrão Sup.","falha-33":"Curto-Circuito Saída Padrão Alarme","falha-34":"Curto-Circuito Saída Padrão Falha","falha-35":"Curto-Circuito Saída Padrão Sup.","falha-36":"Falha Acionamento Saída","falha-37":"Falha no Sistema","falha-38":"Dados Inconsistentes","falha-39":"Falha Restaurada","falha-40":"Sistema em Falha","falha-41":"Falha Bateria","falha-42":"Fonte Inicializando","falha-43":"Laco em Falha","falha-44":"Falha Acionamento Saída Padrão Alarme","falha-45":"Falha Acionamento Saída Padrão Falha","falha-46":"Falha Acionamento Saída Padrão Sup.","falha-47":"Falha de Comunicação com a Repetidora","falha-48":"Falha de Comunicação com a Repetidora - Versão incompatível","falha-49":"Falha Comunicação com a Central","falha-50":"Falha Bateria Externa","falha-51":"Falha Comunicação na Interligação","falha-52":"Falha Comunicação Coord. Versão diferente","oper-0":"Operação","oper-1":"Reset Operação","oper-2":"Central Silenciada","oper-3":"Sirene Silenciada","oper-4":"Reativação Sirene","oper-5":"Acesso Nível 2","oper-6":"Acesso Nível 3","oper-7":"Acesso Nível 4","oper-8":"Regra Adiada","oper-9":"Central Reiniciada","oper-10":"Sistema Iniciado","oper-11":"Bloqueio Realizado","oper-12":"Conexão PC","oper-13":"Relógio Ajustado","oper-14":"Botão Sirene Brigada","oper-15":"Botão Alarme Geral","oper-16":"Regra Atendida","oper-17":"Evento Desconhecido","oper-18":"Retardo Cancelado","oper-19":"Evento em Temp.","oper-20":"1/2 Regra Dupla","oper-21":"Regra Não Config.","oper-22":"Disp. Não Config.","oper-23":"Zona Não Config.","oper-24":"Botão Silenciar S.","oper-25":"Startup Executado","oper-26":"Tempo Máximo Retardo","oper-27":"Falha Restaurada","oper-28":"Disp. Bloqueado","oper-29":"Disp. Desbloqueado","oper-30":"Disp. Ativado","oper-31":"Disp. Desativado","oper-32":"Central Atualizada","oper-33":"Erro Atualização","oper-34":"Regra Temporizando","oper-35":"Acionamento Regra Bloq.","oper-36":"Regra Bloqueada","oper-37":"Regra Desbloqueada","oper-38":"Zona Bloqueada","oper-39":"Zona Desbloqueada","oper-40":"Laço Bloqueado","oper-41":"Laço Desbloqueado","oper-42":"Senhas Resetadas","oper-43":"Disp. Removido","oper-44":"Disp. Inserido","oper-45":"Erro Comunicação Fonte","oper-46":"Laço Registrado","oper-47":"Configuração Padrão","oper-48":"2/2 Regra Dupla","oper-49":"Regra Acionada","oper-50":"Gravar/Ler Disp.","oper-51":"Tempo Retardo Conf.","oper-52":"Regra Acionada Man.","oper-53":"Novo Modelo Central","oper-54":"Dados Sistema Alterado","oper-55":"Senha Nivel2 Alterada","oper-56":"Senha Nivel3 Alterada","oper-57":"Senha Nivel4 Alterada","oper-58":"Sistema com Falha de Falta de Energia","oper-59":"Sistema em Pré Alarme","oper-60":"Operação Remota Programador","tipo-1":"Sensor de Fumaça","tipo-2":"Sensor de Temperatura","tipo-3":"Acionador Manual","tipo-4":"Módulo de Zona","tipo-5":"Módulo de entrada","tipo-9":"Módulo de entrada ou saída","tipo-10":"Sinalizador Audiovisual","tipo-12":"Saída Local","subtipo-1":"Sensor de Fumaça","subtipo-2":"Sensor de Temperatura","subtipo-3":"Acionador Manual","subtipo-4":"Módulo de Zona","subtipo-5":"Entrada sem controle de alimentação","subtipo-6":"Entrada com controle de alimentação","subtipo-7":"Sirene Convencional","subtipo-8":"Saída com confirmação","subtipo-9":"Saída sem confirmação","subtipo-10":"Sinalizador Audiovisual","subtipo-11":"Entrada local","subtipo-12":"Saída Local","subtipo-13":"Sirene com confirmação","interl-25":"Central 1","interl-26":"Central 1","interl-27":"Central 1","interl-28":"Central 2","interl-29":"Central 2","interl-30":"Central 2","interl-31":"Central 3","interl-32":"Central 3","interl-33":"Central 3","interl-34":"Central 4","interl-35":"Central 4","interl-36":"Central 4","interl-37":"Central 5","interl-38":"Central 5","interl-39":"Central 5","interl-40":"Central 6","interl-41":"Central 6","interl-42":"Central 6","interl-43":"Central 7","interl-44":"Central 7","interl-45":"Central 7","interl-46":"Central 8","interl-47":"Central 8","interl-48":"Central 8","interl-49":"Central 9","interl-50":"Central 9","interl-51":"Central 9","interl-52":"Central 10","interl-53":"Central 10","interl-54":"Central 10","interl-55":"Central 11","interl-56":"Central 11","interl-57":"Central 11","interl-58":"Central 12","interl-59":"Central 12","interl-60":"Central 12","interl-61":"Central 13","interl-62":"Central 13","interl-63":"Central 13","interl-64":"Central 14","interl-65":"Central 14","interl-66":"Central 14","interl-67":"Central 15","interl-68":"Central 15","interl-69":"Central 15","interl-70":"Central 16","interl-71":"Central 16","interl-72":"Central 16","local-10":"Saída local S1","local-13":"Saída local S3","local-16":"Saída Repet. 1","local-17":"Saída Repet. 2","local-18":"Saída Repet. 3","local-19":"Saída Repet. 4","local-20":"Saída local S2"},file:{novo:"Novo",abrir:"Abrir",salvar:"Salvar",salvarComo:"Salvar Como",relatorios:"Relatórios",comunicar:"Comunicar",configuracoesPadrao:"Configurações Padrão",novoProjeto:"Novo Projeto de Interligação de Centrais",interligacaoIntroA:"A interligação entre centrais de alarme de incêndio da linha CIE disponibiliza ao cenário de instalação a possibilidade de conexão de até 16 centrais em rede, que se comunicam em casos de eventos no sistema, possibilitando ao usuário a verificação e o envio de comandos à todas as centrais CIE de um sistema.",interligacaoIntroB:"Ao Criar um projeto de Interligação de Centrais, será criado um arquivo de Projeto de Interligação, esse arquivo engloba as configurações individuais de todas as Centrais configurados no projeto de interligação de centrais e insere recursos para melhor visualização global do projeto de Interligação de centrais, como monitoramento entre centrais e envio de comandos globais.",selecione:"Selecione",configurarPosteriormente:"Configurar posteriormente",quantasCentrais:"Quantas centrais serão interligadas?",modeloCentrais:"Modelo das Centrais?",sim:"Sim",nao:"Não",todasMonitoram:"Todas as centrais se monitoram?",ativacaoComandos:"Ativação dos Comandos Globais:",alarmeGeral:"Alarme Geral",reiniciarCentral:"Reiniciar Central",silenciarCentral:"Silenciar Central",silenciarSirene:"Silenciar Sirene",sireneBrigada:"Sirene de Brigada",criarProjeto:"Criar projeto",cancelar:"Cancelar",crieNovoArquivo:"Crie um novo arquivo com as configurações padrão. Selecione o modelo da central para criar um novo arquivo de configuração padrão.",online:"ONLINE",novoArquivo:"Novo arquivo",configuracoesCentral:"Configurações da Central",ativeConexao:"Ative a conexão da central para enviar ou receber as configurações.",crieUmNovo1:"Crie um novo arquivo com as configurações que estão em operação na Central",crieUmNovo2:"que está conectada.",conecteCentral:"Conecte a Central CIE para criar um novo arquivo com as configurações que estão em operação.",receberConfiguracao:"Receber configuração",estaPronta:"está pronta para enviar e receber programações.",conecteCentral1:"Conecte uma central",conecteCentral2:"para enviar ou receber as programações",centralBloqueada:"Central bloqueada",naoPossivel:"Não é possível enviar as configurações de centrais diferentes!",centralConectada:"Central conectada:",centralConfigurada:"Central configurada:",selecioneUmaCentral:"Selecione uma Central no projeto para habilitar as ações.",enviarProgramacaoCentral:"Enviar a programação para a Central",enviar:"ENVIAR",receber:"RECEBER",receberProgramacao:"Receber programação da Central",haInconsistencias:"Há inconsistências na programação!",confiraALista:"Confira a lista de inconsistências abaixo, para enviar a programação é necessário aceitar as alterações.",laco:"Laço",endereco:"Endereço",nome:"Nome",tipo:"Tipo",novoTipo:"Novo Tipo",inconsistencia:"Inconsistência",aceitarAlteracoes:"Aceitar alterações",novoProjetoCriado:"Novo Projeto de Interligação criado",novaConfiguragao:"Nova configuração criada",atencao:"Atenção",necessarioAtualizacao:"É necessário fazer a atualização de Firmware da central para receber/enviar a configuração!",novaVersaoDisponivel:"Há uma nova versão de Firmware disponível!",recomendadoAtualizacao:"É recomendado fazer a atualização de Firmware da central para receber/enviar a configuração!",versaoRecomendada:"Versão recomendada",versaoMinima:"Versão mínima obrigatória",versaoCentral:"Versão da Central conectada",mensagem1:"Os dispositivos abaixo não pertencem a uma Regra:",solucao1:"Adicione os dispositivos em alguma Regra, ou em alguma Zona que pertença à uma Regra.",mensagem2:"As Zonas abaixo não possuem dispositivos configurados:",solucao2:"Toda Zona deve conter ao menos um dispositivo, portanto adicione dispositivos às Zonas.",mensagem3:"As Regras abaixo não possuem itens configurados:",solucao3:"Todas as regras devem conter itens como Entrada e Saída, portanto adicione itens às Regras.",mensagem4:"As Regras abaixo possuem temporização maior que o Tempo máximo de retardo:",solucao4:"Ajuste a temporização das regras ou o campo o Tempo máximo de retardo em Sistema > Configurações.",mensagem5:"As Regras abaixo possuem configurações de dispositivos inconsistêntes:",solucao5:"Ajuste a configuração da regra movendo os dispositivos para seu modo correspondente, de Entrada ou Saída.",mensagem6:"As Regras abaixo não atendem a Condição de Entrada Dupla:",solucao6:"Adicione ao menos dois itens de entrada para atender a Condição de Entrada Dupla, configure a Regra como Condição de Entrada Única, ou  ative os botões de Sirene de Brigada ou Alarme Geral! .",mensagem7:"As seguintes funcionalidades podem não estar disponíveis na versão da central conectada e voltarão para o padrão:",solucao7:"Para ativá-las é necessário atualizar a Central.",mensagem8:"Atenção:",solucao8:"Adicione as configurações em Configurações > TLS/SSL.",inconsistenciaProgramacao:"Inconsistência na programação!",necessarioAjustar:"É necessário ajustar a programação para enviar.",inconsistenciaProgramacaoCentral:"Inconsistência na programação da Central",salvarInconsistencia:"SALVAR COM INCONSISTÊNCIA",recomedadoAjustar:"É recomendado ajustar a programação antes de salvar.",salvando:"Salvando...",naoPossivelReceber:"Não é possível receber/enviar a configuração de centrais diferentes!",recebendoProgramacoes:"Recebendo programações ...",modeloCentralDiferente:"O modelo da Central configurada é diferente da Central conectada. Ao receber a configuração, o modelo será alterado e a configuração atual será perdida.",desejaContinuar:"Deseja continuar?",aoReceberConfiguracao:"Ao receber a configuração da Central conectada, a configuração atual será perdida.",centralDesconectada:"Central Desconectada",salvoSucesso:"Salvo com sucesso!",arquivoJaExiste:"Esse arquivo já existe!",desejaSobrescrever:"Deseja sobrescrever as configurações?",configuracaoEnviadaSucesso:"Configuração enviada com sucesso!",falha:"Falha!",falhaComunicacao:"Falha de comunicação!",confiraTente:"Confira a conexão e tente novamente.",eviandoProgramacoes:"Enviando programações ...",centraoNaoPossuiPlaca:"A Inteterligação de Centrais está configurada mas a Central Conectada não possui a Placa Ethernet.",desconfigureSistema:"Desconfigure em Sistema > Inteterligação de Centrais e envie a configuração novamente.",recebidaSucesso:"Nova configuração recebida com sucesso!",aoCriarNova:"Ao criar uma nova configuração, a atual será perdida, deseja continuar?",configuracaoInvalida:"Configuração inválida!",naoFoiPossivelEnviar:"Não foi possível enviar a programação.",dispositivosNaoExistem:"Os dispositivos configurados não existem na Central!",verifiqueDispositivos:"Verifique os dispositivos instalados e a configuração realizada e tente novamente.",forcarEnvio:"Forçar envio",enviarConfiguracao:"Enviar configuração",todosDispositivosIconsistencia:"Todos os dispositivos com insconsistência serão removidos das Zonas e Regras, e adicinados novamante na Zona Padrão e Regra Padrão.",desejaContinuarEnvio:"Deseja continuar com o envio da programação?",verificandoInconsistencias:"Verificando inconsistências ...",centralMac:"A Central com o MAC",jaEstaNo:"já está no projeto com endereço",enviarProgramacao:"Enviar programação",existemConfiguracoes:"Existem configurações não salvas.",salvarEnviar:"Salvar e enviar",somenteEnviar:"Somente enviar",selecioneEssa:"Selecione essa Central para vincular a configuração corretamente.",arquivoInvalido:"Arquivo inválido!",arquivoCorrompido:"O arquivo selecionado está corrompido!",extensaoIncorreta:"O arquivo selecionado não é um arquivo válido! O arquivo de programações deve ser de extensão .cie ou .cieproj",arquivoIncompativel:"O arquivo de dados é incompatível com a versão do Programador CIE",versaoAnterior:"É necessário instalar uma versão anterior para abrir o arquivo!",versaoMaior:"A versão do arquivo de dados é maior que a versão do Programador CIE.",instalarVersao:"É necessário instalar a versão",paraAbrir:"ou superior para abrir o arquivo de programações",projetoCarregado:"Projeto de Interligação carregado!",configuracaoCarregada:"Configuração carregada!",entrada:"Entrada",saida:"Saáda",dispostitivoLocal:"Dispositivo local",dispositivo:"Dispositivo",naoPossuem:"não possui itens de",regra:"Regra",regraEntradaDupla:"A Regra precisa de dois itens de entrada para atender a Condição de Entrada Dupla.",asZonas:"a(s) Zona(s)",estaoConfiguradas:"estão configuradas como",masNaoPossuem:"mas não possui dispositivos de",oDispositivo:"O dispositivo",estaDefinido:"está definido como",dispositivoDe:"mas é um dispositivo de",temporizacao:"Temporização",necessarioAtualizacaoProgramador:"É necessário fazer a atualização do Programador para receber/enviar a configuração!",versaoMinimaProgramador:"Versão mínima obrigatória do Programador CIE",falhaValidacaoCertificado:"Houve falha na validação do certificado",certificadoNaoImportado:"não importado.",importeETenteNovamente:"Importe um certifiado válido e tente novamente.",configuracaoEnviadaCentralReiniciada:"Configuração enviada! A central será reiniciada"},global:{header:"CENTRAL DE ALARME DE INCÊNDIO",modoConexao:"MODO DE CONEXÃO",rede:"REDE",buscar:"BUSCAR",centralBloqueada:"Central Bloqueada - Ative a conexão na Central",aguardando:"Aguardando",central:"central",centralUpper:"Central",desconectar:"DESCONECTAR",arquivo:"Arquivo",online:"online",offline:"offline",arquivoNaoSalvo:"Arquivo não salvo",projetoInterligacao:"Projeto de Interligação",menuArquivo:"Arquivo","menuInterligação":"Interligação",menuLacos:"Laços",menuZonas:"Zonas",menuRegras:"Regras",menuSistema:"Sistema",menuFerramentas:"Ferramentas",rp520:"Repetidora RP 520",projeto:"Projeto de Interligação",ajuda:"Ajuda",idioma:"Idioma",fecharProgramador:"Fechar Programador CIE",existemAlteracoes:"Existem alterações na configuração não foram salvas. Deseja fechar?",fechar:"fechar",cancelar:"cancelar",programadorAjuda:"Programador CIE - Ajuda",programadorRelatorio:"Programador CIE - Relatório",atualizandoCentral:"Atualizando a central. Aguarde...",recebendoCentral:"Recebendo eventos de",eventosCarregados:"Os seguintes eventos serão carregados: ",conexao:"Conexão",centralUsb:"Há uma Central conectada via USB, mas o MODO DE CONEXÃO atual é REDE",altereUsb:"Altere para USB para efetuar a Conexão Remota.",atencao:"Atenção",alterandoConexao:"Alterando o modo de conexão, a conexão atual será perdida.",desejaSalvar:"Deseja salvar as alterações?",foramFeitasAlteracoes:"Foram feitas alterações",salvar:"SALVAR",descartar:"DESCARTAR",aguarde:"Aguarde...",recebendoSalvando:"Recebendo e salvando em arquivo. Aguarde...",arquivoSalvoEm:"Arquivo salvo com sucesso em",erroTente:"Erro, tente novamente.",configuracoesPerdidas:"As configurações atuais serão perdidas.",arquivoConfiguracoes:"O arquivo de configurações",seraAberto:"será aberto",desejaContinuar:"Deseja continuar?",sim:"SIM",seraDesconectada:"A central será desconectada.",permiteAbrir:"O Programador CIE permite abrir somente arquivos com extensão .CIE ou .CIEPROJ.",salvarPdf:"SALVAR PDF",funcionalidadeDisponivel:"Funcionalidade disponível somente a partir da versão",conecteUmaCentral:"Conecte uma central para habilitar.",novaVersao:"Há uma nova atualização disponível para a Central",desejaAtualizarAgora:"Deseja atualizar agora?",pular:"Pular",existemAlteracoesNaoEnviadas:"Existem alterações na configuração que não foram enviadas para a central conectada.",desconectarMesmoAssim:"Deseja desconectar mesmo assim?",falha:"Falha",falhaNaComunicacao:"Houve falha na comunicação. Tente novamente."},logs:{paraVisualizar:"Para visualizar o REGISTRO DE EVENTOS, adicione o arquivo da central desejada.",paraSalvar:"Para salvar um arquivo entre em",registroEventos:"Registro de Eventos",apresentar:"Apresentar",ocultar:"Ocultar",central:"Central",adicionarArquivo:"ADICIONAR ARQUIVO",nenhumRegistro:"Nenhum registro para ser apesentado",filtrarData:"Filtrar por data",ate:"até",abrirArquivo:"Abrir arquivo",receberDaCentral:"Receber da Central",salvar:"Salvar",gerarPdf:"Gerar PDF",generatePdfDialog:"Gerar PDF dos eventos de:",evento:"Evento",arquivo:"Arquivo",origem:"Origem",centralDe:"Central de",data:"Data",hora:"Hora",laco:"Laço",nome:"Nome",tipo:"Tipo",subtipo:"Subtipo",idZona:"ID Zona",nomeZona:"Nome Zona",repetidora:"Repetidora",regraAtivacao:"Regra Ativação",operacaoRemotaProgramador:"Operação Remota Programador",selecioneOpcao:"Selecione a opção desejada para apresentar o Registro de Eventos de Alarmes, Falhas, Supervisão e Operação.",todos:"Todos",alarme:"Alarme",operacao:"Operação",supervisao:"Supervisão",falha:"Falha",remover:"Remover",sim:"Sim",cancelar:"Cancelar",removerRegistros:"Remover os Registros de Eventos da Central",necessarioQueExistam:"É necessário que existam registros para salvar!",arquivoSelecionado:"O arquivo selecionado está corrompido!",arquivoInvalido:"O arquivo selecionado não é um arquivo de Registro de Eventos válido!",arquivoExtensao:"O arquivo deve ser de extensão .cielog",carregado:"Registro de eventos carregado com sucesso!",carregadoCentral:"Registro de eventos da Central carregado com sucesso!",oRegistroDeEventos:"O Registro de Eventos da Central",jaAdicionado:" já está adicionado",desejaSubstituir:"Deseja substituir?",naoExistemEventos:"Não existem eventos para serem apresentados!",falhaAoReceber:"Ocorreu um erro ao receber os registros.",registrosRecebidos:"Registro de eventos recebido com sucesso!",recebendoRegistros:"Recebendo Registro de Eventos da Central. Aguarde...",getLogsTypeProgress:"Recebendo Eventos de",necessarioCentral:"É necessário ter uma Central conectada para receber os registros!",haRelatorioProcessando:"Há um relatório em processamento, aguarde a conclusão para gerar novamente.",naoHaEventosImpressos:"Não existem eventos para serem impressos!",selecioneEndereco:"Selecione o Endereço da central que o arquivo pertence",endereco:"Endereço",selecione:"Selecione",adicionnar:"ADICIONAR",registrosPagina:"Registros por página",pagina:"Página",tipoEvento:"Tipo Evento",falhaClasseABIndeterminada:"Indeterminada",falhaClasseABNaSaidaDoLaco:"Saída do Laço",falhaClasseABNoRetornoDoLaco:"Retorno do Laço",falhaClasseABNaSaidaERetornoDoLaco:"Saída e retorno do Laço",falhaFaltaRedeEletrica:"Falta de rede elétrica",falhaFaltaBateria:"Falta de bateria",falhaFugaTerraPositivo:"Terra positivo",falhaFugaTerraNegativo:"Terra negativo",falhaSireneEmCurto:"Sirene em curto",falhaSireneEmAberto:"Sirene em aberto",falhaSaida24VEmCurto:"Saída 24V em curto",falhaSubtensao:"Subtensão",Desconhecido:"Desconhecido",CentralIniciada:"Centr.Iniciada",CentralReiniciada:"Cen.Reiniciada",AcessoSenha_2_:"Acesso Senha 2",AcessoSenha_3_:"Acesso Senha 3",AcessoSenha_4_:"Acesso Senha 4",BipInternoSilenciado:"Bip Silenciado",SireneAdiada:"Sirene Adiada ",SireneSilenciada:"Sir.Silenciada",DataHoraAlterada:"AjusteDataHora",FuncaoGravarEnderececo:"Gravacao Ende.",FuncaoLerEndereco:"Leitura Ender.",RegistroDeLaco:"Registro Laco ",AjusteTempoAtraso:"Aj.TempoAtraso",AjusteTempoMaximo:"Aj.TempoMaximo",AcessoFuncaoWiFi:"Acesso WiFi   ",ConclusaoFuncaoWiFi:"Configur. WiFi",AcessoFuncaoWizzard:"Acesso Wizzard",ConcluidoWizzardPadrao:"Config. Padrao",AjusteDisplayContrasteBacklight:"Ajuste Display",AcessoEdicaoNomesDispositivos:"Ac.EdicaoNomes",AlteradoSenha_2_:"AlteradoSenha2",AlteradoSenha_3_:"AlteradoSenha3",AlteradoSenha_4_:"AlteradoSenha4",AcessoEdicaoLocalInstalacao:"Ac.EdicaoLocal",RegraPadraoAlterada:"Aj.RegraPadrao",AlteradoCentralParaClasseA:"Aj.LacoClasseA",AlteradoCentralParaClasseB:"Aj.LacoClasseB",SireneConvencionalAcionadaManualmente:"SireneAcionada",SireneConvencionalDesacionadaManualmente:"SirereDesliga.",SireneConvencionalBloqueadaManualmente:"SirereBloqueio",SireneConvencionalDesbloqueadaManualmente:"SirereDesbloq.",ReleAlarmeAcionadoManualmente:"ReleAlarme Ac.",ReleAlarmeDesacionadoManualmente:"ReleAlarmeDes.",ReleAlarmeBloqueadoManualmente:"ReleAlarmeBloq",ReleAlarmeDesbloqueadoManualmente:"ReleAlarmeDesb",ReleFalhaAcionadoManualmente:"ReleFalha  Ac.",ReleFalhaDesacionadoManualmente:"ReleFalha Des.",ReleFalhaBloqueadoManualmente:"ReleFalha Bloq",ReleFalhaDesbloqueadoManualmente:"ReleFalha Desb",BloqueioRegraPadrao:"Bloq.RegraPadr",DesbloqueioRegraPadrao:"Desb.RegraPadr",BloqueioLaco:"Bloqueio Laco ",DesbloqueioLaco:"Desbloq. Laco ",BloquearTodos:"Bloquear Todos",DesbloquearTodos:"Desbloq. Todos",AcionarTodos:"Acionar Todos ",DesacionarTodos:"Desacion.Todos",OperacaoBloqueado:"Bloqueado",OperacaoDesbloqueado:"Desbloqueado",OperacaoAcionado:"Acionado",OperacaoDesacionado:"Desacionado",OperacaoIncluidoNaTabelaDeRegistros:"IncluidoNoLaco",OperacaoExluidoDaTabelaDeRegistros:"ExcluidoDoLaco",alarmeGeral:"Alarme Geral",NaoRegistrado:"Não Registrado",podeDemorar:"A depender da quantidade de registros existentes na Central, o recebimento dos eventos pode demorar vários minutos.",desejaContinuar:"Deseja continuar?"},loop:{removerDispositivo:"Remover Dispositivo",selecionar:"Selecionar",criarDispositivo:"Criar Dispositivo",laco:"Laço",saidasLocais:"Saídas Locais",ativado:"ativado",bloqueado:"bloqueado",ativadoUpper:"Ativado",bloqueadoUpper:"Bloqueado",nenhumDispositivo:"Nenhum dispositivo no LAÇO",selecioneBotao:"Selecione o botão",paraCriar:"para criar dispositivos",endereco:"Endereço",ativo:"Ativo",saidaLocal:"Saída Local",nome:"Nome",zona:"Zona",tipo:"Tipo",subtipo:"Subtipo",modo:"Modo",supervisao:"Supervisão",sim:"Sim",nao:"Não",cadastrarNovo:"Cadastrar novo dispositivo",fechar:"Fechar",campoObrigatorio:"Campo obrigatório",enderecoJaUtilizado:"Endereço já utilizado",enderecoDeveSer:"O Endereço deve ser de 1 a 250",cancelar:"Cancelar",criar:"Criar",aplicar:"Aplicar",desconhecido:"Desconhecido",Desconhecido:"Desconhecido",foramFeitasAlteracoes:"Foram feitas alterações no dispositivo.",desejaSalvar:"Deseja salvar as alterações?",salvar:"SALVAR",descartar:"DESCARTAR",dispositivoSelecionado:"O dispositivo selecionado será removido das seguintes Regras e Zonas:",seraoRemovidos:"Os dispositivos selecionados serão removidos das seguintes Regras e Zonas:",confirmaRemocao:"Confirma a remoção do(s) dispositivo(s)?",remover:"Remover",dispositivosRemovidos:"Dispositivos removidos!",entrada:"Entrada",saida:"Saída",atencao:"Atenção",naoEPossivelDesabilitar:"Não é possível desabilitar um dispositivo que está configurado como Saída Padrão.",noDispositivo:"no Dispositivo",regra:"Regra",alterandoTipo:"Alterando o tipo do dispositivo de",podeSeInvalidar:"pode-se invalidar a configuração da regra que ele pertence.",desejaContinuar:"Deseja continuar?",dispositivoCriado:"Dispositivo criado com sucesso!",alteracoesAplicadas:"Alterações aplicadas com sucesso!",criarMaximo:"O sistema permite criar no máximo",dispositivoPorLaco:"dispositivos por Laço",refazerScan:"Ao refazer o Scan todos os dispositivos do Laço",seraoRemovidos2:"serão removidos",novosSeraoAdicionados:"Os novos dispositivos serão adicionados automaticamente na Zona Padrão e Regra Padrão",realizandoScan:"Realizando o Scan. Aguarde..",cetralPossui:"A Central conectada possui",dispositivosNoLaco:"dispositivos no Laço",foramAdicionados:"Esses dispositivos foram adicionados automaticamente na Zona Padrão e Regra Padrão",nenhumDispositivoEncontrado:"Nenhum dispositivo encontrado no Laço",verifiqueInstalacao:"Verifique a instalação do Laço e tente novamente.",possuiMaisQue:"A Central possui mais que 125 dispositivos no Laço",modeloSuporta:"O Modelo CIE 1125 suporta no máximo 125 dispositivos por laço",lacoPossuiMaiores:"O Laço possui endereço(s) maiores que 125. O Modelo CIE 1125 suporta endereçoas até 125.",verifiqueDispositivos:"Verifique os dispositivos do Laço e tente novamente.",falhaConexao:"Falha na conexão!",verifique:"Verifique e tente novamente",scanLaco:"Scan do Laço",nenhumaSaidaPadrao:"Nenhuma - Saída Padrão"},project:{selecioneNovo:"Selecione o novo modelo da Central",modelo:"Modelo",selecione:"Selecione",cancelar:"CANCELAR",alterar:"Alterar",novaCentral:"Nova Central",novaCentralPadrao:"Criar nova central com a configuração padrão",importarArquivo:"Importar arquivo de configuração",buscarRede:"Buscar na Rede",nenhumaEncontrada:"Nenhuma Central nova encontrada",novasCentrais:"Novas centrais encontradas",central:"Central",selecionarArquivo:"Selecionar arquivo",endereco:"Endereço",centrais:"CENTRAIS",interligacoes:"INTERLIGAÇÕES",comandosGlobais:"COMANDOS GLOBAIS",registroEventos:"REGISTRO DE EVENTOS",esseComando:"Esse comando não está configurado em nenhuma das Regras nas",legenda:"Legenda",enviaComando:"Envia o comando",naoTrata:"Não trata o comando",modoVisualizacao:"Modo de visualização",tabela:"Tabela",grafo:"Grafo",aCentral:"A Central",monitoraACentral:"Monitora a Central",trataEventosAlarme:"trata eventos de ALARME da Central",trataEventosFalha:"trata eventos de FALHA da Central",trataEventosSupervisao:"trata eventos de SUPERVISÃO da Central",monitora:"Monitora",trataAlarme:"Trata eventos de Alarme",trataFalha:"Trata eventos de Falha",trataSupervisao:"Trata eventos de Supervisão",colarToda:"Colar toda configuração",colarApenas:"Colar apenas as configurações de interligação",online:"ONLINE",offline:"OFFLINE",alterarModelo:"Alterar modelo",excluirProjeto:"Excluir do projeto",modeloUpper:"MODELO",descohecido:"Desconhecido",configurar:"Configurar",copiar:"Copiar",ativarConexao:"Ativar conexão",operarRemotamente:"Operar remotamente",copiado:"COPIADO",colar:"COLAR",colarNovaCentral:"COLAR NOVA CENTRAL",atencao:"Atenção",centralConectada:"Há uma central conectada, é necessário desconectá-la para operar remotamente",novaCentralImportada:"Nova central importada com sucesso!",arquivoInvalido:"Arquivo inválido!",centralCriada:"Central criada com sucesso!",removerCentralProjeto:"Remover Central do Projeto",confirmaRemocao:"Confirma a remoção da Central",doProjeto:"do Projeto?",remover:"Remover",removidoSucesso:"Removido com sucesso!",aoAlterar:"Ao alterar o modelo, as configurações atuais serão perdidas e retornarão para o padrão.",desejaContinuar:"Deseja continuar?",sim:"Sim",modeloSucesso:"Modelo alterado com sucesso!",copiadoSucesso:"Copiado com sucesso!",alarmeGeral:"Alarme Geral",reiniciarCentral:"Reiniciar Central",silenciarCentral:"Silenciar Central",silenciarSirene:"Silenciar Sirene",sireneBrigada:"Sirene de Brigada",configuracaoCarregada:"Configuração carregada!",enderecoRecebida:"O endereço da configuração recebida é diferente do endereço da Central selecionada no projeto de interligação.",escolhaEndereco:"Escolha o endereço para vincular à configuração recebida"},remote:{insiraSenha:"Insira a Senha",nivel:"NÍVEL",paraIniciar:"para iniciar a operação",senhaInvalida:"Senha inválida!",falhaComunicacao:"Falha de comunicação!",cancelar:"CANCELAR",conectar:"CONECTAR",buscarNaRede:"Buscar Centrais na Rede",conectarIp:"Conectar via Endereço IP",buscar:"Buscar",nenhumaCentral:"Nenhuma Central encontrada.",buscando:"Buscando",enderecoIp:"Endereço IP",enderecoIpInvalido:"Endereço IP inválido",campoObrigatorio:"Campo obrigatório",operar:"OPERAR",configurar:"CONFIGURAR",centraisEncontradas:"Centrais encontradas",central:"Central",buscarRede:"Buscar Equipamentos na Rede",buscarCIEs:"Buscar CIE1125, CIE1250 e CIE2500",operacaoRemota:"Operação Remota",fonte:"FONTE",bateria:"BATERIA",offline:"OFFLINE",online:"ONLINE",operacaoNormal:"OPERAÇÃO NORMAL",sistemaEm:"SISTEMA EM",estadoAtual:"ESTADO ATUAL",alarme:"ALARME",falha:"FALHA",bloqueio:"BLOQUEIO",supervisao:"SUPERVISÃO",acoesGerais:"AÇÕES GERAIS",ativarSaida:"ATIVAR SAÍDA",registroEventos:"REGISTRO DE EVENTOS",operacao:"OPERAÇÃO",silenciarBip:"SILENCIAR BIP INTERNO",adiarSirene:"ADIAR SIRENE",alarmeGeral:"ALARME GERAL",modelo:"MODELO",reiniciarCentral:"REINICIAR CENTRAL",bloqueios:"BLOQUEIOS",silenciarSirene:"SILENCIAR SIRENE",sireneDeBrigada:"SIRENE DE BRIGADA",areaVisualizacao:"ÁREA DE VISUALIZAÇÃO",selecioneAcao:"Selecione uma ação para as informações serem apresentadas aqui",eventosDe:"EVENTOS DE",nenhumEvento:"Nenhum evento para ser apresentado",regEventos:"REG. DE EVENTOS DE",nenhumregistro:"Nenhum registro para ser apresentado",regrasTemporizando:"REGRAS TEMPORIZANDO",adiarTodas:"Adiar todas",dispararTodas:"Disparar todas",ativarSaidas:"ATIVAR SAÍDAS",lacoUpper:"LAÇO",ativos:"ATIVOS",bloqueados:"BLOQUEADOS",todosUpper:"TODOS",nenhum:"Nenhum",salvar:"SALVAR",local:"LOCAL",atencao:"Atenção",aoBuscar:"Ao buscar novas Centrais, a conexão atual será perdida.",todos:"Todos",tipoAlarme:"Alarme",tipoFalha:"Falha",tipoSupervisao:"Supervisão",tipoOperacao:"Operação",tipoBloqueio:"Bloqueio",sim:"Sim",conectarNovamente:"Deseja conectar novamente?",conexaoPerdida:"A conexão com a central foi perdida.",atuadores:"Atuadores",sirenes:"Sirenes",saidas:"Saídas",dispositivos:"Dispositivos",regras:"Regras",zonas:"Zonas",lacos:"Laços",ativaSaida:"Ativa",bloqueioSaida:"Bloqueio",comandoNaoConfigurado:"Comando não configurado!",reiniciar:"Reiniciar Central.",confirmaReinicializacao:"Confirma a reinicialização da Central?",opRemotaProgramador:"Op. Remota Programador"},report:{relatorio:"Relatório",relatorios:"Relatórios",selecioneConfiguracao:"Selecione a configuração desejada para gerar o relatório",localInstalacao:"Local de instalação",modeloCentral:"Modelo da Central",laco:"Laço",ativado:"Ativado",sim:"Sim",nao:"Não",dispositivos:"Dispositivos",ativo:"Ativo",nome:"Nome",zona:"Zona",tipo:"Tipo",subtipo:"Subtipo",modo:"Modo",supervisao:"Sup.",ativada:"Ativada",endAbreviado:"End.",endereco:"Endereço",itensEntradaSaida:"Itens de entrada/saída",respondeBotaoBrigada:"Responde ao botão de Brigada",respondeBotaoAlarme:"Responde ao botão de Alarme Geral",condicaoEntrada:"Condição de entrada",unica:"Única",dupla:"Dupla",ativacaoSaida:"Ativação de saída",temporizada:"Temporizada",imediata:"Imediata",novaEntrada:"Nova entrada cancela temporização",saida:"Saída",entrada:"Entrada",relatorioGerado:"Relatório gerado em",nomeResponsavel:"Nome do responsável",assinatura:"Assinatura",projetoInterligacao:"Projeto de Interligação",registroEventos:"Registro de eventos",primeiroEvento:"1º Evt",evento:"Evento",centralDe:"Central de",origem:"Origem",data:"Data",hora:"Hora",idZona:"ID Zona",nomeZona:"Nome Zona",repetidora:"Repetidora",regraAtivacao:"Regra Ativação",operacaoRemota:"Operação Remota Programador",central:"Central",gerandoAguarde:"Gerando relatório. Aguarde ... ",gerado:"Relatório gerado!",abrir:"Abrir",falhaPdf:"Falha ao gerar o relatório PDF.",gerarRelatorio:"Gerar Relatório",regra:"Regra"},rule:{removerRegra:"Remover Regra",criarRegra:"Criar Regra",selecionar:"Selecionar",ativada:"Ativada",bloqueada:"Bloqueada",campoObrigatorio:"Campo obrigatório",idJaUtilizado:"ID já utilizado",idFaixa:"O ID deve ser de 1 a 100",nome:"Nome",responderBotaoDe:"Responder ao botão de",brigada:"Brigada",alarmeGeral:"Alarme Geral",condicaoEntrada:"Condição de Entrada",unico:"Única",dupla:"Dupla",ativacaoSaida:"Ativação de saída",imediata:"Imediata",temporizada:"Temporizada",temporizacao:"Temporização",tempoDeveSer:"O tempo deve ser entre 00:01 e",tempoMaximoRetardo:"tempo máximo de retardo",novaEntradaCancela:"Nova entrada cancela a temporização",pertencemARegra:"Pertencem à Regra",entrada:"Entrada",saida:"Saída",nennhumItem:"Nenhum Item",local:"LOCAL",laco:"LAÇO",adicionar:"Adicionar",remover:"Remover",disponiveis:"Disponíveis",dispositivos:"Dispositivos",zonas:"Zonas",eventos:"Eventos",interligacao:"Interligação",dispositivosLocais:"DISPOSITIVOS LOCAIS",nenhumEvento:"Nenhum Evento",nenhumaZona:"Nenhuma Zona",criar:"Criar",aplicar:"Aplicar",cancelar:"Cancelar",nenhumDispositivo:"Nenhum Dispositivo de",adicionarDispositivo:"Adicionar dispositivo",adicionarZona:"Adicionar Zona",foramFeitasAlteracoes:"Foram feitas alterações na Regra.",desejaSalvar:"Deseja salvar as alterações?",salvar:"SALVAR",descartar:"DESCARTAR",falha:"Falha!",naoPermitidoExcluir:"Não é permitido excluir a Regra 001.",confirmaRemocao:"Confirma a remoção da Regra?",excluir:"Excluir",regrasRemovidas:"Regras removidas!",oDispositivo:"O dispositivo",estaDefinido:"está definido como",masDispositico:"mas é um dispositivo de",atencao:"Atenção",regraPossui:"A Regra possui configurações inconsistêntes",ajusteAConfiguracap:"Ajuste a configuração da regra movendo os dispositivos para seu modo correspondente, de Entrada ou Saída.",paraSalvar:"Para salvar é obrigatório adicionar ao menos um Item como Saída!",regraCriada:"Regra criada com sucesso!",alteracoesAplicadas:"Alterações aplicadas com sucesso!",acionamentoBrigada:"acionamento do botão de Brigada",acionemantoAlarmeGeral:"acionamento do botão de Alarme Geral",acionamentoBrigadaAlarme:"acionamento do botão de Brigada ou Alarme Geral",regraNaoPossui:"A regra não possui nenhum dispositivo de entrada, o disparo da regra somente ocorrerá com o",desejaContinuar:"Deseja continuar?",paraSalvarItemEntrada:"Para salvar é obrigatório adicionar ao menos um Item como Entrada, ou a ativação das teclas de Sirene de Brigada ou Alarme Geral!",regraPrecisaDois:"A Regra precisa de dois itens de entrada para atender a Condição de Entrada Dupla",sistemaPermite:"O sistema permite criar no máximo",regras:"regras",seraoAcionandos:"Os dispositivos dessa regra não serão acionados pelo botão de Alarme Geral da central",exclusaoTemporizacao:"A exclusão da temporização na regra irá desabilitar a função e a resposta ao botão de Sirene de Brigada",necessarioDefinir:"É necessário definir uma Temporização na regra para definir o período de funcionamento da Sirene de Brigada",sim:"Sim",nao:"Não",naRegra:"na Regra",dispositivosNaoPodem:"Os dispositivos abaixo não podem ser adicionados pois já pertencem à Zonas adicionadas nessa regra",regraJaPossui:"A regra já possui dispositivos dessa Zona adicionados, esses dispositivos serão removidos para não haver redundância",nesseModeloNaoPermitidoCriarRegra:"Na Central CIE 1060 as configurações de Regras são padronizadas, não sendo possível criar outra Regra além da Regra Padrão."},system:{configuracoes:"Configurações",configuracoesRede:"Configurações de Rede",configuracoesTls:"Configurações TLS/SSL",dataHora:"Data e Hora",firmware:"Firmware",informacoesCentral:"Informações da Central",eRepetidoras:"e Repetidoras",interligacaoCentrais:"Interligação de Centrais",niveisAcesso:"Níveis de acesso",gwAuthPassword:"Senha de Autenticação para acesso via Ethernet(Rede)",gwAuthPasswordTitle:"Senha de Autenticação",registroEventos:"Registro de Eventos",saidasPadrao:"Saídas padrão",aConfiguracaoPontoAPonto:"A configuração ponto a ponto está habilitada. Para desabilitar entre em",configuracaoRede:"Configuração de rede",enderecoCentral:"Endereço da Central",interligacaoDesabilitada:"Interligação desabilitada",centraisMonitoradas:"Centrais Monitoradas",comandosGlobais:"Comandos Globais",alarmeGeral:"Alarme Geral",reiniciarCentral:"Reiniciar Central",silenciarCentral:"Silenciar Central",silenciarSirene:"Silenciar Sirene",sireneBrigada:"Sirene de Brigada",cancelar:"Cancelar",aplicar:"Aplicar",modo:"Modo",ipFixo:"IP fixo",pontoAPonto:"Ponto a ponto",enderecoIp:"Endereço IP",enderecoIpInvalido:"Endereço IP inválido",campoObrigatorio:"Campo obrigatório",faixaTempo:"O tempo deve ser entre 00:01 e 59:59",modoOperacao:"Modo de Operação",classeA:"Classe A",classeB:"Classe B",bateriaExterna:"Bateria Externa",desabilitada:"Desabilitada",habilitada:"Habilitada",habilitarRepetidoras:"Habilitar Repetidoras",preAlarme:"Pré-Alarme Detectores de Fumaça",monitoramentoModbus:"Monitoramento Modbus UDP",senhaNivel:"Senha Nível",dataHoraCentral:"Data e hora da Central",atualizar:"Atualizar",dataHoraComputador:"Data e hora do Computador",sincronizar:"Sincronizar",alterarData:"Alterar Data",faixaAno:"O ano não pode ser maior que 2099",hora:"Hora",enviar:"Enviar",saidaAlarme:"Saída de Alarme",saidaFalha:"Saída de Falha",saidaSupervisao:"Saída de Supervisão",inativa:"Inativa",ativa:"Ativa",dispositivo:"Dispositivo",laco:"Laço",alterar:"Alterar",dispostivosLocais:"Dispostivos Locais",nenhumDispositivoSaida:"Nenhum dispositivo de saída",atualizacaoFirmware:"Atualização de Firmware",arquivo:"Arquivo",carregarArquivo:"carregar arquivo",versaoArquivo:"Versão do arquivo",versaoCentral:"Versão da Central",atualizarCentral:"atualizar central",recuperarCentral:"Recuperar central",mascaraInvalida:"Máscara inválida",gatewayInvalido:"Gateway inválido",modeloCentral:"Modelo da Central",versaoFirmware:"Versão do Firmware",versaoFonte:"Versão Fonte",versaoLaco:"Versão Laço",versaoProtocolo:"Versão Protocolo",enderecoRepetidora:"Endereço da Repetidora",localInstalacao:"Local de Instalação",tempoMaximo:"Tempo máximo de retardo",mascara:"Máscara",gatewayPadrao:"Gateway padrão",configuracoesAplicadas:"Configurações aplicadas!",atencao:"Atenção!",configuracaoSenha:"Configurando a senha como vazia fará com que a Central não solicite senha para realizar as operações protegidas.",desejaContinuar:"Deseja continuar?",sim:"Sim",nao:"Não",naoPossivelAdicionar:"Não é possível adicionar um dispositivo bloqueado como Saída Padrão.",dispositivoSelecionado:"O dispositivo selecionado está sendo utilizado nas seguintes Regras/Zonas",aoDefinir:"Ao definir como Saída Padrão, o dispositivo será removido das Regras/Zonas acima.",aguarde:"Aguarde...",regra:"Regra",dataHoraAtualizadas:"Data/Hora atualizadas!",centralDesconectada:"Central desconectada!",aVersaoArquivo:"A versão do arquivo de firmware é a mesma da Central conectada.",necessarioSuperior:"É necessário que ela seja superior para realizar a atualização.",versaoArquivoMenor:"A versão do arquivo de firmware é menor que a versão da Central conectada.",erro:"Erro",arquivoCorrompido:"O arquivo selecionado está corrompido!",firmwareInvalido:"Não é um arquivo de Firmware válido!",necessarioExtensao:"É necessário um arquivo com extensão .cief (CIE), .cie1060f (CIE 1060) ou .gwf (GW 521)",arquivoFirmware:"Certifique-se que é um arquivo de Firmware.",arquivoInvalido:"Arquivo inválido para a atualização!",falhaAtualizacao:"Falha na atualização!",ocorreuErro:"Ocorreu um erro ao atualizar a central.",verifiqueConexao:"Verifique a conexão ou se o arquivo .CIEF está correto.",firmwareAtualizado:"Firmware atualizado com sucesso!",firmwareRecuperado:"Firmware recuperado com sucesso!",recuperacao1060Item1:"- Retire o JUMPER BOOT;",recuperacao1060Item2:"- Pressione o botão RESET;",recuperacao1060Item3:"- A central irá reiniciar.",seraReiniciada:"A central será reiniciada.",conexaoPontoPonto:"Conexão ponto a ponto",interligacaoDesconfigurada:"Ao habilitar a conexão ponto a ponto a interligação será desconfigurada",pontoPontoHabilitada:"Conexão ponto a ponto habilitada",habiliteInterligacao:"Habilite a interligação para a conexão ponto a ponto funcionar corretamente",existemAlteracoes:"Existem alterações não aplicadas.",desejaAplicar:"Deseja aplicar as alterações?",salvar:"SALVAR",descartar:"DESCARTAR",emSistema:"em Sistema",centralOffline:"Central OFFLINE",alertaSenhaPadrao:"Atenção: Para a segurança do sistema, é imprescindível que você troque as senhas-padrão assim que instalar o produto.",gwPasswordAlert:"O primeiro acesso ao equipamento não requer autenticação, entretanto, é necessário cadastrar uma senha para os próximos acessos pela Ethernet.",gwSendEthernetAlert:"Durante a primeira configuração do equipamento é necessário cadastrar uma senha para acesso ao equipamento via Ethernet.",pt:"Português",es:"Espanhol",integracaoDesabilitada:"Integração desabilitada",modbusTCP:"Modbus TCP",situador:"Situator",Webhook:"Webhook",rcptip:"Receptor IP Intelbras",identificadorEquipamento:"Identificador de Equipamento",infoCodigoConta:"Conta do Cliente configurado no Receptor IP.",infoIdentificadorEquipamento:'Informação que será alimentada no campo "Partição" dos eventos no Receptor IP. Geralmente utilizado para diferenciar vários GW521 associados à mesma conta.',servidorIP:"IP ou Host do servidor",porta:"Porta",unitID:"Unit ID",timeout:"Timeout Conexão",padrao:"Padrão",testarComunicacao:"Testar comunicação",testar:"Testar",host:"IP ou Host do servidor",usuarioESenha:"Usuário e senha",modoAutenticacao:"Modo de autenticação",usuario:"Usuário",senha:"Senha",modoDaRede:"Modo da Rede",enderecoWebhook:"Endereço do Webhook",enderecoInvalido:"Endereço inválido",autenticacao:"Autenticação",chavePrivada:"Chave privada",gerar:"Gerar",nivelAutenticacao:"Nível de autenticação",criptografia:"Somente criptografia",autenticacaoOpcional:"Autenticação opcional",autenticacaoObrigatoria:"Autenticação obrigatória",infoChavePrivada:"A chave privada é utilizada opcionalmente para que o servidor possa autenticar as mensagens do GW521.\n\nEssa chave deve ser a mesma entre o GW521 e o Servidor para que a autenticação HMAC funcione corretamente.\n\nPode-se inserir uma chave gerada previamente pelo Servidor ou então gerar uma nova chave que deve ser copiada nas configurações do GW521 no Servidor.",infoNivelAutenticacao:"-Somente Criptografia: Nenhuma ação é tomada para verificar a autenticidade do Servidor, porém, as mensagens são criptografadas.\n\n-Autenticação Opcional: Certificado do servidor é solicitado, porém falhas no certificado são ignoradas. Mensagens são criptografadas normalmente.\n\n-Autenticação Obrigatória: Certificado do servidor é solicitado e qualquer falha no certificado interrompe a conexão.",intervaloHeartbeat:"Intervalo Heartbeat",intervaloEntreEventos:"Intervalo entre eventos",infoHeartbeat:'Intervalo de tempo em que o GW521 enviará ao servidor eventos do tipo "Estou Vivo" para sinalizar seu funcionamento.\nPode ser desabilitado configurando em 00:00.',infoHttps:"A comunicação HTTPS geralmente acontece nas portas 443 ou 8443",necessarioClientePrivada:"Para aplicar as configurações é necessário importar o Certificado Raiz do Servidor de Integração, o Certificado do GW521 e a Chave Privada do GW521.",certificadoRaizServidorIntegracao:"Certificado Raiz do Servidor de Integração",certificadoDoGateway:"Certificado do GW521",chavePrivadaDoGateway:"Chave Privada do GW521",certificadoRaizProgramador:"Certificado Raiz Autoassinado do Programador CIE",certificadoCarregado:"Certificado carregado no equipamento",validoAPartir:"Válido a partir de",validoAte:"Válido até",requerente:"Requerente",emitidoPor:"Emitido por",numeroSerie:"Número de série",importar:"Importar",importarCertificado:"Importar Certificado",importarChavePrivada:"Importar Chave Privada",gerarCertificado:"Gerar Certificado",arquivoImportado:"Arquivo que será importado",infoCertificadosVazio:"Receba as configurações para visualizar as propriedades do certificado atual. Para adicionar ou alterar o certificado existente selecione Importar e envie as configurações.",infoCertificadosReceba:"Receba as configurações para visualizar as propriedades do certificado atual.",infoCertificadoImportacaoNecessariaServidor:"Para Importar ou Gerar esse certificado, é necessário a importação do Certificado Raiz do Servidor de Integração.",infoCertificadoImportacaoNecessariaGateway:"Para Importar ou Gerar esse certificado, é necessário a importação do Certificado do Gateway.",infoCertificadoRaizProgramador:"O Programador CIE possui um certificado auto assinado que deve ser importado no servidor de integração. Salve em seu computador pelo botão SALVAR abaixo:",enderecoURLInvalido:"Adicione um Endereço válido.",codigoConta:"Código da Conta",codigoZona:"Código da Zona",habilitarGwt:"Habilitar Gateway CIE GW521",opcional:"opcional",infoCodigoZona:"”Código da Zona” deve ser o mesmo código cadastrado no Situator, caso contrário, os eventos enviados não serão aceitos.",infoCertificadoRaiz:"O Certificado raiz é utilizado pelo GW521 para verificar a autenticidade do Servidor.\n\nDeve ser importado somente aquele usado para autenticar o servidor que será feita a conexão no formato “.PEM”. Não é  possível importar para o GW521 uma lista de certificados raiz.",infoCertificadoCliente:"O Certificado do Cliente é o certificado do próprio equipamento (GW521) para que o Servidor possa verificar a autenticidade.\n\nDeve ser importado junto com sua chave privada no formato “.PEM”.",detalhamentoDeErros:"Detalhamento de erros",configuracoesIpFixo:"Configurações de IP Fixo",interfaceDesconectada:"Interface de Rede Desconectada",semErros:"Sem erros",sistema:"Sistema",flashExterna:"Flash Externa",ethernet:"Ethernet",comunicacao:"Comunicação CIE",modbus:"Modbus",webhook:"Webhook","gtw-erro-sistema-0":"Inicialização do relógio interno","gtw-erro-flashExterna-0":"Inicialização da memória flash externa","gtw-erro-flashExterna-1":"Operação de escrita de dados","gtw-erro-flashExterna-2":"Operação de apagamento de dados","gtw-erro-ethernet-0":"Interface de rede desconectada","gtw-erro-ethernet-1":"IP Fixo inválido ou falha na atribuição do IP pelo DHCP","gtw-erro-ethernet-2":"Inicialização da interface ethernet","gtw-erro-ethernet-3":"Nenhum tipo de integração configurado","gtw-erro-comunicacao-0":"Sem comunicação com a CIE","gtw-erro-modbus-0":"Falha ao associar conexão à porta","gtw-erro-modbus-1":"Falha ao iniciar servidor Modbu","gtw-erro-modbus-2":"Falha ao estabelecer conexão com o cliente","gtw-erro-situador-0":"Falha ao resolver nome do Host em IP","gtw-erro-situador-1":"Endereço IP do servidor não configurado","gtw-erro-situador-2":"Falha ao tentar estabelecer conexão com o Situator","gtw-erro-situador-3":"Situator recusou evento (Verificar código da conta e lista de eventos cadastrados no sistema)","gtw-erro-situador-4":"Não foi possível autenticar no Situator (Login/Senha ou Token incorreto)","gtw-erro-webhook-0":"Falha ao resolver nome do Host em IP","gtw-erro-webhook-1":"Endereço IP do servidor não configurado","gtw-erro-webhook-2":"Falha ao tentar estabelecer conexão com o Servidor ","gtw-erro-webhook-3":"Servidor recusou evento","gtw-erro-webhook-4":"Falha ao estabelecer conexão segura HTTPS","gtw-erro-rcptip-0":"Falha ao resolver nome do Host em IP","gtw-erro-rcptip-1":"Endereço IP do servidor não configurado","gtw-erro-rcptip-2":"Falha ao tentar estabelecer conexão com o Servidor ","gtw-erro-rcptip-3":"Servidor recusou evento",erroSomenteCriptografia:"Certificado do Cliente e a chave privada não foram importadas. Caso o Servidor esteja configurado para verificar a autenticidade do Cliente, não será possível estabelecer uma conexão segura.",erroOpcionalRaiz:"Certificado Raiz não foi importado. Certificado do servidor será solicitado, mas não será verificado.",erroOpcionalCliente:"Certificado do Cliente e a chave privada não foram importadas. Caso o Servidor esteja configurado para verificar a autenticidade do Cliente, não será possível estabelecer uma conexão segura.",erroObrigatorioRaiz:"Certificado Raiz deve ser importado",erroObrigatorioCliente:"Certificado do Cliente e a chave privada não foram importadas. Caso o Servidor esteja configurado para verificar a autenticidade do Cliente, não será possível estabelecer uma conexão segura.",certificadoPais:"País",certificadoCidade:"Cidade",certificadoEstado:"Estado",certificadoUnidadeOrganizacao:"Unidade da Organização",certificadoNomeOrganizacao:"Nome da Organização",infoGeracaoCertificadoGateway1:"Esse processo de geração irá criar um certificado autoassinado para o equipamento.",infoGeracaoCertificadoGateway2:"Certificados autoassinados não possuem confiança pública, pois não foram gerados por autoridades certificadoras reconhecidas.",infoGeracaoCertificadoGateway3:"Nesse caso, o próprio ProgramadorCIE atua como autoridade certificadora não reconhecida.",infoGeracaoCertificadoGateway4:'Para evitar problemas de autenticação, após a geração dos certificados é necessário que o "Certificado Raiz Autoassinado do Programador CIE" seja salvo e importado no sistema integrador.',cancelarEGerarNovo:"Cancelar e gerar novamente",infoCertificageGenerated:"Certificado gerado! Aplique as configurações e envie a programação para ativá-lo.",naoFoiPossivelGerar:"Não foi possível gerar o certificado. Consulte o Help.",localizacaoDiretorio:"O certificado pode ser localizado em",salvarCopia:"Salvar uma cópia",substituirCertificado:"Substituir certificado",copiaSalva:"Cópia do certificado salva com sucesso!",algoritmo:"Algoritmo",codigoDoEquipamento:"Código do Equipamento",infoPreAlarme:"Essa configuração permite habilitar ou desabilitar o pré-alarme para os detectores de fumaça. Quando habilitado, faz com que um detector de fumaça, ao ser acionado, coloque o sistema em pré-alarme. Caso ocorra um novo disparo de outro detector de fumaça no intervalo de 10 minutos, o sistema entra em alarme normalmente. Caso não ocorra, a central continua em estado de operação normal.",codigoContaNegativo:"Não permitido valor negativo.",oValorMinimo:"O valor mínimo é",oValorMaximo:"O valor máximo é",preenchaCorretamente:"Preencha os campos corretamente para Aplicar",certificadoInvalido:"Certificado inválido! Por favor insira novamente.",localDeInstalacaoLinha1:"Local de Instalação (1ª Linha)",localDeInstalacaoLinha2:"Local de Instalação (2ª Linha)",aSenhaDeveTer4Digitos:"A senha deve ter 4 dígitos",pwdProgCieMaxLength:"A senha deve ter no máximo 20 dígitos",pwdProgCieMinLength:"A senha deve ter no mínimo 6 dígitos",bloqueiosLocais:"Bloqueios locais",sireneConvencional:"Sirene Convencional",releDeAlarme:"Relé de Alarme",releDeFalha:"Relé de Falha",regraPadrao:"Regra Padrão",habilitado:"Habilitado",bloqueado:"Bloqueado",tempoDeveSerMenorRegraPadrao:"O valor deve ser maior que a temporização da Regra Padrão",quantidadeDispositivos:"Quantidade de dispositivos",classe:"Classe",imediata:"Imediata",temporizada:"Temporizada",alertaUSB1060:"Atenção: Conecte o cabo USB na Central CIE 1060 para realizar a atualização de Firmware.",alertaConexaoCie:"Atenção: Ative a conexão USB da central para realizar a atualização de Firmware.",alertaConexaoCieIni:" Atenção: Não é possível atualizar o firmware pela Wi-Fi. ",alertaConexaoCieMei:"Desconecte ",alertaConexaoCieFi:"e depois reconecte utilizando a USB ou REDE para atualizar o firmware.",centralEmBoot:"Atenção: Central conectada em Modo de Recuperação, ative o modo para realizar a atualização de Firmware.","1060Recover":"Recuperação de Firmware","modalRecovery-title":"Recuperação de Firmware da CIE 1060","modalRecovery-atencao":"Atenção. Utilize esse procedimento somente se houver algum problema no procedimento padrão de atualização de Firmware!","modalRecovery-descricao":"Procedimento para realizar a Recuperação de Firmware da CIE 1060","modalRecovery-passo1":"Conecte o cabo USB","modalRecovery-passo2":"Colocar o Jumper BOOT","modalRecovery-passo3":"Apertar o botão RESET","modalRecovery-passo4":"Pressione o botão Habilitar Recuperação","modalRecovery-passo5":"Carregue a versão de firmware e clique em Recuperar Central.","modalRecovery-aguarde":"Aguardando procedimento e conexão USB ...","modalRecovery-conexaoOk":"USB conectada!","modalRecovery-habilitarRecuperacao":"Habilitar recuperação"},tools:{gerarPdf:"Gerar PDF",calculoAlimentacao:"Cálculo da Alimentação de Sirenes",operacaoRemota:"Operação Remota",info:"O cálculo de alimentação de sirenes é uma ferramenta para auxiliar o projeto do sistema de detecção e alarme de incêndio, a partir da configuração do cenário, configurando campos como número de sirenes, tipo dos dispositivos, comprimento e seção do cabo, ele calcula a correnta necessária para o correto funcionamento de todas as sirenes do sistema e caso necessário indica quantas fontes auxiliares (FNA520) são necessárias e o ponto de inserção delas.",assistente:"Assistente",assistenteInfo:"Assistente para facilitar a configuração de um cenário inicial com vários dispositivos.",manual:"Manual",manualInfo:"Abre um cenário vazio, para inserção manual dos dispositivos individualmente.",importar:"Importar",importarInfo:"Abre um cenário de configuração, a partir de um arquivo salvo.",sirenesEnderecaveis:"Sirenes Endereçáveis",saidaConvencional:"Saída Convencional",quantidadeDispositivo:"Quantidade de dispositivos",quantidade:"Quantidade",cabo:"Cabo",distancia:"Distância",metros:"metros",modelo:"Modelo",cancelar:"Cancelar",calcular:"Calcular",mesmoCabo:"Mesmo Cabo",paraTodos:"para todos",mesmaDistancia:"Mesma Distância",novoProjeto:"Novo projeto",tabelaSirenes:"Tabela de Sirenes",adicioneAsSirenes:"Adicione as sirenes do projeto para realizar o cálculo",dispositivo:"Dispositivo",remover:"Remover",novoDispositivo:"Novo Dispositivo",importarDeArquivo:"Importar de Arquivo",resultadoCalculo:"Resultado do cálculo",salvar:"Salvar",secao:"SEÇÃO",naoNecessario:"Não é necessário",fontes:"fontes",distanciaTotal:"Distância total",relatorioGerado:"Relatório gerado em",altereModo:"Altere o MODO DE CONEXÃO para REDE para utilizar essa funcionalidade.",limpar:"Limpar",atencao:"Atenção",sim:"Sim",aoIniciarUmProjeto:"Ao iniciar um novo projeto, o atual será perdido.",aDistanciaEntre:"A distância entre as sirenes está a mesma para todos, ajuste individualmente para o cálculo ser realizado corretamente.",arquivoImportado:"Arquivo importado com sucesso!",arquivoInvalido:"Arquivo inválido!",seraoSubstituidos:"Os dispositivos serão substituídos.",arquivoSalvo:"Arquivo salvo com sucesso!",falha:"Falha!",arquivoCarregado:"Arquivo carregado com sucesso!",emCalculoAlimentacao:"em Cálculo da Alimentação de Sirenes",relatorio:"Relatório",dispositivos:"Dispositivos",nomeResponsavel:"Nome do responsável",assinatura:"Assinatura",desejaContinuar:"Deseja continuar?",logExecucao:"Log de Execução em Tempo Real",sistema:"Sistema",autenticacaoGW:"Autenticação no GW521",suaSenha:"Sua Senha",contraSenha:"Contra-senha",enviar:"Enviar",autenticar:"Autenticar",necessarioAutenticacao:"É necessário autenticar para visualizar as informações",alterarMac:"Alterar MAC Address",mac:"MAC Address",macInvalido:"MAC inválido",apagarRegistro:"Apagar Registros",reset:"Reset de Fábrica",lerMemoria:"Ler Memória",reiniciarEquipamento:"Reiniciar Equipamento",operacaoRealizada:"Operação realizada com sucesso!",limparRegistros:"Limpar Registros",salvarEmArquivo:"Salvar em arquivo",confirmaOperacao:"Confirma a operação?",comandosAvancados:"Comandos Avançados"},zone:{criarZona:"Criar Zona",selecionar:"Selecionar",removerZona:"Remover Zona",ativada:"Ativada",bloqueada:"Bloqueada",campoObrigatorio:"Campo obrigatório",idJaUtilizado:"ID já utilizado",idFaixa:"O ID deve ser de 1 a 250",dispositivosLocais:"DISPOSITIVOS LOCAIS",lacoUpper:"LAÇO",saidaLocal:"Saída Local",adicionar:"adicionar",remover:"remover",cancelar:"Cancelar",criar:"Criar",aplicar:"Aplicar",nome:"Nome",foramFeitasAlteracoes:"Foram feitas alterações na Zona.",desejaSalvar:"Deseja salvar as alterações?",salvar:"SALVAR",descartar:"DESCARTAR",falha:"Falha!",naoPermitido:"Não é permitido excluir a Zona 1.",confirmaRemocao:"Confirma a remoção da Zona?",aoRemover:"Ao remover a zona, todos os dispositivos voltarão para a Zona Padrão.",excluir:"excluir",zonasRemovidas:"Zonas removidas!",zonaCriada:"Zona criada com sucesso!",alteracoesAplicadas:"Alterações aplicadas com sucesso!",permiteNoMaximo:"O sistema permite criar no máximo",zonas:"zonas.",atencao:"Atenção",naZona:"na Zona",nenhumDispositivo:"Nenhum Dispositivo"}}})})(this);(function(){"use strict";angular.module("app").service("$translateService",["$rootScope","$filter","$translate",function($rootScope,$filter,$translate){var translatePhrase=function(key){return $filter("translate")(key)};var changeLanguage=function(lang){$translate.use(lang);localStorage.language=lang};var getLang=function(){return localStorage.language};return{translatePhrase:translatePhrase,changeLanguage:changeLanguage,getLang:getLang}}])})();(function(){"use strict";angular.module("app").service("$projectService",["$q","$fileService","$rootScope","$state","$toast","$translateService",function($q,$fileService,$rootScope,$state,$toast,$translateService){var t=$translateService.translatePhrase;var fileEmpty={};var fileProject={};$fileService.load().then((function(r){fileEmpty=r}));function createProject(params){var deferred=$q.defer();$fileService.loadProjectFileEmpty().then((function(r){fileProject=r;if(params.quantidade!=="skip")for(var i=0;i<parseInt(params.quantidade);i++){var fileConfig=angular.copy(fileEmpty);fileConfig.lacos=fileConfig.lacos.splice(0,$rootScope.centralsModels[params.model].QTD_LACOS+1);fileConfig.sistema.modelo_central=$rootScope.centralsModels[params.model].id;for(var j=0;j<parseInt(params.quantidade);j++){if(params.todasInterligadas==="true"){fileConfig.sistema.interligacao.centrais[j]=true}fileConfig.sistema.interligacao.alarme_geral=params.comandos.alarme_geral;fileConfig.sistema.interligacao.reiniciar_central=params.comandos.reiniciar_central;fileConfig.sistema.interligacao.silenciar_central=params.comandos.silenciar_central;fileConfig.sistema.interligacao.silenciar_sirene=params.comandos.silenciar_sirene;fileConfig.sistema.interligacao.sirene_brigada=params.comandos.sirene_brigada}fileConfig.sistema.endereco=i+1;fileProject.centrais.push(fileConfig)}projectDb=fileProject;originalProjectDb=angular.copy(projectDb);updateSummary();deferred.resolve(fileProject)}));return deferred.promise}function updateSummary(){$rootScope.centralSummary=[];projectDb.centrais=_.sortBy(projectDb.centrais,[function(c){return parseInt(c.sistema.endereco)}]);for(var i=0;i<projectDb.centrais.length;i++){var central={endereco:projectDb.centrais[i].sistema.endereco,local_instalacao:projectDb.centrais[i].sistema.local_instalacao};$rootScope.centralSummary.push(central)}}function nextCentral(newDB){if(newDB){db=dbTransitory}originalDb=angular.copy(db);$rootScope.selectedCentralAddress=db.sistema.endereco;$rootScope.centralModel=$rootScope.CONFIG.modelos_centrais[db.sistema.modelo_central];//console.log("CENTRAL",$rootScope.centralModel);$rootScope.projectCentralTransition=false;$toast.show("success",t("project.configuracaoCarregada"))}function selectCentral(central,state){var deferred=$q.defer();dbTransitory=central;$rootScope.projectCentralTransition=true;if(state){$state.go(state)}else{$state.reload()}deferred.resolve();return deferred.promise}function remove(endereco){projectDb.centrais=_.remove(projectDb.centrais,(function(c){return parseInt(c.sistema.endereco)!==endereco}))}function removeCentral(endereco){var deferred=$q.defer();remove(endereco);updateSummary();deferred.resolve();return deferred.promise}function pasteCentral(optionCopy,destinationEndereco,originEndereco){var deferred=$q.defer();var centralDestination=_.find(projectDb.centrais,(function(c){return c.sistema.endereco===parseInt(destinationEndereco)}));var centralOrigin;if(originEndereco){centralOrigin=_.find(projectDb.centrais,(function(c){return c.sistema.endereco===parseInt(originEndereco)}))}else{centralOrigin=angular.copy(fileEmpty)}if(optionCopy==="all"){remove(parseInt(destinationEndereco));centralDestination=angular.copy(centralOrigin);centralDestination.sistema.endereco=parseInt(destinationEndereco);projectDb.centrais.push(centralDestination)}else{centralDestination.sistema.interligacao=angular.copy(centralOrigin.sistema.interligacao)}if(centralDestination.sistema.endereco_mac){delete centralDestination.sistema.endereco_mac}updateSummary();deferred.resolve();return deferred.promise}function newCentral(optionCopy,destinationEndereco,originEndereco,props){var deferred=$q.defer();var centralDestination=_.find(projectDb.centrais,(function(c){return c.sistema.endereco===parseInt(destinationEndereco)}));var centralOrigin;if(originEndereco){centralOrigin=_.find(projectDb.centrais,(function(c){return c.sistema.endereco===parseInt(originEndereco)}))}else{centralOrigin=angular.copy(fileEmpty)}if(optionCopy==="all"){centralDestination=angular.copy(centralOrigin)}else{centralDestination.sistema.interligacao=angular.copy(centralOrigin.sistema.interligacao)}centralDestination.sistema.endereco=parseInt(destinationEndereco);//console.log("newCentral",centralDestination);if(centralDestination.sistema.endereco_mac){delete centralDestination.sistema.endereco_mac}if(props){//console.log("props",props);if(props.modelo){centralDestination.sistema.modelo_central=props.modelo}if(props.mac){centralDestination.sistema.endereco_mac=props.mac}if(props.nome){centralDestination.sistema.local_instalacao=props.nome}}if(centralDestination.sistema.interligacao){centralDestination.sistema.interligacao.centrais[parseInt(centralDestination.sistema.endereco)-1]=true}projectDb.centrais.push(centralDestination);updateSummary();deferred.resolve();return deferred.promise}function newCentralByConfig(centralDb){var deferred=$q.defer();projectDb.centrais.push(centralDb);updateSummary();deferred.resolve();return deferred.promise}function getEnderecosCentraisInterligacao(){var array=[];var ids=_.keys(_.keyBy(projectDb.centrais,"sistema.endereco"));for(var j=1;j<=16;j++){if(ids.indexOf(j.toString())===-1){array.push(j)}}return array}function changeModel(endereco,newModel){var fileConfig=angular.copy(fileEmpty);var central=_.find(projectDb.centrais,(function(c){return c.sistema.endereco===parseInt(endereco)}));central.sistema.modelo_central=$rootScope.centralsModels[newModel].id;central.regras=angular.copy(fileConfig.regras);central.lacos=angular.copy(fileConfig.lacos);central.zonas=angular.copy(fileConfig.zonas);central.sistema.alarme=angular.copy(fileConfig.sistema.alarme);central.sistema.falha=angular.copy(fileConfig.sistema.falha);central.sistema.supervisao=angular.copy(fileConfig.sistema.supervisao)}function getCentralByMac(mac){return _.find(projectDb.centrais,(function(c){if(c.sistema.endereco_mac){return c.sistema.endereco_mac===mac}}))}function setConfiguration(endereco,newDb){removeCentral(endereco).then((function(){return newCentralByConfig(newDb)})).then((function(){selectCentral(newDb)}))}return{createProject:createProject,updateSummary:updateSummary,selectCentral:selectCentral,nextCentral:nextCentral,setConfiguration:setConfiguration,removeCentral:removeCentral,getEnderecosCentraisInterligacao:getEnderecosCentraisInterligacao,pasteCentral:pasteCentral,newCentral:newCentral,changeModel:changeModel,newCentralByConfig:newCentralByConfig,getCentralByMac:getCentralByMac}}])})();(function(){"use strict";angular.module("app").controller("toolsController",["$scope","$webSocket","$timeout","$interval","$rootScope","$toast","$mdDialog","$q","$filter","$windowService","$compile","$templateCache","$stateParams","$projectService","$fileService","$translateService","$window","$state",function($scope,$webSocket,$timeout,$interval,$rootScope,$toast,$mdDialog,$q,$filter,$windowService,$compile,$templateCache,$stateParams,$projectService,$fileService,$translateService,$window,$state){var t=$translateService.translatePhrase;$scope.formRemote={type:"discovery"};var devicesType={7:"SAV 420",10:"SAV 520",13:"SAV 420"};$scope.selectedSubScreenCalc=undefined;$scope.today=new Date;$scope.trunc=Math.trunc;$scope.selectedScreen=$rootScope.centralModel.isGateway?"log":"calc";$scope.deviceTable=[];$scope.originalDeviceTable=[];$scope.result={steps:[],qtyDevices:[]};$scope.defines=$rootScope.CONFIG.CALCULO_LACO;$scope.cables=$scope.defines.cables;$scope.devices=$scope.defines.devices;$scope.formWizard={quantity:10,distance:50,cable:"1.5",type:"enderecavel",device:$filter("where")($scope.devices,{type:"enderecavel"})[0].name};$scope.form={sameDistance:false,distance:50,sameCable:true,cable:"1.5",type:"enderecavel"};$scope.removeItem=function(index){$scope.deviceTable.splice(index,1)};$scope.newProject=function(){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("tools.atencao")).htmlContent("<br>"+t("tools.aoIniciarUmProjeto")+"<br><br>"+t("tools.desejaContinuar")).ok(t("tools.sim")).cancel(t("tools.cancelar"))).then((function(){$scope.clear();$scope.selectedSubScreenCalc=undefined}))};$scope.clear=function(){$scope.deviceTable=[];$scope.result={steps:[],qtyDevices:[]}};$scope.startByWizard=function(){$scope.clear();var device=deviceByType($scope.formWizard.type).name;for(var i=0;i<$scope.formWizard.quantity;i++){$scope.deviceTable.push({device:$scope.formWizard.device,distance:$scope.formWizard.distance,cable:$scope.formWizard.cable})}$scope.form.type=$scope.formWizard.type;$scope.form.sameDistance=true;$scope.form.distance=$scope.formWizard.distance;$scope.form.sameCable=true;$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("tools.atencao")).htmlContent("<br>"+t("tools.aDistanciaEntre")).ok("OK")).then((function(){$scope.calculate()}))};$scope.openFileDialog=function(id){document.getElementById(id).click()};function importFile(path){$fileService.openFile(path).then((function(data){$scope.clear();if(data.config.lacos){var devices=[];for(var idxLaco in data.config.lacos){if(idxLaco==0)continue;var laco=data.config.lacos[idxLaco];if(laco.habilitado){for(var idDevice in laco.dispositivos){var device=laco.dispositivos[idDevice];if(devicesType[device.subtipo])devices.push({device:devicesType[device.subtipo],cable:$scope.form.cable,distance:$scope.form.distance})}}}$scope.deviceTable=devices;$toast.show("success",t("tools.arquivoImportado"));$rootScope.setLoading("rootContent@app",false)}else{$rootScope.setLoading("rootContent@app",false);$toast.show("error",t("tools.arquivoInvalido"))}}),(function(){$rootScope.setLoading("rootContent@app",false);$toast.show("error",t("tools.arquivoInvalido"))}))}$scope.fileSelected=function(input){const file=input.files[0];if(file){const reader=new FileReader;reader.onload=function(e){const fileContent=e.target.result;try{const contentJSON=JSON.parse(fileContent);$scope.deviceTable=contentJSON.deviceTable;$scope.originalDeviceTable=$scope.deviceTable;$scope.form=contentJSON.form;$scope.result=contentJSON.result;$toast.show("success",t("tools.arquivoCarregado"));$scope.selectedSubScreenCalc="calc";$rootScope.setLoading("rootContent@app",false)}catch(error){console.error("Erro ao processar o arquivo JSON:",error);$toast.show("error",t("tools.arquivoInvalido"));$rootScope.setLoading("rootContent@app",false)}};reader.readAsText(file)}};$scope.fileAction=function(action,path){document.getElementById(action).value="";switch(action){case"open_file_calc":$webSocket.send("open_loop_calculator_file",{path:path});$rootScope.setLoading("rootContent@app",true);break;case"save_file_calc":$webSocket.send("save_loop_calculator_file",{path:path,config:{deviceTable:$scope.deviceTable,form:$scope.form,result:$scope.result}});$rootScope.setLoading("rootContent@app",true);break;case"file_import":$rootScope.setLoading("rootContent@app",true);if($scope.deviceTable.length){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("tools.importarDeArquivo")).htmlContent("<br>"+t("tools.seraoSubstituidos")+"<br><br>"+t("tools.desejaContinuar")).ok(t("tools.sim")).cancel(t("tools.cancelar"))).then((function(){importFile(path)}))}else{importFile(path)}break;case"gateway_logs_file":$rootScope.setLoading("rootContent@app",true);$webSocket.send("gateway_save_logs_to_file",{path:path,content:$scope.logs.join("\n")});break;case"gateway_dump_file":$rootScope.setLoading("rootContent@app",true);$webSocket.send("gateway_save_dump",{path:path});break}};$scope.cancel=function(){$scope.selectedSubScreenCalc=undefined};$scope.print=function(){$rootScope.setLoading("rootContent@app",true);$scope.today=new Date;var el=$compile($templateCache.get("print/loopCalcPrintable.html"))($scope);$timeout((function(){$windowService.openPrintWindow(el.html())}),300)};$scope.newItem=function(){var distance=$scope.form.sameDistance?$scope.form.distance:undefined;var cable=$scope.form.sameCable?$scope.form.cable:"0.75";var device=deviceByType($scope.form.type).name;$scope.deviceTable.push({device:device,distance:distance,cable:cable})};$scope.selectScreen=function(screen){if(screen==="import"){$scope.openFileDialog("open_file_calc");return}$scope.selectedSubScreenCalc=screen};var save=function(){$scope.openFileDialog("save_file_calc")};$scope.calculate=function(){var voltageIntervalLimit=$scope.defines.voltageDefault*(1-$scope.defines.voltageIntervalPercent);var voltageActual=voltageIntervalLimit;var metersActual=0;var currentTotal=0;var metersTotal=0;var listOutput=[];var deviceCounter=0;var totalDeviceCounter=0;var qtyDevices=[];for(var inputIndex in $scope.deviceTable){var input=$scope.deviceTable[inputIndex];metersTotal+=input.distance}//console.log("Margem de tolerância da queda de tensão = "+$scope.defines.voltageIntervalPercent+"%");//console.log("Tensão mínima = "+voltageIntervalLimit+"V");for(var inputIndex in $scope.deviceTable){deviceCounter++;totalDeviceCounter++;var input=$scope.deviceTable[inputIndex];var currentDeviceElement=device(input.device).value;var cableGauge=cable(input.cable).value;var metersDeviceElement=input.distance;var resistence=cableGauge*metersDeviceElement;voltageActual+=resistence*currentTotal;currentTotal+=currentDeviceElement;if(voltageActual>$scope.defines.voltageDefault){var point=metersTotal-metersActual;listOutput.push(point);voltageActual=voltageIntervalLimit;currentTotal=0;qtyDevices.push(deviceCounter);deviceCounter=0}metersActual+=metersDeviceElement}var sum=0;for(var qty in qtyDevices){sum+=qtyDevices[qty]}qtyDevices.push(totalDeviceCounter-sum);var steps=[];var lastPoint=0;for(var i=listOutput.length-1;i>=0;i--){steps.push(listOutput[i]-lastPoint);lastPoint=listOutput[i]}$scope.result.steps=steps;$scope.result.qtyDevices=qtyDevices;$scope.result.metersTotal=metersTotal;$scope.result.over=metersTotal-lastPoint;//console.log("$scope.result",$scope.result);//console.log("Distância total de cabo: "+metersActual+"m");//console.log("Tensão no final do cabo: "+voltageActual+"V");//console.log("Pontos para inserção de fonte de alimentação: "+listOutput);$timeout((function(){var container=angular.element(document.getElementById("table-values-content"))[0];container.scrollTo(0,container.scrollHeight)}),100);$scope.selectedSubScreenCalc="calc"};function device(id){return $filter("where")($scope.devices,{name:id})[0]}function cable(id){return $filter("where")($scope.cables,{name:id})[0]}function deviceByType(type){return $filter("where")($scope.devices,{type:type})[0]}$scope.changeType=function(){if($scope.deviceTable.length)$mdDialog.show($mdDialog.confirm().escapeToClose(false).title("Alterar Cenário de cálculo").htmlContent("<br>Alterando o cenário de cálculo os dispositivos serão removidos.<br><br>"+t("tools.desejaContinuar")).ok(t("tools.sim")).cancel(t("tools.cancelar"))).then((function(){$scope.clear()}),(function(reason){$scope.form.type=$scope.form.type==="enderecavel"?"convencional":"enderecavel"}))};$scope.$watch("formWizard.type",(function(newVal,oldVal){if(!newVal||newVal===oldVal)return;$scope.formWizard.device=$filter("where")($scope.devices,{type:newVal})[0].name}));$scope.$watch("form.cable",(function(newVal,oldVal){if(!newVal||newVal===oldVal)return;$scope.deviceTable.forEach((function(item){item.cable=newVal}))}));$scope.$watch("form.sameCable",(function(newVal,oldVal){if(!newVal||newVal===oldVal)return;$scope.deviceTable.forEach((function(item){item.cable=$scope.form.cable}))}));$scope.$watch("form.distance",(function(newVal,oldVal){if(!newVal||newVal===oldVal)return;$scope.deviceTable.forEach((function(item){item.distance=newVal}))}));$scope.$watch("form.sameDistance",(function(newVal,oldVal){if(!newVal||newVal===oldVal)return;$scope.deviceTable.forEach((function(item){item.distance=$scope.form.distance}))}));$scope.changeSelectedScreen=function(newSelectedScreen,saveFunction){$scope.selectedScreen=newSelectedScreen;if(newSelectedScreen==="log"){getLogs()}};$scope.clearLogs=function(){$rootScope.gatewayLogs=[]};$scope.saveLogsToFile=function(){document.getElementById("gateway_logs_file").click()};$scope.getGatewayDump=function(){document.getElementById("gateway_dump_file").click()};$webSocket.get().$on("gateway_save_dump",(function(data){//console.log("WS gateway_save_dump",data);if(data.success&&data.progress){$scope.percentDump=data.progress}if(!data.success){$toast.show("error",t("tools.operacaoRealizada"))}if(data.success&&data.end){$toast.show("success",t("tools.operacaoRealizada"))}$rootScope.setLoading("rootContent@app",false)}));$webSocket.get().$on("gateway_save_logs_to_file",(function(data){//console.log("WS gateway_save_logs_to_file",data);$rootScope.setLoading("rootContent@app",false);$toast.show("success",t("tools.arquivoSalvo"))}));$webSocket.get().$on("gateway_dump_file",(function(data){//console.log("WS gateway_dump_file",data);$rootScope.setLoading("rootContent@app",false);$toast.show("success",t("tools.arquivoSalvo"))}));$webSocket.get().$on("save_loop_calculator_file",(function(data){//console.log("WS save_loop_calculator_file",data);if(!data.error){$scope.originalDeviceTable=$scope.deviceTable;$toast.show("success",t("tools.arquivoSalvo"))}else{$toast.show("error",t("tools.falha"))}$rootScope.setLoading("rootContent@app",false)}));$webSocket.get().$on("open_loop_calculator_file",(function(data){//console.log("WS open_loop_calculator_file",data);if(!data.error&&data.config){$scope.clear();$scope.deviceTable=data.config.deviceTable;$scope.originalDeviceTable=$scope.deviceTable;$scope.form=data.config.form;$scope.result=data.config.result;$toast.show("success",t("tools.arquivoCarregado"));$scope.selectedSubScreenCalc="calc"}else{$toast.show("error",t("tools.arquivoInvalido"))}$rootScope.setLoading("rootContent@app",false)}));$scope.anchorScroll={value:false};$scope.formGatewaySystem={};$scope.gatewaySystem={mac:""};$scope.percentDump=0;$scope.initAdvancedCommands=function(){$webSocket.send("auth_gateway_advanced_commands",{step:0})};$scope.changeMac=function(){$webSocket.send("gateway_change_mac",{mac:$scope.gatewaySystem.mac});$rootScope.setLoading("rootContent@app",true)};$webSocket.get().$on("gateway_change_mac",(function(data){//console.log("WS gateway_change_mac",data);if(!data.error&&data.success){$toast.show("success",t("tools.operacaoRealizada"))}$rootScope.setLoading("rootContent@app",false)}));$scope.clearRegisters=function(){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("tools.atencao")).htmlContent("<br>"+t("tools.confirmaOperacao")).ok(t("tools.sim")).cancel(t("tools.cancelar"))).then((function(){$webSocket.send("gateway_clear_registers");$rootScope.setLoading("rootContent@app",true)}))};$webSocket.get().$on("gateway_clear_registers",(function(data){//console.log("WS gateway_clear_registers",data);if(!data.error&&data.success){$toast.show("success",t("tools.operacaoRealizada"))}$rootScope.setLoading("rootContent@app",false)}));$scope.factoryReset=function(){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("tools.atencao")).htmlContent("<br>"+t("tools.confirmaOperacao")).ok(t("tools.sim")).cancel(t("tools.cancelar"))).then((function(){$webSocket.send("gateway_factory_reset");$rootScope.setLoading("rootContent@app",true)}))};$webSocket.get().$on("gateway_factory_reset",(function(data){//console.log("WS gateway_factory_reset",data);if(!data.error&&data.success){$rootScope.$emit("loading:show",{text:t("global.aguarde")});setTimeout((function(){$rootScope.cannotSendGatewayConfig=true;$rootScope.centralInfo={};$rootScope.cieUsbConnected=false;$rootScope.isCIEConnected=false;$rootScope.isCIEBlocked=false;$rootScope.developerMode=false;$rootScope.connectedCentralModel={};$rootScope.gatewayAutenticated=false;$rootScope.lastQuestionUpdateSkipped=false;$rootScope.loadingText=undefined;$rootScope.$apply();$rootScope.$emit("systemStateReset");$state.go("app.file",{},{reload:true})}),1e3);setTimeout((function(){$rootScope.setLoading("rootContent@app",false);$rootScope.$emit("loading:hide",200);$toast.show("success",t("tools.operacaoRealizada"))}),9e3)}}));$scope.gatewayRestart=function(){$mdDialog.show($mdDialog.confirm().escapeToClose(false).title(t("tools.atencao")).htmlContent("<br>"+t("tools.confirmaOperacao")).ok(t("tools.sim")).cancel(t("tools.cancelar"))).then((function(){$scope.loadingLogs=false;$rootScope.gatewayLogs=[];setTimeout((function(){$scope.$apply()}));$webSocket.send("gateway_restart");$rootScope.setLoading("rootContent@app",true)}))};$webSocket.get().$on("gateway_restart",(function(data){//console.log("WS gateway_restart",data);if(!data.error&&data.success){$toast.show("success",t("tools.operacaoRealizada"))}$rootScope.setLoading("rootContent@app",false)}));var getLogs=function(){if($rootScope.isCIEConnected){$webSocket.send("gateway_get_log");$scope.loadingLogs=true}};if($rootScope.centralModel.isGateway){getLogs()}$scope.startAuthGateway=function(){$scope.loadingLogs=false;if($rootScope.centralModel.isGateway&&!$rootScope.gatewayAutenticated){$scope.initAdvancedCommands();$scope.percentDump=0}};var setScrollToBottom=function(){if($scope.anchorScroll.value){$window.document.getElementById("gateway-logs-content").scrollTop=$window.document.getElementById("gateway-logs-content").scrollHeight}};var timeoutGatewayLog;var startTimeoutGatewayLog=function(){timeoutGatewayLog=$timeout((function(){getLogs()}),1e3)};$webSocket.get().$on("gateway_get_log",(function(data,err){//console.log("WS gateway_get_log",data);if(!data.error&&data.gateway_frame&&data.gateway_frame.log!==undefined){if(data.gateway_frame.log){$rootScope.gatewayLogs.push(data.gateway_frame.log);setScrollToBottom();setTimeout((function(){$scope.$apply()}))}//console.log("$state.current.name",$state.current.name);//console.log("$scope.selectedScreen",$scope.selectedScreen);if($state.current.name==="app.tools"&&$scope.selectedScreen==="log"){getLogs()}else{$scope.loadingLogs=false}$timeout.cancel(timeoutGatewayLog)}else{startTimeoutGatewayLog()}}));$webSocket.get().$on("auth_gateway_advanced_commands",(function(data){//console.log("WS auth_gateway_advanced_commands",data);if(!data.error&&data.gateway_frame&&data.gateway_frame.ok){$rootScope.gatewayAutenticated=true;getLogs();$mdDialog.hide()}if(!data.error&&data.gateway_frame&&data.gateway_frame.contraSenha){var deferred=$q.defer();$mdDialog.hide();$mdDialog.show({clickOutsideToClose:false,multiple:true,fullscreen:true,escapeToClose:true,templateUrl:"tools/authGateway.html",controller:function($scope,$webSocket,$rootScope,$timeout){$scope.password="";$scope.contraSenha=data.gateway_frame.contraSenha;$scope.error=false;$scope.timeout=undefined;$scope.tryConnection=function(){$scope.passwordError=false;$scope.communicationError=false;$rootScope.setLoading("getPassword",true);$timeout((function(){$webSocket.send("auth_gateway_advanced_commands",{step:1,contraSenha:$scope.password})}),1e3);$scope.timeout=$timeout((function(){$scope.communicationError=true;$rootScope.setLoading("getPassword",false)}),5e3)};$scope.close=function(){$mdDialog.hide()}}});return deferred.promise}else{}}));$scope.$watch("deviceTable",(function(newValue){changeController.editedConfig=newValue}),true);$scope.$watch("originalDeviceTable",(function(newValue){changeController.originalConfig=newValue}),true);changeController.saveFn=save;changeController.viewName=t("tools.emCalculoAlimentacao");$rootScope.helpUrl=function(){return"system/"+$scope.selectedScreen}}])})();(function(){"use strict";angular.module("app").directive("remoteDiscovery",(function($webSocket,$timeout,$interval,$rootScope,$toast,$mdDialog,$udpAuthService,$remoteControlService,$translateService){return{restrict:"E",templateUrl:"remote/remoteDiscovery.html",scope:{form:"="},link:function($scope,element,attrs){var t=$translateService.translatePhrase;$scope.connectionMode=function(){return $rootScope.connectionMode};$scope.showRemoteControl=undefined;$scope.openRemoteByIp=function(type){let ip,endereco;if(!$scope.form.ip)return;ip=$scope.form.ip;endereco=0;$scope.openRemote({ip:ip,endereco:endereco},type);$rootScope.centralAddressConnection=ip};$scope.openRemote=function(centralInfo,type){let ip=centralInfo.ip;let endereco=centralInfo.endereco;$rootScope.centralAddressConnection=endereco;$rootScope.setLoading("remote",true);//console.log("openRemote",$scope.form,type);if(type==="connection"){//console.log("1");$udpAuthService.auth({ip:ip,endereco:endereco,tipo:$scope.form.searchType}).then((function(token){$webSocket.send($scope.form.searchType==="gw521"?"set_gateway_auth_eth":"udp_start_connection",{ip:ip,endereco:endereco,token:token})}))}else{//console.log("2");$udpAuthService.auth({ip:ip,endereco:endereco,tipo:$scope.form.searchType}).then((function(token){$remoteControlService.open(centralInfo,token)}))}$scope.central=angular.copy(centralInfo)};$scope.noCentral=false;$scope.centrais=[];$scope.discovery=function(){if($rootScope.isCIEConnected){var confirm=$mdDialog.confirm().multiple(true).escapeToClose(false).title(t("remote.atencao")).textContent(t("remote.aoBuscar")).ok("OK").cancel(t("remote.cancelar"));$mdDialog.show(confirm).then((function(){$rootScope.centralBlock();sendDiscovery()}))}else{sendDiscovery()}};function sendDiscovery(){$webSocket.send("udp_assign");$scope.centrais=[];$scope.searching=true;$scope.noCentral=false;$timeout((function(){$scope.$apply()}),100)}$scope.changeType=function(){//console.log("changeType");$scope.centrais=[]};$webSocket.get().$on("udp_start_connection",(function(data){//console.log("WS udp_descobrir",data);$scope.searching=false;//console.log(data);if(data){$scope.centrais=data;if(Object.keys(data).length===0){$scope.noCentral=true;$scope.$apply()}}$scope.$apply()}));$webSocket.get().$on("udp_descobrir",(function(data){//console.log("WS udp_descobrir",data);$scope.searching=false;//console.log(data);if(data){$scope.centrais=data;if(Object.keys(data).length===0){$scope.noCentral=true;$scope.$apply()}}$scope.$apply()}))}}}))})();